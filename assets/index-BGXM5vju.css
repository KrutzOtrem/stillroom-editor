.react-flow{direction:ltr}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1;cursor:-webkit-grab;cursor:grab}.react-flow__pane.selection{cursor:pointer}.react-flow__pane.dragging{cursor:-webkit-grabbing;cursor:grabbing}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow .react-flow__edges{pointer-events:none;overflow:visible}.react-flow__edge-path,.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1;fill:none}.react-flow__edge{pointer-events:visibleStroke;cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;-webkit-animation:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge:focus .react-flow__edge-path,.react-flow__edge:focus-visible .react-flow__edge-path{stroke:#555}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-textbg{fill:#fff}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connectionline{z-index:1001}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:-webkit-grab;cursor:grab}.react-flow__node.dragging{cursor:-webkit-grabbing;cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:-webkit-grab;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background:#1a192b;border:1px solid white;border-radius:100%}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:-4px;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{top:50%;left:-4px;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:#ffffff80;padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:3px;width:150px;font-size:12px;color:#222;text-align:center;border-width:1px;border-style:solid;border-color:#1a192b;background-color:#fff}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:0 1px 4px 1px #00000014}.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background-color:#f0f0f040}.react-flow__nodesselection-rect,.react-flow__selection{background:#0059dc14;border:1px dotted rgba(0,89,220,.8)}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls{box-shadow:0 0 2px 1px #00000014}.react-flow__controls-button{border:none;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;display:flex;justify-content:center;align-items:center;width:16px;height:16px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:5px}.react-flow__controls-button:hover{background:#f4f4f4}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__minimap{background-color:#fff}.react-flow__minimap svg{display:block}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:#3367d9;transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:#3367d9;border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}@font-face{font-family:JetBrains Mono;src:url(../fonts/JetBrainsMono-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:JetBrains Mono;src:url(../fonts/JetBrainsMono-Italic.woff2) format("woff2");font-weight:400;font-style:italic;font-display:swap}@font-face{font-family:JetBrains Mono;src:url(../fonts/JetBrainsMono-Medium.woff2) format("woff2");font-weight:500;font-style:normal;font-display:swap}@font-face{font-family:JetBrains Mono;src:url(../fonts/JetBrainsMono-SemiBold.woff2) format("woff2");font-weight:600;font-style:normal;font-display:swap}@font-face{font-family:JetBrains Mono;src:url(../fonts/JetBrainsMono-Bold.woff2) format("woff2");font-weight:700;font-style:normal;font-display:swap}:root{--canvas-bg: #0f1114;--canvas-surface: #15181d;--canvas-grid: rgba(228, 224, 218, .025);--canvas-grid-major: rgba(228, 224, 218, .05);--panel-bg: #1a1d24;--panel-bg-elevated: #21252e;--panel-border: rgba(228, 224, 218, .07);--panel-border-focus: rgba(212, 162, 82, .3);--text-primary: #e8e4df;--text-secondary: #9b968e;--text-muted: #5e5a54;--text-inverse: #0f1114;--accent-warm: #d4a252;--accent-sensei: #d4a252;--accent-user: #6b8fb8;--accent-menu: #5ba3a3;--accent-option: #8b7eb8;--accent-quest: #7bae7b;--accent-completion: #c47a9b;--accent-condition: #c9a84c;--accent-action: #b86b6b;--accent-node: #8b7eb8;--accent-start: #7bae7b;--accent-end: #b86b6b;--accent-npc: #d4a252;--edge-color: rgba(228, 224, 218, .35);--edge-color-hover: rgba(228, 224, 218, .6);--edge-glow: rgba(212, 162, 82, .2);--hover-bg: rgba(228, 224, 218, .04);--active-bg: rgba(212, 162, 82, .12);--selection-ring: rgba(212, 162, 82, .5);--shadow-sm: 0 1px 3px rgba(0, 0, 0, .4);--shadow-md: 0 4px 16px rgba(0, 0, 0, .5);--shadow-lg: 0 8px 32px rgba(0, 0, 0, .6);--shadow-glow: 0 0 24px rgba(212, 162, 82, .15);--font-sans: "JetBrains Mono", ui-sans-serif, system-ui, -apple-system, "Segoe UI", sans-serif;--font-display: "JetBrains Mono", ui-sans-serif, system-ui, -apple-system, "Segoe UI", sans-serif;--font-mono: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, "Consolas", monospace;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-xl: 16px;--node-width: 320px;--node-header-height: 42px;--portrait-size: 28px;--overlay-bg: rgba(10, 10, 12, .75);--overlay-blur: blur(6px)}*{box-sizing:border-box}body{margin:0;font-family:var(--font-sans);font-size:14px;color:var(--text-primary);background:var(--canvas-bg);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#root{min-height:100vh}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--canvas-surface)}::-webkit-scrollbar-thumb{background:#e4e0da1a;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#e4e0da33}*{scrollbar-width:thin;scrollbar-color:rgba(228,224,218,.1) var(--canvas-surface)}.app{min-height:100vh;display:grid;grid-template-rows:auto 1fr auto;background:var(--canvas-bg)}.topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;gap:20px;background:linear-gradient(180deg,#1a1d24,#13161b);border-bottom:1px solid var(--panel-border);box-shadow:0 2px 16px #00000080;z-index:100}.brand{display:flex;align-items:center;gap:10px}.brand-mark{width:36px;height:36px;display:grid;place-items:center;border-radius:6px;background:linear-gradient(135deg,var(--accent-warm) 0%,#b8884a 100%);color:var(--text-inverse);font-family:var(--font-display);font-size:13px;font-weight:700;letter-spacing:1px;box-shadow:0 2px 8px #0006,0 0 20px #d4a25233}.brand-title{font-family:var(--font-display);font-size:15px;color:var(--text-primary);letter-spacing:.5px;font-weight:500}.brand-subtitle{color:var(--text-muted);font-size:10px;letter-spacing:.3px}.topbar-center{display:flex;align-items:center;gap:12px;flex:1;justify-content:center}.project-pill{padding:4px 12px;border-radius:999px;background:var(--panel-bg-elevated);border:1px solid var(--panel-border);color:var(--text-secondary);font-size:11px;font-family:var(--font-mono)}.mode-tabs{display:flex;gap:2px;background:#00000059;padding:4px;border-radius:8px;border:1px solid var(--panel-border)}.tab{border:none;background:transparent;padding:8px 18px;border-radius:6px;font-family:var(--font-sans);font-size:12px;font-weight:600;color:var(--text-muted);cursor:pointer;transition:all .2s ease}.tab:hover{color:var(--text-secondary);background:var(--hover-bg)}.tab.active{background:var(--accent-warm);color:var(--text-inverse);box-shadow:0 2px 6px #0006,0 0 16px #d4a25240}.topbar-actions{display:flex;gap:6px}button.ghost{border:1px solid var(--panel-border);background:#e4e0da08;color:var(--text-secondary);border-radius:6px;padding:8px 14px;font-size:12px;font-weight:500;cursor:pointer;transition:all .15s ease}button.ghost:hover{background:#e4e0da12;border-color:#e4e0da1f;color:var(--text-primary)}button.ghost:disabled{opacity:.3;cursor:not-allowed}.workspace{display:grid;grid-template-columns:240px 1fr 300px;gap:0;height:calc(100vh - 100px)}.sidebar,.inspector{display:flex;flex-direction:column;gap:4px;padding:4px 0;background:var(--canvas-surface);border-right:1px solid var(--panel-border);overflow-y:auto}.inspector{border-right:none;border-left:1px solid var(--panel-border)}.panel{background:var(--panel-bg);border:1px solid var(--panel-border);border-radius:10px;margin:8px;overflow:hidden}.panel:last-child{border-bottom:1px solid var(--panel-border)}.panel-header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:#00000026;border-bottom:1px solid var(--panel-border)}.panel-title{font-family:var(--font-sans);font-size:12px;font-weight:600;color:var(--text-primary);margin:0;letter-spacing:0;text-transform:none}.panel-close{width:20px;height:20px;border:none;background:#e4e0da0f;border-radius:4px;color:var(--text-muted);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;line-height:1;transition:all .12s ease}.panel-close:hover{background:#b86b6b59;color:#e8e4df}.panel-body{padding:12px}.panel>.panel-title{padding:10px 12px;background:#00000026;border-bottom:1px solid var(--panel-border);margin:0}.tree-group{margin-bottom:8px}.tree-title{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.8px;color:var(--text-muted);margin-bottom:6px;padding-left:4px}.tree-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:2px}.tree-item{padding:6px 10px;border-radius:var(--radius-sm);background:transparent;border:1px solid transparent;font-size:12px;color:var(--text-secondary);cursor:pointer;transition:all .15s ease;display:flex;align-items:center;gap:8px}.tree-item:before{content:"";width:6px;height:6px;border-radius:2px;background:var(--text-muted);flex-shrink:0;transition:all .15s ease}.tree-item:hover{background:var(--hover-bg);color:var(--text-primary)}.tree-item.active{background:var(--active-bg);border-color:var(--accent-warm);color:var(--text-primary)}.tree-item.active:before{background:var(--accent-warm);box-shadow:0 0 6px var(--accent-warm)}.field{width:100%;padding:8px 10px;border-radius:var(--radius-sm);border:1px solid var(--panel-border);background:var(--canvas-bg);color:var(--text-primary);font-family:var(--font-sans);font-size:12px;transition:border-color .15s ease,box-shadow .15s ease}.field:focus{outline:none;border-color:var(--accent-warm);box-shadow:0 0 0 2px #d4a25233}.field.area{min-height:80px;resize:vertical;font-family:var(--font-mono);font-size:11px;line-height:1.5}.field.checkbox{width:18px;height:18px;padding:0;accent-color:var(--accent-warm)}.field-row{display:flex;flex-direction:column;gap:4px;margin-bottom:10px}.field-label{font-size:11px;font-weight:500;color:var(--text-muted);text-transform:lowercase}.chips{display:flex;flex-wrap:wrap;gap:4px}.chip{padding:3px 8px;border-radius:var(--radius-sm);background:var(--panel-bg-elevated);border:1px solid var(--panel-border);font-size:11px;font-family:var(--font-mono);color:var(--text-secondary)}.token-chip{cursor:grab;-webkit-user-select:none;user-select:none;transition:all .15s ease}.token-chip:hover{background:#d4a2521f;border-color:var(--accent-warm);color:var(--text-primary);transform:translateY(-1px)}.token-chip:active{cursor:grabbing;transform:scale(.95)}.token-chip[draggable]:nth-child(odd){border-left:2px solid var(--accent-sensei)}.token-chip[draggable]:nth-child(2n){border-left:2px solid var(--accent-user)}.panel-note{margin-top:8px;font-size:11px;color:var(--text-muted);font-style:italic}.add-choice-btn{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;margin-top:8px;background:transparent;border:1px dashed rgba(139,126,184,.4);border-radius:6px;color:var(--accent-option);font-size:12px;font-weight:500;cursor:pointer;transition:all .15s ease}.add-choice-btn:hover{background:#8b7eb81a;border-color:var(--accent-option);color:#a99ad4}.add-choice-btn:active{transform:scale(.97)}.add-choice-btn .icon{width:16px;height:16px;border-radius:50%;background:#8b7eb833;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700}.choice-row{display:flex;align-items:center;gap:8px;padding:6px 8px;margin:4px 0;background:#0003;border-radius:6px;border:1px solid var(--panel-border);cursor:grab;transition:all .15s ease}.choice-row:hover{background:#0000004d;border-color:#e4e0da1f}.choice-row.dragging{opacity:.5;cursor:grabbing}.choice-row.drag-over{border-color:var(--accent-option);background:#8b7eb826;box-shadow:0 0 0 1px #8b7eb84d}.choice-row .choice-drag-handle{color:var(--text-muted);font-size:10px;letter-spacing:-2px;cursor:grab;-webkit-user-select:none;user-select:none;padding:0 2px;transition:color .12s ease}.choice-row:hover .choice-drag-handle{color:var(--text-secondary)}.choice-row .choice-indicator{width:8px;height:8px;border-radius:50%;background:var(--accent-option);flex-shrink:0}.choice-row input{flex:1;background:transparent;border:none;color:var(--text-primary);font-size:12px;padding:2px 4px}.choice-row input:focus{outline:none}.choice-row .choice-delete{width:18px;height:18px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .12s ease}.choice-row .choice-delete:hover{background:#b86b6b33;color:var(--accent-action)}.canvas{position:relative;background:var(--canvas-bg);overflow:hidden;display:flex;flex-direction:column}.canvas.canvas-narrative{background:var(--canvas-bg)}.react-flow__background{background-color:transparent!important}.react-flow__background pattern circle{fill:var(--canvas-grid)!important}.react-flow__background pattern line{stroke:var(--canvas-grid)!important}.canvas-header{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;background:linear-gradient(180deg,#1a1d24fa,#0f1114f2);border-bottom:1px solid var(--panel-border);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);position:relative;z-index:10}.canvas-heading{display:flex;flex-direction:column;gap:2px}.canvas-title{font-family:var(--font-display);font-size:14px;color:var(--text-primary);letter-spacing:.3px}.canvas-meta{color:var(--text-muted);font-size:11px;font-family:var(--font-mono)}.canvas-tools{display:flex;align-items:center;gap:12px}.canvas-actions{display:flex;gap:6px}.canvas-actions .dir-btn{background:var(--panel-bg-elevated);border:1px solid var(--panel-border);padding:6px 12px;font-weight:500;transition:all .15s ease}.canvas-actions .dir-btn:hover{background:var(--accent-warm);border-color:var(--accent-warm);color:var(--text-inverse)}.flow-direction-toggle{display:inline-flex;gap:2px;padding:3px;border-radius:var(--radius-md);border:1px solid var(--panel-border);background:var(--panel-bg)}.dir-btn{border:none;background:transparent;color:var(--text-muted);border-radius:var(--radius-sm);padding:4px 10px;font-size:11px;cursor:pointer;transition:all .15s ease}.dir-btn:hover{color:var(--text-secondary);background:var(--hover-bg)}.dir-btn.active{background:var(--accent-warm);color:var(--text-inverse)}.stage-tabs{display:flex;gap:4px;flex-wrap:wrap;padding:4px;border-radius:var(--radius-md);background:var(--panel-bg);border:1px solid var(--panel-border)}.stage-tabs-section{display:flex;flex-direction:column;gap:4px;align-items:flex-end}.stage-tabs-title{font-size:9px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted)}.stage-tab{--tab-accent: var(--text-muted);position:relative;display:inline-flex;align-items:center;gap:6px;border:1px solid var(--panel-border);background:var(--panel-bg-elevated);color:var(--text-secondary);border-radius:var(--radius-sm);padding:4px 10px;font-size:11px;cursor:pointer;transition:all .15s ease}.stage-tab:before{content:"";position:absolute;left:0;top:0;bottom:0;width:3px;background:var(--tab-accent);border-radius:var(--radius-sm) 0 0 var(--radius-sm)}.stage-tab-swatch{width:8px;height:8px;border-radius:50%;background:var(--tab-accent);box-shadow:0 0 6px var(--tab-accent)}.stage-tab:hover{background:var(--hover-bg);border-color:var(--panel-border-focus)}.stage-tab.active{background:#d4a2521f;border-color:var(--accent-warm);color:var(--text-primary)}.stage-tab:nth-child(1){--tab-accent: var(--text-secondary)}.stage-tab:nth-child(6n+2){--tab-accent: var(--accent-action)}.stage-tab:nth-child(6n+3){--tab-accent: var(--accent-option)}.stage-tab:nth-child(6n+4){--tab-accent: var(--accent-user)}.stage-tab:nth-child(6n+5){--tab-accent: var(--accent-menu)}.stage-tab:nth-child(6n+6){--tab-accent: var(--accent-sensei)}.stage-tab:nth-child(6n+7){--tab-accent: var(--accent-completion)}.flow-shell{position:relative;z-index:1;flex:1;min-height:0;width:100%}.flow-canvas{width:100%;height:100%}.inventory-dock{position:absolute;left:12px;top:12px;z-index:30;width:260px;max-height:calc(100% - 24px);overflow-y:auto;padding:10px;border-radius:10px;border:1px solid var(--panel-border);background:#15181deb;box-shadow:0 8px 28px #00000080;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:width .15s ease,padding .15s ease,background .15s ease}.inventory-dock-header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px}.inventory-dock-title{font-size:11px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--text-primary)}.inventory-dock-toggle{width:22px;height:22px;display:inline-grid;place-items:center;border-radius:6px;border:1px solid var(--panel-border);background:#e4e0da0f;color:var(--text-primary);font-size:12px;line-height:1;cursor:pointer;transition:background .12s ease,border-color .12s ease}.inventory-dock-toggle:hover{background:#e4e0da1f;border-color:#e4e0da47}.inventory-dock.is-collapsed{width:38px;padding:6px;overflow:hidden}.inventory-dock.is-collapsed .inventory-dock-header{margin-bottom:0;justify-content:center}.inventory-category{border:1px solid var(--panel-border);border-radius:8px;padding:8px;background:#e4e0da05}.inventory-category+.inventory-category{margin-top:8px}.inventory-category-title{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:var(--text-muted);margin-bottom:6px}.inventory-items{display:flex;flex-wrap:wrap;gap:6px}.inventory-chip{border:1px solid rgba(228,224,218,.1);background:#0f1114d1;color:var(--text-primary);border-radius:999px;font-size:10px;line-height:1;padding:7px 10px;cursor:grab;font-family:var(--font-mono);white-space:nowrap;transition:all .15s ease}.inventory-chip:hover{border-color:#e4e0da4d}.inventory-chip:active{cursor:grabbing}.inventory-chip-condition{border-color:#c9a84c73;color:var(--accent-condition);background:#c9a84c14}.inventory-chip-token{border-color:#d4a25273;color:var(--accent-sensei);background:#d4a25214}.inventory-chip-variable{border-color:#6b8fb873;color:var(--accent-user);background:#6b8fb814}.inventory-chip-source{border-color:#5ba3a373;color:var(--accent-menu);background:#5ba3a314}.inventory-chip-action{border-color:#b86b6b73;color:var(--accent-action);background:#b86b6b14}.flow-debug{position:absolute;top:10px;left:12px;padding:4px 8px;border-radius:var(--radius-sm);background:var(--panel-bg);border:1px solid var(--panel-border);color:var(--text-muted);font-size:10px;font-family:var(--font-mono);z-index:100}.flow-empty{height:100%;display:grid;place-items:center;color:var(--text-muted);font-size:13px}.react-flow{width:100%;height:100%}.react-flow__node{will-change:transform}.react-flow__pane{cursor:grab}.react-flow__pane:active{cursor:grabbing}.react-flow__minimap{background:#0f1114f2!important;border:1px solid var(--panel-border)!important;border-radius:6px!important;box-shadow:0 4px 20px #00000080!important;overflow:hidden!important;right:56px!important;bottom:12px!important}.react-flow__minimap-mask{fill:#d4a2521f!important;stroke:var(--accent-warm)!important;stroke-width:2!important}.react-flow__minimap-node{fill:#2a2d35!important;stroke:none!important}.react-flow__controls{background:#15181df2!important;border:1px solid var(--panel-border)!important;border-radius:6px!important;box-shadow:0 4px 16px #0006!important;overflow:hidden!important;right:12px!important;bottom:12px!important}.react-flow__controls-button{background:transparent!important;border:none!important;border-bottom:1px solid rgba(228,224,218,.05)!important;fill:var(--text-muted)!important;width:28px!important;height:28px!important;transition:all .12s ease!important}.react-flow__controls-button:hover{background:#e4e0da0f!important;fill:var(--text-primary)!important}.react-flow__controls-button:last-child{border-bottom:none!important}.react-flow__edge-path{stroke:var(--edge-color)!important;stroke-width:2.4!important;stroke-dasharray:2 7;stroke-linecap:round!important;filter:none!important}.react-flow__edge:hover .react-flow__edge-path{stroke:var(--edge-color-hover)!important;stroke-width:2.6!important;stroke-dasharray:2 7;filter:none!important}.react-flow__edge.selected .react-flow__edge-path{stroke-width:2.9!important;stroke-dasharray:3 8;animation:edge-flow .85s linear infinite;filter:none!important}.react-flow__edge.edge-linked-selected .react-flow__edge-path{stroke-width:2.9!important;stroke-dasharray:3 8;animation:edge-flow .85s linear infinite}@keyframes edge-flow{to{stroke-dashoffset:-22}}.react-flow__edge.edge-condition .react-flow__edge-path{stroke:var(--accent-condition)!important}.react-flow__edge.edge-action .react-flow__edge-path{stroke:var(--accent-action)!important}.react-flow__connection-line{stroke:var(--accent-warm)!important;stroke-width:2.5!important;stroke-dasharray:6 3}.react-flow__node.flow-node{background:transparent!important;border:none!important;box-shadow:none!important;padding:0!important}.flow-node-card{--node-accent: var(--accent-node);--node-accent-dark: color-mix(in srgb, var(--node-accent) 60%, #000);--node-accent-glow: color-mix(in srgb, var(--node-accent) 40%, transparent);width:320px;font-family:var(--font-sans);position:relative;border-radius:6px;overflow:visible}.flow-condition-node{position:relative;min-width:130px;max-width:190px;isolation:isolate}.flow-condition-chip{width:100%;padding:8px 12px;border-radius:999px;border:1px solid rgba(201,168,76,.6);background:#12141af5;color:var(--accent-condition);font-family:var(--font-mono);font-size:11px;font-weight:700;letter-spacing:.2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-shadow:0 3px 10px #00000059,0 0 12px #c9a84c2e;transition:border-color .15s ease,box-shadow .15s ease,background-color .15s ease}.flow-condition-node:after{content:"";position:absolute;inset:-6px;border-radius:999px;border:2px solid transparent;pointer-events:none;opacity:0;transition:opacity .15s ease,border-color .15s ease,box-shadow .15s ease}.flow-action-node{position:relative;min-width:130px;max-width:190px;isolation:isolate}.flow-action-chip{width:100%;padding:8px 12px;border-radius:999px;border:1px solid rgba(184,107,107,.6);background:#12141af5;color:var(--accent-action);font-family:var(--font-mono);font-size:11px;font-weight:700;letter-spacing:.2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-shadow:0 3px 10px #00000059,0 0 12px #b86b6b2e;transition:border-color .15s ease,box-shadow .15s ease,background-color .15s ease}.flow-action-node:after{content:"";position:absolute;inset:-6px;border-radius:999px;border:2px solid transparent;pointer-events:none;opacity:0;transition:opacity .15s ease,border-color .15s ease,box-shadow .15s ease}.flow-condition-node.selected .flow-condition-chip,.react-flow__node.selected .flow-condition-node .flow-condition-chip{border-color:#c9a84cfa;background:#1c180efa;box-shadow:0 0 0 2px #c9a84c73,0 0 18px #c9a84c47,0 4px 12px #00000073}.flow-condition-node.selected:after,.react-flow__node.selected .flow-condition-node:after{opacity:1;border-color:#c9a84cd9;box-shadow:0 0 0 1px #c9a84c59}.flow-action-node.selected .flow-action-chip,.react-flow__node.selected .flow-action-node .flow-action-chip{border-color:#b86b6bfa;background:#1e1212fa;box-shadow:0 0 0 2px #b86b6b73,0 0 18px #b86b6b47,0 4px 12px #00000073}.flow-action-node.selected:after,.react-flow__node.selected .flow-action-node:after{opacity:1;border-color:#b86b6bd9;box-shadow:0 0 0 1px #b86b6b59}.flow-node-card.node{background:#12141a;border:1px solid transparent;border-top:1px solid rgba(228,224,218,.08);border-radius:12px;box-shadow:0 8px 32px #00000080,0 2px 8px #0000004d,inset 0 1px #e4e0da0a;position:relative;overflow:visible;transition:box-shadow .2s ease}.flow-node-card.node:before{content:"";position:absolute;inset:-1px;border-radius:13px;padding:1px;background:linear-gradient(145deg,#e4e0da1a,#e4e0da05,#0003);-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none}.flow-node-card.node:hover{box-shadow:0 12px 40px #0009,0 4px 12px #0006,inset 0 1px #e4e0da0f}.flow-node-card.node:hover:before{background:linear-gradient(145deg,#e4e0da24,#e4e0da0a,#00000026)}.flow-node-card.node.selected{box-shadow:0 0 0 2px var(--node-accent),0 0 24px var(--node-accent-glow),0 12px 40px #0009}.flow-node-card.node.selected:before{background:linear-gradient(145deg,var(--node-selected-tint, color-mix(in srgb, var(--node-accent) 45%, transparent)) 0%,var(--node-selected-secondary, color-mix(in srgb, var(--node-accent) 14%, transparent)) 50%,rgba(0,0,0,.2) 100%)}.node-id-bar{display:flex;align-items:center;gap:10px;min-height:42px;padding:10px 14px;background:linear-gradient(135deg,rgba(139,126,184,.25) 0%,transparent 60%);border-radius:11px 11px 0 0;position:relative}.flow-node-card.node.has-node-color .node-id-bar{background:linear-gradient(135deg,var(--node-header-tint, color-mix(in srgb, var(--node-accent) 35%, transparent)) 0%,transparent 62%)}.node-id-bar:before{content:"";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,rgba(228,224,218,.15) 50%,transparent 100%);pointer-events:none}.node-id-text{font-family:var(--font-sans);font-size:13px;font-weight:700;color:var(--text-primary);text-shadow:0 1px 3px rgba(0,0,0,.5);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;letter-spacing:.3px;position:relative;z-index:1}.node-color-dot{width:14px;height:14px;border-radius:50%;border:1px solid rgba(228,224,218,.28);background:color-mix(in srgb,var(--node-accent) 60%,#2b2f39);box-shadow:0 0 0 1px #00000059;cursor:pointer;flex-shrink:0;transition:transform .12s ease,box-shadow .12s ease}.node-color-dot:hover{transform:scale(1.08);box-shadow:0 0 0 1px #e4e0da59,0 0 10px color-mix(in srgb,var(--node-accent) 38%,transparent)}.narrative-card.narrative-tone-sensei{--node-accent: #d4a252}.narrative-card.narrative-tone-sensei .node-id-bar{background:linear-gradient(135deg,rgba(212,162,82,.25) 0%,transparent 60%)}.narrative-card.narrative-tone-user{--node-accent: #6b8fb8}.narrative-card.narrative-tone-user .node-id-bar{background:linear-gradient(135deg,rgba(107,143,184,.25) 0%,transparent 60%)}.narrative-card.narrative-tone-quest{--node-accent: #7bae7b}.narrative-card.narrative-tone-quest .node-id-bar{background:linear-gradient(135deg,rgba(123,174,123,.25) 0%,transparent 60%)}.narrative-card.narrative-tone-completion{--node-accent: #c47a9b}.narrative-card.narrative-tone-completion .node-id-bar{background:linear-gradient(135deg,rgba(196,122,155,.25) 0%,transparent 60%)}.narrative-card.narrative-tone-menu{--node-accent: #5ba3a3}.narrative-card.narrative-tone-menu .node-id-bar{background:linear-gradient(135deg,rgba(91,163,163,.25) 0%,transparent 60%)}.narrative-card.narrative-tone-node{--node-accent: #8b7eb8}.narrative-card.narrative-tone-node .node-id-bar{background:linear-gradient(135deg,rgba(139,126,184,.25) 0%,transparent 60%)}.narrative-card.narrative-tone-option{--node-accent: #8b7eb8}.narrative-card.narrative-tone-option .node-id-bar{background:linear-gradient(135deg,rgba(139,126,184,.25) 0%,transparent 60%)}.flow-node-card.node.menu{--node-accent: #5ba3a3}.flow-node-card.node.menu .node-id-bar{background:linear-gradient(135deg,rgba(91,163,163,.25) 0%,transparent 60%)}.flow-node-card.node.dialog{--node-accent: #8b7eb8}.flow-node-card.node.dialog .node-id-bar{background:linear-gradient(135deg,rgba(139,126,184,.25) 0%,transparent 60%)}.flow-node-card.node.option{--node-accent: #8b7eb8}.flow-node-card.node.option .node-id-bar{background:linear-gradient(135deg,rgba(139,126,184,.25) 0%,transparent 60%)}.flow-node-card.node.narrative-card{padding:0}.node-head{display:flex;align-items:flex-start;justify-content:space-between;gap:8px}.node-title{font-family:var(--font-display);font-size:12px;color:var(--text-primary);margin-bottom:4px}.node-collapse-btn{border:none;background:#0000004d;color:#e4e0dab3;border-radius:3px;width:22px;height:22px;padding:0;font-size:16px;font-weight:700;line-height:1;cursor:pointer;transition:all .12s ease;display:grid;place-items:center;position:relative;z-index:1}.node-collapse-btn:hover{background:#00000080;color:var(--text-primary)}.node-tags{display:flex;flex-wrap:wrap;gap:6px;padding:10px 14px 6px;border-bottom:1px solid rgba(228,224,218,.05)}.node-tag{display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:4px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;border:none;background:#0000004d;color:var(--text-secondary)}.node-tag.speaker.sensei{background:#d4a2521f;color:var(--accent-sensei);box-shadow:inset 0 0 0 1px #d4a25233}.node-tag.speaker.user{background:#6b8fb81f;color:var(--accent-user);box-shadow:inset 0 0 0 1px #6b8fb833}.node-tag.quest{background:#7bae7b1f;color:var(--accent-quest);box-shadow:inset 0 0 0 1px #7bae7b33}.node-tag.completion{background:#c47a9b1f;color:var(--accent-completion);box-shadow:inset 0 0 0 1px #c47a9b33}.node-tag.options{background:#8b7eb81f;color:var(--accent-option);box-shadow:inset 0 0 0 1px #8b7eb833}.node-tag.kind.menu{background:#5ba3a31f;color:var(--accent-menu);box-shadow:inset 0 0 0 1px #5ba3a333}.node-tag.kind.node,.node-tag.kind.option{background:#8b7eb81f;color:var(--accent-option);box-shadow:inset 0 0 0 1px #8b7eb833}.node-inline-input{width:calc(100% - 28px);margin:12px 14px;min-height:72px;resize:vertical;border:1px solid rgba(228,224,218,.06);background:#00000040;color:var(--text-primary);border-radius:4px;padding:12px;font-size:13px;font-family:var(--font-sans);line-height:1.55;transition:border-color .15s ease,box-shadow .15s ease}.node-inline-input::placeholder{color:var(--text-muted)}.node-inline-input:focus{outline:none;border-color:var(--node-accent);background:#00000059;box-shadow:0 0 0 2px var(--node-accent-glow)}.node-inline-trigger{text-align:left;width:calc(100% - 28px);margin:10px 14px 12px;cursor:text;white-space:pre-wrap;word-break:break-word;background:#0003;border:1px solid rgba(228,224,218,.05);border-radius:4px;padding:12px 14px;font-size:13px;color:var(--text-secondary);line-height:1.55;min-height:48px;transition:all .15s ease}.node-inline-trigger:hover{background:#0000004d;border-color:#e4e0da1a;color:var(--text-primary)}.node-body,.node-meta{padding:0 14px;font-size:12px;color:var(--text-secondary);line-height:1.5}.node-body{font-family:var(--font-mono);font-size:11px;color:var(--text-secondary);background:#00000026;margin:0 10px;border-radius:4px;padding:8px 10px}.node-meta{padding:6px 14px 10px;color:var(--text-muted);font-family:var(--font-mono);font-size:10px}.node-dialogue-gate,.node-outputs{margin-top:0;background:#00000026;border-top:1px solid rgba(228,224,218,.05)}.node-dialogue-gate{position:relative;display:flex;align-items:center;gap:10px;padding:10px 28px 10px 34px;min-height:36px}.node-output-row{position:relative;display:flex;align-items:center;gap:10px;min-height:36px;padding:8px 28px 8px 34px;border-top:1px solid rgba(228,224,218,.03);background:transparent;transition:background .12s ease}.node-output-row:first-child{border-top:none}.node-output-row:hover{background:#e4e0da08}.node-output-row.reorderable{cursor:grab;padding-left:34px}.node-output-row.reorderable:hover{background:#e4e0da0a}.node-output-row.dragging{opacity:.4;cursor:grabbing}.node-output-row.drag-over{background:#8b7eb826;border-top-color:var(--accent-option);box-shadow:inset 0 1px 0 var(--accent-option)}.output-drag-handle{color:var(--text-muted);font-size:9px;letter-spacing:-2px;cursor:grab;-webkit-user-select:none;user-select:none;padding:0 2px;flex-shrink:0;transition:color .12s ease}.node-output-row:hover .output-drag-handle{color:var(--text-secondary)}.node-output-check{width:12px;height:12px;border-radius:50%;flex-shrink:0;border:2px solid transparent;position:relative;transition:all .15s ease}.node-output-check.on{background:var(--accent-condition);border-color:#c9a84c66;box-shadow:0 0 10px #c9a84c66}.node-output-check.off{background:var(--text-muted);border-color:#5e5a5480}.node-output-condition{font-size:14px;font-weight:700;text-transform:none;letter-spacing:.3px;color:var(--text-primary);min-width:0;padding:3px 0}.node-condition-chip{max-width:138px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:3px 8px;border-radius:999px;border:1px solid rgba(201,168,76,.45);background:#12141aeb;color:var(--accent-condition);font-family:var(--font-mono);font-size:10px;font-weight:600;letter-spacing:.1px}.node-action-chip{max-width:138px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:3px 8px;border-radius:999px;border:1px solid rgba(184,107,107,.45);background:#12141aeb;color:var(--accent-action);font-family:var(--font-mono);font-size:10px;font-weight:600;letter-spacing:.1px}.node-output-label{flex:1;border:none;background:transparent;padding:4px 0;font-size:12px;font-weight:500;color:var(--text-primary);text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:default}.node-output-label.editable{cursor:pointer}.node-output-label.editable:hover{color:var(--node-accent)}.node-output-action{font-size:10px;font-weight:700;text-transform:none;letter-spacing:.3px;color:var(--text-primary);padding:4px 8px;background:#00000061;border:1px solid rgba(228,224,218,.08);border-radius:3px;white-space:nowrap}.node-output-action.on{background:#b86b6b2e;border-color:#b86b6b59;color:var(--accent-action)}.node-output-action.off{opacity:.7}.node-output-main-gate{font-size:14px}.node-dialogue-gate .node-output-check,.node-output-row .node-output-check{display:block}.node-actions{display:flex;gap:8px;padding:8px 14px 12px;border-top:1px solid rgba(228,224,218,.03);background:#0000001a}.node-action-btn{flex:1;display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:8px 12px;background:transparent;border:1px dashed rgba(139,126,184,.35);border-radius:8px;color:var(--accent-option);font-size:11px;font-weight:600;cursor:pointer;transition:all .15s ease}.node-action-btn:hover{background:#8b7eb81a;border-color:var(--accent-option);border-style:solid;color:#a99ad4;box-shadow:0 0 16px #8b7eb826}.node-action-btn:active{transform:scale(.97)}.node-action-btn .action-icon{width:16px;height:16px;border-radius:50%;background:#8b7eb833;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;line-height:1;position:relative;top:0}.node-action-btn.condition{border-color:#c9a84c59;color:var(--accent-condition)}.node-action-btn.condition:hover{background:#c9a84c1a;border-color:var(--accent-condition);color:#d9bf6a;box-shadow:0 0 16px #c9a84c26}.node-action-btn.condition .action-icon{background:#c9a84c33}.node-action-btn.action{border-color:#b86b6b59;color:var(--accent-action)}.node-action-btn.action:hover{background:#b86b6b1a;border-color:var(--accent-action);color:#d49a9a;box-shadow:0 0 16px #b86b6b26}.node-action-btn.action .action-icon{background:#b86b6b33}.flow-handle{width:14px;height:14px;background:#2a2d35;border:2px solid var(--text-muted);border-radius:50%;box-shadow:0 2px 4px #0000004d;transition:all .15s ease}.flow-handle:hover{border-color:var(--accent-warm);background:#3a3d45;transform:scale(1.15);box-shadow:0 0 12px #d4a25259}.flow-handle.react-flow__handle-top{top:-7px}.flow-handle.react-flow__handle-bottom{bottom:-7px}.flow-handle.react-flow__handle-left{left:-7px}.flow-handle.react-flow__handle-right{right:-7px}.flow-handle.flow-handle-root{width:12px;height:12px;background:transparent;border:2px solid var(--text-secondary);box-shadow:0 2px 6px #00000040}.flow-handle.flow-handle-root.filled{background:var(--text-secondary);border-color:var(--text-secondary);box-shadow:0 0 8px #9b968e66}.flow-handle.flow-handle-root:hover,.flow-handle.flow-handle-root.filled:hover{background:var(--text-primary);border-color:var(--accent-warm);box-shadow:0 0 12px #d4a25266}.flow-handle.flow-handle-inline{width:12px;height:12px;background:var(--text-primary);border:none;clip-path:polygon(0 0,100% 50%,0 100%);border-radius:0;box-shadow:0 2px 4px #0000004d}.flow-handle.flow-handle-inline:hover{background:var(--accent-warm);filter:drop-shadow(0 0 6px rgba(212,162,82,.5))}.flow-handle.flow-handle-condition{width:12px;height:12px;background:#1a1d24;border:2px solid var(--accent-condition);box-shadow:0 0 8px #c9a84c4d;border-radius:2px}.flow-handle.flow-handle-condition:hover{background:var(--accent-condition);border-color:#d9bf6a;box-shadow:0 0 14px #c9a84c80}.flow-handle.flow-handle-condition-node{width:12px;height:12px;background:var(--accent-condition);border:2px solid #0f1114;border-radius:50%;box-shadow:0 0 10px #c9a84c66}.flow-handle.flow-handle-action{width:12px;height:12px;background:#1a1d24;border:2px solid var(--accent-action);border-radius:2px;box-shadow:0 0 8px #b86b6b4d}.flow-handle.flow-handle-action:hover{background:var(--accent-action);border-color:#d48e8e;box-shadow:0 0 14px #b86b6b80}.flow-handle.flow-handle-action-node{width:12px;height:12px;background:var(--accent-action);border:2px solid #0f1114;border-radius:50%;box-shadow:0 0 10px #b86b6b66}.flow-handle.flow-handle-condition.filled{background:var(--accent-condition);border-color:#d9bf6a;box-shadow:0 0 14px #c9a84c73}.flow-handle.flow-handle-condition.filled:hover{background:var(--accent-condition);border-color:#d9bf6a;box-shadow:0 0 14px #c9a84c80}.flow-handle.flow-handle-action.filled{background:var(--accent-action);border-color:var(--accent-action);box-shadow:0 0 14px #b86b6b73}.flow-handle.flow-handle-action.filled:hover{background:var(--accent-action);border-color:var(--accent-action);box-shadow:0 0 14px #b86b6b80}.node-avatar{width:28px;height:28px;border-radius:4px;display:grid;place-items:center;font-size:14px;font-weight:800;flex-shrink:0;position:relative;z-index:1;border:2px solid rgba(228,224,218,.2);box-shadow:0 2px 4px #0000004d,inset 0 1px #e4e0da26}.node-avatar.sensei{background:linear-gradient(135deg,#3d3020,#d4a252);color:#f5e6c8;border-color:#d4a25266}.node-avatar.user{background:linear-gradient(135deg,#1e2d40,#6b8fb8);color:#d0dfe8;border-color:#6b8fb866}.node-avatar.quest{background:linear-gradient(135deg,#1e3020,#7bae7b);color:#c8e8c8;border-color:#7bae7b66}.node-avatar.completion{background:linear-gradient(135deg,#3a1e2a,#c47a9b);color:#f0d0df;border-color:#c47a9b66}.node-avatar.menu{background:linear-gradient(135deg,#1a3030,#5ba3a3);color:#c0e8e8;border-color:#5ba3a366}.node-avatar.option,.node-avatar.node{background:linear-gradient(135deg,#252040,#8b7eb8);color:#d5d0f0;border-color:#8b7eb866}.flow-node-card.node.collapsed{min-height:auto}.flow-node-card.node.collapsed .node-id-bar{border-bottom:none;border-radius:4px}.flow-node-card.node.collapsed:after{content:"";position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--node-accent);opacity:.4;border-radius:0 0 4px 4px}.flow-node-card.node.narrative-card.has-node-color .node-id-bar{background:linear-gradient(135deg,var(--node-header-tint, rgba(139, 126, 184, .35)) 0%,transparent 62%)!important}.flow-node-card.node.narrative-card.has-node-color.selected{box-shadow:0 0 0 2px var(--node-accent),0 0 24px var(--node-accent-glow),0 12px 40px #0009!important}.preview-overlay,.sim-overlay,.settings-overlay,.quickedit-overlay{position:fixed;inset:0;background:var(--overlay-bg);-webkit-backdrop-filter:var(--overlay-blur);backdrop-filter:var(--overlay-blur);display:grid;place-items:center;z-index:1000;animation:overlayFadeIn .2s ease-out}@keyframes overlayFadeIn{0%{opacity:0}to{opacity:1}}@keyframes overlayPanelRise{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.preview-panel,.sim-panel,.settings-panel,.quickedit-panel{background:var(--panel-bg);border:1px solid var(--panel-border);border-radius:var(--radius-xl);padding:20px;box-shadow:var(--shadow-lg);max-height:90vh;overflow-y:auto;animation:overlayPanelRise .25s ease-out}.preview-panel{width:min(520px,92vw)}.sim-panel{width:100%;min-width:0}.settings-panel{width:min(460px,90vw)}.quickedit-panel{width:min(620px,92vw)}.sim-shell{display:grid;grid-template-columns:0 minmax(0,1fr) 0;gap:16px;width:min(1280px,96vw);max-height:90vh;align-items:start}.sim-shell.show-transcript.show-stats{grid-template-columns:minmax(220px,280px) minmax(460px,1fr) minmax(220px,280px)}.sim-shell.show-transcript.hide-stats{grid-template-columns:minmax(220px,280px) minmax(460px,1fr) 0}.sim-shell.hide-transcript.show-stats{grid-template-columns:0 minmax(460px,1fr) minmax(220px,280px)}.sim-transcript,.sim-stats{background:var(--panel-bg);border:1px solid var(--panel-border);border-radius:var(--radius-xl);padding:16px;box-shadow:var(--shadow-lg);max-height:90vh;overflow-y:auto}.sim-header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:16px}.sim-title{font-family:var(--font-display);font-size:14px;color:var(--text-primary)}.sim-subtitle{font-size:11px;color:var(--text-muted)}.sim-actions{display:flex;gap:6px}.sim-body{display:flex;flex-direction:column;gap:16px}.sim-card{background:var(--panel-bg-elevated);border:1px solid var(--panel-border);border-radius:var(--radius-lg);padding:16px}.sim-card.sim-center{text-align:center}.sim-text{font-size:14px;line-height:1.6;color:var(--text-primary)}.sim-options{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:12px}.sim-dead-end{width:100%;margin-top:4px;padding:8px 10px;border-radius:var(--radius-md);border:1px solid rgba(184,107,107,.35);background:#b86b6b1a;color:var(--accent-action);font-size:11px;text-align:center}.sim-log{display:flex;flex-direction:column;gap:8px;max-height:200px;overflow-y:auto}.sim-line{display:grid;grid-template-columns:70px 1fr;gap:8px;font-size:11px}.sim-speaker{font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--accent-sensei)}.sim-speaker.user{color:var(--accent-user)}.sim-speaker.system{color:var(--accent-option)}.quickedit-panel .panel-title{color:var(--text-primary);margin-bottom:12px}.quickedit-input{min-height:160px;background:var(--canvas-bg);color:var(--text-primary);border-color:var(--panel-border);transition:border-color .15s ease,box-shadow .15s ease}.quickedit-input:focus{border-color:var(--accent-warm);box-shadow:0 0 0 2px #d4a25233}.quickedit-input.condition{min-height:80px}.quickedit-input.action{min-height:80px;border-color:#b86b6b66}.quickedit-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}.addexpr-panel{width:min(720px,94vw)}.addexpr-list{display:flex;flex-wrap:wrap;gap:8px;max-height:220px;overflow-y:auto;padding:8px;border-radius:var(--radius-md);border:1px solid var(--panel-border);background:#00000038}.addexpr-chip{border-radius:999px;padding:6px 10px;border:1px solid rgba(228,224,218,.16);background:#0f1114d1;color:var(--text-primary);font-family:var(--font-mono);font-size:11px;cursor:pointer}.addexpr-chip:hover{border-color:#e4e0da59}.addexpr-chip-condition{border-color:#c9a84c73;color:var(--accent-condition);background:#c9a84c14}.addexpr-chip-action{border-color:#b86b6b73;color:var(--accent-action);background:#b86b6b14}.preview-card{display:flex;flex-direction:column;gap:12px}.preview-bubble{padding:12px 16px;border-radius:var(--radius-md);background:var(--panel-bg-elevated);border:1px solid var(--panel-border);font-size:13px;line-height:1.5;color:var(--text-primary)}.preview-bubble.large{font-size:15px;padding:16px 20px}.preview-meta{color:var(--text-muted);font-size:11px}.preview-options{display:flex;flex-wrap:wrap;gap:8px}.issues{background:var(--panel-bg);border-top:1px solid var(--panel-border);padding:8px 16px;display:flex;gap:16px;align-items:center}.issues-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-muted)}.issues-list{list-style:none;margin:0;padding:0;display:flex;gap:16px;font-size:11px;color:var(--text-secondary)}.muted{color:var(--text-muted);font-size:11px}.stats-grid,.stats-flags{display:flex;flex-direction:column;gap:8px}.sim-field{display:flex;flex-direction:column;gap:4px}.sim-flag-group{display:flex;flex-direction:column;gap:4px;padding:8px 0}.sim-flag-row{display:flex;justify-content:space-between;font-size:11px}.sim-list{display:flex;flex-direction:column;gap:6px}.sim-list-item{padding:8px 12px;border-radius:var(--radius-md);border:1px solid var(--panel-border);background:var(--panel-bg-elevated);font-size:12px}.link-swatch{display:grid;place-items:center;border:1px dashed var(--panel-border);border-radius:var(--radius-lg);min-height:100px;color:var(--text-muted);font-size:11px}.canvas-grid{position:relative;z-index:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;padding:16px}.flow-fallback{position:absolute;inset:0;pointer-events:none;z-index:1}.flow-fallback-node{position:absolute;padding:6px 10px;border-radius:var(--radius-md);border:1px dashed var(--accent-sensei);background:#d4a25214;font-size:10px;color:var(--text-secondary)}@media(max-width:1200px){.workspace{grid-template-columns:200px 1fr 260px}.inventory-dock{width:220px}}@media(max-width:980px){.workspace{grid-template-columns:1fr;grid-template-rows:auto 1fr auto}.sidebar,.inspector{border:none;border-bottom:1px solid var(--panel-border)}.sim-shell{grid-template-columns:1fr!important;width:min(94vw,720px)}.sim-transcript,.sim-stats{max-height:30vh}.inventory-dock{position:static;width:auto;max-height:220px;margin:10px}}@keyframes fadeIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}@keyframes nodeRise{0%{opacity:0;transform:translateY(6px) scale(.97)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes warmPulse{0%,to{box-shadow:0 0 #d4a25200}50%{box-shadow:0 0 12px #d4a25233}}.app{animation:fadeIn .25s ease-out}.flow-node-card.node{animation:none}.tree-item,.tab,.stage-tab,button.ghost,.field,.node-output-row,.flow-handle{transition:all .15s ease}.react-flow__node.selected .flow-node-card.node{border-color:var(--accent-warm)!important;box-shadow:0 0 0 2px var(--accent-warm),0 0 24px #d4a25226,0 6px 24px #00000080!important}.flow-empty{display:flex;align-items:center;justify-content:center;height:100%;color:var(--text-muted);font-size:14px}.kbd{display:inline-block;padding:2px 6px;font-size:10px;font-family:var(--font-mono);background:var(--panel-bg-elevated);border:1px solid var(--panel-border);border-radius:var(--radius-sm);color:var(--text-muted)}
