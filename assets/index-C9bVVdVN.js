(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=o(c);fetch(c.href,f)}})();function Df(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $d={exports:{}},Es={};var Ap;function Ab(){if(Ap)return Es;Ap=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function o(s,c,f){var d=null;if(f!==void 0&&(d=""+f),c.key!==void 0&&(d=""+c.key),"key"in c){f={};for(var h in c)h!=="key"&&(f[h]=c[h])}else f=c;return c=f.ref,{$$typeof:n,type:s,key:d,ref:c!==void 0?c:null,props:f}}return Es.Fragment=a,Es.jsx=o,Es.jsxs=o,Es}var Cp;function Cb(){return Cp||(Cp=1,$d.exports=Ab()),$d.exports}var b=Cb(),Vd={exports:{}},Le={};var Tp;function Tb(){if(Tp)return Le;Tp=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),S=Symbol.iterator;function _(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function M(D,V,de){this.props=D,this.context=V,this.refs=k,this.updater=de||q}M.prototype.isReactComponent={},M.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},M.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function O(){}O.prototype=M.prototype;function U(D,V,de){this.props=D,this.context=V,this.refs=k,this.updater=de||q}var w=U.prototype=new O;w.constructor=U,C(w,M.prototype),w.isPureReactComponent=!0;var J=Array.isArray;function Q(){}var W={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function ue(D,V,de){var ge=de.ref;return{$$typeof:n,type:D,key:V,ref:ge!==void 0?ge:null,props:de}}function te(D,V){return ue(D.type,V,D.props)}function oe(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function me(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(de){return V[de]})}var ve=/\/+/g;function z(D,V){return typeof D=="object"&&D!==null&&D.key!=null?me(""+D.key):V.toString(36)}function B(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Q,Q):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function N(D,V,de,ge,we){var Ce=typeof D;(Ce==="undefined"||Ce==="boolean")&&(D=null);var ke=!1;if(D===null)ke=!0;else switch(Ce){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(D.$$typeof){case n:case a:ke=!0;break;case y:return ke=D._init,N(ke(D._payload),V,de,ge,we)}}if(ke)return we=we(D),ke=ge===""?"."+z(D,0):ge,J(we)?(de="",ke!=null&&(de=ke.replace(ve,"$&/")+"/"),N(we,V,de,"",function($e){return $e})):we!=null&&(oe(we)&&(we=te(we,de+(we.key==null||D&&D.key===we.key?"":(""+we.key).replace(ve,"$&/")+"/")+ke)),V.push(we)),1;ke=0;var Re=ge===""?".":ge+":";if(J(D))for(var Oe=0;Oe<D.length;Oe++)ge=D[Oe],Ce=Re+z(ge,Oe),ke+=N(ge,V,de,Ce,we);else if(Oe=_(D),typeof Oe=="function")for(D=Oe.call(D),Oe=0;!(ge=D.next()).done;)ge=ge.value,Ce=Re+z(ge,Oe++),ke+=N(ge,V,de,Ce,we);else if(Ce==="object"){if(typeof D.then=="function")return N(B(D),V,de,ge,we);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ke}function L(D,V,de){if(D==null)return D;var ge=[],we=0;return N(D,ge,"","",function(Ce){return V.call(de,Ce,we++)}),ge}function ne(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(de){(D._status===0||D._status===-1)&&(D._status=1,D._result=de)},function(de){(D._status===0||D._status===-1)&&(D._status=2,D._result=de)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var I=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},se={map:L,forEach:function(D,V,de){L(D,function(){V.apply(this,arguments)},de)},count:function(D){var V=0;return L(D,function(){V++}),V},toArray:function(D){return L(D,function(V){return V})||[]},only:function(D){if(!oe(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Le.Activity=p,Le.Children=se,Le.Component=M,Le.Fragment=o,Le.Profiler=c,Le.PureComponent=U,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Le.__COMPILER_RUNTIME={__proto__:null,c:function(D){return W.H.useMemoCache(D)}},Le.cache=function(D){return function(){return D.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(D,V,de){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ge=C({},D.props),we=D.key;if(V!=null)for(Ce in V.key!==void 0&&(we=""+V.key),V)!ce.call(V,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&V.ref===void 0||(ge[Ce]=V[Ce]);var Ce=arguments.length-2;if(Ce===1)ge.children=de;else if(1<Ce){for(var ke=Array(Ce),Re=0;Re<Ce;Re++)ke[Re]=arguments[Re+2];ge.children=ke}return ue(D.type,we,ge)},Le.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:f,_context:D},D},Le.createElement=function(D,V,de){var ge,we={},Ce=null;if(V!=null)for(ge in V.key!==void 0&&(Ce=""+V.key),V)ce.call(V,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(we[ge]=V[ge]);var ke=arguments.length-2;if(ke===1)we.children=de;else if(1<ke){for(var Re=Array(ke),Oe=0;Oe<ke;Oe++)Re[Oe]=arguments[Oe+2];we.children=Re}if(D&&D.defaultProps)for(ge in ke=D.defaultProps,ke)we[ge]===void 0&&(we[ge]=ke[ge]);return ue(D,Ce,we)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(D){return{$$typeof:h,render:D}},Le.isValidElement=oe,Le.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:ne}},Le.memo=function(D,V){return{$$typeof:m,type:D,compare:V===void 0?null:V}},Le.startTransition=function(D){var V=W.T,de={};W.T=de;try{var ge=D(),we=W.S;we!==null&&we(de,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(Q,I)}catch(Ce){I(Ce)}finally{V!==null&&de.types!==null&&(V.types=de.types),W.T=V}},Le.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Le.use=function(D){return W.H.use(D)},Le.useActionState=function(D,V,de){return W.H.useActionState(D,V,de)},Le.useCallback=function(D,V){return W.H.useCallback(D,V)},Le.useContext=function(D){return W.H.useContext(D)},Le.useDebugValue=function(){},Le.useDeferredValue=function(D,V){return W.H.useDeferredValue(D,V)},Le.useEffect=function(D,V){return W.H.useEffect(D,V)},Le.useEffectEvent=function(D){return W.H.useEffectEvent(D)},Le.useId=function(){return W.H.useId()},Le.useImperativeHandle=function(D,V,de){return W.H.useImperativeHandle(D,V,de)},Le.useInsertionEffect=function(D,V){return W.H.useInsertionEffect(D,V)},Le.useLayoutEffect=function(D,V){return W.H.useLayoutEffect(D,V)},Le.useMemo=function(D,V){return W.H.useMemo(D,V)},Le.useOptimistic=function(D,V){return W.H.useOptimistic(D,V)},Le.useReducer=function(D,V,de){return W.H.useReducer(D,V,de)},Le.useRef=function(D){return W.H.useRef(D)},Le.useState=function(D){return W.H.useState(D)},Le.useSyncExternalStore=function(D,V,de){return W.H.useSyncExternalStore(D,V,de)},Le.useTransition=function(){return W.H.useTransition()},Le.version="19.2.4",Le}var Dp;function Vs(){return Dp||(Dp=1,Vd.exports=Tb()),Vd.exports}var A=Vs();const pe=Df(A);var Ld={exports:{}},_s={},Xd={exports:{}},Zd={};var Mp;function Db(){return Mp||(Mp=1,(function(n){function a(N,L){var ne=N.length;N.push(L);e:for(;0<ne;){var I=ne-1>>>1,se=N[I];if(0<c(se,L))N[I]=L,N[ne]=se,ne=I;else break e}}function o(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var L=N[0],ne=N.pop();if(ne!==L){N[0]=ne;e:for(var I=0,se=N.length,D=se>>>1;I<D;){var V=2*(I+1)-1,de=N[V],ge=V+1,we=N[ge];if(0>c(de,ne))ge<se&&0>c(we,de)?(N[I]=we,N[ge]=ne,I=ge):(N[I]=de,N[V]=ne,I=V);else if(ge<se&&0>c(we,ne))N[I]=we,N[ge]=ne,I=ge;else break e}}return L}function c(N,L){var ne=N.sortIndex-L.sortIndex;return ne!==0?ne:N.id-L.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var g=[],m=[],y=1,p=null,S=3,_=!1,q=!1,C=!1,k=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function w(N){for(var L=o(m);L!==null;){if(L.callback===null)s(m);else if(L.startTime<=N)s(m),L.sortIndex=L.expirationTime,a(g,L);else break;L=o(m)}}function J(N){if(C=!1,w(N),!q)if(o(g)!==null)q=!0,Q||(Q=!0,me());else{var L=o(m);L!==null&&B(J,L.startTime-N)}}var Q=!1,W=-1,ce=5,ue=-1;function te(){return k?!0:!(n.unstable_now()-ue<ce)}function oe(){if(k=!1,Q){var N=n.unstable_now();ue=N;var L=!0;try{e:{q=!1,C&&(C=!1,O(W),W=-1),_=!0;var ne=S;try{t:{for(w(N),p=o(g);p!==null&&!(p.expirationTime>N&&te());){var I=p.callback;if(typeof I=="function"){p.callback=null,S=p.priorityLevel;var se=I(p.expirationTime<=N);if(N=n.unstable_now(),typeof se=="function"){p.callback=se,w(N),L=!0;break t}p===o(g)&&s(g),w(N)}else s(g);p=o(g)}if(p!==null)L=!0;else{var D=o(m);D!==null&&B(J,D.startTime-N),L=!1}}break e}finally{p=null,S=ne,_=!1}L=void 0}}finally{L?me():Q=!1}}}var me;if(typeof U=="function")me=function(){U(oe)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,z=ve.port2;ve.port1.onmessage=oe,me=function(){z.postMessage(null)}}else me=function(){M(oe,0)};function B(N,L){W=M(function(){N(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(N){switch(S){case 1:case 2:case 3:var L=3;break;default:L=S}var ne=S;S=L;try{return N()}finally{S=ne}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(N,L){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var ne=S;S=N;try{return L()}finally{S=ne}},n.unstable_scheduleCallback=function(N,L,ne){var I=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?I+ne:I):ne=I,N){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ne+se,N={id:y++,callback:L,priorityLevel:N,startTime:ne,expirationTime:se,sortIndex:-1},ne>I?(N.sortIndex=ne,a(m,N),o(g)===null&&N===o(m)&&(C?(O(W),W=-1):C=!0,B(J,ne-I))):(N.sortIndex=se,a(g,N),q||_||(q=!0,Q||(Q=!0,me()))),N},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(N){var L=S;return function(){var ne=S;S=L;try{return N.apply(this,arguments)}finally{S=ne}}}})(Zd)),Zd}var zp;function Mb(){return zp||(zp=1,Xd.exports=Db()),Xd.exports}var Id={exports:{}},Tn={};var kp;function zb(){if(kp)return Tn;kp=1;var n=Vs();function a(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(a(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(g,m,y){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:p==null?null:""+p,children:g,containerInfo:m,implementation:y}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Tn.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return f(g,m,null,y)},Tn.flushSync=function(g){var m=d.T,y=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=m,s.p=y,s.d.f()}},Tn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},Tn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Tn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,p=h(y,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:p,integrity:S,fetchPriority:_}):y==="script"&&s.d.X(g,{crossOrigin:p,integrity:S,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Tn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},Tn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,p=h(y,m.crossOrigin);s.d.L(g,y,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Tn.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=h(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},Tn.requestFormReset=function(g){s.d.r(g)},Tn.unstable_batchedUpdates=function(g,m){return g(m)},Tn.useFormState=function(g,m,y){return d.H.useFormState(g,m,y)},Tn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Tn.version="19.2.4",Tn}var Op;function Lv(){if(Op)return Id.exports;Op=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Id.exports=zb(),Id.exports}var Rp;function kb(){if(Rp)return _s;Rp=1;var n=Mb(),a=Vs(),o=Lv();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(f(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,l=t;;){var r=i.return;if(r===null)break;var u=r.alternate;if(u===null){if(l=r.return,l!==null){i=l;continue}break}if(r.child===u.child){for(u=r.child;u;){if(u===i)return g(r),e;if(u===l)return g(r),t;u=u.sibling}throw Error(s(188))}if(i.return!==l.return)i=r,l=u;else{for(var v=!1,E=r.child;E;){if(E===i){v=!0,i=r,l=u;break}if(E===l){v=!0,l=r,i=u;break}E=E.sibling}if(!v){for(E=u.child;E;){if(E===i){v=!0,i=u,l=r;break}if(E===l){v=!0,l=u,i=r;break}E=E.sibling}if(!v)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),U=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=oe&&e[oe]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case M:return"Profiler";case k:return"StrictMode";case J:return"Suspense";case Q:return"SuspenseList";case ue:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case U:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return t=e.displayName||null,t!==null?t:z(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return z(e(t))}catch{}}return null}var B=Array.isArray,N=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},I=[],se=-1;function D(e){return{current:e}}function V(e){0>se||(e.current=I[se],I[se]=null,se--)}function de(e,t){se++,I[se]=e.current,e.current=t}var ge=D(null),we=D(null),Ce=D(null),ke=D(null);function Re(e,t){switch(de(Ce,t),de(we,e),de(ge,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Kg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Kg(t),e=Jg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ge),de(ge,e)}function Oe(){V(ge),V(we),V(Ce)}function $e(e){e.memoizedState!==null&&de(ke,e);var t=ge.current,i=Jg(t,e.type);t!==i&&(de(we,e),de(ge,i))}function at(e){we.current===e&&(V(ge),V(we)),ke.current===e&&(V(ke),xs._currentValue=ne)}var Pe,Et;function gt(e){if(Pe===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Pe=t&&t[1]||"",Et=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+e+Et}var et=!1;function pt(e,t){if(!e||et)return"";et=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(fe){var re=fe}Reflect.construct(e,[],Ee)}else{try{Ee.call()}catch(fe){re=fe}e.call(Ee.prototype)}}else{try{throw Error()}catch(fe){re=fe}(Ee=e())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(fe){if(fe&&re&&typeof fe.stack=="string")return[fe.stack,re.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),v=u[0],E=u[1];if(v&&E){var Y=v.split(`
`),le=E.split(`
`);for(r=l=0;l<Y.length&&!Y[l].includes("DetermineComponentFrameRoot");)l++;for(;r<le.length&&!le[r].includes("DetermineComponentFrameRoot");)r++;if(l===Y.length||r===le.length)for(l=Y.length-1,r=le.length-1;1<=l&&0<=r&&Y[l]!==le[r];)r--;for(;1<=l&&0<=r;l--,r--)if(Y[l]!==le[r]){if(l!==1||r!==1)do if(l--,r--,0>r||Y[l]!==le[r]){var xe=`
`+Y[l].replace(" at new "," at ");return e.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",e.displayName)),xe}while(1<=l&&0<=r);break}}}finally{et=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?gt(i):""}function Fe(e,t){switch(e.tag){case 26:case 27:case 5:return gt(e.type);case 16:return gt("Lazy");case 13:return e.child!==t&&t!==null?gt("Suspense Fallback"):gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return pt(e.type,!1);case 11:return pt(e.type.render,!1);case 1:return pt(e.type,!0);case 31:return gt("Activity");default:return""}}function je(e){try{var t="",i=null;do t+=Fe(e,i),i=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var _t=Object.prototype.hasOwnProperty,Qt=n.unstable_scheduleCallback,vn=n.unstable_cancelCallback,Mn=n.unstable_shouldYield,_n=n.unstable_requestPaint,wt=n.unstable_now,zn=n.unstable_getCurrentPriorityLevel,tt=n.unstable_ImmediatePriority,Rt=n.unstable_UserBlockingPriority,cn=n.unstable_NormalPriority,qt=n.unstable_LowPriority,wn=n.unstable_IdlePriority,dt=n.log,De=n.unstable_setDisableYieldValue,ie=null,ee=null;function be(e){if(typeof dt=="function"&&De(e),ee&&typeof ee.setStrictMode=="function")try{ee.setStrictMode(ie,e)}catch{}}var Be=Math.clz32?Math.clz32:Tt,ft=Math.log,Xe=Math.LN2;function Tt(e){return e>>>=0,e===0?32:31-(ft(e)/Xe|0)|0}var Qe=256,Ze=262144,$t=4194304;function vt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function mt(e,t,i){var l=e.pendingLanes;if(l===0)return 0;var r=0,u=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~u,l!==0?r=vt(l):(v&=E,v!==0?r=vt(v):i||(i=E&~e,i!==0&&(r=vt(i))))):(E=l&~u,E!==0?r=vt(E):v!==0?r=vt(v):i||(i=l&~e,i!==0&&(r=vt(i)))),r===0?0:t!==0&&t!==r&&(t&u)===0&&(u=r&-r,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:r}function An(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ni(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bi(){var e=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),e}function ma(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ti(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function We(e,t,i,l,r,u){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var E=e.entanglements,Y=e.expirationTimes,le=e.hiddenUpdates;for(i=v&~i;0<i;){var xe=31-Be(i),Ee=1<<xe;E[xe]=0,Y[xe]=-1;var re=le[xe];if(re!==null)for(le[xe]=null,xe=0;xe<re.length;xe++){var fe=re[xe];fe!==null&&(fe.lane&=-536870913)}i&=~Ee}l!==0&&lt(e,l,0),u!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=u&~(v&~t))}function lt(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Be(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function ga(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-Be(i),r=1<<l;r&t|e[l]&t&&(e[l]|=t),i&=~r}}function pa(e,t){var i=t&-t;return i=(i&42)!==0?1:yn(i),(i&(e.suspendedLanes|t))!==0?0:i}function yn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function un(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Cn(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:xp(e.type))}function tl(e,t){var i=L.p;try{return L.p=e,t()}finally{L.p=i}}var Ln=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Ln,bt="__reactProps$"+Ln,gi="__reactContainer$"+Ln,nl="__reactEvents$"+Ln,Do="__reactListeners$"+Ln,Mo="__reactHandles$"+Ln,va="__reactResources$"+Ln,Yi="__reactMarker$"+Ln;function il(e){delete e[Kt],delete e[bt],delete e[nl],delete e[Do],delete e[Mo]}function Di(e){var t=e[Kt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[gi]||i[Kt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=ip(e);e!==null;){if(i=e[Kt])return i;e=ip(e)}return t}e=i,i=e.parentNode}return null}function pi(e){if(e=e[Kt]||e[gi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function $i(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Mi(e){var t=e[va];return t||(t=e[va]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Jt(e){e[Yi]=!0}var Tl=new Set,Dl={};function vi(e,t){yi(e,t),yi(e+"Capture",t)}function yi(e,t){for(Dl[e]=t,e=0;e<t.length;e++)Tl.add(t[e])}var zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ml={},zl={};function Vi(e){return _t.call(zl,e)?!0:_t.call(Ml,e)?!1:zo.test(e)?zl[e]=!0:(Ml[e]=!0,!1)}function kl(e,t,i){if(Vi(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Ol(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function xi(e,t,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+l)}}function kn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Is(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $c(e,t,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var r=l.get,u=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(v){i=""+v,u.call(this,v)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ko(e){if(!e._valueTracker){var t=Is(e)?"checked":"value";e._valueTracker=$c(e,t,""+e[t])}}function Qs(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Is(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function Rl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vc=/[\n"\\]/g;function On(e){return e.replace(Vc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Oo(e,t,i,l,r,u,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+kn(t)):e.value!==""+kn(t)&&(e.value=""+kn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Ro(e,v,kn(t)):i!=null?Ro(e,v,kn(i)):l!=null&&e.removeAttribute("value"),r==null&&u!=null&&(e.defaultChecked=!!u),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+kn(E):e.removeAttribute("name")}function Ks(e,t,i,l,r,u,v,E){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){ko(e);return}i=i!=null?""+kn(i):"",t=t!=null?""+kn(t):i,E||t===e.value||(e.value=t),e.defaultValue=t}l=l??r,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),ko(e)}function Ro(e,t,i){t==="number"&&Rl(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ya(e,t,i,l){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&l&&(e[i].defaultSelected=!0)}else{for(i=""+kn(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Js(e,t,i){if(t!=null&&(t=""+kn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+kn(i):""}function Ws(e,t,i,l){if(t==null){if(l!=null){if(i!=null)throw Error(s(92));if(B(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),t=i}i=kn(t),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),ko(e)}function xa(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Lc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fs(e,t,i){var l=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,i):typeof i!="number"||i===0||Lc.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Ps(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var r in t)l=t[r],t.hasOwnProperty(r)&&i[r]!==l&&Fs(e,r,l)}else for(var u in t)t.hasOwnProperty(u)&&Fs(e,u,t[u])}function qo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ql(e){return Zc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function bi(){}var jo=null;function Ho(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vt=null,ba=null;function er(e){var t=pi(e);if(t&&(e=t.stateNode)){var i=e[bt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Oo(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+On(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var r=l[bt]||null;if(!r)throw Error(s(90));Oo(l,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<i.length;t++)l=i[t],l.form===e.form&&Qs(l)}break e;case"textarea":Js(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ya(e,!!i.multiple,t,!1)}}}var Go=!1;function tr(e,t,i){if(Go)return e(t,i);Go=!0;try{var l=e(t);return l}finally{if(Go=!1,(Vt!==null||ba!==null)&&(Gr(),Vt&&(t=Vt,e=ba,ba=Vt=null,er(t),e)))for(t=0;t<e.length;t++)er(e[t])}}function x(e,t){var i=e.stateNode;if(i===null)return null;var l=i[bt]||null;if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var H=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T=!1;if(H)try{var R={};Object.defineProperty(R,"passive",{get:function(){T=!0}}),window.addEventListener("test",R,R),window.removeEventListener("test",R,R)}catch{T=!1}var j=null,X=null,K=null;function Ae(){if(K)return K;var e,t=X,i=t.length,l,r="value"in j?j.value:j.textContent,u=r.length;for(e=0;e<i&&t[e]===r[e];e++);var v=i-e;for(l=1;l<=v&&t[i-l]===r[u-l];l++);return K=r.slice(e,1<l?1-l:void 0)}function he(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function G(){return!0}function $(){return!1}function P(e){function t(i,l,r,u,v){this._reactName=i,this._targetInst=r,this.type=l,this.nativeEvent=u,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(i=e[E],this[E]=i?i(u):u[E]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?G:$,this.isPropagationStopped=$,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=G)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=G)},persist:function(){},isPersistent:G}),t}var ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Te=P(ye),Ne=p({},ye,{view:0,detail:0}),ze=P(Ne),_e,Me,Ke,St=p({},Ne,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ic,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ke&&(Ke&&e.type==="mousemove"?(_e=e.screenX-Ke.screenX,Me=e.screenY-Ke.screenY):Me=_e=0,Ke=e),_e)},movementY:function(e){return"movementY"in e?e.movementY:Me}}),Wt=P(St),Rn=p({},St,{dataTransfer:0}),nr=P(Rn),Sa=p({},Ne,{relatedTarget:0}),Uo=P(Sa),Ty=p({},ye,{animationName:0,elapsedTime:0,pseudoElement:0}),Dy=P(Ty),My=p({},ye,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zy=P(My),ky=p({},ye,{data:0}),Pf=P(ky),Oy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ry={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qy[e])?!!t[e]:!1}function Ic(){return jy}var Hy=p({},Ne,{key:function(e){if(e.key){var t=Oy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=he(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ry[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ic,charCode:function(e){return e.type==="keypress"?he(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?he(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gy=P(Hy),Uy=p({},St,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eh=P(Uy),By=p({},Ne,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ic}),Yy=P(By),$y=p({},ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vy=P($y),Ly=p({},St,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xy=P(Ly),Zy=p({},ye,{newState:0,oldState:0}),Iy=P(Zy),Qy=[9,13,27,32],Qc=H&&"CompositionEvent"in window,Bo=null;H&&"documentMode"in document&&(Bo=document.documentMode);var Ky=H&&"TextEvent"in window&&!Bo,th=H&&(!Qc||Bo&&8<Bo&&11>=Bo),nh=" ",ih=!1;function ah(e,t){switch(e){case"keyup":return Qy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jl=!1;function Jy(e,t){switch(e){case"compositionend":return lh(t);case"keypress":return t.which!==32?null:(ih=!0,nh);case"textInput":return e=t.data,e===nh&&ih?null:e;default:return null}}function Wy(e,t){if(jl)return e==="compositionend"||!Qc&&ah(e,t)?(e=Ae(),K=X=j=null,jl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return th&&t.locale!=="ko"?null:t.data;default:return null}}var Fy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fy[e.type]:t==="textarea"}function sh(e,t,i,l){Vt?ba?ba.push(l):ba=[l]:Vt=l,t=Xr(t,"onChange"),0<t.length&&(i=new Te("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Yo=null,$o=null;function Py(e){Vg(e,0)}function ir(e){var t=$i(e);if(Qs(t))return e}function rh(e,t){if(e==="change")return t}var ch=!1;if(H){var Kc;if(H){var Jc="oninput"in document;if(!Jc){var uh=document.createElement("div");uh.setAttribute("oninput","return;"),Jc=typeof uh.oninput=="function"}Kc=Jc}else Kc=!1;ch=Kc&&(!document.documentMode||9<document.documentMode)}function dh(){Yo&&(Yo.detachEvent("onpropertychange",fh),$o=Yo=null)}function fh(e){if(e.propertyName==="value"&&ir($o)){var t=[];sh(t,$o,e,Ho(e)),tr(Py,t)}}function ex(e,t,i){e==="focusin"?(dh(),Yo=t,$o=i,Yo.attachEvent("onpropertychange",fh)):e==="focusout"&&dh()}function tx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ir($o)}function nx(e,t){if(e==="click")return ir(t)}function ix(e,t){if(e==="input"||e==="change")return ir(t)}function ax(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xn=typeof Object.is=="function"?Object.is:ax;function Vo(e,t){if(Xn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var r=i[l];if(!_t.call(t,r)||!Xn(e[r],t[r]))return!1}return!0}function hh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mh(e,t){var i=hh(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=hh(i)}}function gh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ph(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Rl(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Rl(e.document)}return t}function Wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var lx=H&&"documentMode"in document&&11>=document.documentMode,Hl=null,Fc=null,Lo=null,Pc=!1;function vh(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Pc||Hl==null||Hl!==Rl(l)||(l=Hl,"selectionStart"in l&&Wc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Lo&&Vo(Lo,l)||(Lo=l,l=Xr(Fc,"onSelect"),0<l.length&&(t=new Te("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Hl)))}function al(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Gl={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionrun:al("Transition","TransitionRun"),transitionstart:al("Transition","TransitionStart"),transitioncancel:al("Transition","TransitionCancel"),transitionend:al("Transition","TransitionEnd")},eu={},yh={};H&&(yh=document.createElement("div").style,"AnimationEvent"in window||(delete Gl.animationend.animation,delete Gl.animationiteration.animation,delete Gl.animationstart.animation),"TransitionEvent"in window||delete Gl.transitionend.transition);function ll(e){if(eu[e])return eu[e];if(!Gl[e])return e;var t=Gl[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in yh)return eu[e]=t[i];return e}var xh=ll("animationend"),bh=ll("animationiteration"),Sh=ll("animationstart"),ox=ll("transitionrun"),sx=ll("transitionstart"),rx=ll("transitioncancel"),Nh=ll("transitionend"),Eh=new Map,tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tu.push("scrollEnd");function Si(e,t){Eh.set(e,t),vi(t,[e])}var ar=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ii=[],Ul=0,nu=0;function lr(){for(var e=Ul,t=nu=Ul=0;t<e;){var i=ii[t];ii[t++]=null;var l=ii[t];ii[t++]=null;var r=ii[t];ii[t++]=null;var u=ii[t];if(ii[t++]=null,l!==null&&r!==null){var v=l.pending;v===null?r.next=r:(r.next=v.next,v.next=r),l.pending=r}u!==0&&_h(i,r,u)}}function or(e,t,i,l){ii[Ul++]=e,ii[Ul++]=t,ii[Ul++]=i,ii[Ul++]=l,nu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function iu(e,t,i,l){return or(e,t,i,l),sr(e)}function ol(e,t){return or(e,null,null,t),sr(e)}function _h(e,t,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var r=!1,u=e.return;u!==null;)u.childLanes|=i,l=u.alternate,l!==null&&(l.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(r=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,r&&t!==null&&(r=31-Be(i),e=u.hiddenUpdates,l=e[r],l===null?e[r]=[t]:l.push(t),t.lane=i|536870912),u):null}function sr(e){if(50<fs)throw fs=0,fd=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Bl={};function cx(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(e,t,i,l){return new cx(e,t,i,l)}function au(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Li(e,t){var i=e.alternate;return i===null?(i=Zn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function wh(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function rr(e,t,i,l,r,u){var v=0;if(l=e,typeof e=="function")au(e)&&(v=1);else if(typeof e=="string")v=mb(e,i,ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ue:return e=Zn(31,i,t,r),e.elementType=ue,e.lanes=u,e;case C:return sl(i.children,r,u,t);case k:v=8,r|=24;break;case M:return e=Zn(12,i,t,r|2),e.elementType=M,e.lanes=u,e;case J:return e=Zn(13,i,t,r),e.elementType=J,e.lanes=u,e;case Q:return e=Zn(19,i,t,r),e.elementType=Q,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:v=10;break e;case O:v=9;break e;case w:v=11;break e;case W:v=14;break e;case ce:v=16,l=null;break e}v=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=Zn(v,i,t,r),t.elementType=e,t.type=l,t.lanes=u,t}function sl(e,t,i,l){return e=Zn(7,e,l,t),e.lanes=i,e}function lu(e,t,i){return e=Zn(6,e,null,t),e.lanes=i,e}function Ah(e){var t=Zn(18,null,null,0);return t.stateNode=e,t}function ou(e,t,i){return t=Zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ch=new WeakMap;function ai(e,t){if(typeof e=="object"&&e!==null){var i=Ch.get(e);return i!==void 0?i:(t={value:e,source:t,stack:je(t)},Ch.set(e,t),t)}return{value:e,source:t,stack:je(t)}}var Yl=[],$l=0,cr=null,Xo=0,li=[],oi=0,Na=null,zi=1,ki="";function Xi(e,t){Yl[$l++]=Xo,Yl[$l++]=cr,cr=e,Xo=t}function Th(e,t,i){li[oi++]=zi,li[oi++]=ki,li[oi++]=Na,Na=e;var l=zi;e=ki;var r=32-Be(l)-1;l&=~(1<<r),i+=1;var u=32-Be(t)+r;if(30<u){var v=r-r%5;u=(l&(1<<v)-1).toString(32),l>>=v,r-=v,zi=1<<32-Be(t)+r|i<<r|l,ki=u+e}else zi=1<<u|i<<r|l,ki=e}function su(e){e.return!==null&&(Xi(e,1),Th(e,1,0))}function ru(e){for(;e===cr;)cr=Yl[--$l],Yl[$l]=null,Xo=Yl[--$l],Yl[$l]=null;for(;e===Na;)Na=li[--oi],li[oi]=null,ki=li[--oi],li[oi]=null,zi=li[--oi],li[oi]=null}function Dh(e,t){li[oi++]=zi,li[oi++]=ki,li[oi++]=Na,zi=t.id,ki=t.overflow,Na=e}var xn=null,Lt=null,ht=!1,Ea=null,si=!1,cu=Error(s(519));function _a(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zo(ai(t,e)),cu}function Mh(e){var t=e.stateNode,i=e.type,l=e.memoizedProps;switch(t[Kt]=e,t[bt]=l,i){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(i=0;i<ms.length;i++)st(ms[i],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),Ks(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),Ws(t,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||l.suppressHydrationWarning===!0||Ig(t.textContent,i)?(l.popover!=null&&(st("beforetoggle",t),st("toggle",t)),l.onScroll!=null&&st("scroll",t),l.onScrollEnd!=null&&st("scrollend",t),l.onClick!=null&&(t.onclick=bi),t=!0):t=!1,t||_a(e,!0)}function zh(e){for(xn=e.return;xn;)switch(xn.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:xn=xn.return}}function Vl(e){if(e!==xn)return!1;if(!ht)return zh(e),ht=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Cd(e.type,e.memoizedProps)),i=!i),i&&Lt&&_a(e),zh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Lt=np(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Lt=np(e)}else t===27?(t=Lt,Ga(e.type)?(e=kd,kd=null,Lt=e):Lt=t):Lt=xn?ci(e.stateNode.nextSibling):null;return!0}function rl(){Lt=xn=null,ht=!1}function uu(){var e=Ea;return e!==null&&(Gn===null?Gn=e:Gn.push.apply(Gn,e),Ea=null),e}function Zo(e){Ea===null?Ea=[e]:Ea.push(e)}var du=D(null),cl=null,Zi=null;function wa(e,t,i){de(du,t._currentValue),t._currentValue=i}function Ii(e){e._currentValue=du.current,V(du)}function fu(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function hu(e,t,i,l){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var u=r.dependencies;if(u!==null){var v=r.child;u=u.firstContext;e:for(;u!==null;){var E=u;u=r;for(var Y=0;Y<t.length;Y++)if(E.context===t[Y]){u.lanes|=i,E=u.alternate,E!==null&&(E.lanes|=i),fu(u.return,i,e),l||(v=null);break e}u=E.next}}else if(r.tag===18){if(v=r.return,v===null)throw Error(s(341));v.lanes|=i,u=v.alternate,u!==null&&(u.lanes|=i),fu(v,i,e),v=null}else v=r.child;if(v!==null)v.return=r;else for(v=r;v!==null;){if(v===e){v=null;break}if(r=v.sibling,r!==null){r.return=v.return,v=r;break}v=v.return}r=v}}function Ll(e,t,i,l){e=null;for(var r=t,u=!1;r!==null;){if(!u){if((r.flags&524288)!==0)u=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var v=r.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=r.type;Xn(r.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(r===ke.current){if(v=r.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(xs):e=[xs])}r=r.return}e!==null&&hu(t,e,i,l),t.flags|=262144}function ur(e){for(e=e.firstContext;e!==null;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ul(e){cl=e,Zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bn(e){return kh(cl,e)}function dr(e,t){return cl===null&&ul(e),kh(e,t)}function kh(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Zi===null){if(e===null)throw Error(s(308));Zi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Zi=Zi.next=t;return i}var ux=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},dx=n.unstable_scheduleCallback,fx=n.unstable_NormalPriority,ln={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mu(){return{controller:new ux,data:new Map,refCount:0}}function Io(e){e.refCount--,e.refCount===0&&dx(fx,function(){e.controller.abort()})}var Qo=null,gu=0,Xl=0,Zl=null;function hx(e,t){if(Qo===null){var i=Qo=[];gu=0,Xl=yd(),Zl={status:"pending",value:void 0,then:function(l){i.push(l)}}}return gu++,t.then(Oh,Oh),t}function Oh(){if(--gu===0&&Qo!==null){Zl!==null&&(Zl.status="fulfilled");var e=Qo;Qo=null,Xl=0,Zl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function mx(e,t){var i=[],l={status:"pending",value:null,reason:null,then:function(r){i.push(r)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var r=0;r<i.length;r++)(0,i[r])(t)},function(r){for(l.status="rejected",l.reason=r,r=0;r<i.length;r++)(0,i[r])(void 0)}),l}var Rh=N.S;N.S=function(e,t){vg=wt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&hx(e,t),Rh!==null&&Rh(e,t)};var dl=D(null);function pu(){var e=dl.current;return e!==null?e:Ot.pooledCache}function fr(e,t){t===null?de(dl,dl.current):de(dl,t.pool)}function qh(){var e=pu();return e===null?null:{parent:ln._currentValue,pool:e}}var Il=Error(s(460)),vu=Error(s(474)),hr=Error(s(542)),mr={then:function(){}};function jh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hh(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(bi,bi),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uh(e),e;default:if(typeof t.status=="string")t.then(bi,bi);else{if(e=Ot,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=l}},function(l){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uh(e),e}throw hl=t,Il}}function fl(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(hl=i,Il):i}}var hl=null;function Gh(){if(hl===null)throw Error(s(459));var e=hl;return hl=null,e}function Uh(e){if(e===Il||e===hr)throw Error(s(483))}var Ql=null,Ko=0;function gr(e){var t=Ko;return Ko+=1,Ql===null&&(Ql=[]),Hh(Ql,e,t)}function Jo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function pr(e,t){throw t.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Bh(e){function t(F,Z){if(e){var ae=F.deletions;ae===null?(F.deletions=[Z],F.flags|=16):ae.push(Z)}}function i(F,Z){if(!e)return null;for(;Z!==null;)t(F,Z),Z=Z.sibling;return null}function l(F){for(var Z=new Map;F!==null;)F.key!==null?Z.set(F.key,F):Z.set(F.index,F),F=F.sibling;return Z}function r(F,Z){return F=Li(F,Z),F.index=0,F.sibling=null,F}function u(F,Z,ae){return F.index=ae,e?(ae=F.alternate,ae!==null?(ae=ae.index,ae<Z?(F.flags|=67108866,Z):ae):(F.flags|=67108866,Z)):(F.flags|=1048576,Z)}function v(F){return e&&F.alternate===null&&(F.flags|=67108866),F}function E(F,Z,ae,Se){return Z===null||Z.tag!==6?(Z=lu(ae,F.mode,Se),Z.return=F,Z):(Z=r(Z,ae),Z.return=F,Z)}function Y(F,Z,ae,Se){var Ue=ae.type;return Ue===C?xe(F,Z,ae.props.children,Se,ae.key):Z!==null&&(Z.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ce&&fl(Ue)===Z.type)?(Z=r(Z,ae.props),Jo(Z,ae),Z.return=F,Z):(Z=rr(ae.type,ae.key,ae.props,null,F.mode,Se),Jo(Z,ae),Z.return=F,Z)}function le(F,Z,ae,Se){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ae.containerInfo||Z.stateNode.implementation!==ae.implementation?(Z=ou(ae,F.mode,Se),Z.return=F,Z):(Z=r(Z,ae.children||[]),Z.return=F,Z)}function xe(F,Z,ae,Se,Ue){return Z===null||Z.tag!==7?(Z=sl(ae,F.mode,Se,Ue),Z.return=F,Z):(Z=r(Z,ae),Z.return=F,Z)}function Ee(F,Z,ae){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=lu(""+Z,F.mode,ae),Z.return=F,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:return ae=rr(Z.type,Z.key,Z.props,null,F.mode,ae),Jo(ae,Z),ae.return=F,ae;case q:return Z=ou(Z,F.mode,ae),Z.return=F,Z;case ce:return Z=fl(Z),Ee(F,Z,ae)}if(B(Z)||me(Z))return Z=sl(Z,F.mode,ae,null),Z.return=F,Z;if(typeof Z.then=="function")return Ee(F,gr(Z),ae);if(Z.$$typeof===U)return Ee(F,dr(F,Z),ae);pr(F,Z)}return null}function re(F,Z,ae,Se){var Ue=Z!==null?Z.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ue!==null?null:E(F,Z,""+ae,Se);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case _:return ae.key===Ue?Y(F,Z,ae,Se):null;case q:return ae.key===Ue?le(F,Z,ae,Se):null;case ce:return ae=fl(ae),re(F,Z,ae,Se)}if(B(ae)||me(ae))return Ue!==null?null:xe(F,Z,ae,Se,null);if(typeof ae.then=="function")return re(F,Z,gr(ae),Se);if(ae.$$typeof===U)return re(F,Z,dr(F,ae),Se);pr(F,ae)}return null}function fe(F,Z,ae,Se,Ue){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return F=F.get(ae)||null,E(Z,F,""+Se,Ue);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case _:return F=F.get(Se.key===null?ae:Se.key)||null,Y(Z,F,Se,Ue);case q:return F=F.get(Se.key===null?ae:Se.key)||null,le(Z,F,Se,Ue);case ce:return Se=fl(Se),fe(F,Z,ae,Se,Ue)}if(B(Se)||me(Se))return F=F.get(ae)||null,xe(Z,F,Se,Ue,null);if(typeof Se.then=="function")return fe(F,Z,ae,gr(Se),Ue);if(Se.$$typeof===U)return fe(F,Z,ae,dr(Z,Se),Ue);pr(Z,Se)}return null}function qe(F,Z,ae,Se){for(var Ue=null,yt=null,Ge=Z,Je=Z=0,ct=null;Ge!==null&&Je<ae.length;Je++){Ge.index>Je?(ct=Ge,Ge=null):ct=Ge.sibling;var xt=re(F,Ge,ae[Je],Se);if(xt===null){Ge===null&&(Ge=ct);break}e&&Ge&&xt.alternate===null&&t(F,Ge),Z=u(xt,Z,Je),yt===null?Ue=xt:yt.sibling=xt,yt=xt,Ge=ct}if(Je===ae.length)return i(F,Ge),ht&&Xi(F,Je),Ue;if(Ge===null){for(;Je<ae.length;Je++)Ge=Ee(F,ae[Je],Se),Ge!==null&&(Z=u(Ge,Z,Je),yt===null?Ue=Ge:yt.sibling=Ge,yt=Ge);return ht&&Xi(F,Je),Ue}for(Ge=l(Ge);Je<ae.length;Je++)ct=fe(Ge,F,Je,ae[Je],Se),ct!==null&&(e&&ct.alternate!==null&&Ge.delete(ct.key===null?Je:ct.key),Z=u(ct,Z,Je),yt===null?Ue=ct:yt.sibling=ct,yt=ct);return e&&Ge.forEach(function(Va){return t(F,Va)}),ht&&Xi(F,Je),Ue}function Ye(F,Z,ae,Se){if(ae==null)throw Error(s(151));for(var Ue=null,yt=null,Ge=Z,Je=Z=0,ct=null,xt=ae.next();Ge!==null&&!xt.done;Je++,xt=ae.next()){Ge.index>Je?(ct=Ge,Ge=null):ct=Ge.sibling;var Va=re(F,Ge,xt.value,Se);if(Va===null){Ge===null&&(Ge=ct);break}e&&Ge&&Va.alternate===null&&t(F,Ge),Z=u(Va,Z,Je),yt===null?Ue=Va:yt.sibling=Va,yt=Va,Ge=ct}if(xt.done)return i(F,Ge),ht&&Xi(F,Je),Ue;if(Ge===null){for(;!xt.done;Je++,xt=ae.next())xt=Ee(F,xt.value,Se),xt!==null&&(Z=u(xt,Z,Je),yt===null?Ue=xt:yt.sibling=xt,yt=xt);return ht&&Xi(F,Je),Ue}for(Ge=l(Ge);!xt.done;Je++,xt=ae.next())xt=fe(Ge,F,Je,xt.value,Se),xt!==null&&(e&&xt.alternate!==null&&Ge.delete(xt.key===null?Je:xt.key),Z=u(xt,Z,Je),yt===null?Ue=xt:yt.sibling=xt,yt=xt);return e&&Ge.forEach(function(wb){return t(F,wb)}),ht&&Xi(F,Je),Ue}function zt(F,Z,ae,Se){if(typeof ae=="object"&&ae!==null&&ae.type===C&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case _:e:{for(var Ue=ae.key;Z!==null;){if(Z.key===Ue){if(Ue=ae.type,Ue===C){if(Z.tag===7){i(F,Z.sibling),Se=r(Z,ae.props.children),Se.return=F,F=Se;break e}}else if(Z.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ce&&fl(Ue)===Z.type){i(F,Z.sibling),Se=r(Z,ae.props),Jo(Se,ae),Se.return=F,F=Se;break e}i(F,Z);break}else t(F,Z);Z=Z.sibling}ae.type===C?(Se=sl(ae.props.children,F.mode,Se,ae.key),Se.return=F,F=Se):(Se=rr(ae.type,ae.key,ae.props,null,F.mode,Se),Jo(Se,ae),Se.return=F,F=Se)}return v(F);case q:e:{for(Ue=ae.key;Z!==null;){if(Z.key===Ue)if(Z.tag===4&&Z.stateNode.containerInfo===ae.containerInfo&&Z.stateNode.implementation===ae.implementation){i(F,Z.sibling),Se=r(Z,ae.children||[]),Se.return=F,F=Se;break e}else{i(F,Z);break}else t(F,Z);Z=Z.sibling}Se=ou(ae,F.mode,Se),Se.return=F,F=Se}return v(F);case ce:return ae=fl(ae),zt(F,Z,ae,Se)}if(B(ae))return qe(F,Z,ae,Se);if(me(ae)){if(Ue=me(ae),typeof Ue!="function")throw Error(s(150));return ae=Ue.call(ae),Ye(F,Z,ae,Se)}if(typeof ae.then=="function")return zt(F,Z,gr(ae),Se);if(ae.$$typeof===U)return zt(F,Z,dr(F,ae),Se);pr(F,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,Z!==null&&Z.tag===6?(i(F,Z.sibling),Se=r(Z,ae),Se.return=F,F=Se):(i(F,Z),Se=lu(ae,F.mode,Se),Se.return=F,F=Se),v(F)):i(F,Z)}return function(F,Z,ae,Se){try{Ko=0;var Ue=zt(F,Z,ae,Se);return Ql=null,Ue}catch(Ge){if(Ge===Il||Ge===hr)throw Ge;var yt=Zn(29,Ge,null,F.mode);return yt.lanes=Se,yt.return=F,yt}}}var ml=Bh(!0),Yh=Bh(!1),Aa=!1;function yu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ca(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Nt&2)!==0){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,t=sr(e),_h(e,null,i),t}return or(e,l,t,i),sr(e)}function Wo(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,ga(e,i)}}function bu(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var r=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?r=u=v:u=u.next=v,i=i.next}while(i!==null);u===null?r=u=t:u=u.next=t}else r=u=t;i={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Su=!1;function Fo(){if(Su){var e=Zl;if(e!==null)throw e}}function Po(e,t,i,l){Su=!1;var r=e.updateQueue;Aa=!1;var u=r.firstBaseUpdate,v=r.lastBaseUpdate,E=r.shared.pending;if(E!==null){r.shared.pending=null;var Y=E,le=Y.next;Y.next=null,v===null?u=le:v.next=le,v=Y;var xe=e.alternate;xe!==null&&(xe=xe.updateQueue,E=xe.lastBaseUpdate,E!==v&&(E===null?xe.firstBaseUpdate=le:E.next=le,xe.lastBaseUpdate=Y))}if(u!==null){var Ee=r.baseState;v=0,xe=le=Y=null,E=u;do{var re=E.lane&-536870913,fe=re!==E.lane;if(fe?(rt&re)===re:(l&re)===re){re!==0&&re===Xl&&(Su=!0),xe!==null&&(xe=xe.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var qe=e,Ye=E;re=t;var zt=i;switch(Ye.tag){case 1:if(qe=Ye.payload,typeof qe=="function"){Ee=qe.call(zt,Ee,re);break e}Ee=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Ye.payload,re=typeof qe=="function"?qe.call(zt,Ee,re):qe,re==null)break e;Ee=p({},Ee,re);break e;case 2:Aa=!0}}re=E.callback,re!==null&&(e.flags|=64,fe&&(e.flags|=8192),fe=r.callbacks,fe===null?r.callbacks=[re]:fe.push(re))}else fe={lane:re,tag:E.tag,payload:E.payload,callback:E.callback,next:null},xe===null?(le=xe=fe,Y=Ee):xe=xe.next=fe,v|=re;if(E=E.next,E===null){if(E=r.shared.pending,E===null)break;fe=E,E=fe.next,fe.next=null,r.lastBaseUpdate=fe,r.shared.pending=null}}while(!0);xe===null&&(Y=Ee),r.baseState=Y,r.firstBaseUpdate=le,r.lastBaseUpdate=xe,u===null&&(r.shared.lanes=0),Oa|=v,e.lanes=v,e.memoizedState=Ee}}function $h(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Vh(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)$h(i[e],t)}var Kl=D(null),vr=D(0);function Lh(e,t){e=na,de(vr,e),de(Kl,t),na=e|t.baseLanes}function Nu(){de(vr,na),de(Kl,Kl.current)}function Eu(){na=vr.current,V(Kl),V(vr)}var In=D(null),ri=null;function Da(e){var t=e.alternate;de(tn,tn.current&1),de(In,e),ri===null&&(t===null||Kl.current!==null||t.memoizedState!==null)&&(ri=e)}function _u(e){de(tn,tn.current),de(In,e),ri===null&&(ri=e)}function Xh(e){e.tag===22?(de(tn,tn.current),de(In,e),ri===null&&(ri=e)):Ma()}function Ma(){de(tn,tn.current),de(In,In.current)}function Qn(e){V(In),ri===e&&(ri=null),V(tn)}var tn=D(0);function yr(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Md(i)||zd(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qi=0,Ie=null,Dt=null,on=null,xr=!1,Jl=!1,gl=!1,br=0,es=0,Wl=null,gx=0;function Ft(){throw Error(s(321))}function wu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Xn(e[i],t[i]))return!1;return!0}function Au(e,t,i,l,r,u){return Qi=u,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Tm:Yu,gl=!1,u=i(l,r),gl=!1,Jl&&(u=Ih(t,i,l,r)),Zh(e),u}function Zh(e){N.H=is;var t=Dt!==null&&Dt.next!==null;if(Qi=0,on=Dt=Ie=null,xr=!1,es=0,Wl=null,t)throw Error(s(300));e===null||sn||(e=e.dependencies,e!==null&&ur(e)&&(sn=!0))}function Ih(e,t,i,l){Ie=e;var r=0;do{if(Jl&&(Wl=null),es=0,Jl=!1,25<=r)throw Error(s(301));if(r+=1,on=Dt=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}N.H=Dm,u=t(i,l)}while(Jl);return u}function px(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?ts(t):t,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(Ie.flags|=1024),t}function Cu(){var e=br!==0;return br=0,e}function Tu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Du(e){if(xr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xr=!1}Qi=0,on=Dt=Ie=null,Jl=!1,es=br=0,Wl=null}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Ie.memoizedState=on=e:on=on.next=e,on}function nn(){if(Dt===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=on===null?Ie.memoizedState:on.next;if(t!==null)on=t,Dt=e;else{if(e===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},on===null?Ie.memoizedState=on=e:on=on.next=e}return on}function Sr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ts(e){var t=es;return es+=1,Wl===null&&(Wl=[]),e=Hh(Wl,e,t),t=Ie,(on===null?t.memoizedState:on.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Tm:Yu),e}function Nr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ts(e);if(e.$$typeof===U)return bn(e)}throw Error(s(438,String(e)))}function Mu(e){var t=null,i=Ie.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Sr(),Ie.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),l=0;l<e;l++)i[l]=te;return t.index++,i}function Ki(e,t){return typeof t=="function"?t(e):t}function Er(e){var t=nn();return zu(t,Dt,e)}function zu(e,t,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var r=e.baseQueue,u=l.pending;if(u!==null){if(r!==null){var v=r.next;r.next=u.next,u.next=v}t.baseQueue=r=u,l.pending=null}if(u=e.baseState,r===null)e.memoizedState=u;else{t=r.next;var E=v=null,Y=null,le=t,xe=!1;do{var Ee=le.lane&-536870913;if(Ee!==le.lane?(rt&Ee)===Ee:(Qi&Ee)===Ee){var re=le.revertLane;if(re===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Ee===Xl&&(xe=!0);else if((Qi&re)===re){le=le.next,re===Xl&&(xe=!0);continue}else Ee={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Y===null?(E=Y=Ee,v=u):Y=Y.next=Ee,Ie.lanes|=re,Oa|=re;Ee=le.action,gl&&i(u,Ee),u=le.hasEagerState?le.eagerState:i(u,Ee)}else re={lane:Ee,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Y===null?(E=Y=re,v=u):Y=Y.next=re,Ie.lanes|=Ee,Oa|=Ee;le=le.next}while(le!==null&&le!==t);if(Y===null?v=u:Y.next=E,!Xn(u,e.memoizedState)&&(sn=!0,xe&&(i=Zl,i!==null)))throw i;e.memoizedState=u,e.baseState=v,e.baseQueue=Y,l.lastRenderedState=u}return r===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ku(e){var t=nn(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,r=i.pending,u=t.memoizedState;if(r!==null){i.pending=null;var v=r=r.next;do u=e(u,v.action),v=v.next;while(v!==r);Xn(u,t.memoizedState)||(sn=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,l]}function Qh(e,t,i){var l=Ie,r=nn(),u=ht;if(u){if(i===void 0)throw Error(s(407));i=i()}else i=t();var v=!Xn((Dt||r).memoizedState,i);if(v&&(r.memoizedState=i,sn=!0),r=r.queue,qu(Wh.bind(null,l,r,e),[e]),r.getSnapshot!==t||v||on!==null&&on.memoizedState.tag&1){if(l.flags|=2048,Fl(9,{destroy:void 0},Jh.bind(null,l,r,i,t),null),Ot===null)throw Error(s(349));u||(Qi&127)!==0||Kh(l,t,i)}return i}function Kh(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ie.updateQueue,t===null?(t=Sr(),Ie.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Jh(e,t,i,l){t.value=i,t.getSnapshot=l,Fh(t)&&Ph(e)}function Wh(e,t,i){return i(function(){Fh(t)&&Ph(e)})}function Fh(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Xn(e,i)}catch{return!0}}function Ph(e){var t=ol(e,2);t!==null&&Un(t,e,2)}function Ou(e){var t=Dn();if(typeof e=="function"){var i=e;if(e=i(),gl){be(!0);try{i()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:e},t}function em(e,t,i,l){return e.baseState=i,zu(e,Dt,typeof l=="function"?l:Ki)}function vx(e,t,i,l,r){if(Ar(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){u.listeners.push(v)}};N.T!==null?i(!0):u.isTransition=!1,l(u),i=t.pending,i===null?(u.next=t.pending=u,tm(t,u)):(u.next=i.next,t.pending=i.next=u)}}function tm(e,t){var i=t.action,l=t.payload,r=e.state;if(t.isTransition){var u=N.T,v={};N.T=v;try{var E=i(r,l),Y=N.S;Y!==null&&Y(v,E),nm(e,t,E)}catch(le){Ru(e,t,le)}finally{u!==null&&v.types!==null&&(u.types=v.types),N.T=u}}else try{u=i(r,l),nm(e,t,u)}catch(le){Ru(e,t,le)}}function nm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){im(e,t,l)},function(l){return Ru(e,t,l)}):im(e,t,i)}function im(e,t,i){t.status="fulfilled",t.value=i,am(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,tm(e,i)))}function Ru(e,t,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=i,am(t),t=t.next;while(t!==l)}e.action=null}function am(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lm(e,t){return t}function om(e,t){if(ht){var i=Ot.formState;if(i!==null){e:{var l=Ie;if(ht){if(Lt){t:{for(var r=Lt,u=si;r.nodeType!==8;){if(!u){r=null;break t}if(r=ci(r.nextSibling),r===null){r=null;break t}}u=r.data,r=u==="F!"||u==="F"?r:null}if(r){Lt=ci(r.nextSibling),l=r.data==="F!";break e}}_a(l)}l=!1}l&&(t=i[0])}}return i=Dn(),i.memoizedState=i.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lm,lastRenderedState:t},i.queue=l,i=wm.bind(null,Ie,l),l.dispatch=i,l=Ou(!1),u=Bu.bind(null,Ie,!1,l.queue),l=Dn(),r={state:t,dispatch:null,action:e,pending:null},l.queue=r,i=vx.bind(null,Ie,r,u,i),r.dispatch=i,l.memoizedState=e,[t,i,!1]}function sm(e){var t=nn();return rm(t,Dt,e)}function rm(e,t,i){if(t=zu(e,t,lm)[0],e=Er(Ki)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ts(t)}catch(v){throw v===Il?hr:v}else l=t;t=nn();var r=t.queue,u=r.dispatch;return i!==t.memoizedState&&(Ie.flags|=2048,Fl(9,{destroy:void 0},yx.bind(null,r,i),null)),[l,u,e]}function yx(e,t){e.action=t}function cm(e){var t=nn(),i=Dt;if(i!==null)return rm(t,i,e);nn(),t=t.memoizedState,i=nn();var l=i.queue.dispatch;return i.memoizedState=e,[t,l,!1]}function Fl(e,t,i,l){return e={tag:e,create:i,deps:l,inst:t,next:null},t=Ie.updateQueue,t===null&&(t=Sr(),Ie.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e),e}function um(){return nn().memoizedState}function _r(e,t,i,l){var r=Dn();Ie.flags|=e,r.memoizedState=Fl(1|t,{destroy:void 0},i,l===void 0?null:l)}function wr(e,t,i,l){var r=nn();l=l===void 0?null:l;var u=r.memoizedState.inst;Dt!==null&&l!==null&&wu(l,Dt.memoizedState.deps)?r.memoizedState=Fl(t,u,i,l):(Ie.flags|=e,r.memoizedState=Fl(1|t,u,i,l))}function dm(e,t){_r(8390656,8,e,t)}function qu(e,t){wr(2048,8,e,t)}function xx(e){Ie.flags|=4;var t=Ie.updateQueue;if(t===null)t=Sr(),Ie.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function fm(e){var t=nn().memoizedState;return xx({ref:t,nextImpl:e}),function(){if((Nt&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function hm(e,t){return wr(4,2,e,t)}function mm(e,t){return wr(4,4,e,t)}function gm(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pm(e,t,i){i=i!=null?i.concat([e]):null,wr(4,4,gm.bind(null,t,e),i)}function ju(){}function vm(e,t){var i=nn();t=t===void 0?null:t;var l=i.memoizedState;return t!==null&&wu(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function ym(e,t){var i=nn();t=t===void 0?null:t;var l=i.memoizedState;if(t!==null&&wu(t,l[1]))return l[0];if(l=e(),gl){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[l,t],l}function Hu(e,t,i){return i===void 0||(Qi&1073741824)!==0&&(rt&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=xg(),Ie.lanes|=e,Oa|=e,i)}function xm(e,t,i,l){return Xn(i,t)?i:Kl.current!==null?(e=Hu(e,i,l),Xn(e,t)||(sn=!0),e):(Qi&42)===0||(Qi&1073741824)!==0&&(rt&261930)===0?(sn=!0,e.memoizedState=i):(e=xg(),Ie.lanes|=e,Oa|=e,t)}function bm(e,t,i,l,r){var u=L.p;L.p=u!==0&&8>u?u:8;var v=N.T,E={};N.T=E,Bu(e,!1,t,i);try{var Y=r(),le=N.S;if(le!==null&&le(E,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var xe=mx(Y,l);ns(e,t,xe,Wn(e))}else ns(e,t,l,Wn(e))}catch(Ee){ns(e,t,{then:function(){},status:"rejected",reason:Ee},Wn())}finally{L.p=u,v!==null&&E.types!==null&&(v.types=E.types),N.T=v}}function bx(){}function Gu(e,t,i,l){if(e.tag!==5)throw Error(s(476));var r=Sm(e).queue;bm(e,r,t,ne,i===null?bx:function(){return Nm(e),i(l)})}function Sm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ne},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Nm(e){var t=Sm(e);t.next===null&&(t=e.alternate.memoizedState),ns(e,t.next.queue,{},Wn())}function Uu(){return bn(xs)}function Em(){return nn().memoizedState}function _m(){return nn().memoizedState}function Sx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Wn();e=Ca(i);var l=Ta(t,e,i);l!==null&&(Un(l,t,i),Wo(l,t,i)),t={cache:mu()},e.payload=t;return}t=t.return}}function Nx(e,t,i){var l=Wn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ar(e)?Am(t,i):(i=iu(e,t,i,l),i!==null&&(Un(i,e,l),Cm(i,t,l)))}function wm(e,t,i){var l=Wn();ns(e,t,i,l)}function ns(e,t,i,l){var r={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ar(e))Am(t,r);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var v=t.lastRenderedState,E=u(v,i);if(r.hasEagerState=!0,r.eagerState=E,Xn(E,v))return or(e,t,r,0),Ot===null&&lr(),!1}catch{}if(i=iu(e,t,r,l),i!==null)return Un(i,e,l),Cm(i,t,l),!0}return!1}function Bu(e,t,i,l){if(l={lane:2,revertLane:yd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ar(e)){if(t)throw Error(s(479))}else t=iu(e,i,l,2),t!==null&&Un(t,e,2)}function Ar(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Am(e,t){Jl=xr=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Cm(e,t,i){if((i&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,ga(e,i)}}var is={readContext:bn,use:Nr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};is.useEffectEvent=Ft;var Tm={readContext:bn,use:Nr,useCallback:function(e,t){return Dn().memoizedState=[e,t===void 0?null:t],e},useContext:bn,useEffect:dm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,_r(4194308,4,gm.bind(null,t,e),i)},useLayoutEffect:function(e,t){return _r(4194308,4,e,t)},useInsertionEffect:function(e,t){_r(4,2,e,t)},useMemo:function(e,t){var i=Dn();t=t===void 0?null:t;var l=e();if(gl){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[l,t],l},useReducer:function(e,t,i){var l=Dn();if(i!==void 0){var r=i(t);if(gl){be(!0);try{i(t)}finally{be(!1)}}}else r=t;return l.memoizedState=l.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=Nx.bind(null,Ie,e),[l.memoizedState,e]},useRef:function(e){var t=Dn();return e={current:e},t.memoizedState=e},useState:function(e){e=Ou(e);var t=e.queue,i=wm.bind(null,Ie,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:ju,useDeferredValue:function(e,t){var i=Dn();return Hu(i,e,t)},useTransition:function(){var e=Ou(!1);return e=bm.bind(null,Ie,e.queue,!0,!1),Dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var l=Ie,r=Dn();if(ht){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Ot===null)throw Error(s(349));(rt&127)!==0||Kh(l,t,i)}r.memoizedState=i;var u={value:i,getSnapshot:t};return r.queue=u,dm(Wh.bind(null,l,u,e),[e]),l.flags|=2048,Fl(9,{destroy:void 0},Jh.bind(null,l,u,i,t),null),i},useId:function(){var e=Dn(),t=Ot.identifierPrefix;if(ht){var i=ki,l=zi;i=(l&~(1<<32-Be(l)-1)).toString(32)+i,t="_"+t+"R_"+i,i=br++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=gx++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Uu,useFormState:om,useActionState:om,useOptimistic:function(e){var t=Dn();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Bu.bind(null,Ie,!0,i),i.dispatch=t,[e,t]},useMemoCache:Mu,useCacheRefresh:function(){return Dn().memoizedState=Sx.bind(null,Ie)},useEffectEvent:function(e){var t=Dn(),i={impl:e};return t.memoizedState=i,function(){if((Nt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Yu={readContext:bn,use:Nr,useCallback:vm,useContext:bn,useEffect:qu,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:mm,useMemo:ym,useReducer:Er,useRef:um,useState:function(){return Er(Ki)},useDebugValue:ju,useDeferredValue:function(e,t){var i=nn();return xm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=Er(Ki)[0],t=nn().memoizedState;return[typeof e=="boolean"?e:ts(e),t]},useSyncExternalStore:Qh,useId:Em,useHostTransitionStatus:Uu,useFormState:sm,useActionState:sm,useOptimistic:function(e,t){var i=nn();return em(i,Dt,e,t)},useMemoCache:Mu,useCacheRefresh:_m};Yu.useEffectEvent=fm;var Dm={readContext:bn,use:Nr,useCallback:vm,useContext:bn,useEffect:qu,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:mm,useMemo:ym,useReducer:ku,useRef:um,useState:function(){return ku(Ki)},useDebugValue:ju,useDeferredValue:function(e,t){var i=nn();return Dt===null?Hu(i,e,t):xm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=ku(Ki)[0],t=nn().memoizedState;return[typeof e=="boolean"?e:ts(e),t]},useSyncExternalStore:Qh,useId:Em,useHostTransitionStatus:Uu,useFormState:cm,useActionState:cm,useOptimistic:function(e,t){var i=nn();return Dt!==null?em(i,Dt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:_m};Dm.useEffectEvent=fm;function $u(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:p({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Vu={enqueueSetState:function(e,t,i){e=e._reactInternals;var l=Wn(),r=Ca(l);r.payload=t,i!=null&&(r.callback=i),t=Ta(e,r,l),t!==null&&(Un(t,e,l),Wo(t,e,l))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=Wn(),r=Ca(l);r.tag=1,r.payload=t,i!=null&&(r.callback=i),t=Ta(e,r,l),t!==null&&(Un(t,e,l),Wo(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Wn(),l=Ca(i);l.tag=2,t!=null&&(l.callback=t),t=Ta(e,l,i),t!==null&&(Un(t,e,i),Wo(t,e,i))}};function Mm(e,t,i,l,r,u,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,u,v):t.prototype&&t.prototype.isPureReactComponent?!Vo(i,l)||!Vo(r,u):!0}function zm(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&Vu.enqueueReplaceState(t,t.state,null)}function pl(e,t){var i=t;if("ref"in t){i={};for(var l in t)l!=="ref"&&(i[l]=t[l])}if(e=e.defaultProps){i===t&&(i=p({},i));for(var r in e)i[r]===void 0&&(i[r]=e[r])}return i}function km(e){ar(e)}function Om(e){console.error(e)}function Rm(e){ar(e)}function Cr(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function qm(e,t,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Lu(e,t,i){return i=Ca(i),i.tag=3,i.payload={element:null},i.callback=function(){Cr(e,t)},i}function jm(e){return e=Ca(e),e.tag=3,e}function Hm(e,t,i,l){var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var u=l.value;e.payload=function(){return r(u)},e.callback=function(){qm(t,i,l)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){qm(t,i,l),typeof r!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function Ex(e,t,i,l,r){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=i.alternate,t!==null&&Ll(t,i,r,!0),i=In.current,i!==null){switch(i.tag){case 31:case 13:return ri===null?Ur():i.alternate===null&&Pt===0&&(Pt=3),i.flags&=-257,i.flags|=65536,i.lanes=r,l===mr?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([l]):t.add(l),gd(e,l,r)),!1;case 22:return i.flags|=65536,l===mr?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([l]):i.add(l)),gd(e,l,r)),!1}throw Error(s(435,i.tag))}return gd(e,l,r),Ur(),!1}if(ht)return t=In.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,l!==cu&&(e=Error(s(422),{cause:l}),Zo(ai(e,i)))):(l!==cu&&(t=Error(s(423),{cause:l}),Zo(ai(t,i))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,l=ai(l,i),r=Lu(e.stateNode,l,r),bu(e,r),Pt!==4&&(Pt=2)),!1;var u=Error(s(520),{cause:l});if(u=ai(u,i),ds===null?ds=[u]:ds.push(u),Pt!==4&&(Pt=2),t===null)return!0;l=ai(l,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=r&-r,i.lanes|=e,e=Lu(i.stateNode,l,e),bu(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ra===null||!Ra.has(u))))return i.flags|=65536,r&=-r,i.lanes|=r,r=jm(r),Hm(r,e,i,l),bu(i,r),!1}i=i.return}while(i!==null);return!1}var Xu=Error(s(461)),sn=!1;function Sn(e,t,i,l){t.child=e===null?Yh(t,null,i,l):ml(t,e.child,i,l)}function Gm(e,t,i,l,r){i=i.render;var u=t.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return ul(t),l=Au(e,t,i,v,u,r),E=Cu(),e!==null&&!sn?(Tu(e,t,r),Ji(e,t,r)):(ht&&E&&su(t),t.flags|=1,Sn(e,t,l,r),t.child)}function Um(e,t,i,l,r){if(e===null){var u=i.type;return typeof u=="function"&&!au(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,Bm(e,t,u,l,r)):(e=rr(i.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Pu(e,r)){var v=u.memoizedProps;if(i=i.compare,i=i!==null?i:Vo,i(v,l)&&e.ref===t.ref)return Ji(e,t,r)}return t.flags|=1,e=Li(u,l),e.ref=t.ref,e.return=t,t.child=e}function Bm(e,t,i,l,r){if(e!==null){var u=e.memoizedProps;if(Vo(u,l)&&e.ref===t.ref)if(sn=!1,t.pendingProps=l=u,Pu(e,r))(e.flags&131072)!==0&&(sn=!0);else return t.lanes=e.lanes,Ji(e,t,r)}return Zu(e,t,i,l,r)}function Ym(e,t,i,l){var r=l.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(l=t.child=e.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;l=r&~u}else l=0,t.child=null;return $m(e,t,u,i,l)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&fr(t,u!==null?u.cachePool:null),u!==null?Lh(t,u):Nu(),Xh(t);else return l=t.lanes=536870912,$m(e,t,u!==null?u.baseLanes|i:i,i,l)}else u!==null?(fr(t,u.cachePool),Lh(t,u),Ma(),t.memoizedState=null):(e!==null&&fr(t,null),Nu(),Ma());return Sn(e,t,r,i),t.child}function as(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function $m(e,t,i,l,r){var u=pu();return u=u===null?null:{parent:ln._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&fr(t,null),Nu(),Xh(t),e!==null&&Ll(e,t,l,!0),t.childLanes=r,null}function Tr(e,t){return t=Mr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Vm(e,t,i){return ml(t,e.child,null,i),e=Tr(t,t.pendingProps),e.flags|=2,Qn(t),t.memoizedState=null,e}function _x(e,t,i){var l=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ht){if(l.mode==="hidden")return e=Tr(t,l),t.lanes=536870912,as(null,e);if(_u(t),(e=Lt)?(e=tp(e,si),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Na!==null?{id:zi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},i=Ah(e),i.return=t,t.child=i,xn=t,Lt=null)):e=null,e===null)throw _a(t);return t.lanes=536870912,null}return Tr(t,l)}var u=e.memoizedState;if(u!==null){var v=u.dehydrated;if(_u(t),r)if(t.flags&256)t.flags&=-257,t=Vm(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(sn||Ll(e,t,i,!1),r=(i&e.childLanes)!==0,sn||r){if(l=Ot,l!==null&&(v=pa(l,i),v!==0&&v!==u.retryLane))throw u.retryLane=v,ol(e,v),Un(l,e,v),Xu;Ur(),t=Vm(e,t,i)}else e=u.treeContext,Lt=ci(v.nextSibling),xn=t,ht=!0,Ea=null,si=!1,e!==null&&Dh(t,e),t=Tr(t,l),t.flags|=4096;return t}return e=Li(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Dr(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Zu(e,t,i,l,r){return ul(t),i=Au(e,t,i,l,void 0,r),l=Cu(),e!==null&&!sn?(Tu(e,t,r),Ji(e,t,r)):(ht&&l&&su(t),t.flags|=1,Sn(e,t,i,r),t.child)}function Lm(e,t,i,l,r,u){return ul(t),t.updateQueue=null,i=Ih(t,l,i,r),Zh(e),l=Cu(),e!==null&&!sn?(Tu(e,t,u),Ji(e,t,u)):(ht&&l&&su(t),t.flags|=1,Sn(e,t,i,u),t.child)}function Xm(e,t,i,l,r){if(ul(t),t.stateNode===null){var u=Bl,v=i.contextType;typeof v=="object"&&v!==null&&(u=bn(v)),u=new i(l,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Vu,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=l,u.state=t.memoizedState,u.refs={},yu(t),v=i.contextType,u.context=typeof v=="object"&&v!==null?bn(v):Bl,u.state=t.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&($u(t,i,v,l),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(v=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),v!==u.state&&Vu.enqueueReplaceState(u,u.state,null),Po(t,l,u,r),Fo(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){u=t.stateNode;var E=t.memoizedProps,Y=pl(i,E);u.props=Y;var le=u.context,xe=i.contextType;v=Bl,typeof xe=="object"&&xe!==null&&(v=bn(xe));var Ee=i.getDerivedStateFromProps;xe=typeof Ee=="function"||typeof u.getSnapshotBeforeUpdate=="function",E=t.pendingProps!==E,xe||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(E||le!==v)&&zm(t,u,l,v),Aa=!1;var re=t.memoizedState;u.state=re,Po(t,l,u,r),Fo(),le=t.memoizedState,E||re!==le||Aa?(typeof Ee=="function"&&($u(t,i,Ee,l),le=t.memoizedState),(Y=Aa||Mm(t,i,Y,l,re,le,v))?(xe||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=le),u.props=l,u.state=le,u.context=v,l=Y):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{u=t.stateNode,xu(e,t),v=t.memoizedProps,xe=pl(i,v),u.props=xe,Ee=t.pendingProps,re=u.context,le=i.contextType,Y=Bl,typeof le=="object"&&le!==null&&(Y=bn(le)),E=i.getDerivedStateFromProps,(le=typeof E=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v!==Ee||re!==Y)&&zm(t,u,l,Y),Aa=!1,re=t.memoizedState,u.state=re,Po(t,l,u,r),Fo();var fe=t.memoizedState;v!==Ee||re!==fe||Aa||e!==null&&e.dependencies!==null&&ur(e.dependencies)?(typeof E=="function"&&($u(t,i,E,l),fe=t.memoizedState),(xe=Aa||Mm(t,i,xe,l,re,fe,Y)||e!==null&&e.dependencies!==null&&ur(e.dependencies))?(le||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,fe,Y),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,fe,Y)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||v===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=fe),u.props=l,u.state=fe,u.context=Y,l=xe):(typeof u.componentDidUpdate!="function"||v===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),l=!1)}return u=l,Dr(e,t),l=(t.flags&128)!==0,u||l?(u=t.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&l?(t.child=ml(t,e.child,null,r),t.child=ml(t,null,i,r)):Sn(e,t,i,r),t.memoizedState=u.state,e=t.child):e=Ji(e,t,r),e}function Zm(e,t,i,l){return rl(),t.flags|=256,Sn(e,t,i,l),t.child}var Iu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qu(e){return{baseLanes:e,cachePool:qh()}}function Ku(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Jn),e}function Im(e,t,i){var l=t.pendingProps,r=!1,u=(t.flags&128)!==0,v;if((v=u)||(v=e!==null&&e.memoizedState===null?!1:(tn.current&2)!==0),v&&(r=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(ht){if(r?Da(t):Ma(),(e=Lt)?(e=tp(e,si),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Na!==null?{id:zi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},i=Ah(e),i.return=t,t.child=i,xn=t,Lt=null)):e=null,e===null)throw _a(t);return zd(e)?t.lanes=32:t.lanes=536870912,null}var E=l.children;return l=l.fallback,r?(Ma(),r=t.mode,E=Mr({mode:"hidden",children:E},r),l=sl(l,r,i,null),E.return=t,l.return=t,E.sibling=l,t.child=E,l=t.child,l.memoizedState=Qu(i),l.childLanes=Ku(e,v,i),t.memoizedState=Iu,as(null,l)):(Da(t),Ju(t,E))}var Y=e.memoizedState;if(Y!==null&&(E=Y.dehydrated,E!==null)){if(u)t.flags&256?(Da(t),t.flags&=-257,t=Wu(e,t,i)):t.memoizedState!==null?(Ma(),t.child=e.child,t.flags|=128,t=null):(Ma(),E=l.fallback,r=t.mode,l=Mr({mode:"visible",children:l.children},r),E=sl(E,r,i,null),E.flags|=2,l.return=t,E.return=t,l.sibling=E,t.child=l,ml(t,e.child,null,i),l=t.child,l.memoizedState=Qu(i),l.childLanes=Ku(e,v,i),t.memoizedState=Iu,t=as(null,l));else if(Da(t),zd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var le=v.dgst;v=le,l=Error(s(419)),l.stack="",l.digest=v,Zo({value:l,source:null,stack:null}),t=Wu(e,t,i)}else if(sn||Ll(e,t,i,!1),v=(i&e.childLanes)!==0,sn||v){if(v=Ot,v!==null&&(l=pa(v,i),l!==0&&l!==Y.retryLane))throw Y.retryLane=l,ol(e,l),Un(v,e,l),Xu;Md(E)||Ur(),t=Wu(e,t,i)}else Md(E)?(t.flags|=192,t.child=e.child,t=null):(e=Y.treeContext,Lt=ci(E.nextSibling),xn=t,ht=!0,Ea=null,si=!1,e!==null&&Dh(t,e),t=Ju(t,l.children),t.flags|=4096);return t}return r?(Ma(),E=l.fallback,r=t.mode,Y=e.child,le=Y.sibling,l=Li(Y,{mode:"hidden",children:l.children}),l.subtreeFlags=Y.subtreeFlags&65011712,le!==null?E=Li(le,E):(E=sl(E,r,i,null),E.flags|=2),E.return=t,l.return=t,l.sibling=E,t.child=l,as(null,l),l=t.child,E=e.child.memoizedState,E===null?E=Qu(i):(r=E.cachePool,r!==null?(Y=ln._currentValue,r=r.parent!==Y?{parent:Y,pool:Y}:r):r=qh(),E={baseLanes:E.baseLanes|i,cachePool:r}),l.memoizedState=E,l.childLanes=Ku(e,v,i),t.memoizedState=Iu,as(e.child,l)):(Da(t),i=e.child,e=i.sibling,i=Li(i,{mode:"visible",children:l.children}),i.return=t,i.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=i,t.memoizedState=null,i)}function Ju(e,t){return t=Mr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Mr(e,t){return e=Zn(22,e,null,t),e.lanes=0,e}function Wu(e,t,i){return ml(t,e.child,null,i),e=Ju(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qm(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),fu(e.return,t,i)}function Fu(e,t,i,l,r,u){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:r,treeForkCount:u}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=i,v.tailMode=r,v.treeForkCount=u)}function Km(e,t,i){var l=t.pendingProps,r=l.revealOrder,u=l.tail;l=l.children;var v=tn.current,E=(v&2)!==0;if(E?(v=v&1|2,t.flags|=128):v&=1,de(tn,v),Sn(e,t,l,i),l=ht?Xo:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qm(e,i,t);else if(e.tag===19)Qm(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&yr(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Fu(t,!1,r,i,u,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&yr(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Fu(t,!0,i,null,u,l);break;case"together":Fu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Ji(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Ll(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Li(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Li(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Pu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ur(e)))}function wx(e,t,i){switch(t.tag){case 3:Re(t,t.stateNode.containerInfo),wa(t,ln,e.memoizedState.cache),rl();break;case 27:case 5:$e(t);break;case 4:Re(t,t.stateNode.containerInfo);break;case 10:wa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,_u(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Da(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Im(e,t,i):(Da(t),e=Ji(e,t,i),e!==null?e.sibling:null);Da(t);break;case 19:var r=(e.flags&128)!==0;if(l=(i&t.childLanes)!==0,l||(Ll(e,t,i,!1),l=(i&t.childLanes)!==0),r){if(l)return Km(e,t,i);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),de(tn,tn.current),l)break;return null;case 22:return t.lanes=0,Ym(e,t,i,t.pendingProps);case 24:wa(t,ln,e.memoizedState.cache)}return Ji(e,t,i)}function Jm(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)sn=!0;else{if(!Pu(e,i)&&(t.flags&128)===0)return sn=!1,wx(e,t,i);sn=(e.flags&131072)!==0}else sn=!1,ht&&(t.flags&1048576)!==0&&Th(t,Xo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=fl(t.elementType),t.type=e,typeof e=="function")au(e)?(l=pl(e,l),t.tag=1,t=Xm(null,t,e,l,i)):(t.tag=0,t=Zu(null,t,e,l,i));else{if(e!=null){var r=e.$$typeof;if(r===w){t.tag=11,t=Gm(null,t,e,l,i);break e}else if(r===W){t.tag=14,t=Um(null,t,e,l,i);break e}}throw t=z(e)||e,Error(s(306,t,""))}}return t;case 0:return Zu(e,t,t.type,t.pendingProps,i);case 1:return l=t.type,r=pl(l,t.pendingProps),Xm(e,t,l,r,i);case 3:e:{if(Re(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var u=t.memoizedState;r=u.element,xu(e,t),Po(t,l,null,i);var v=t.memoizedState;if(l=v.cache,wa(t,ln,l),l!==u.cache&&hu(t,[ln],i,!0),Fo(),l=v.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Zm(e,t,l,i);break e}else if(l!==r){r=ai(Error(s(424)),t),Zo(r),t=Zm(e,t,l,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Lt=ci(e.firstChild),xn=t,ht=!0,Ea=null,si=!0,i=Yh(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(rl(),l===r){t=Ji(e,t,i);break e}Sn(e,t,l,i)}t=t.child}return t;case 26:return Dr(e,t),e===null?(i=sp(t.type,null,t.pendingProps,null))?t.memoizedState=i:ht||(i=t.type,e=t.pendingProps,l=Zr(Ce.current).createElement(i),l[Kt]=t,l[bt]=e,Nn(l,i,e),Jt(l),t.stateNode=l):t.memoizedState=sp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $e(t),e===null&&ht&&(l=t.stateNode=ap(t.type,t.pendingProps,Ce.current),xn=t,si=!0,r=Lt,Ga(t.type)?(kd=r,Lt=ci(l.firstChild)):Lt=r),Sn(e,t,t.pendingProps.children,i),Dr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ht&&((r=l=Lt)&&(l=tb(l,t.type,t.pendingProps,si),l!==null?(t.stateNode=l,xn=t,Lt=ci(l.firstChild),si=!1,r=!0):r=!1),r||_a(t)),$e(t),r=t.type,u=t.pendingProps,v=e!==null?e.memoizedProps:null,l=u.children,Cd(r,u)?l=null:v!==null&&Cd(r,v)&&(t.flags|=32),t.memoizedState!==null&&(r=Au(e,t,px,null,null,i),xs._currentValue=r),Dr(e,t),Sn(e,t,l,i),t.child;case 6:return e===null&&ht&&((e=i=Lt)&&(i=nb(i,t.pendingProps,si),i!==null?(t.stateNode=i,xn=t,Lt=null,e=!0):e=!1),e||_a(t)),null;case 13:return Im(e,t,i);case 4:return Re(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ml(t,null,l,i):Sn(e,t,l,i),t.child;case 11:return Gm(e,t,t.type,t.pendingProps,i);case 7:return Sn(e,t,t.pendingProps,i),t.child;case 8:return Sn(e,t,t.pendingProps.children,i),t.child;case 12:return Sn(e,t,t.pendingProps.children,i),t.child;case 10:return l=t.pendingProps,wa(t,t.type,l.value),Sn(e,t,l.children,i),t.child;case 9:return r=t.type._context,l=t.pendingProps.children,ul(t),r=bn(r),l=l(r),t.flags|=1,Sn(e,t,l,i),t.child;case 14:return Um(e,t,t.type,t.pendingProps,i);case 15:return Bm(e,t,t.type,t.pendingProps,i);case 19:return Km(e,t,i);case 31:return _x(e,t,i);case 22:return Ym(e,t,i,t.pendingProps);case 24:return ul(t),l=bn(ln),e===null?(r=pu(),r===null&&(r=Ot,u=mu(),r.pooledCache=u,u.refCount++,u!==null&&(r.pooledCacheLanes|=i),r=u),t.memoizedState={parent:l,cache:r},yu(t),wa(t,ln,r)):((e.lanes&i)!==0&&(xu(e,t),Po(t,null,null,i),Fo()),r=e.memoizedState,u=t.memoizedState,r.parent!==l?(r={parent:l,cache:l},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),wa(t,ln,l)):(l=u.cache,wa(t,ln,l),l!==r.cache&&hu(t,[ln],i,!0))),Sn(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Wi(e){e.flags|=4}function ed(e,t,i,l,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Eg())e.flags|=8192;else throw hl=mr,vu}else e.flags&=-16777217}function Wm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!fp(t))if(Eg())e.flags|=8192;else throw hl=mr,vu}function zr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Bi():536870912,e.lanes|=t,no|=t)}function ls(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var r=e.child;r!==null;)i|=r.lanes|r.childLanes,l|=r.subtreeFlags&65011712,l|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)i|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function Ax(e,t,i){var l=t.pendingProps;switch(ru(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(t),null;case 1:return Xt(t),null;case 3:return i=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Ii(ln),Oe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Vl(t)?Wi(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,uu())),Xt(t),null;case 26:var r=t.type,u=t.memoizedState;return e===null?(Wi(t),u!==null?(Xt(t),Wm(t,u)):(Xt(t),ed(t,r,null,l,i))):u?u!==e.memoizedState?(Wi(t),Xt(t),Wm(t,u)):(Xt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Wi(t),Xt(t),ed(t,r,e,l,i)),null;case 27:if(at(t),i=Ce.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Wi(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Xt(t),null}e=ge.current,Vl(t)?Mh(t):(e=ap(r,l,i),t.stateNode=e,Wi(t))}return Xt(t),null;case 5:if(at(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Wi(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Xt(t),null}if(u=ge.current,Vl(t))Mh(t);else{var v=Zr(Ce.current);switch(u){case 1:u=v.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:u=v.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":u=v.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":u=v.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":u=v.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?v.createElement(r,{is:l.is}):v.createElement(r)}}u[Kt]=t,u[bt]=l;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)u.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=u;e:switch(Nn(u,r,l),r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Wi(t)}}return Xt(t),ed(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Wi(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=Ce.current,Vl(t)){if(e=t.stateNode,i=t.memoizedProps,l=null,r=xn,r!==null)switch(r.tag){case 27:case 5:l=r.memoizedProps}e[Kt]=t,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Ig(e.nodeValue,i)),e||_a(t,!0)}else e=Zr(e).createTextNode(l),e[Kt]=t,t.stateNode=e}return Xt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(l=Vl(t),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Kt]=t}else rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xt(t),e=!1}else i=uu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Qn(t),t):(Qn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Xt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Vl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!r)throw Error(s(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));r[Kt]=t}else rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xt(t),r=!1}else r=uu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Qn(t),t):(Qn(t),null)}return Qn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=t.child,r=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(r=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==r&&(l.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),zr(t,t.updateQueue),Xt(t),null);case 4:return Oe(),e===null&&Nd(t.stateNode.containerInfo),Xt(t),null;case 10:return Ii(t.type),Xt(t),null;case 19:if(V(tn),l=t.memoizedState,l===null)return Xt(t),null;if(r=(t.flags&128)!==0,u=l.rendering,u===null)if(r)ls(l,!1);else{if(Pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=yr(e),u!==null){for(t.flags|=128,ls(l,!1),e=u.updateQueue,t.updateQueue=e,zr(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)wh(i,e),i=i.sibling;return de(tn,tn.current&1|2),ht&&Xi(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&wt()>jr&&(t.flags|=128,r=!0,ls(l,!1),t.lanes=4194304)}else{if(!r)if(e=yr(u),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,zr(t,e),ls(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!ht)return Xt(t),null}else 2*wt()-l.renderingStartTime>jr&&i!==536870912&&(t.flags|=128,r=!0,ls(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=wt(),e.sibling=null,i=tn.current,de(tn,r?i&1|2:i&1),ht&&Xi(t,l.treeForkCount),e):(Xt(t),null);case 22:case 23:return Qn(t),Eu(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(i&536870912)!==0&&(t.flags&128)===0&&(Xt(t),t.subtreeFlags&6&&(t.flags|=8192)):Xt(t),i=t.updateQueue,i!==null&&zr(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==i&&(t.flags|=2048),e!==null&&V(dl),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ii(ln),Xt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Cx(e,t){switch(ru(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ii(ln),Oe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return at(t),null;case 31:if(t.memoizedState!==null){if(Qn(t),t.alternate===null)throw Error(s(340));rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(tn),null;case 4:return Oe(),null;case 10:return Ii(t.type),null;case 22:case 23:return Qn(t),Eu(),e!==null&&V(dl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ii(ln),null;case 25:return null;default:return null}}function Fm(e,t){switch(ru(t),t.tag){case 3:Ii(ln),Oe();break;case 26:case 27:case 5:at(t);break;case 4:Oe();break;case 31:t.memoizedState!==null&&Qn(t);break;case 13:Qn(t);break;case 19:V(tn);break;case 10:Ii(t.type);break;case 22:case 23:Qn(t),Eu(),e!==null&&V(dl);break;case 24:Ii(ln)}}function os(e,t){try{var i=t.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var r=l.next;i=r;do{if((i.tag&e)===e){l=void 0;var u=i.create,v=i.inst;l=u(),v.destroy=l}i=i.next}while(i!==r)}}catch(E){Ct(t,t.return,E)}}function za(e,t,i){try{var l=t.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var u=r.next;l=u;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,r=t;var Y=i,le=E;try{le()}catch(xe){Ct(r,Y,xe)}}}l=l.next}while(l!==u)}}catch(xe){Ct(t,t.return,xe)}}function Pm(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Vh(t,i)}catch(l){Ct(e,e.return,l)}}}function eg(e,t,i){i.props=pl(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){Ct(e,t,l)}}function ss(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(r){Ct(e,t,r)}}function Oi(e,t){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(r){Ct(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(r){Ct(e,t,r)}else i.current=null}function tg(e){var t=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(r){Ct(e,e.return,r)}}function td(e,t,i){try{var l=e.stateNode;Kx(l,e.type,i,t),l[bt]=t}catch(r){Ct(e,e.return,r)}}function ng(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ga(e.type)||e.tag===4}function nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ng(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ga(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function id(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=bi));else if(l!==4&&(l===27&&Ga(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(id(e,t,i),e=e.sibling;e!==null;)id(e,t,i),e=e.sibling}function kr(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(l===27&&Ga(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(kr(e,t,i),e=e.sibling;e!==null;)kr(e,t,i),e=e.sibling}function ig(e){var t=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Nn(t,l,i),t[Kt]=e,t[bt]=i}catch(u){Ct(e,e.return,u)}}var Fi=!1,rn=!1,ad=!1,ag=typeof WeakSet=="function"?WeakSet:Set,mn=null;function Tx(e,t){if(e=e.containerInfo,wd=Pr,e=ph(e),Wc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var r=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var v=0,E=-1,Y=-1,le=0,xe=0,Ee=e,re=null;t:for(;;){for(var fe;Ee!==i||r!==0&&Ee.nodeType!==3||(E=v+r),Ee!==u||l!==0&&Ee.nodeType!==3||(Y=v+l),Ee.nodeType===3&&(v+=Ee.nodeValue.length),(fe=Ee.firstChild)!==null;)re=Ee,Ee=fe;for(;;){if(Ee===e)break t;if(re===i&&++le===r&&(E=v),re===u&&++xe===l&&(Y=v),(fe=Ee.nextSibling)!==null)break;Ee=re,re=Ee.parentNode}Ee=fe}i=E===-1||Y===-1?null:{start:E,end:Y}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ad={focusedElem:e,selectionRange:i},Pr=!1,mn=t;mn!==null;)if(t=mn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mn=e;else for(;mn!==null;){switch(t=mn,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)r=e[i],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,r=u.memoizedProps,u=u.memoizedState,l=i.stateNode;try{var qe=pl(i.type,r);e=l.getSnapshotBeforeUpdate(qe,u),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ye){Ct(i,i.return,Ye)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Dd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,mn=e;break}mn=t.return}}function lg(e,t,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:ea(e,i),l&4&&os(5,i);break;case 1:if(ea(e,i),l&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(v){Ct(i,i.return,v)}else{var r=pl(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ct(i,i.return,v)}}l&64&&Pm(i),l&512&&ss(i,i.return);break;case 3:if(ea(e,i),l&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Vh(e,t)}catch(v){Ct(i,i.return,v)}}break;case 27:t===null&&l&4&&ig(i);case 26:case 5:ea(e,i),t===null&&l&4&&tg(i),l&512&&ss(i,i.return);break;case 12:ea(e,i);break;case 31:ea(e,i),l&4&&rg(e,i);break;case 13:ea(e,i),l&4&&cg(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Hx.bind(null,i),ib(e,i))));break;case 22:if(l=i.memoizedState!==null||Fi,!l){t=t!==null&&t.memoizedState!==null||rn,r=Fi;var u=rn;Fi=l,(rn=t)&&!u?ta(e,i,(i.subtreeFlags&8772)!==0):ea(e,i),Fi=r,rn=u}break;case 30:break;default:ea(e,i)}}function og(e){var t=e.alternate;t!==null&&(e.alternate=null,og(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&il(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Zt=null,qn=!1;function Pi(e,t,i){for(i=i.child;i!==null;)sg(e,t,i),i=i.sibling}function sg(e,t,i){if(ee&&typeof ee.onCommitFiberUnmount=="function")try{ee.onCommitFiberUnmount(ie,i)}catch{}switch(i.tag){case 26:rn||Oi(i,t),Pi(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:rn||Oi(i,t);var l=Zt,r=qn;Ga(i.type)&&(Zt=i.stateNode,qn=!1),Pi(e,t,i),ps(i.stateNode),Zt=l,qn=r;break;case 5:rn||Oi(i,t);case 6:if(l=Zt,r=qn,Zt=null,Pi(e,t,i),Zt=l,qn=r,Zt!==null)if(qn)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(i.stateNode)}catch(u){Ct(i,t,u)}else try{Zt.removeChild(i.stateNode)}catch(u){Ct(i,t,u)}break;case 18:Zt!==null&&(qn?(e=Zt,Pg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),uo(e)):Pg(Zt,i.stateNode));break;case 4:l=Zt,r=qn,Zt=i.stateNode.containerInfo,qn=!0,Pi(e,t,i),Zt=l,qn=r;break;case 0:case 11:case 14:case 15:za(2,i,t),rn||za(4,i,t),Pi(e,t,i);break;case 1:rn||(Oi(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"&&eg(i,t,l)),Pi(e,t,i);break;case 21:Pi(e,t,i);break;case 22:rn=(l=rn)||i.memoizedState!==null,Pi(e,t,i),rn=l;break;default:Pi(e,t,i)}}function rg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{uo(e)}catch(i){Ct(t,t.return,i)}}}function cg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{uo(e)}catch(i){Ct(t,t.return,i)}}function Dx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ag),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ag),t;default:throw Error(s(435,e.tag))}}function Or(e,t){var i=Dx(e);t.forEach(function(l){if(!i.has(l)){i.add(l);var r=Gx.bind(null,e,l);l.then(r,r)}})}function jn(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var r=i[l],u=e,v=t,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Ga(E.type)){Zt=E.stateNode,qn=!1;break e}break;case 5:Zt=E.stateNode,qn=!1;break e;case 3:case 4:Zt=E.stateNode.containerInfo,qn=!0;break e}E=E.return}if(Zt===null)throw Error(s(160));sg(u,v,r),Zt=null,qn=!1,u=r.alternate,u!==null&&(u.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ug(t,e),t=t.sibling}var Ni=null;function ug(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jn(t,e),Hn(e),l&4&&(za(3,e,e.return),os(3,e),za(5,e,e.return));break;case 1:jn(t,e),Hn(e),l&512&&(rn||i===null||Oi(i,i.return)),l&64&&Fi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var r=Ni;if(jn(t,e),Hn(e),l&512&&(rn||i===null||Oi(i,i.return)),l&4){var u=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,r=r.ownerDocument||r;t:switch(l){case"title":u=r.getElementsByTagName("title")[0],(!u||u[Yi]||u[Kt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=r.createElement(l),r.head.insertBefore(u,r.querySelector("head > title"))),Nn(u,l,i),u[Kt]=e,Jt(u),l=u;break e;case"link":var v=up("link","href",r).get(l+(i.href||""));if(v){for(var E=0;E<v.length;E++)if(u=v[E],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(E,1);break t}}u=r.createElement(l),Nn(u,l,i),r.head.appendChild(u);break;case"meta":if(v=up("meta","content",r).get(l+(i.content||""))){for(E=0;E<v.length;E++)if(u=v[E],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(E,1);break t}}u=r.createElement(l),Nn(u,l,i),r.head.appendChild(u);break;default:throw Error(s(468,l))}u[Kt]=e,Jt(u),l=u}e.stateNode=l}else dp(r,e.type,e.stateNode);else e.stateNode=cp(r,l,e.memoizedProps);else u!==l?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,l===null?dp(r,e.type,e.stateNode):cp(r,l,e.memoizedProps)):l===null&&e.stateNode!==null&&td(e,e.memoizedProps,i.memoizedProps)}break;case 27:jn(t,e),Hn(e),l&512&&(rn||i===null||Oi(i,i.return)),i!==null&&l&4&&td(e,e.memoizedProps,i.memoizedProps);break;case 5:if(jn(t,e),Hn(e),l&512&&(rn||i===null||Oi(i,i.return)),e.flags&32){r=e.stateNode;try{xa(r,"")}catch(qe){Ct(e,e.return,qe)}}l&4&&e.stateNode!=null&&(r=e.memoizedProps,td(e,r,i!==null?i.memoizedProps:r)),l&1024&&(ad=!0);break;case 6:if(jn(t,e),Hn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(qe){Ct(e,e.return,qe)}}break;case 3:if(Kr=null,r=Ni,Ni=Ir(t.containerInfo),jn(t,e),Ni=r,Hn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{uo(t.containerInfo)}catch(qe){Ct(e,e.return,qe)}ad&&(ad=!1,dg(e));break;case 4:l=Ni,Ni=Ir(e.stateNode.containerInfo),jn(t,e),Hn(e),Ni=l;break;case 12:jn(t,e),Hn(e);break;case 31:jn(t,e),Hn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Or(e,l)));break;case 13:jn(t,e),Hn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(qr=wt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Or(e,l)));break;case 22:r=e.memoizedState!==null;var Y=i!==null&&i.memoizedState!==null,le=Fi,xe=rn;if(Fi=le||r,rn=xe||Y,jn(t,e),rn=xe,Fi=le,Hn(e),l&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(i===null||Y||Fi||rn||vl(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){Y=i=t;try{if(u=Y.stateNode,r)v=u.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=Y.stateNode;var Ee=Y.memoizedProps.style,re=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;E.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(qe){Ct(Y,Y.return,qe)}}}else if(t.tag===6){if(i===null){Y=t;try{Y.stateNode.nodeValue=r?"":Y.memoizedProps}catch(qe){Ct(Y,Y.return,qe)}}}else if(t.tag===18){if(i===null){Y=t;try{var fe=Y.stateNode;r?ep(fe,!0):ep(Y.stateNode,!1)}catch(qe){Ct(Y,Y.return,qe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Or(e,i))));break;case 19:jn(t,e),Hn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Or(e,l)));break;case 30:break;case 21:break;default:jn(t,e),Hn(e)}}function Hn(e){var t=e.flags;if(t&2){try{for(var i,l=e.return;l!==null;){if(ng(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var r=i.stateNode,u=nd(e);kr(e,u,r);break;case 5:var v=i.stateNode;i.flags&32&&(xa(v,""),i.flags&=-33);var E=nd(e);kr(e,E,v);break;case 3:case 4:var Y=i.stateNode.containerInfo,le=nd(e);id(e,le,Y);break;default:throw Error(s(161))}}catch(xe){Ct(e,e.return,xe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;dg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ea(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lg(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:za(4,t,t.return),vl(t);break;case 1:Oi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&eg(t,t.return,i),vl(t);break;case 27:ps(t.stateNode);case 26:case 5:Oi(t,t.return),vl(t);break;case 22:t.memoizedState===null&&vl(t);break;case 30:vl(t);break;default:vl(t)}e=e.sibling}}function ta(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,r=e,u=t,v=u.flags;switch(u.tag){case 0:case 11:case 15:ta(r,u,i),os(4,u);break;case 1:if(ta(r,u,i),l=u,r=l.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(le){Ct(l,l.return,le)}if(l=u,r=l.updateQueue,r!==null){var E=l.stateNode;try{var Y=r.shared.hiddenCallbacks;if(Y!==null)for(r.shared.hiddenCallbacks=null,r=0;r<Y.length;r++)$h(Y[r],E)}catch(le){Ct(l,l.return,le)}}i&&v&64&&Pm(u),ss(u,u.return);break;case 27:ig(u);case 26:case 5:ta(r,u,i),i&&l===null&&v&4&&tg(u),ss(u,u.return);break;case 12:ta(r,u,i);break;case 31:ta(r,u,i),i&&v&4&&rg(r,u);break;case 13:ta(r,u,i),i&&v&4&&cg(r,u);break;case 22:u.memoizedState===null&&ta(r,u,i),ss(u,u.return);break;case 30:break;default:ta(r,u,i)}t=t.sibling}}function ld(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Io(i))}function od(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Io(e))}function Ei(e,t,i,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fg(e,t,i,l),t=t.sibling}function fg(e,t,i,l){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Ei(e,t,i,l),r&2048&&os(9,t);break;case 1:Ei(e,t,i,l);break;case 3:Ei(e,t,i,l),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Io(e)));break;case 12:if(r&2048){Ei(e,t,i,l),e=t.stateNode;try{var u=t.memoizedProps,v=u.id,E=u.onPostCommit;typeof E=="function"&&E(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Y){Ct(t,t.return,Y)}}else Ei(e,t,i,l);break;case 31:Ei(e,t,i,l);break;case 13:Ei(e,t,i,l);break;case 23:break;case 22:u=t.stateNode,v=t.alternate,t.memoizedState!==null?u._visibility&2?Ei(e,t,i,l):rs(e,t):u._visibility&2?Ei(e,t,i,l):(u._visibility|=2,Pl(e,t,i,l,(t.subtreeFlags&10256)!==0||!1)),r&2048&&ld(v,t);break;case 24:Ei(e,t,i,l),r&2048&&od(t.alternate,t);break;default:Ei(e,t,i,l)}}function Pl(e,t,i,l,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,v=t,E=i,Y=l,le=v.flags;switch(v.tag){case 0:case 11:case 15:Pl(u,v,E,Y,r),os(8,v);break;case 23:break;case 22:var xe=v.stateNode;v.memoizedState!==null?xe._visibility&2?Pl(u,v,E,Y,r):rs(u,v):(xe._visibility|=2,Pl(u,v,E,Y,r)),r&&le&2048&&ld(v.alternate,v);break;case 24:Pl(u,v,E,Y,r),r&&le&2048&&od(v.alternate,v);break;default:Pl(u,v,E,Y,r)}t=t.sibling}}function rs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,l=t,r=l.flags;switch(l.tag){case 22:rs(i,l),r&2048&&ld(l.alternate,l);break;case 24:rs(i,l),r&2048&&od(l.alternate,l);break;default:rs(i,l)}t=t.sibling}}var cs=8192;function eo(e,t,i){if(e.subtreeFlags&cs)for(e=e.child;e!==null;)hg(e,t,i),e=e.sibling}function hg(e,t,i){switch(e.tag){case 26:eo(e,t,i),e.flags&cs&&e.memoizedState!==null&&gb(i,Ni,e.memoizedState,e.memoizedProps);break;case 5:eo(e,t,i);break;case 3:case 4:var l=Ni;Ni=Ir(e.stateNode.containerInfo),eo(e,t,i),Ni=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=cs,cs=16777216,eo(e,t,i),cs=l):eo(e,t,i));break;default:eo(e,t,i)}}function mg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function us(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];mn=l,pg(l,e)}mg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gg(e),e=e.sibling}function gg(e){switch(e.tag){case 0:case 11:case 15:us(e),e.flags&2048&&za(9,e,e.return);break;case 3:us(e);break;case 12:us(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Rr(e)):us(e);break;default:us(e)}}function Rr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];mn=l,pg(l,e)}mg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:za(8,t,t.return),Rr(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Rr(t));break;default:Rr(t)}e=e.sibling}}function pg(e,t){for(;mn!==null;){var i=mn;switch(i.tag){case 0:case 11:case 15:za(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Io(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,mn=l;else e:for(i=e;mn!==null;){l=mn;var r=l.sibling,u=l.return;if(og(l),l===i){mn=null;break e}if(r!==null){r.return=u,mn=r;break e}mn=u}}}var Mx={getCacheForType:function(e){var t=bn(ln),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return bn(ln).controller.signal}},zx=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Ot=null,ot=null,rt=0,At=0,Kn=null,ka=!1,to=!1,sd=!1,na=0,Pt=0,Oa=0,yl=0,rd=0,Jn=0,no=0,ds=null,Gn=null,cd=!1,qr=0,vg=0,jr=1/0,Hr=null,Ra=null,dn=0,qa=null,io=null,ia=0,ud=0,dd=null,yg=null,fs=0,fd=null;function Wn(){return(Nt&2)!==0&&rt!==0?rt&-rt:N.T!==null?yd():Cn()}function xg(){if(Jn===0)if((rt&536870912)===0||ht){var e=Ze;Ze<<=1,(Ze&3932160)===0&&(Ze=262144),Jn=e}else Jn=536870912;return e=In.current,e!==null&&(e.flags|=32),Jn}function Un(e,t,i){(e===Ot&&(At===2||At===9)||e.cancelPendingCommit!==null)&&(ao(e,0),ja(e,rt,Jn,!1)),Ti(e,i),((Nt&2)===0||e!==Ot)&&(e===Ot&&((Nt&2)===0&&(yl|=i),Pt===4&&ja(e,rt,Jn,!1)),Ri(e))}function bg(e,t,i){if((Nt&6)!==0)throw Error(s(327));var l=!i&&(t&127)===0&&(t&e.expiredLanes)===0||An(e,t),r=l?Rx(e,t):md(e,t,!0),u=l;do{if(r===0){to&&!l&&ja(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!kx(i)){r=md(e,t,!1),u=!1;continue}if(r===2){if(u=t,e.errorRecoveryDisabledLanes&u)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var E=e;r=ds;var Y=E.current.memoizedState.isDehydrated;if(Y&&(ao(E,v).flags|=256),v=md(E,v,!1),v!==2){if(sd&&!Y){E.errorRecoveryDisabledLanes|=u,yl|=u,r=4;break e}u=Gn,Gn=r,u!==null&&(Gn===null?Gn=u:Gn.push.apply(Gn,u))}r=v}if(u=!1,r!==2)continue}}if(r===1){ao(e,0),ja(e,t,0,!0);break}e:{switch(l=e,u=r,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:ja(l,t,Jn,!ka);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(r=qr+300-wt(),10<r)){if(ja(l,t,Jn,!ka),mt(l,0,!0)!==0)break e;ia=t,l.timeoutHandle=Wg(Sg.bind(null,l,i,Gn,Hr,cd,t,Jn,yl,no,ka,u,"Throttled",-0,0),r);break e}Sg(l,i,Gn,Hr,cd,t,Jn,yl,no,ka,u,null,-0,0)}}break}while(!0);Ri(e)}function Sg(e,t,i,l,r,u,v,E,Y,le,xe,Ee,re,fe){if(e.timeoutHandle=-1,Ee=t.subtreeFlags,Ee&8192||(Ee&16785408)===16785408){Ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bi},hg(t,u,Ee);var qe=(u&62914560)===u?qr-wt():(u&4194048)===u?vg-wt():0;if(qe=pb(Ee,qe),qe!==null){ia=u,e.cancelPendingCommit=qe(Dg.bind(null,e,t,u,i,l,r,v,E,Y,xe,Ee,null,re,fe)),ja(e,u,v,!le);return}}Dg(e,t,u,i,l,r,v,E,Y)}function kx(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var r=i[l],u=r.getSnapshot;r=r.value;try{if(!Xn(u(),r))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ja(e,t,i,l){t&=~rd,t&=~yl,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var r=t;0<r;){var u=31-Be(r),v=1<<u;l[u]=-1,r&=~v}i!==0&&lt(e,i,t)}function Gr(){return(Nt&6)===0?(hs(0),!1):!0}function hd(){if(ot!==null){if(At===0)var e=ot.return;else e=ot,Zi=cl=null,Du(e),Ql=null,Ko=0,e=ot;for(;e!==null;)Fm(e.alternate,e),e=e.return;ot=null}}function ao(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Fx(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ia=0,hd(),Ot=e,ot=i=Li(e.current,null),rt=t,At=0,Kn=null,ka=!1,to=An(e,t),sd=!1,no=Jn=rd=yl=Oa=Pt=0,Gn=ds=null,cd=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var r=31-Be(l),u=1<<r;t|=e[r],l&=~u}return na=t,lr(),i}function Ng(e,t){Ie=null,N.H=is,t===Il||t===hr?(t=Gh(),At=3):t===vu?(t=Gh(),At=4):At=t===Xu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Kn=t,ot===null&&(Pt=1,Cr(e,ai(t,e.current)))}function Eg(){var e=In.current;return e===null?!0:(rt&4194048)===rt?ri===null:(rt&62914560)===rt||(rt&536870912)!==0?e===ri:!1}function _g(){var e=N.H;return N.H=is,e===null?is:e}function wg(){var e=N.A;return N.A=Mx,e}function Ur(){Pt=4,ka||(rt&4194048)!==rt&&In.current!==null||(to=!0),(Oa&134217727)===0&&(yl&134217727)===0||Ot===null||ja(Ot,rt,Jn,!1)}function md(e,t,i){var l=Nt;Nt|=2;var r=_g(),u=wg();(Ot!==e||rt!==t)&&(Hr=null,ao(e,t)),t=!1;var v=Pt;e:do try{if(At!==0&&ot!==null){var E=ot,Y=Kn;switch(At){case 8:hd(),v=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(t=!0);var le=At;if(At=0,Kn=null,lo(e,E,Y,le),i&&to){v=0;break e}break;default:le=At,At=0,Kn=null,lo(e,E,Y,le)}}Ox(),v=Pt;break}catch(xe){Ng(e,xe)}while(!0);return t&&e.shellSuspendCounter++,Zi=cl=null,Nt=l,N.H=r,N.A=u,ot===null&&(Ot=null,rt=0,lr()),v}function Ox(){for(;ot!==null;)Ag(ot)}function Rx(e,t){var i=Nt;Nt|=2;var l=_g(),r=wg();Ot!==e||rt!==t?(Hr=null,jr=wt()+500,ao(e,t)):to=An(e,t);e:do try{if(At!==0&&ot!==null){t=ot;var u=Kn;t:switch(At){case 1:At=0,Kn=null,lo(e,t,u,1);break;case 2:case 9:if(jh(u)){At=0,Kn=null,Cg(t);break}t=function(){At!==2&&At!==9||Ot!==e||(At=7),Ri(e)},u.then(t,t);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:jh(u)?(At=0,Kn=null,Cg(t)):(At=0,Kn=null,lo(e,t,u,7));break;case 5:var v=null;switch(ot.tag){case 26:v=ot.memoizedState;case 5:case 27:var E=ot;if(v?fp(v):E.stateNode.complete){At=0,Kn=null;var Y=E.sibling;if(Y!==null)ot=Y;else{var le=E.return;le!==null?(ot=le,Br(le)):ot=null}break t}}At=0,Kn=null,lo(e,t,u,5);break;case 6:At=0,Kn=null,lo(e,t,u,6);break;case 8:hd(),Pt=6;break e;default:throw Error(s(462))}}qx();break}catch(xe){Ng(e,xe)}while(!0);return Zi=cl=null,N.H=l,N.A=r,Nt=i,ot!==null?0:(Ot=null,rt=0,lr(),Pt)}function qx(){for(;ot!==null&&!Mn();)Ag(ot)}function Ag(e){var t=Jm(e.alternate,e,na);e.memoizedProps=e.pendingProps,t===null?Br(e):ot=t}function Cg(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Lm(i,t,t.pendingProps,t.type,void 0,rt);break;case 11:t=Lm(i,t,t.pendingProps,t.type.render,t.ref,rt);break;case 5:Du(t);default:Fm(i,t),t=ot=wh(t,na),t=Jm(i,t,na)}e.memoizedProps=e.pendingProps,t===null?Br(e):ot=t}function lo(e,t,i,l){Zi=cl=null,Du(t),Ql=null,Ko=0;var r=t.return;try{if(Ex(e,r,t,i,rt)){Pt=1,Cr(e,ai(i,e.current)),ot=null;return}}catch(u){if(r!==null)throw ot=r,u;Pt=1,Cr(e,ai(i,e.current)),ot=null;return}t.flags&32768?(ht||l===1?e=!0:to||(rt&536870912)!==0?e=!1:(ka=e=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),Tg(t,e)):Br(t)}function Br(e){var t=e;do{if((t.flags&32768)!==0){Tg(t,ka);return}e=t.return;var i=Ax(t.alternate,t,na);if(i!==null){ot=i;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);Pt===0&&(Pt=5)}function Tg(e,t){do{var i=Cx(e.alternate,e);if(i!==null){i.flags&=32767,ot=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){ot=e;return}ot=e=i}while(e!==null);Pt=6,ot=null}function Dg(e,t,i,l,r,u,v,E,Y){e.cancelPendingCommit=null;do Yr();while(dn!==0);if((Nt&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=nu,We(e,i,u,v,E,Y),e===Ot&&(ot=Ot=null,rt=0),io=t,qa=e,ia=i,ud=u,dd=r,yg=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ux(cn,function(){return Rg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=N.T,N.T=null,r=L.p,L.p=2,v=Nt,Nt|=4;try{Tx(e,t,i)}finally{Nt=v,L.p=r,N.T=l}}dn=1,Mg(),zg(),kg()}}function Mg(){if(dn===1){dn=0;var e=qa,t=io,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null;var l=L.p;L.p=2;var r=Nt;Nt|=4;try{ug(t,e);var u=Ad,v=ph(e.containerInfo),E=u.focusedElem,Y=u.selectionRange;if(v!==E&&E&&E.ownerDocument&&gh(E.ownerDocument.documentElement,E)){if(Y!==null&&Wc(E)){var le=Y.start,xe=Y.end;if(xe===void 0&&(xe=le),"selectionStart"in E)E.selectionStart=le,E.selectionEnd=Math.min(xe,E.value.length);else{var Ee=E.ownerDocument||document,re=Ee&&Ee.defaultView||window;if(re.getSelection){var fe=re.getSelection(),qe=E.textContent.length,Ye=Math.min(Y.start,qe),zt=Y.end===void 0?Ye:Math.min(Y.end,qe);!fe.extend&&Ye>zt&&(v=zt,zt=Ye,Ye=v);var F=mh(E,Ye),Z=mh(E,zt);if(F&&Z&&(fe.rangeCount!==1||fe.anchorNode!==F.node||fe.anchorOffset!==F.offset||fe.focusNode!==Z.node||fe.focusOffset!==Z.offset)){var ae=Ee.createRange();ae.setStart(F.node,F.offset),fe.removeAllRanges(),Ye>zt?(fe.addRange(ae),fe.extend(Z.node,Z.offset)):(ae.setEnd(Z.node,Z.offset),fe.addRange(ae))}}}}for(Ee=[],fe=E;fe=fe.parentNode;)fe.nodeType===1&&Ee.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Ee.length;E++){var Se=Ee[E];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Pr=!!wd,Ad=wd=null}finally{Nt=r,L.p=l,N.T=i}}e.current=t,dn=2}}function zg(){if(dn===2){dn=0;var e=qa,t=io,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=N.T,N.T=null;var l=L.p;L.p=2;var r=Nt;Nt|=4;try{lg(e,t.alternate,t)}finally{Nt=r,L.p=l,N.T=i}}dn=3}}function kg(){if(dn===4||dn===3){dn=0,_n();var e=qa,t=io,i=ia,l=yg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?dn=5:(dn=0,io=qa=null,Og(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Ra=null),un(i),t=t.stateNode,ee&&typeof ee.onCommitFiberRoot=="function")try{ee.onCommitFiberRoot(ie,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=N.T,r=L.p,L.p=2,N.T=null;try{for(var u=e.onRecoverableError,v=0;v<l.length;v++){var E=l[v];u(E.value,{componentStack:E.stack})}}finally{N.T=t,L.p=r}}(ia&3)!==0&&Yr(),Ri(e),r=e.pendingLanes,(i&261930)!==0&&(r&42)!==0?e===fd?fs++:(fs=0,fd=e):fs=0,hs(0)}}function Og(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Io(t)))}function Yr(){return Mg(),zg(),kg(),Rg()}function Rg(){if(dn!==5)return!1;var e=qa,t=ud;ud=0;var i=un(ia),l=N.T,r=L.p;try{L.p=32>i?32:i,N.T=null,i=dd,dd=null;var u=qa,v=ia;if(dn=0,io=qa=null,ia=0,(Nt&6)!==0)throw Error(s(331));var E=Nt;if(Nt|=4,gg(u.current),fg(u,u.current,v,i),Nt=E,hs(0,!1),ee&&typeof ee.onPostCommitFiberRoot=="function")try{ee.onPostCommitFiberRoot(ie,u)}catch{}return!0}finally{L.p=r,N.T=l,Og(e,t)}}function qg(e,t,i){t=ai(i,t),t=Lu(e.stateNode,t,2),e=Ta(e,t,2),e!==null&&(Ti(e,2),Ri(e))}function Ct(e,t,i){if(e.tag===3)qg(e,e,i);else for(;t!==null;){if(t.tag===3){qg(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ra===null||!Ra.has(l))){e=ai(i,e),i=jm(2),l=Ta(t,i,2),l!==null&&(Hm(i,l,t,e),Ti(l,2),Ri(l));break}}t=t.return}}function gd(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new zx;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(i)||(sd=!0,r.add(i),e=jx.bind(null,e,t,i),t.then(e,e))}function jx(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ot===e&&(rt&i)===i&&(Pt===4||Pt===3&&(rt&62914560)===rt&&300>wt()-qr?(Nt&2)===0&&ao(e,0):rd|=i,no===rt&&(no=0)),Ri(e)}function jg(e,t){t===0&&(t=Bi()),e=ol(e,t),e!==null&&(Ti(e,t),Ri(e))}function Hx(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),jg(e,i)}function Gx(e,t){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(i=r.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),jg(e,i)}function Ux(e,t){return Qt(e,t)}var $r=null,oo=null,pd=!1,Vr=!1,vd=!1,Ha=0;function Ri(e){e!==oo&&e.next===null&&(oo===null?$r=oo=e:oo=oo.next=e),Vr=!0,pd||(pd=!0,Yx())}function hs(e,t){if(!vd&&Vr){vd=!0;do for(var i=!1,l=$r;l!==null;){if(e!==0){var r=l.pendingLanes;if(r===0)var u=0;else{var v=l.suspendedLanes,E=l.pingedLanes;u=(1<<31-Be(42|e)+1)-1,u&=r&~(v&~E),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,Bg(l,u))}else u=rt,u=mt(l,l===Ot?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||An(l,u)||(i=!0,Bg(l,u));l=l.next}while(i);vd=!1}}function Bx(){Hg()}function Hg(){Vr=pd=!1;var e=0;Ha!==0&&Wx()&&(e=Ha);for(var t=wt(),i=null,l=$r;l!==null;){var r=l.next,u=Gg(l,t);u===0?(l.next=null,i===null?$r=r:i.next=r,r===null&&(oo=i)):(i=l,(e!==0||(u&3)!==0)&&(Vr=!0)),l=r}dn!==0&&dn!==5||hs(e),Ha!==0&&(Ha=0)}function Gg(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var v=31-Be(u),E=1<<v,Y=r[v];Y===-1?((E&i)===0||(E&l)!==0)&&(r[v]=ni(E,t)):Y<=t&&(e.expiredLanes|=E),u&=~E}if(t=Ot,i=rt,i=mt(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===t&&(At===2||At===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&vn(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||An(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(l!==null&&vn(l),un(i)){case 2:case 8:i=Rt;break;case 32:i=cn;break;case 268435456:i=wn;break;default:i=cn}return l=Ug.bind(null,e),i=Qt(i,l),e.callbackPriority=t,e.callbackNode=i,t}return l!==null&&l!==null&&vn(l),e.callbackPriority=2,e.callbackNode=null,2}function Ug(e,t){if(dn!==0&&dn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Yr()&&e.callbackNode!==i)return null;var l=rt;return l=mt(e,e===Ot?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(bg(e,l,t),Gg(e,wt()),e.callbackNode!=null&&e.callbackNode===i?Ug.bind(null,e):null)}function Bg(e,t){if(Yr())return null;bg(e,t,!0)}function Yx(){Px(function(){(Nt&6)!==0?Qt(tt,Bx):Hg()})}function yd(){if(Ha===0){var e=Xl;e===0&&(e=Qe,Qe<<=1,(Qe&261888)===0&&(Qe=256)),Ha=e}return Ha}function Yg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ql(""+e)}function $g(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function $x(e,t,i,l,r){if(t==="submit"&&i&&i.stateNode===r){var u=Yg((r[bt]||null).action),v=l.submitter;v&&(t=(t=v[bt]||null)?Yg(t.formAction):v.getAttribute("formAction"),t!==null&&(u=t,v=null));var E=new Te("action","action",null,l,r);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ha!==0){var Y=v?$g(r,v):new FormData(r);Gu(i,{pending:!0,data:Y,method:r.method,action:u},null,Y)}}else typeof u=="function"&&(E.preventDefault(),Y=v?$g(r,v):new FormData(r),Gu(i,{pending:!0,data:Y,method:r.method,action:u},u,Y))},currentTarget:r}]})}}for(var xd=0;xd<tu.length;xd++){var bd=tu[xd],Vx=bd.toLowerCase(),Lx=bd[0].toUpperCase()+bd.slice(1);Si(Vx,"on"+Lx)}Si(xh,"onAnimationEnd"),Si(bh,"onAnimationIteration"),Si(Sh,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(ox,"onTransitionRun"),Si(sx,"onTransitionStart"),Si(rx,"onTransitionCancel"),Si(Nh,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ms));function Vg(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],r=l.event;l=l.listeners;e:{var u=void 0;if(t)for(var v=l.length-1;0<=v;v--){var E=l[v],Y=E.instance,le=E.currentTarget;if(E=E.listener,Y!==u&&r.isPropagationStopped())break e;u=E,r.currentTarget=le;try{u(r)}catch(xe){ar(xe)}r.currentTarget=null,u=Y}else for(v=0;v<l.length;v++){if(E=l[v],Y=E.instance,le=E.currentTarget,E=E.listener,Y!==u&&r.isPropagationStopped())break e;u=E,r.currentTarget=le;try{u(r)}catch(xe){ar(xe)}r.currentTarget=null,u=Y}}}}function st(e,t){var i=t[nl];i===void 0&&(i=t[nl]=new Set);var l=e+"__bubble";i.has(l)||(Lg(t,e,2,!1),i.add(l))}function Sd(e,t,i){var l=0;t&&(l|=4),Lg(i,e,l,t)}var Lr="_reactListening"+Math.random().toString(36).slice(2);function Nd(e){if(!e[Lr]){e[Lr]=!0,Tl.forEach(function(i){i!=="selectionchange"&&(Xx.has(i)||Sd(i,!1,e),Sd(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lr]||(t[Lr]=!0,Sd("selectionchange",!1,t))}}function Lg(e,t,i,l){switch(xp(t)){case 2:var r=xb;break;case 8:r=bb;break;default:r=Hd}i=r.bind(null,t,i,e),r=void 0,!T||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):r!==void 0?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Ed(e,t,i,l,r){var u=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===r)break;if(v===4)for(v=l.return;v!==null;){var Y=v.tag;if((Y===3||Y===4)&&v.stateNode.containerInfo===r)return;v=v.return}for(;E!==null;){if(v=Di(E),v===null)return;if(Y=v.tag,Y===5||Y===6||Y===26||Y===27){l=u=v;continue e}E=E.parentNode}}l=l.return}tr(function(){var le=u,xe=Ho(i),Ee=[];e:{var re=Eh.get(e);if(re!==void 0){var fe=Te,qe=e;switch(e){case"keypress":if(he(i)===0)break e;case"keydown":case"keyup":fe=Gy;break;case"focusin":qe="focus",fe=Uo;break;case"focusout":qe="blur",fe=Uo;break;case"beforeblur":case"afterblur":fe=Uo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=nr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Yy;break;case xh:case bh:case Sh:fe=Dy;break;case Nh:fe=Vy;break;case"scroll":case"scrollend":fe=ze;break;case"wheel":fe=Xy;break;case"copy":case"cut":case"paste":fe=zy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=eh;break;case"toggle":case"beforetoggle":fe=Iy}var Ye=(t&4)!==0,zt=!Ye&&(e==="scroll"||e==="scrollend"),F=Ye?re!==null?re+"Capture":null:re;Ye=[];for(var Z=le,ae;Z!==null;){var Se=Z;if(ae=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ae===null||F===null||(Se=x(Z,F),Se!=null&&Ye.push(gs(Z,Se,ae))),zt)break;Z=Z.return}0<Ye.length&&(re=new fe(re,qe,null,i,xe),Ee.push({event:re,listeners:Ye}))}}if((t&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",re&&i!==jo&&(qe=i.relatedTarget||i.fromElement)&&(Di(qe)||qe[gi]))break e;if((fe||re)&&(re=xe.window===xe?xe:(re=xe.ownerDocument)?re.defaultView||re.parentWindow:window,fe?(qe=i.relatedTarget||i.toElement,fe=le,qe=qe?Di(qe):null,qe!==null&&(zt=f(qe),Ye=qe.tag,qe!==zt||Ye!==5&&Ye!==27&&Ye!==6)&&(qe=null)):(fe=null,qe=le),fe!==qe)){if(Ye=Wt,Se="onMouseLeave",F="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Ye=eh,Se="onPointerLeave",F="onPointerEnter",Z="pointer"),zt=fe==null?re:$i(fe),ae=qe==null?re:$i(qe),re=new Ye(Se,Z+"leave",fe,i,xe),re.target=zt,re.relatedTarget=ae,Se=null,Di(xe)===le&&(Ye=new Ye(F,Z+"enter",qe,i,xe),Ye.target=ae,Ye.relatedTarget=zt,Se=Ye),zt=Se,fe&&qe)t:{for(Ye=Zx,F=fe,Z=qe,ae=0,Se=F;Se;Se=Ye(Se))ae++;Se=0;for(var Ue=Z;Ue;Ue=Ye(Ue))Se++;for(;0<ae-Se;)F=Ye(F),ae--;for(;0<Se-ae;)Z=Ye(Z),Se--;for(;ae--;){if(F===Z||Z!==null&&F===Z.alternate){Ye=F;break t}F=Ye(F),Z=Ye(Z)}Ye=null}else Ye=null;fe!==null&&Xg(Ee,re,fe,Ye,!1),qe!==null&&zt!==null&&Xg(Ee,zt,qe,Ye,!0)}}e:{if(re=le?$i(le):window,fe=re.nodeName&&re.nodeName.toLowerCase(),fe==="select"||fe==="input"&&re.type==="file")var yt=rh;else if(oh(re))if(ch)yt=ix;else{yt=tx;var Ge=ex}else fe=re.nodeName,!fe||fe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?le&&qo(le.elementType)&&(yt=rh):yt=nx;if(yt&&(yt=yt(e,le))){sh(Ee,yt,i,xe);break e}Ge&&Ge(e,re,le),e==="focusout"&&le&&re.type==="number"&&le.memoizedProps.value!=null&&Ro(re,"number",re.value)}switch(Ge=le?$i(le):window,e){case"focusin":(oh(Ge)||Ge.contentEditable==="true")&&(Hl=Ge,Fc=le,Lo=null);break;case"focusout":Lo=Fc=Hl=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,vh(Ee,i,xe);break;case"selectionchange":if(lx)break;case"keydown":case"keyup":vh(Ee,i,xe)}var Je;if(Qc)e:{switch(e){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else jl?ah(e,i)&&(ct="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ct="onCompositionStart");ct&&(th&&i.locale!=="ko"&&(jl||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&jl&&(Je=Ae()):(j=xe,X="value"in j?j.value:j.textContent,jl=!0)),Ge=Xr(le,ct),0<Ge.length&&(ct=new Pf(ct,e,null,i,xe),Ee.push({event:ct,listeners:Ge}),Je?ct.data=Je:(Je=lh(i),Je!==null&&(ct.data=Je)))),(Je=Ky?Jy(e,i):Wy(e,i))&&(ct=Xr(le,"onBeforeInput"),0<ct.length&&(Ge=new Pf("onBeforeInput","beforeinput",null,i,xe),Ee.push({event:Ge,listeners:ct}),Ge.data=Je)),$x(Ee,e,le,i,xe)}Vg(Ee,t)})}function gs(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Xr(e,t){for(var i=t+"Capture",l=[];e!==null;){var r=e,u=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||u===null||(r=x(e,i),r!=null&&l.unshift(gs(e,r,u)),r=x(e,t),r!=null&&l.push(gs(e,r,u))),e.tag===3)return l;e=e.return}return[]}function Zx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xg(e,t,i,l,r){for(var u=t._reactName,v=[];i!==null&&i!==l;){var E=i,Y=E.alternate,le=E.stateNode;if(E=E.tag,Y!==null&&Y===l)break;E!==5&&E!==26&&E!==27||le===null||(Y=le,r?(le=x(i,u),le!=null&&v.unshift(gs(i,le,Y))):r||(le=x(i,u),le!=null&&v.push(gs(i,le,Y)))),i=i.return}v.length!==0&&e.push({event:t,listeners:v})}var Ix=/\r\n?/g,Qx=/\u0000|\uFFFD/g;function Zg(e){return(typeof e=="string"?e:""+e).replace(Ix,`
`).replace(Qx,"")}function Ig(e,t){return t=Zg(t),Zg(e)===t}function Mt(e,t,i,l,r,u){switch(i){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||xa(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&xa(e,""+l);break;case"className":Ol(e,"class",l);break;case"tabIndex":Ol(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ol(e,i,l);break;case"style":Ps(e,l,u);break;case"data":if(t!=="object"){Ol(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ql(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&Mt(e,t,"name",r.name,r,null),Mt(e,t,"formEncType",r.formEncType,r,null),Mt(e,t,"formMethod",r.formMethod,r,null),Mt(e,t,"formTarget",r.formTarget,r,null)):(Mt(e,t,"encType",r.encType,r,null),Mt(e,t,"method",r.method,r,null),Mt(e,t,"target",r.target,r,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ql(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=bi);break;case"onScroll":l!=null&&st("scroll",e);break;case"onScrollEnd":l!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(r.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=ql(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":st("beforetoggle",e),st("toggle",e),kl(e,"popover",l);break;case"xlinkActuate":xi(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xi(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xi(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xi(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xi(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xi(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xi(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":kl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Xc.get(i)||i,kl(e,i,l))}}function _d(e,t,i,l,r,u){switch(i){case"style":Ps(e,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(r.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?xa(e,l):(typeof l=="number"||typeof l=="bigint")&&xa(e,""+l);break;case"onScroll":l!=null&&st("scroll",e);break;case"onScrollEnd":l!=null&&st("scrollend",e);break;case"onClick":l!=null&&(e.onclick=bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(r=i.endsWith("Capture"),t=i.slice(2,r?i.length-7:void 0),u=e[bt]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,r),typeof l=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,l,r);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):kl(e,i,l)}}}function Nn(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var l=!1,r=!1,u;for(u in i)if(i.hasOwnProperty(u)){var v=i[u];if(v!=null)switch(u){case"src":l=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Mt(e,t,u,v,i,null)}}r&&Mt(e,t,"srcSet",i.srcSet,i,null),l&&Mt(e,t,"src",i.src,i,null);return;case"input":st("invalid",e);var E=u=v=r=null,Y=null,le=null;for(l in i)if(i.hasOwnProperty(l)){var xe=i[l];if(xe!=null)switch(l){case"name":r=xe;break;case"type":v=xe;break;case"checked":Y=xe;break;case"defaultChecked":le=xe;break;case"value":u=xe;break;case"defaultValue":E=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(s(137,t));break;default:Mt(e,t,l,xe,i,null)}}Ks(e,u,E,Y,le,v,r,!1);return;case"select":st("invalid",e),l=v=u=null;for(r in i)if(i.hasOwnProperty(r)&&(E=i[r],E!=null))switch(r){case"value":u=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:Mt(e,t,r,E,i,null)}t=u,i=v,e.multiple=!!l,t!=null?ya(e,!!l,t,!1):i!=null&&ya(e,!!l,i,!0);return;case"textarea":st("invalid",e),u=r=l=null;for(v in i)if(i.hasOwnProperty(v)&&(E=i[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":r=E;break;case"children":u=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Mt(e,t,v,E,i,null)}Ws(e,l,r,u);return;case"option":for(Y in i)i.hasOwnProperty(Y)&&(l=i[Y],l!=null)&&(Y==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Mt(e,t,Y,l,i,null));return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(l=0;l<ms.length;l++)st(ms[l],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in i)if(i.hasOwnProperty(le)&&(l=i[le],l!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Mt(e,t,le,l,i,null)}return;default:if(qo(t)){for(xe in i)i.hasOwnProperty(xe)&&(l=i[xe],l!==void 0&&_d(e,t,xe,l,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(l=i[E],l!=null&&Mt(e,t,E,l,i,null))}function Kx(e,t,i,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,u=null,v=null,E=null,Y=null,le=null,xe=null;for(fe in i){var Ee=i[fe];if(i.hasOwnProperty(fe)&&Ee!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":Y=Ee;default:l.hasOwnProperty(fe)||Mt(e,t,fe,null,l,Ee)}}for(var re in l){var fe=l[re];if(Ee=i[re],l.hasOwnProperty(re)&&(fe!=null||Ee!=null))switch(re){case"type":u=fe;break;case"name":r=fe;break;case"checked":le=fe;break;case"defaultChecked":xe=fe;break;case"value":v=fe;break;case"defaultValue":E=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,t));break;default:fe!==Ee&&Mt(e,t,re,fe,l,Ee)}}Oo(e,v,E,Y,le,xe,u,r);return;case"select":fe=v=E=re=null;for(u in i)if(Y=i[u],i.hasOwnProperty(u)&&Y!=null)switch(u){case"value":break;case"multiple":fe=Y;default:l.hasOwnProperty(u)||Mt(e,t,u,null,l,Y)}for(r in l)if(u=l[r],Y=i[r],l.hasOwnProperty(r)&&(u!=null||Y!=null))switch(r){case"value":re=u;break;case"defaultValue":E=u;break;case"multiple":v=u;default:u!==Y&&Mt(e,t,r,u,l,Y)}t=E,i=v,l=fe,re!=null?ya(e,!!i,re,!1):!!l!=!!i&&(t!=null?ya(e,!!i,t,!0):ya(e,!!i,i?[]:"",!1));return;case"textarea":fe=re=null;for(E in i)if(r=i[E],i.hasOwnProperty(E)&&r!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Mt(e,t,E,null,l,r)}for(v in l)if(r=l[v],u=i[v],l.hasOwnProperty(v)&&(r!=null||u!=null))switch(v){case"value":re=r;break;case"defaultValue":fe=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(s(91));break;default:r!==u&&Mt(e,t,v,r,l,u)}Js(e,re,fe);return;case"option":for(var qe in i)re=i[qe],i.hasOwnProperty(qe)&&re!=null&&!l.hasOwnProperty(qe)&&(qe==="selected"?e.selected=!1:Mt(e,t,qe,null,l,re));for(Y in l)re=l[Y],fe=i[Y],l.hasOwnProperty(Y)&&re!==fe&&(re!=null||fe!=null)&&(Y==="selected"?e.selected=re&&typeof re!="function"&&typeof re!="symbol":Mt(e,t,Y,re,l,fe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in i)re=i[Ye],i.hasOwnProperty(Ye)&&re!=null&&!l.hasOwnProperty(Ye)&&Mt(e,t,Ye,null,l,re);for(le in l)if(re=l[le],fe=i[le],l.hasOwnProperty(le)&&re!==fe&&(re!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,t));break;default:Mt(e,t,le,re,l,fe)}return;default:if(qo(t)){for(var zt in i)re=i[zt],i.hasOwnProperty(zt)&&re!==void 0&&!l.hasOwnProperty(zt)&&_d(e,t,zt,void 0,l,re);for(xe in l)re=l[xe],fe=i[xe],!l.hasOwnProperty(xe)||re===fe||re===void 0&&fe===void 0||_d(e,t,xe,re,l,fe);return}}for(var F in i)re=i[F],i.hasOwnProperty(F)&&re!=null&&!l.hasOwnProperty(F)&&Mt(e,t,F,null,l,re);for(Ee in l)re=l[Ee],fe=i[Ee],!l.hasOwnProperty(Ee)||re===fe||re==null&&fe==null||Mt(e,t,Ee,re,l,fe)}function Qg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var r=i[l],u=r.transferSize,v=r.initiatorType,E=r.duration;if(u&&E&&Qg(v)){for(v=0,E=r.responseEnd,l+=1;l<i.length;l++){var Y=i[l],le=Y.startTime;if(le>E)break;var xe=Y.transferSize,Ee=Y.initiatorType;xe&&Qg(Ee)&&(Y=Y.responseEnd,v+=xe*(Y<E?1:(E-le)/(Y-le)))}if(--l,t+=8*(u+v)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wd=null,Ad=null;function Zr(e){return e.nodeType===9?e:e.ownerDocument}function Kg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Td=null;function Wx(){var e=window.event;return e&&e.type==="popstate"?e===Td?!1:(Td=e,!0):(Td=null,!1)}var Wg=typeof setTimeout=="function"?setTimeout:void 0,Fx=typeof clearTimeout=="function"?clearTimeout:void 0,Fg=typeof Promise=="function"?Promise:void 0,Px=typeof queueMicrotask=="function"?queueMicrotask:typeof Fg<"u"?function(e){return Fg.resolve(null).then(e).catch(eb)}:Wg;function eb(e){setTimeout(function(){throw e})}function Ga(e){return e==="head"}function Pg(e,t){var i=t,l=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(r),uo(t);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")ps(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,ps(i);for(var u=i.firstChild;u;){var v=u.nextSibling,E=u.nodeName;u[Yi]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=v}}else i==="body"&&ps(e.ownerDocument.body);i=r}while(i);uo(t)}function ep(e,t){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function Dd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Dd(i),il(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function tb(e,t,i,l){for(;e.nodeType===1;){var r=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Yi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=ci(e.nextSibling),e===null)break}return null}function nb(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ci(e.nextSibling),e===null))return null;return e}function tp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ci(e.nextSibling),e===null))return null;return e}function Md(e){return e.data==="$?"||e.data==="$~"}function zd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ib(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var l=function(){t(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var kd=null;function np(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return ci(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function ip(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function ap(e,t,i){switch(t=Zr(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ps(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);il(e)}var ui=new Map,lp=new Set;function Ir(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var aa=L.d;L.d={f:ab,r:lb,D:ob,C:sb,L:rb,m:cb,X:db,S:ub,M:fb};function ab(){var e=aa.f(),t=Gr();return e||t}function lb(e){var t=pi(e);t!==null&&t.tag===5&&t.type==="form"?Nm(t):aa.r(e)}var so=typeof document>"u"?null:document;function op(e,t,i){var l=so;if(l&&typeof t=="string"&&t){var r=On(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof i=="string"&&(r+='[crossorigin="'+i+'"]'),lp.has(r)||(lp.add(r),e={rel:e,crossOrigin:i,href:t},l.querySelector(r)===null&&(t=l.createElement("link"),Nn(t,"link",e),Jt(t),l.head.appendChild(t)))}}function ob(e){aa.D(e),op("dns-prefetch",e,null)}function sb(e,t){aa.C(e,t),op("preconnect",e,t)}function rb(e,t,i){aa.L(e,t,i);var l=so;if(l&&e&&t){var r='link[rel="preload"][as="'+On(t)+'"]';t==="image"&&i&&i.imageSrcSet?(r+='[imagesrcset="'+On(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(r+='[imagesizes="'+On(i.imageSizes)+'"]')):r+='[href="'+On(e)+'"]';var u=r;switch(t){case"style":u=ro(e);break;case"script":u=co(e)}ui.has(u)||(e=p({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),ui.set(u,e),l.querySelector(r)!==null||t==="style"&&l.querySelector(vs(u))||t==="script"&&l.querySelector(ys(u))||(t=l.createElement("link"),Nn(t,"link",e),Jt(t),l.head.appendChild(t)))}}function cb(e,t){aa.m(e,t);var i=so;if(i&&e){var l=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+On(l)+'"][href="'+On(e)+'"]',u=r;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=co(e)}if(!ui.has(u)&&(e=p({rel:"modulepreload",href:e},t),ui.set(u,e),i.querySelector(r)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ys(u)))return}l=i.createElement("link"),Nn(l,"link",e),Jt(l),i.head.appendChild(l)}}}function ub(e,t,i){aa.S(e,t,i);var l=so;if(l&&e){var r=Mi(l).hoistableStyles,u=ro(e);t=t||"default";var v=r.get(u);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(vs(u)))E.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},i),(i=ui.get(u))&&Od(e,i);var Y=v=l.createElement("link");Jt(Y),Nn(Y,"link",e),Y._p=new Promise(function(le,xe){Y.onload=le,Y.onerror=xe}),Y.addEventListener("load",function(){E.loading|=1}),Y.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Qr(v,t,l)}v={type:"stylesheet",instance:v,count:1,state:E},r.set(u,v)}}}function db(e,t){aa.X(e,t);var i=so;if(i&&e){var l=Mi(i).hoistableScripts,r=co(e),u=l.get(r);u||(u=i.querySelector(ys(r)),u||(e=p({src:e,async:!0},t),(t=ui.get(r))&&Rd(e,t),u=i.createElement("script"),Jt(u),Nn(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(r,u))}}function fb(e,t){aa.M(e,t);var i=so;if(i&&e){var l=Mi(i).hoistableScripts,r=co(e),u=l.get(r);u||(u=i.querySelector(ys(r)),u||(e=p({src:e,async:!0,type:"module"},t),(t=ui.get(r))&&Rd(e,t),u=i.createElement("script"),Jt(u),Nn(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(r,u))}}function sp(e,t,i,l){var r=(r=Ce.current)?Ir(r):null;if(!r)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=ro(i.href),i=Mi(r).hoistableStyles,l=i.get(t),l||(l={type:"style",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=ro(i.href);var u=Mi(r).hoistableStyles,v=u.get(e);if(v||(r=r.ownerDocument||r,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,v),(u=r.querySelector(vs(e)))&&!u._p&&(v.instance=u,v.state.loading=5),ui.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ui.set(e,i),u||hb(r,e,i,v.state))),t&&l===null)throw Error(s(528,""));return v}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=co(i),i=Mi(r).hoistableScripts,l=i.get(t),l||(l={type:"script",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ro(e){return'href="'+On(e)+'"'}function vs(e){return'link[rel="stylesheet"]['+e+"]"}function rp(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function hb(e,t,i,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Nn(t,"link",i),Jt(t),e.head.appendChild(t))}function co(e){return'[src="'+On(e)+'"]'}function ys(e){return"script[async]"+e}function cp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+On(i.href)+'"]');if(l)return t.instance=l,Jt(l),l;var r=p({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Jt(l),Nn(l,"style",r),Qr(l,i.precedence,e),t.instance=l;case"stylesheet":r=ro(i.href);var u=e.querySelector(vs(r));if(u)return t.state.loading|=4,t.instance=u,Jt(u),u;l=rp(i),(r=ui.get(r))&&Od(l,r),u=(e.ownerDocument||e).createElement("link"),Jt(u);var v=u;return v._p=new Promise(function(E,Y){v.onload=E,v.onerror=Y}),Nn(u,"link",l),t.state.loading|=4,Qr(u,i.precedence,e),t.instance=u;case"script":return u=co(i.src),(r=e.querySelector(ys(u)))?(t.instance=r,Jt(r),r):(l=i,(r=ui.get(u))&&(l=p({},i),Rd(l,r)),e=e.ownerDocument||e,r=e.createElement("script"),Jt(r),Nn(r,"link",l),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Qr(l,i.precedence,e));return t.instance}function Qr(e,t,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=l.length?l[l.length-1]:null,u=r,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===t)u=E;else if(u!==r)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Od(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Kr=null;function up(e,t,i){if(Kr===null){var l=new Map,r=Kr=new Map;r.set(i,l)}else r=Kr,l=r.get(i),l||(l=new Map,r.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),r=0;r<i.length;r++){var u=i[r];if(!(u[Yi]||u[Kt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var v=u.getAttribute(t)||"";v=e+v;var E=l.get(v);E?E.push(u):l.set(v,[u])}}return l}function dp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function mb(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function gb(e,t,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var r=ro(l.href),u=t.querySelector(vs(r));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Jr.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,Jt(u);return}u=t.ownerDocument||t,l=rp(l),(r=ui.get(r))&&Od(l,r),u=u.createElement("link"),Jt(u);var v=u;v._p=new Promise(function(E,Y){v.onload=E,v.onerror=Y}),Nn(u,"link",l),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Jr.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var qd=0;function pb(e,t){return e.stylesheets&&e.count===0&&Fr(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&Fr(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&qd===0&&(qd=62500*Jx());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fr(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>qd?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(r)}}:null}function Jr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wr=null;function Fr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wr=new Map,t.forEach(vb,e),Wr=null,Jr.call(e))}function vb(e,t){if(!(t.state.loading&4)){var i=Wr.get(e);if(i)var l=i.get(null);else{i=new Map,Wr.set(e,i);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<r.length;u++){var v=r[u];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),l=v)}l&&i.set(null,l)}r=t.instance,v=r.getAttribute("data-precedence"),u=i.get(v)||l,u===l&&i.set(null,r),i.set(v,r),this.count++,l=Jr.bind(this),r.addEventListener("load",l),r.addEventListener("error",l),u?u.parentNode.insertBefore(r,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var xs={$$typeof:U,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function yb(e,t,i,l,r,u,v,E,Y){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.hiddenUpdates=ma(null),this.identifierPrefix=l,this.onUncaughtError=r,this.onCaughtError=u,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function hp(e,t,i,l,r,u,v,E,Y,le,xe,Ee){return e=new yb(e,t,i,v,Y,le,xe,Ee,E),t=1,u===!0&&(t|=24),u=Zn(3,null,null,t),e.current=u,u.stateNode=e,t=mu(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:l,isDehydrated:i,cache:t},yu(u),e}function mp(e){return e?(e=Bl,e):Bl}function gp(e,t,i,l,r,u){r=mp(r),l.context===null?l.context=r:l.pendingContext=r,l=Ca(t),l.payload={element:i},u=u===void 0?null:u,u!==null&&(l.callback=u),i=Ta(e,l,t),i!==null&&(Un(i,e,t),Wo(i,e,t))}function pp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function jd(e,t){pp(e,t),(e=e.alternate)&&pp(e,t)}function vp(e){if(e.tag===13||e.tag===31){var t=ol(e,67108864);t!==null&&Un(t,e,67108864),jd(e,67108864)}}function yp(e){if(e.tag===13||e.tag===31){var t=Wn();t=yn(t);var i=ol(e,t);i!==null&&Un(i,e,t),jd(e,t)}}var Pr=!0;function xb(e,t,i,l){var r=N.T;N.T=null;var u=L.p;try{L.p=2,Hd(e,t,i,l)}finally{L.p=u,N.T=r}}function bb(e,t,i,l){var r=N.T;N.T=null;var u=L.p;try{L.p=8,Hd(e,t,i,l)}finally{L.p=u,N.T=r}}function Hd(e,t,i,l){if(Pr){var r=Gd(l);if(r===null)Ed(e,t,l,ec,i),bp(e,l);else if(Nb(r,e,t,i,l))l.stopPropagation();else if(bp(e,l),t&4&&-1<Sb.indexOf(e)){for(;r!==null;){var u=pi(r);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var v=vt(u.pendingLanes);if(v!==0){var E=u;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var Y=1<<31-Be(v);E.entanglements[1]|=Y,v&=~Y}Ri(u),(Nt&6)===0&&(jr=wt()+500,hs(0))}}break;case 31:case 13:E=ol(u,2),E!==null&&Un(E,u,2),Gr(),jd(u,2)}if(u=Gd(l),u===null&&Ed(e,t,l,ec,i),u===r)break;r=u}r!==null&&l.stopPropagation()}else Ed(e,t,l,null,i)}}function Gd(e){return e=Ho(e),Ud(e)}var ec=null;function Ud(e){if(ec=null,e=Di(e),e!==null){var t=f(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ec=e,null}function xp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zn()){case tt:return 2;case Rt:return 8;case cn:case qt:return 32;case wn:return 268435456;default:return 32}default:return 32}}var Bd=!1,Ua=null,Ba=null,Ya=null,bs=new Map,Ss=new Map,$a=[],Sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bp(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":bs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Ns(e,t,i,l,r,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:u,targetContainers:[r]},t!==null&&(t=pi(t),t!==null&&vp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Nb(e,t,i,l,r){switch(t){case"focusin":return Ua=Ns(Ua,e,t,i,l,r),!0;case"dragenter":return Ba=Ns(Ba,e,t,i,l,r),!0;case"mouseover":return Ya=Ns(Ya,e,t,i,l,r),!0;case"pointerover":var u=r.pointerId;return bs.set(u,Ns(bs.get(u)||null,e,t,i,l,r)),!0;case"gotpointercapture":return u=r.pointerId,Ss.set(u,Ns(Ss.get(u)||null,e,t,i,l,r)),!0}return!1}function Sp(e){var t=Di(e.target);if(t!==null){var i=f(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,tl(e.priority,function(){yp(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,tl(e.priority,function(){yp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Gd(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);jo=l,i.target.dispatchEvent(l),jo=null}else return t=pi(i),t!==null&&vp(t),e.blockedOn=i,!1;t.shift()}return!0}function Np(e,t,i){tc(e)&&i.delete(t)}function Eb(){Bd=!1,Ua!==null&&tc(Ua)&&(Ua=null),Ba!==null&&tc(Ba)&&(Ba=null),Ya!==null&&tc(Ya)&&(Ya=null),bs.forEach(Np),Ss.forEach(Np)}function nc(e,t){e.blockedOn===t&&(e.blockedOn=null,Bd||(Bd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Eb)))}var ic=null;function Ep(e){ic!==e&&(ic=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ic===e&&(ic=null);for(var t=0;t<e.length;t+=3){var i=e[t],l=e[t+1],r=e[t+2];if(typeof l!="function"){if(Ud(l||i)===null)continue;break}var u=pi(i);u!==null&&(e.splice(t,3),t-=3,Gu(u,{pending:!0,data:r,method:i.method,action:l},l,r))}}))}function uo(e){function t(Y){return nc(Y,e)}Ua!==null&&nc(Ua,e),Ba!==null&&nc(Ba,e),Ya!==null&&nc(Ya,e),bs.forEach(t),Ss.forEach(t);for(var i=0;i<$a.length;i++){var l=$a[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<$a.length&&(i=$a[0],i.blockedOn===null);)Sp(i),i.blockedOn===null&&$a.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var r=i[l],u=i[l+1],v=r[bt]||null;if(typeof u=="function")v||Ep(i);else if(v){var E=null;if(u&&u.hasAttribute("formAction")){if(r=u,v=u[bt]||null)E=v.formAction;else if(Ud(r)!==null)continue}else E=v.action;typeof E=="function"?i[l+1]=E:(i.splice(l,3),l-=3),Ep(i)}}}function _p(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(v){return r=v})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Yd(e){this._internalRoot=e}ac.prototype.render=Yd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,l=Wn();gp(i,l,e,t,null,null)},ac.prototype.unmount=Yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gp(e.current,2,null,e,null,null),Gr(),t[gi]=null}};function ac(e){this._internalRoot=e}ac.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cn();e={blockedOn:null,target:e,priority:t};for(var i=0;i<$a.length&&t!==0&&t<$a[i].priority;i++);$a.splice(i,0,e),i===0&&Sp(e)}};var wp=a.version;if(wp!=="19.2.4")throw Error(s(527,wp,"19.2.4"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var _b={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{ie=lc.inject(_b),ee=lc}catch{}}return _s.createRoot=function(e,t){if(!c(e))throw Error(s(299));var i=!1,l="",r=km,u=Om,v=Rm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=hp(e,1,!1,null,null,i,l,null,r,u,v,_p),e[gi]=t.current,Nd(e),new Yd(t)},_s.hydrateRoot=function(e,t,i){if(!c(e))throw Error(s(299));var l=!1,r="",u=km,v=Om,E=Rm,Y=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(Y=i.formState)),t=hp(e,1,!0,t,i??null,l,r,Y,u,v,E,_p),t.context=mp(null),i=t.current,l=Wn(),l=yn(l),r=Ca(l),r.callback=null,Ta(i,r,l),i=l,t.current.lanes=i,Ti(t,i),Ri(t),e[gi]=t.current,Nd(e),new ac(t)},_s.version="19.2.4",_s}var qp;function Ob(){if(qp)return Ld.exports;qp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Ld.exports=kb(),Ld.exports}var Rb=Ob();const qb=Df(Rb),jp=n=>{let a;const o=new Set,s=(m,y)=>{const p=typeof m=="function"?m(a):m;if(!Object.is(p,a)){const S=a;a=y??(typeof p!="object"||p===null)?p:Object.assign({},a,p),o.forEach(_=>_(a,S))}},c=()=>a,h={setState:s,getState:c,getInitialState:()=>g,subscribe:m=>(o.add(m),()=>o.delete(m))},g=a=n(s,c,h);return h},jb=(n=>n?jp(n):jp),Hb=n=>n;function Gb(n,a=Hb){const o=pe.useSyncExternalStore(n.subscribe,pe.useCallback(()=>a(n.getState()),[n,a]),pe.useCallback(()=>a(n.getInitialState()),[n,a]));return pe.useDebugValue(o),o}const Hp=n=>{const a=jb(n),o=s=>Gb(a,s);return Object.assign(o,a),o},Ls=(n=>n?Hp(n):Hp),it=Ls(n=>({guidanceDocs:[],narrativeDocs:[],activeGuidanceId:"",activeNarrativeId:"",tokens:[],variables:[],setGuidanceDocs:a=>n({guidanceDocs:a}),setNarrativeDocs:a=>n({narrativeDocs:a}),updateGuidanceDoc:(a,o)=>n(s=>({guidanceDocs:s.guidanceDocs.map(c=>c.id===a?o(c):c)})),updateNarrativeDoc:(a,o)=>n(s=>({narrativeDocs:s.narrativeDocs.map(c=>c.id===a?o(c):c)})),setActiveGuidanceId:a=>n({activeGuidanceId:a}),setActiveNarrativeId:a=>n({activeNarrativeId:a}),setTokens:a=>n({tokens:a}),setVariables:a=>n({variables:a}),addGuidanceDoc:a=>n(o=>({guidanceDocs:[...o.guidanceDocs,a]})),addNarrativeDoc:a=>n(o=>({narrativeDocs:[...o.narrativeDocs,a]})),removeGuidanceDoc:a=>n(o=>({guidanceDocs:o.guidanceDocs.filter(s=>s.id!==a)})),removeNarrativeDoc:a=>n(o=>({narrativeDocs:o.narrativeDocs.filter(s=>s.id!==a)})),markDirty:(a,o)=>n(s=>a==="guidance"?{guidanceDocs:s.guidanceDocs.map(c=>c.id===o?{...c,isDirty:!0}:c)}:{narrativeDocs:s.narrativeDocs.map(c=>c.id===o?{...c,isDirty:!0}:c)}),markClean:(a,o)=>n(s=>a==="guidance"?{guidanceDocs:s.guidanceDocs.map(c=>c.id===o?{...c,isDirty:!1}:c)}:{narrativeDocs:s.narrativeDocs.map(c=>c.id===o?{...c,isDirty:!1}:c)})})),It=Ls(n=>({mode:"guidance",flowDirection:"horizontal",projectName:"",showSimulator:!1,showPreview:!1,showSettings:!1,issueCount:0,issueDetails:[],setMode:a=>n({mode:a}),setFlowDirection:a=>n({flowDirection:a}),toggleFlowDirection:()=>n(a=>({flowDirection:a.flowDirection==="horizontal"?"vertical":"horizontal"})),setProjectName:a=>n({projectName:a}),setShowSimulator:a=>n({showSimulator:a}),setShowPreview:a=>n({showPreview:a}),setShowSettings:a=>n({showSettings:a}),setIssues:(a,o)=>n({issueCount:a,issueDetails:o})})),Ve=Ls(n=>({guidancePositions:{},narrativePositions:{},guidanceAnchorPositions:{},narrativeAnchorPositions:{},collapsedNodes:{},selectedGuidanceId:"",selectedNarrativeId:"",extraGuidanceConditions:{},extraGuidanceActions:{},extraNarrativeConditions:{},extraNarrativeActions:{},inventoryOverrides:{},guidanceStageFilter:"all",narrativeStageFilter:"all",guidanceFlowInstance:null,narrativeFlowInstance:null,setGuidancePositions:a=>n({guidancePositions:a}),setNarrativePositions:a=>n({narrativePositions:a}),updatePosition:(a,o,s)=>n(c=>a==="guidance"?{guidancePositions:{...c.guidancePositions,[o]:s}}:{narrativePositions:{...c.narrativePositions,[o]:s}}),setGuidanceAnchorPositions:a=>n({guidanceAnchorPositions:a}),setNarrativeAnchorPositions:a=>n({narrativeAnchorPositions:a}),toggleCollapsed:a=>n(o=>({collapsedNodes:{...o.collapsedNodes,[a]:!o.collapsedNodes[a]}})),setSelectedGuidanceId:a=>n({selectedGuidanceId:a}),setSelectedNarrativeId:a=>n({selectedNarrativeId:a}),setExtraGuidanceConditions:a=>n({extraGuidanceConditions:a}),setExtraGuidanceActions:a=>n({extraGuidanceActions:a}),setExtraNarrativeConditions:a=>n({extraNarrativeConditions:a}),setExtraNarrativeActions:a=>n({extraNarrativeActions:a}),setInventoryOverrides:a=>n({inventoryOverrides:a}),setStageFilter:(a,o)=>n(a==="guidance"?{guidanceStageFilter:o}:{narrativeStageFilter:o}),setFlowInstance:(a,o)=>n(a==="guidance"?{guidanceFlowInstance:o}:{narrativeFlowInstance:o})})),Ht=Ls(n=>({quickEditTarget:null,quickEditValue:"",conditionEditTarget:null,conditionEditValue:"",actionEditTarget:null,actionEditValue:"",inventoryEditTarget:null,inventoryEditValue:"",openQuickEdit:(a,o)=>n({quickEditTarget:a,quickEditValue:o}),closeQuickEdit:()=>n({quickEditTarget:null,quickEditValue:""}),setQuickEditValue:a=>n({quickEditValue:a}),openConditionEdit:a=>n({conditionEditTarget:a,conditionEditValue:a.value}),closeConditionEdit:()=>n({conditionEditTarget:null,conditionEditValue:""}),setConditionEditValue:a=>n({conditionEditValue:a}),openActionEdit:a=>n({actionEditTarget:a,actionEditValue:a.value}),closeActionEdit:()=>n({actionEditTarget:null,actionEditValue:""}),setActionEditValue:a=>n({actionEditValue:a}),openInventoryEdit:(a,o)=>n({inventoryEditTarget:{itemId:a,currentValue:o},inventoryEditValue:o}),closeInventoryEdit:()=>n({inventoryEditTarget:null,inventoryEditValue:""}),setInventoryEditValue:a=>n({inventoryEditValue:a})})),Gp=50,uf="application/stillroom-inventory-item",fo=Ls((n,a)=>({guidanceUndoStack:[],guidanceRedoStack:[],narrativeUndoStack:[],narrativeRedoStack:[],pushGuidanceSnapshot:o=>n(s=>{const c=[...s.guidanceUndoStack,o];return c.length>Gp&&c.shift(),{guidanceUndoStack:c,guidanceRedoStack:[]}}),pushNarrativeSnapshot:o=>n(s=>{const c=[...s.narrativeUndoStack,o];return c.length>Gp&&c.shift(),{narrativeUndoStack:c,narrativeRedoStack:[]}}),undoGuidance:()=>{const o=a();if(o.guidanceUndoStack.length===0)return null;const s=[...o.guidanceUndoStack],c=s.pop();return n({guidanceUndoStack:s}),c},redoGuidance:()=>{const o=a();if(o.guidanceRedoStack.length===0)return null;const s=[...o.guidanceRedoStack],c=s.pop();return n({guidanceRedoStack:s}),c},undoNarrative:()=>{const o=a();if(o.narrativeUndoStack.length===0)return null;const s=[...o.narrativeUndoStack],c=s.pop();return n({narrativeUndoStack:s}),c},redoNarrative:()=>{const o=a();if(o.narrativeRedoStack.length===0)return null;const s=[...o.narrativeRedoStack],c=s.pop();return n({narrativeRedoStack:s}),c},clearHistory:()=>n({guidanceUndoStack:[],guidanceRedoStack:[],narrativeUndoStack:[],narrativeRedoStack:[]})})),Ub="#5ba3a3",Bb="#8b7eb8",Sc=n=>{const a=n.color?.trim();return a||((n.kind??(n.id.startsWith("menu.")?"menu":"node"))==="menu"?Ub:Bb)},Oc=n=>{const a=n.menus.map(c=>({kind:"menu",data:c})),o=n.nodes.map(c=>({kind:"node",data:c})),s=n.options.map(c=>({kind:"option",data:c}));return[...a,...o,...s]},Rs=n=>n.data.id,wi=(n,a)=>{if(!n)return null;const o=n.trim(),s=o.startsWith("menu.")||o.startsWith("node.")?[o]:[`menu.${o}`,`node.${o}`];for(const c of s){if(a.menus.some(f=>f.id===c))return{kind:"menu",id:c};if(a.nodes.some(f=>f.id===c))return{kind:"node",id:c}}return null},Gt=(n,a)=>n.menus.find(o=>o.id===a),Ut=(n,a)=>n.nodes.find(o=>o.id===a),an=(n,a)=>n.options.find(o=>o.id===a),la=(n,a)=>n.menus.some(o=>o.id===a)?"menu":n.nodes.some(o=>o.id===a)?"node":n.options.some(o=>o.id===a)?"option":null,Up=(n,a)=>{const o=an(n,a);return o?.target?wi(o.target,n)?.id??null:null},Nc=(n,a)=>an(n,a)?.label??a,Rc=()=>{const n=it(o=>o.guidanceDocs),a=it(o=>o.activeGuidanceId);return n.find(o=>o.id===a)??n[0]},Mf=()=>{const n=it(o=>o.narrativeDocs),a=it(o=>o.activeNarrativeId);return n.find(o=>o.id===a)??n[0]},Yb=()=>{const n=Rc();return n?Oc(n.module):[]},$b=()=>{const n=it(s=>s.guidanceDocs),a=it(s=>s.narrativeDocs),o=[];for(const s of n)o.push(...s.diagnostics);for(const s of a)o.push(...s.diagnostics);return o},Vb=["@koan","@errand_ask","@game_prompt","@routine_check","@narrative_offer"],Fn=["#4cb6a0","#d99245","#5d95d7","#b97bd4","#cf6f84","#9caf55","#d97878","#4ea8d8"],Lb=n=>{let a=0;for(let o=0;o<n.length;o+=1)a=a*31+n.charCodeAt(o)|0;return Math.abs(a)},df=n=>{const a=n.color?.trim();return a||Fn[Lb(n.id)%Fn.length]},ut=(n,a)=>n.nodes.find(o=>o.id===a),Ec=n=>{const a=n.match(/^stage\.(\d+)\./i);if(!a)return null;const o=Number(a[1]);return Number.isFinite(o)?o:null},Xv=n=>{const a=new Map;for(const s of n.nodes)for(const c of s.options)a.set(c,(a.get(c)??0)+1);const o=new Set;for(const s of n.nodes)s.speaker==="user"&&(s.quest||s.completion||(a.get(s.id)??0)===1&&(s.options.length>0||o.add(s.id)));return o},el=(n,a,o)=>{if(!a)return null;if(!o.has(a))return a;const s=ut(n,a);return s?s.next??s.options[0]??null:a},_c=(n,a)=>ut(n,a)?.text??a,Wa="in",zf="cond::",kf="act::",ei=n=>`opt:${n}`,jt=n=>{if(!n||!n.startsWith("opt:"))return null;const a=Number(n.slice(4));return Number.isInteger(a)&&a>=0?a:null},Bn=n=>n.startsWith(zf),Yn=n=>n.startsWith(kf),Xa=n=>`${zf}${encodeURIComponent(n)}`,ra=n=>`${kf}${encodeURIComponent(n)}`,Za=n=>{if(!Bn(n))return"";const a=n.slice(zf.length);try{return decodeURIComponent(a)}catch{return a}},Ia=n=>{if(!Yn(n))return"";const a=n.slice(kf.length);try{return decodeURIComponent(a)}catch{return a}},di=(n,a)=>{const o=a.trim();return!o||n.some(s=>s.trim()===o)?n:[...n,o]},oc=(n,a)=>{const o=a.trim();return n.filter(s=>s.trim()!==o)},ho=(n,a,o)=>{const s=a.trim(),c=o.trim();let f=!1;const d=[];for(const h of n){const g=h.trim(),m=g===s?c:h;g===s&&(f=!0),d.includes(m)||d.push(m)}return{next:d,changed:f}},Xb=n=>{if(!n)return[];const a=new Set;for(const o of n.menus)for(const s of o.requires)a.add(s.trim());for(const o of n.nodes)for(const s of o.requires)a.add(s.trim());for(const o of n.options)for(const s of o.requires)a.add(s.trim());return Array.from(a).filter(Boolean).sort()},Zb=n=>{if(!n)return[];const a=new Set;for(const o of n.nodes)for(const s of o.requires)a.add(s.trim());return Array.from(a).filter(Boolean).sort()},oa=(n,a)=>{const o=a.trim();return!o||n.some(s=>s.trim()===o)?n:[...n,o]},Qd=(n,a)=>{const o=a.trim();return n.filter(s=>s.trim()!==o)},sc=(n,a,o)=>{const s=a.trim(),c=o.trim();let f=!1;const d=[];for(const h of n){const g=h.trim();g&&(g===s?(c&&d.push(c),f=!0):d.push(g))}return f?{changed:!0,next:Array.from(new Set(d))}:{changed:!1,next:n}},Ib=n=>{if(!n)return[];const a=new Set;for(const o of n.options)for(const s of o.actions)a.add(s.trim());return Array.from(a).filter(Boolean).sort()},Qb=n=>{if(!n)return[];const a=new Set;for(const o of n.nodes)for(const s of o.actions)a.add(s.trim());return Array.from(a).filter(Boolean).sort()},Bp=n=>{if(!n)return null;try{const a=JSON.parse(n);return!a.kind||!a.value||!a.id||!a.label?null:a}catch{return null}},Kb=(n,a)=>{let o=1,s=`${n}${o}`;for(;a.has(s);)o+=1,s=`${n}${o}`;return s},Yp=n=>n.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),qi=(n,a)=>a.has(n)?Kb(`${n}_`,a):n,$p={maxItems:64},Vp={maxNodes:100},Ja=(n,a,o,s)=>({level:n,message:a,section:o,key:s}),Jb=n=>n.replace(/\r$/,""),Zv=n=>{const a=[],o={};let s="";const c=n.split(`
`);for(const f of c){const d=Jb(f),h=d.trim();if(h.length===0){a.push({kind:"blank",raw:d,section:s});continue}if(h.startsWith("#")){a.push({kind:"comment",raw:d,section:s});continue}if(h.startsWith("[")&&h.endsWith("]")){const m=h.slice(1,-1).trim();s=m,a.push({kind:"section",raw:d,section:m}),o[m]||(o[m]=[]);continue}const g=d.indexOf("=");if(g!==-1){const m=d.slice(0,g).trim(),y=d.slice(g+1).trim(),p={kind:"entry",raw:d,section:s,key:m,value:y};a.push(p),o[s]||(o[s]=[]),o[s].push(p);continue}a.push({kind:"other",raw:d,section:s})}return{lines:a,sections:o}},ca=(n,a)=>n&&(n.startsWith(a)?n:`${a}${n}`),Os=n=>n?n.split(",").map(a=>a.trim()).filter(a=>a.length>0):[],Wb=()=>({meta:{id:"",title:"",priority:0,enabled:!0,rootMenu:""},menus:[],nodes:[],options:[]}),Fb=(n,a)=>{let o=n.find(s=>s.id===a);return o||(o={id:a,text:"",options:[],requires:[]},n.push(o)),o},Pb=(n,a)=>{let o=n.find(s=>s.id===a);return o||(o={id:a,text:"",speaker:"sensei",options:[],requires:[],actions:[]},n.push(o)),o},e1=(n,a)=>{let o=n.find(s=>s.id===a);return o||(o={id:a,label:"",target:"",actions:[],requires:[]},n.push(o)),o},t1=n=>{const a=[],o=Zv(n),s=Wb();for(const[c,f]of Object.entries(o.sections)){if(c==="meta"){for(const d of f)if(!(d.kind!=="entry"||!d.key))switch(d.key){case"id":s.meta.id=d.value??"";break;case"title":s.meta.title=d.value??"";break;case"priority":s.meta.priority=Number(d.value??"0")||0;break;case"enabled":s.meta.enabled=d.value!=="0";break;case"root_menu":s.meta.rootMenu=ca(d.value??"","menu.");break}continue}if(c.startsWith("menu.")){const d=c,h=Fb(s.menus,d);for(const g of f)if(!(g.kind!=="entry"||!g.key))switch(g.key){case"color":h.color=g.value??"";break;case"text":h.text=g.value??"";break;case"auto_route":h.autoRoute=g.value==="1"||g.value==="true";break;case"back_blocked":h.backBlocked=g.value==="1"||g.value==="true";break;case"options":h.options=Os(g.value??"").map(m=>ca(m,"option."));break;case"source":h.source=g.value??"";break;case"require":g.value&&h.requires.push(g.value);break;case"item_label":h.itemLabel=g.value??"";break;case"item_target":h.itemTarget=g.value??"";break;case"item_action":h.itemAction=g.value??"";break;case"empty_text":h.emptyText=g.value??"";break}continue}if(c.startsWith("node.")){const d=c,h=Pb(s.nodes,d);for(const g of f)if(!(g.kind!=="entry"||!g.key))switch(g.key){case"color":h.color=g.value??"";break;case"text":h.text=g.value??"";break;case"back_blocked":h.backBlocked=g.value==="1"||g.value==="true";break;case"speaker":h.speaker=g.value??"sensei";break;case"options":h.options=Os(g.value??"").map(m=>ca(m,"option."));break;case"next":h.next=g.value??"";break;case"require":g.value&&h.requires.push(g.value);break;case"action":g.value&&h.actions.push(g.value);break}continue}if(c.startsWith("option.")){const d=c,h=e1(s.options,d);for(const g of f)if(!(g.kind!=="entry"||!g.key))switch(g.key){case"label":h.label=g.value??"";break;case"target":h.target=g.value??"";break;case"action":g.value&&h.actions.push(g.value);break;case"require":g.value&&h.requires.push(g.value);break}continue}}return s.meta.id||a.push(Ja("error","meta.id is missing","meta")),s.meta.title||a.push(Ja("warning","meta.title is missing","meta")),s.meta.rootMenu||a.push(Ja("error","meta.root_menu is missing","meta")),s.menus.length>$p.maxItems&&a.push(Ja("warning",`menu count exceeds ${$p.maxItems}`,"menus")),{module:s,diagnostics:a}},kt=(n,a)=>a==null||typeof a=="string"&&a.length===0?"":`${n} = ${a}`,Lp=n=>{const a=[];a.push("[meta]"),a.push(kt("id",n.meta.id)),a.push(kt("title",n.meta.title)),a.push(kt("priority",n.meta.priority)),a.push(kt("enabled",n.meta.enabled?1:0)),a.push(kt("root_menu",ca(n.meta.rootMenu,"menu."))),a.push("");for(const o of n.menus){a.push(`[${ca(o.id,"menu.")}]`),a.push(kt("color",o.color)),a.push(kt("text",o.text)),a.push(kt("auto_route",o.autoRoute?1:0)),a.push(kt("back_blocked",o.backBlocked?1:0)),o.options.length&&a.push(kt("options",o.options.map(s=>ca(s,"option.")).join(", "))),a.push(kt("source",o.source));for(const s of o.requires)a.push(kt("require",s));a.push(kt("item_label",o.itemLabel)),a.push(kt("item_target",o.itemTarget)),a.push(kt("item_action",o.itemAction)),a.push(kt("empty_text",o.emptyText)),a.push("")}for(const o of n.nodes){a.push(`[${ca(o.id,"node.")}]`),a.push(kt("color",o.color)),a.push(kt("text",o.text)),a.push(kt("back_blocked",o.backBlocked?1:0)),a.push(kt("speaker",o.speaker??"sensei")),o.options.length&&a.push(kt("options",o.options.map(s=>ca(s,"option.")).join(", "))),a.push(kt("next",o.next));for(const s of o.requires)a.push(kt("require",s));for(const s of o.actions)a.push(kt("action",s));a.push("")}for(const o of n.options){a.push(`[${ca(o.id,"option.")}]`),a.push(kt("label",o.label)),a.push(kt("target",o.target));for(const s of o.actions)a.push(kt("action",s));for(const s of o.requires)a.push(kt("require",s));a.push("")}return`${a.join(`
`).trimEnd()}
`},n1=()=>({meta:{id:"",title:"",description:"",author:"",version:1},rewards:{expPerStage:0,finalExpBonus:0},nodes:[]}),i1=(n,a)=>{let o=n.find(s=>s.id===a);return o||(o={id:a,speaker:"sensei",text:"",options:[],requires:[],actions:[]},n.push(o)),o},xl=n=>(n.quest||(n.quest={questType:"play_game"}),n.quest),a1=n=>{if(n==="play_game"||n==="play_console"||n==="earn_achievement")return n},l1=n=>{const a=[],o=Zv(n),s=n1();for(const[c,f]of Object.entries(o.sections)){if(c==="meta"){for(const h of f)if(!(h.kind!=="entry"||!h.key))switch(h.key){case"id":s.meta.id=h.value??"";break;case"title":s.meta.title=h.value??"";break;case"description":s.meta.description=h.value??"";break;case"author":s.meta.author=h.value??"";break;case"version":s.meta.version=Number(h.value??"1")||1;break}continue}if(c==="rewards")continue;const d=i1(s.nodes,c);for(const h of f)if(!(h.kind!=="entry"||!h.key))switch(h.key){case"speaker":d.speaker=h.value??"sensei";break;case"color":d.color=h.value??"";break;case"text":d.text=h.value??"";break;case"next":d.next=h.value??"";break;case"options":d.options=Os(h.value??"");break;case"require":h.value&&d.requires.push(h.value);break;case"requires":d.requires=Os(h.value??"");break;case"action":h.value&&d.actions.push(h.value);break;case"actions":d.actions=Os(h.value??"");break;case"quest_type":{const g=a1(h.value??"");if(g){const m=xl(d);m.questType=g}break}case"quest":(h.value==="true"||h.value==="1")&&xl(d);break;case"game_title":xl(d).gameTitle=h.value??"";break;case"console":case"game_system":xl(d).gameSystem=h.value??"";break;case"duration_minutes":xl(d).durationMinutes=Number(h.value??"0")||0;break;case"achievement_id":xl(d).achievementId=h.value??"";break;case"achievement_name":xl(d).achievementName=h.value??"";break;case"completion_text":d.text||(d.text=h.value??"");break;case"completion":d.completion=h.value==="true"||h.value==="1";break}}return s.meta.id||a.push(Ja("error","meta.id is missing","meta")),s.meta.title||a.push(Ja("warning","meta.title is missing","meta")),s.nodes.length===0&&a.push(Ja("error","no narrative nodes found")),s.nodes.length>Vp.maxNodes&&a.push(Ja("warning",`node count exceeds ${Vp.maxNodes}`,"nodes")),{narrative:s,diagnostics:a}},fn=(n,a)=>a==null||typeof a=="string"&&a.length===0?"":`${n} = ${a}`,Xp=n=>{const a=[];a.push("[meta]"),a.push(fn("id",n.meta.id)),a.push(fn("title",n.meta.title)),a.push(fn("description",n.meta.description)),a.push(fn("author",n.meta.author)),a.push(fn("version",n.meta.version)),a.push("");for(const o of n.nodes){a.push(`[${o.id}]`),a.push(fn("speaker",o.speaker)),a.push(fn("color",o.color)),a.push(fn("text",o.text)),o.options.length&&a.push(fn("options",o.options.join(", "))),a.push(fn("next",o.next));for(const s of o.requires)a.push(fn("require",s));for(const s of o.actions)a.push(fn("action",s));o.quest&&(a.push(fn("quest_type",o.quest.questType)),a.push(fn("game_title",o.quest.gameTitle)),a.push(fn("console",o.quest.gameSystem)),a.push(fn("duration_minutes",o.quest.durationMinutes)),a.push(fn("achievement_id",o.quest.achievementId)),a.push(fn("achievement_name",o.quest.achievementName))),o.completion&&a.push(fn("completion","true")),a.push("")}return`${a.join(`
`).trimEnd()}
`},Fa=(n,a=110)=>{const o=n.replace(/\s+/g," ").trim();return o.length<=a?o:`${o.slice(0,Math.max(0,a-3))}...`},Iv=n=>n.replace(/\\/g,"/"),o1=n=>{const a=Iv(n),o="sensei/",s=a.toLowerCase().indexOf(o);return s>=0?a.slice(s+o.length):a},ff=(n,a)=>{const o=new Blob([a],{type:"text/plain"}),s=URL.createObjectURL(o),c=document.createElement("a");c.href=s,c.download=n,c.click(),URL.revokeObjectURL(s)},Zp=async(n,a)=>{const o=window.showSaveFilePicker;if(!o)return ff(n,a),"downloaded";try{const c=await(await o({suggestedName:n,types:[{description:"Sensei text",accept:{"text/plain":[".txt"]}}]})).createWritable();return await c.write(a),await c.close(),"saved"}catch(s){if(s.name==="AbortError")return"cancelled";throw s}},s1=({onNew:n,onSave:a,onExport:o,onTest:s,fileInputRef:c})=>{const f=It(S=>S.mode),d=It(S=>S.setMode),h=It(S=>S.projectName),g=It(S=>S.setShowPreview),m=It(S=>S.setShowSimulator),y=It(S=>S.showSettings),p=It(S=>S.setShowSettings);return b.jsxs("header",{className:"topbar",children:[b.jsxs("div",{className:"brand",children:[b.jsx("div",{className:"brand-mark",children:"SE"}),b.jsxs("div",{className:"brand-text",children:[b.jsx("div",{className:"brand-title",children:"Sensei Editor"}),b.jsx("div",{className:"brand-subtitle",children:"Stillroom Manuscripts"})]})]}),b.jsxs("div",{className:"topbar-center",children:[b.jsx("div",{className:"project-pill",children:h}),b.jsxs("div",{className:"mode-tabs",children:[b.jsx("button",{className:`tab ${f==="guidance"?"active":""}`,onClick:()=>d("guidance"),title:"Edit guidance modules (menus & dialogue)",children:"Guidance"}),b.jsx("button",{className:`tab ${f==="narrative"?"active":""}`,onClick:()=>d("narrative"),title:"Edit narrative quest chains",children:"Narratives"})]})]}),b.jsxs("div",{className:"topbar-actions",children:[b.jsx("button",{className:"ghost",onClick:n,title:"Create a new manuscript",children:"New"}),b.jsx("button",{className:"ghost",onClick:()=>c.current?.click(),title:"Open a sensei folder",children:"Open"}),b.jsx("button",{className:"ghost",onClick:()=>g(!0),title:"Preview selected node",children:"Preview"}),b.jsx("button",{className:"ghost",onClick:()=>{m(!0),s()},title:"Test the dialogue flow",children:"Test"}),b.jsx("button",{className:"ghost",onClick:a,title:"Save to file",children:"Save"}),b.jsx("button",{className:"ghost",onClick:o,title:"Export as .txt",children:"Export"}),b.jsx("button",{className:"ghost",onClick:()=>p(!y),title:"Editor settings",children:"Settings"})]})]})},r1=()=>{const n=it(p=>p.guidanceDocs),a=it(p=>p.narrativeDocs),o=it(p=>p.activeGuidanceId),s=it(p=>p.activeNarrativeId),c=it(p=>p.setActiveGuidanceId),f=it(p=>p.setActiveNarrativeId),d=It(p=>p.mode),h=It(p=>p.setMode),g=Ve(p=>p.setSelectedGuidanceId),m=Ve(p=>p.setSelectedNarrativeId),y=Ve(p=>p.setStageFilter);return b.jsxs("aside",{className:"sidebar",children:[b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Manuscripts"})}),b.jsxs("div",{className:"panel-body",children:[b.jsxs("div",{className:"tree-group",children:[b.jsx("div",{className:"tree-title",children:"guidance modules"}),b.jsx("ul",{className:"tree-list",children:n.map(p=>b.jsxs("li",{className:`tree-item ${p.id===o&&d==="guidance"?"active":""}`,onClick:()=>{c(p.id),h("guidance");const S=Oc(p.module)[0];S&&g(Rs(S))},title:p.path,children:[p.module.meta.title||p.id,p.isDirty?" ":""]},p.id))})]}),b.jsxs("div",{className:"tree-group",children:[b.jsx("div",{className:"tree-title",children:"narrative quests"}),b.jsx("ul",{className:"tree-list",children:a.map(p=>b.jsxs("li",{className:`tree-item ${p.id===s&&d==="narrative"?"active":""}`,onClick:()=>{f(p.id),h("narrative"),y("narrative","all"),p.narrative.nodes[0]&&m(p.narrative.nodes[0].id)},title:p.path,children:[p.narrative.meta.title||p.id,p.isDirty?" ":""]},p.id))})]})]})]}),b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Search"})}),b.jsx("div",{className:"panel-body",children:b.jsx("input",{className:"field",placeholder:"Find nodes, text, ids..."})})]})]})},c1=({children:n})=>b.jsxs("aside",{className:"inspector",children:[b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Node Properties"})}),b.jsxs("div",{className:"panel-body",children:[n,!n&&b.jsx("div",{className:"panel-note",style:{textAlign:"center",padding:"20px 0"},children:"select a node to edit its properties"})]})]}),b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Inventory"})}),b.jsx("div",{className:"panel-body",children:b.jsx("div",{className:"panel-note",children:"Use the left canvas inventory for conditions, tokens, variables, and actions."})})]}),b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Preview"})}),b.jsx("div",{className:"panel-body",children:b.jsx("div",{className:"preview-card",children:b.jsx("div",{className:"preview-bubble",children:b.jsx("span",{style:{opacity:.5},children:"select a node to preview..."})})})})]})]}),u1=({children:n,inspectorChildren:a})=>b.jsxs("div",{className:"workspace",children:[b.jsx(r1,{}),n,b.jsx(c1,{children:a})]}),d1=()=>{const a=$b().map(o=>`${o.level}: ${o.message}`);return b.jsxs("footer",{className:"issues",children:[b.jsx("div",{className:"issues-title",children:a.length>0?" Issues":" Ready"}),b.jsx("ul",{className:"issues-list",children:a.length>0?a.map(o=>b.jsx("li",{children:o},o)):b.jsx("li",{style:{opacity:.6},children:"no issues detected"})})]})},f1=({children:n,inspectorChildren:a,onNew:o,onSave:s,onExport:c,onTest:f,fileInputRef:d})=>b.jsxs("div",{className:"app",children:[b.jsx(s1,{onNew:o,onSave:s,onExport:c,onTest:f,fileInputRef:d}),b.jsx(u1,{inspectorChildren:a,children:n}),b.jsx(d1,{})]}),h1=({onAutoArrange:n,onAddDialogue:a,onAddChoice:o,onEditConditions:s,onAddStage:c})=>{const f=It(C=>C.mode),d=It(C=>C.flowDirection),h=It(C=>C.setFlowDirection),g=Ve(C=>C.narrativeStageFilter),m=Ve(C=>C.setStageFilter),y=Rc(),p=Mf(),S=A.useMemo(()=>{if(!p)return[];const C=p.narrative.nodes.map(k=>Ec(k.id)).filter(k=>k!==null);return Array.from(new Set(C)).sort((k,M)=>k-M)},[p]),_=f==="guidance"?y?.module.meta.title||"Guidance Module":p?.narrative.meta.title||"Narrative",q=f==="guidance"&&y?`entry: ${y.module.meta.rootMenu}  ${y.module.menus.length} menus  ${y.module.nodes.length} nodes`:f==="narrative"&&p?`${S.length} stages  ${p.narrative.nodes.length} nodes  ${g==="all"?"showing all":`stage ${g}`}`:"";return b.jsxs("div",{className:"canvas-header",children:[b.jsxs("div",{className:"canvas-heading",children:[b.jsx("div",{className:"canvas-title",children:_}),b.jsx("div",{className:"canvas-meta",children:q})]}),b.jsxs("div",{className:"canvas-tools",children:[b.jsxs("div",{className:"flow-direction-toggle",role:"group","aria-label":"Layout direction",children:[b.jsx("button",{type:"button",className:`dir-btn ${d==="horizontal"?"active":""}`,onClick:()=>h("horizontal"),children:"Left to Right"}),b.jsx("button",{type:"button",className:`dir-btn ${d==="vertical"?"active":""}`,onClick:()=>h("vertical"),children:"Vertical"})]}),b.jsxs("div",{className:"canvas-actions",children:[b.jsx("button",{type:"button",className:"dir-btn",onClick:n,children:"Auto Arrange"}),b.jsx("button",{type:"button",className:"dir-btn",onClick:a,children:"Add Dialogue"}),b.jsx("button",{type:"button",className:"dir-btn",onClick:o,children:"Add Choice"}),b.jsx("button",{type:"button",className:"dir-btn",onClick:s,children:"Edit Conditions"})]}),f==="narrative"&&p?b.jsxs("div",{className:"stage-tabs-section",children:[b.jsx("div",{className:"stage-tabs-title",children:"Stage View"}),b.jsxs("div",{className:"stage-tabs",role:"tablist","aria-label":"Narrative stages",children:[b.jsxs("button",{type:"button",className:`stage-tab ${g==="all"?"active":""}`,onClick:()=>m("narrative","all"),children:[b.jsx("span",{className:"stage-tab-swatch"}),b.jsx("span",{className:"stage-tab-text",children:"All"})]}),S.map(C=>b.jsxs("button",{type:"button",className:`stage-tab ${g===C?"active":""}`,onClick:()=>m("narrative",C),children:[b.jsx("span",{className:"stage-tab-swatch"}),b.jsxs("span",{className:"stage-tab-text",children:["Stage ",C]})]},C)),b.jsx("button",{type:"button",className:"stage-tab stage-tab-add",onClick:c,title:"Add new stage","aria-label":"Add new stage",children:b.jsx("span",{className:"stage-tab-text",children:"+"})})]})]}):null]})]})};function En(n){if(typeof n=="string"||typeof n=="number")return""+n;let a="";if(Array.isArray(n))for(let o=0,s;o<n.length;o++)(s=En(n[o]))!==""&&(a+=(a&&" ")+s);else for(let o in n)n[o]&&(a+=(a&&" ")+o);return a}var Kd={exports:{}},Jd={},Wd={exports:{}},Fd={};var Ip;function m1(){if(Ip)return Fd;Ip=1;var n=Vs();function a(p,S){return p===S&&(p!==0||1/p===1/S)||p!==p&&S!==S}var o=typeof Object.is=="function"?Object.is:a,s=n.useState,c=n.useEffect,f=n.useLayoutEffect,d=n.useDebugValue;function h(p,S){var _=S(),q=s({inst:{value:_,getSnapshot:S}}),C=q[0].inst,k=q[1];return f(function(){C.value=_,C.getSnapshot=S,g(C)&&k({inst:C})},[p,_,S]),c(function(){return g(C)&&k({inst:C}),p(function(){g(C)&&k({inst:C})})},[p]),d(_),_}function g(p){var S=p.getSnapshot;p=p.value;try{var _=S();return!o(p,_)}catch{return!0}}function m(p,S){return S()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return Fd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,Fd}var Qp;function g1(){return Qp||(Qp=1,Wd.exports=m1()),Wd.exports}var Kp;function p1(){if(Kp)return Jd;Kp=1;var n=Vs(),a=g1();function o(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var s=typeof Object.is=="function"?Object.is:o,c=a.useSyncExternalStore,f=n.useRef,d=n.useEffect,h=n.useMemo,g=n.useDebugValue;return Jd.useSyncExternalStoreWithSelector=function(m,y,p,S,_){var q=f(null);if(q.current===null){var C={hasValue:!1,value:null};q.current=C}else C=q.current;q=h(function(){function M(Q){if(!O){if(O=!0,U=Q,Q=S(Q),_!==void 0&&C.hasValue){var W=C.value;if(_(W,Q))return w=W}return w=Q}if(W=w,s(U,Q))return W;var ce=S(Q);return _!==void 0&&_(W,ce)?(U=Q,W):(U=Q,w=ce)}var O=!1,U,w,J=p===void 0?null:p;return[function(){return M(y())},J===null?void 0:function(){return M(J())}]},[y,p,S,_]);var k=c(m,q[0],q[1]);return d(function(){C.hasValue=!0,C.value=k},[k]),g(k),k},Jd}var Jp;function v1(){return Jp||(Jp=1,Kd.exports=p1()),Kd.exports}var y1=v1();const x1=Df(y1),b1={},Wp=n=>{let a;const o=new Set,s=(y,p)=>{const S=typeof y=="function"?y(a):y;if(!Object.is(S,a)){const _=a;a=p??(typeof S!="object"||S===null)?S:Object.assign({},a,S),o.forEach(q=>q(a,_))}},c=()=>a,g={setState:s,getState:c,getInitialState:()=>m,subscribe:y=>(o.add(y),()=>o.delete(y)),destroy:()=>{(b1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},m=a=n(s,c,g);return g},S1=n=>n?Wp(n):Wp,{useDebugValue:N1}=pe,{useSyncExternalStoreWithSelector:E1}=x1,_1=n=>n;function Qv(n,a=_1,o){const s=E1(n.subscribe,n.getState,n.getServerState||n.getInitialState,a,o);return N1(s),s}const Fp=(n,a)=>{const o=S1(n),s=(c,f=a)=>Qv(o,c,f);return Object.assign(s,o),s},w1=(n,a)=>n?Fp(n,a):Fp;function Vn(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[s,c]of n)if(!Object.is(c,a.get(s)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const s of n)if(!a.has(s))return!1;return!0}const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(n[s],a[s]))return!1;return!0}var A1={value:()=>{}};function qc(){for(var n=0,a=arguments.length,o={},s;n<a;++n){if(!(s=arguments[n]+"")||s in o||/[\s.]/.test(s))throw new Error("illegal type: "+s);o[s]=[]}return new vc(o)}function vc(n){this._=n}function C1(n,a){return n.trim().split(/^|\s+/).map(function(o){var s="",c=o.indexOf(".");if(c>=0&&(s=o.slice(c+1),o=o.slice(0,c)),o&&!a.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:s}})}vc.prototype=qc.prototype={constructor:vc,on:function(n,a){var o=this._,s=C1(n+"",o),c,f=-1,d=s.length;if(arguments.length<2){for(;++f<d;)if((c=(n=s[f]).type)&&(c=T1(o[c],n.name)))return c;return}if(a!=null&&typeof a!="function")throw new Error("invalid callback: "+a);for(;++f<d;)if(c=(n=s[f]).type)o[c]=Pp(o[c],n.name,a);else if(a==null)for(c in o)o[c]=Pp(o[c],n.name,null);return this},copy:function(){var n={},a=this._;for(var o in a)n[o]=a[o].slice();return new vc(n)},call:function(n,a){if((c=arguments.length-2)>0)for(var o=new Array(c),s=0,c,f;s<c;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],s=0,c=f.length;s<c;++s)f[s].value.apply(a,o)},apply:function(n,a,o){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],c=0,f=s.length;c<f;++c)s[c].value.apply(a,o)}};function T1(n,a){for(var o=0,s=n.length,c;o<s;++o)if((c=n[o]).name===a)return c.value}function Pp(n,a,o){for(var s=0,c=n.length;s<c;++s)if(n[s].name===a){n[s]=A1,n=n.slice(0,s).concat(n.slice(s+1));break}return o!=null&&n.push({name:a,value:o}),n}var hf="http://www.w3.org/1999/xhtml";const ev={svg:"http://www.w3.org/2000/svg",xhtml:hf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jc(n){var a=n+="",o=a.indexOf(":");return o>=0&&(a=n.slice(0,o))!=="xmlns"&&(n=n.slice(o+1)),ev.hasOwnProperty(a)?{space:ev[a],local:n}:n}function D1(n){return function(){var a=this.ownerDocument,o=this.namespaceURI;return o===hf&&a.documentElement.namespaceURI===hf?a.createElement(n):a.createElementNS(o,n)}}function M1(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Kv(n){var a=jc(n);return(a.local?M1:D1)(a)}function z1(){}function Of(n){return n==null?z1:function(){return this.querySelector(n)}}function k1(n){typeof n!="function"&&(n=Of(n));for(var a=this._groups,o=a.length,s=new Array(o),c=0;c<o;++c)for(var f=a[c],d=f.length,h=s[c]=new Array(d),g,m,y=0;y<d;++y)(g=f[y])&&(m=n.call(g,g.__data__,y,f))&&("__data__"in g&&(m.__data__=g.__data__),h[y]=m);return new ti(s,this._parents)}function O1(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function R1(){return[]}function Jv(n){return n==null?R1:function(){return this.querySelectorAll(n)}}function q1(n){return function(){return O1(n.apply(this,arguments))}}function j1(n){typeof n=="function"?n=q1(n):n=Jv(n);for(var a=this._groups,o=a.length,s=[],c=[],f=0;f<o;++f)for(var d=a[f],h=d.length,g,m=0;m<h;++m)(g=d[m])&&(s.push(n.call(g,g.__data__,m,d)),c.push(g));return new ti(s,c)}function Wv(n){return function(){return this.matches(n)}}function Fv(n){return function(a){return a.matches(n)}}var H1=Array.prototype.find;function G1(n){return function(){return H1.call(this.children,n)}}function U1(){return this.firstElementChild}function B1(n){return this.select(n==null?U1:G1(typeof n=="function"?n:Fv(n)))}var Y1=Array.prototype.filter;function $1(){return Array.from(this.children)}function V1(n){return function(){return Y1.call(this.children,n)}}function L1(n){return this.selectAll(n==null?$1:V1(typeof n=="function"?n:Fv(n)))}function X1(n){typeof n!="function"&&(n=Wv(n));for(var a=this._groups,o=a.length,s=new Array(o),c=0;c<o;++c)for(var f=a[c],d=f.length,h=s[c]=[],g,m=0;m<d;++m)(g=f[m])&&n.call(g,g.__data__,m,f)&&h.push(g);return new ti(s,this._parents)}function Pv(n){return new Array(n.length)}function Z1(){return new ti(this._enter||this._groups.map(Pv),this._parents)}function wc(n,a){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=a}wc.prototype={constructor:wc,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,a){return this._parent.insertBefore(n,a)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function I1(n){return function(){return n}}function Q1(n,a,o,s,c,f){for(var d=0,h,g=a.length,m=f.length;d<m;++d)(h=a[d])?(h.__data__=f[d],s[d]=h):o[d]=new wc(n,f[d]);for(;d<g;++d)(h=a[d])&&(c[d]=h)}function K1(n,a,o,s,c,f,d){var h,g,m=new Map,y=a.length,p=f.length,S=new Array(y),_;for(h=0;h<y;++h)(g=a[h])&&(S[h]=_=d.call(g,g.__data__,h,a)+"",m.has(_)?c[h]=g:m.set(_,g));for(h=0;h<p;++h)_=d.call(n,f[h],h,f)+"",(g=m.get(_))?(s[h]=g,g.__data__=f[h],m.delete(_)):o[h]=new wc(n,f[h]);for(h=0;h<y;++h)(g=a[h])&&m.get(S[h])===g&&(c[h]=g)}function J1(n){return n.__data__}function W1(n,a){if(!arguments.length)return Array.from(this,J1);var o=a?K1:Q1,s=this._parents,c=this._groups;typeof n!="function"&&(n=I1(n));for(var f=c.length,d=new Array(f),h=new Array(f),g=new Array(f),m=0;m<f;++m){var y=s[m],p=c[m],S=p.length,_=F1(n.call(y,y&&y.__data__,m,s)),q=_.length,C=h[m]=new Array(q),k=d[m]=new Array(q),M=g[m]=new Array(S);o(y,p,C,k,M,_,a);for(var O=0,U=0,w,J;O<q;++O)if(w=C[O]){for(O>=U&&(U=O+1);!(J=k[U])&&++U<q;);w._next=J||null}}return d=new ti(d,s),d._enter=h,d._exit=g,d}function F1(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function P1(){return new ti(this._exit||this._groups.map(Pv),this._parents)}function eS(n,a,o){var s=this.enter(),c=this,f=this.exit();return typeof n=="function"?(s=n(s),s&&(s=s.selection())):s=s.append(n+""),a!=null&&(c=a(c),c&&(c=c.selection())),o==null?f.remove():o(f),s&&c?s.merge(c).order():c}function tS(n){for(var a=n.selection?n.selection():n,o=this._groups,s=a._groups,c=o.length,f=s.length,d=Math.min(c,f),h=new Array(c),g=0;g<d;++g)for(var m=o[g],y=s[g],p=m.length,S=h[g]=new Array(p),_,q=0;q<p;++q)(_=m[q]||y[q])&&(S[q]=_);for(;g<c;++g)h[g]=o[g];return new ti(h,this._parents)}function nS(){for(var n=this._groups,a=-1,o=n.length;++a<o;)for(var s=n[a],c=s.length-1,f=s[c],d;--c>=0;)(d=s[c])&&(f&&d.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(d,f),f=d);return this}function iS(n){n||(n=aS);function a(p,S){return p&&S?n(p.__data__,S.__data__):!p-!S}for(var o=this._groups,s=o.length,c=new Array(s),f=0;f<s;++f){for(var d=o[f],h=d.length,g=c[f]=new Array(h),m,y=0;y<h;++y)(m=d[y])&&(g[y]=m);g.sort(a)}return new ti(c,this._parents).order()}function aS(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}function lS(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function oS(){return Array.from(this)}function sS(){for(var n=this._groups,a=0,o=n.length;a<o;++a)for(var s=n[a],c=0,f=s.length;c<f;++c){var d=s[c];if(d)return d}return null}function rS(){let n=0;for(const a of this)++n;return n}function cS(){return!this.node()}function uS(n){for(var a=this._groups,o=0,s=a.length;o<s;++o)for(var c=a[o],f=0,d=c.length,h;f<d;++f)(h=c[f])&&n.call(h,h.__data__,f,c);return this}function dS(n){return function(){this.removeAttribute(n)}}function fS(n){return function(){this.removeAttributeNS(n.space,n.local)}}function hS(n,a){return function(){this.setAttribute(n,a)}}function mS(n,a){return function(){this.setAttributeNS(n.space,n.local,a)}}function gS(n,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(n):this.setAttribute(n,o)}}function pS(n,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,o)}}function vS(n,a){var o=jc(n);if(arguments.length<2){var s=this.node();return o.local?s.getAttributeNS(o.space,o.local):s.getAttribute(o)}return this.each((a==null?o.local?fS:dS:typeof a=="function"?o.local?pS:gS:o.local?mS:hS)(o,a))}function e0(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function yS(n){return function(){this.style.removeProperty(n)}}function xS(n,a,o){return function(){this.style.setProperty(n,a,o)}}function bS(n,a,o){return function(){var s=a.apply(this,arguments);s==null?this.style.removeProperty(n):this.style.setProperty(n,s,o)}}function SS(n,a,o){return arguments.length>1?this.each((a==null?yS:typeof a=="function"?bS:xS)(n,a,o??"")):wo(this.node(),n)}function wo(n,a){return n.style.getPropertyValue(a)||e0(n).getComputedStyle(n,null).getPropertyValue(a)}function NS(n){return function(){delete this[n]}}function ES(n,a){return function(){this[n]=a}}function _S(n,a){return function(){var o=a.apply(this,arguments);o==null?delete this[n]:this[n]=o}}function wS(n,a){return arguments.length>1?this.each((a==null?NS:typeof a=="function"?_S:ES)(n,a)):this.node()[n]}function t0(n){return n.trim().split(/^|\s+/)}function Rf(n){return n.classList||new n0(n)}function n0(n){this._node=n,this._names=t0(n.getAttribute("class")||"")}n0.prototype={add:function(n){var a=this._names.indexOf(n);a<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var a=this._names.indexOf(n);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function i0(n,a){for(var o=Rf(n),s=-1,c=a.length;++s<c;)o.add(a[s])}function a0(n,a){for(var o=Rf(n),s=-1,c=a.length;++s<c;)o.remove(a[s])}function AS(n){return function(){i0(this,n)}}function CS(n){return function(){a0(this,n)}}function TS(n,a){return function(){(a.apply(this,arguments)?i0:a0)(this,n)}}function DS(n,a){var o=t0(n+"");if(arguments.length<2){for(var s=Rf(this.node()),c=-1,f=o.length;++c<f;)if(!s.contains(o[c]))return!1;return!0}return this.each((typeof a=="function"?TS:a?AS:CS)(o,a))}function MS(){this.textContent=""}function zS(n){return function(){this.textContent=n}}function kS(n){return function(){var a=n.apply(this,arguments);this.textContent=a??""}}function OS(n){return arguments.length?this.each(n==null?MS:(typeof n=="function"?kS:zS)(n)):this.node().textContent}function RS(){this.innerHTML=""}function qS(n){return function(){this.innerHTML=n}}function jS(n){return function(){var a=n.apply(this,arguments);this.innerHTML=a??""}}function HS(n){return arguments.length?this.each(n==null?RS:(typeof n=="function"?jS:qS)(n)):this.node().innerHTML}function GS(){this.nextSibling&&this.parentNode.appendChild(this)}function US(){return this.each(GS)}function BS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YS(){return this.each(BS)}function $S(n){var a=typeof n=="function"?n:Kv(n);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function VS(){return null}function LS(n,a){var o=typeof n=="function"?n:Kv(n),s=a==null?VS:typeof a=="function"?a:Of(a);return this.select(function(){return this.insertBefore(o.apply(this,arguments),s.apply(this,arguments)||null)})}function XS(){var n=this.parentNode;n&&n.removeChild(this)}function ZS(){return this.each(XS)}function IS(){var n=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function QS(){var n=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function KS(n){return this.select(n?QS:IS)}function JS(n){return arguments.length?this.property("__data__",n):this.node().__data__}function WS(n){return function(a){n.call(this,a,this.__data__)}}function FS(n){return n.trim().split(/^|\s+/).map(function(a){var o="",s=a.indexOf(".");return s>=0&&(o=a.slice(s+1),a=a.slice(0,s)),{type:a,name:o}})}function PS(n){return function(){var a=this.__on;if(a){for(var o=0,s=-1,c=a.length,f;o<c;++o)f=a[o],(!n.type||f.type===n.type)&&f.name===n.name?this.removeEventListener(f.type,f.listener,f.options):a[++s]=f;++s?a.length=s:delete this.__on}}}function eN(n,a,o){return function(){var s=this.__on,c,f=WS(a);if(s){for(var d=0,h=s.length;d<h;++d)if((c=s[d]).type===n.type&&c.name===n.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=f,c.options=o),c.value=a;return}}this.addEventListener(n.type,f,o),c={type:n.type,name:n.name,value:a,listener:f,options:o},s?s.push(c):this.__on=[c]}}function tN(n,a,o){var s=FS(n+""),c,f=s.length,d;if(arguments.length<2){var h=this.node().__on;if(h){for(var g=0,m=h.length,y;g<m;++g)for(c=0,y=h[g];c<f;++c)if((d=s[c]).type===y.type&&d.name===y.name)return y.value}return}for(h=a?eN:PS,c=0;c<f;++c)this.each(h(s[c],a,o));return this}function l0(n,a,o){var s=e0(n),c=s.CustomEvent;typeof c=="function"?c=new c(a,o):(c=s.document.createEvent("Event"),o?(c.initEvent(a,o.bubbles,o.cancelable),c.detail=o.detail):c.initEvent(a,!1,!1)),n.dispatchEvent(c)}function nN(n,a){return function(){return l0(this,n,a)}}function iN(n,a){return function(){return l0(this,n,a.apply(this,arguments))}}function aN(n,a){return this.each((typeof a=="function"?iN:nN)(n,a))}function*lN(){for(var n=this._groups,a=0,o=n.length;a<o;++a)for(var s=n[a],c=0,f=s.length,d;c<f;++c)(d=s[c])&&(yield d)}var o0=[null];function ti(n,a){this._groups=n,this._parents=a}function Xs(){return new ti([[document.documentElement]],o0)}function oN(){return this}ti.prototype=Xs.prototype={constructor:ti,select:k1,selectAll:j1,selectChild:B1,selectChildren:L1,filter:X1,data:W1,enter:Z1,exit:P1,join:eS,merge:tS,selection:oN,order:nS,sort:iS,call:lS,nodes:oS,node:sS,size:rS,empty:cS,each:uS,attr:vS,style:SS,property:wS,classed:DS,text:OS,html:HS,raise:US,lower:YS,append:$S,insert:LS,remove:ZS,clone:KS,datum:JS,on:tN,dispatch:aN,[Symbol.iterator]:lN};function hi(n){return typeof n=="string"?new ti([[document.querySelector(n)]],[document.documentElement]):new ti([[n]],o0)}function sN(n){let a;for(;a=n.sourceEvent;)n=a;return n}function _i(n,a){if(n=sN(n),a===void 0&&(a=n.currentTarget),a){var o=a.ownerSVGElement||a;if(o.createSVGPoint){var s=o.createSVGPoint();return s.x=n.clientX,s.y=n.clientY,s=s.matrixTransform(a.getScreenCTM().inverse()),[s.x,s.y]}if(a.getBoundingClientRect){var c=a.getBoundingClientRect();return[n.clientX-c.left-a.clientLeft,n.clientY-c.top-a.clientTop]}}return[n.pageX,n.pageY]}const rN={passive:!1},qs={capture:!0,passive:!1};function Pd(n){n.stopImmediatePropagation()}function No(n){n.preventDefault(),n.stopImmediatePropagation()}function s0(n){var a=n.document.documentElement,o=hi(n).on("dragstart.drag",No,qs);"onselectstart"in a?o.on("selectstart.drag",No,qs):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function r0(n,a){var o=n.document.documentElement,s=hi(n).on("dragstart.drag",null);a&&(s.on("click.drag",No,qs),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in o?s.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const rc=n=>()=>n;function mf(n,{sourceEvent:a,subject:o,target:s,identifier:c,active:f,x:d,y:h,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}mf.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function cN(n){return!n.ctrlKey&&!n.button}function uN(){return this.parentNode}function dN(n,a){return a??{x:n.x,y:n.y}}function fN(){return navigator.maxTouchPoints||"ontouchstart"in this}function hN(){var n=cN,a=uN,o=dN,s=fN,c={},f=qc("start","drag","end"),d=0,h,g,m,y,p=0;function S(w){w.on("mousedown.drag",_).filter(s).on("touchstart.drag",k).on("touchmove.drag",M,rN).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(w,J){if(!(y||!n.call(this,w,J))){var Q=U(this,a.call(this,w,J),w,J,"mouse");Q&&(hi(w.view).on("mousemove.drag",q,qs).on("mouseup.drag",C,qs),s0(w.view),Pd(w),m=!1,h=w.clientX,g=w.clientY,Q("start",w))}}function q(w){if(No(w),!m){var J=w.clientX-h,Q=w.clientY-g;m=J*J+Q*Q>p}c.mouse("drag",w)}function C(w){hi(w.view).on("mousemove.drag mouseup.drag",null),r0(w.view,m),No(w),c.mouse("end",w)}function k(w,J){if(n.call(this,w,J)){var Q=w.changedTouches,W=a.call(this,w,J),ce=Q.length,ue,te;for(ue=0;ue<ce;++ue)(te=U(this,W,w,J,Q[ue].identifier,Q[ue]))&&(Pd(w),te("start",w,Q[ue]))}}function M(w){var J=w.changedTouches,Q=J.length,W,ce;for(W=0;W<Q;++W)(ce=c[J[W].identifier])&&(No(w),ce("drag",w,J[W]))}function O(w){var J=w.changedTouches,Q=J.length,W,ce;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),W=0;W<Q;++W)(ce=c[J[W].identifier])&&(Pd(w),ce("end",w,J[W]))}function U(w,J,Q,W,ce,ue){var te=f.copy(),oe=_i(ue||Q,J),me,ve,z;if((z=o.call(w,new mf("beforestart",{sourceEvent:Q,target:S,identifier:ce,active:d,x:oe[0],y:oe[1],dx:0,dy:0,dispatch:te}),W))!=null)return me=z.x-oe[0]||0,ve=z.y-oe[1]||0,function B(N,L,ne){var I=oe,se;switch(N){case"start":c[ce]=B,se=d++;break;case"end":delete c[ce],--d;case"drag":oe=_i(ne||L,J),se=d;break}te.call(N,w,new mf(N,{sourceEvent:L,subject:z,target:S,identifier:ce,active:se,x:oe[0]+me,y:oe[1]+ve,dx:oe[0]-I[0],dy:oe[1]-I[1],dispatch:te}),W)}}return S.filter=function(w){return arguments.length?(n=typeof w=="function"?w:rc(!!w),S):n},S.container=function(w){return arguments.length?(a=typeof w=="function"?w:rc(w),S):a},S.subject=function(w){return arguments.length?(o=typeof w=="function"?w:rc(w),S):o},S.touchable=function(w){return arguments.length?(s=typeof w=="function"?w:rc(!!w),S):s},S.on=function(){var w=f.on.apply(f,arguments);return w===f?S:w},S.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,S):Math.sqrt(p)},S}function qf(n,a,o){n.prototype=a.prototype=o,o.constructor=n}function c0(n,a){var o=Object.create(n.prototype);for(var s in a)o[s]=a[s];return o}function Zs(){}var js=.7,Ac=1/js,Eo="\\s*([+-]?\\d+)\\s*",Hs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mN=/^#([0-9a-f]{3,8})$/,gN=new RegExp(`^rgb\\(${Eo},${Eo},${Eo}\\)$`),pN=new RegExp(`^rgb\\(${Hi},${Hi},${Hi}\\)$`),vN=new RegExp(`^rgba\\(${Eo},${Eo},${Eo},${Hs}\\)$`),yN=new RegExp(`^rgba\\(${Hi},${Hi},${Hi},${Hs}\\)$`),xN=new RegExp(`^hsl\\(${Hs},${Hi},${Hi}\\)$`),bN=new RegExp(`^hsla\\(${Hs},${Hi},${Hi},${Hs}\\)$`),tv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qf(Zs,Gs,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:nv,formatHex:nv,formatHex8:SN,formatHsl:NN,formatRgb:iv,toString:iv});function nv(){return this.rgb().formatHex()}function SN(){return this.rgb().formatHex8()}function NN(){return u0(this).formatHsl()}function iv(){return this.rgb().formatRgb()}function Gs(n){var a,o;return n=(n+"").trim().toLowerCase(),(a=mN.exec(n))?(o=a[1].length,a=parseInt(a[1],16),o===6?av(a):o===3?new $n(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):o===8?cc(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):o===4?cc(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=gN.exec(n))?new $n(a[1],a[2],a[3],1):(a=pN.exec(n))?new $n(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=vN.exec(n))?cc(a[1],a[2],a[3],a[4]):(a=yN.exec(n))?cc(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=xN.exec(n))?sv(a[1],a[2]/100,a[3]/100,1):(a=bN.exec(n))?sv(a[1],a[2]/100,a[3]/100,a[4]):tv.hasOwnProperty(n)?av(tv[n]):n==="transparent"?new $n(NaN,NaN,NaN,0):null}function av(n){return new $n(n>>16&255,n>>8&255,n&255,1)}function cc(n,a,o,s){return s<=0&&(n=a=o=NaN),new $n(n,a,o,s)}function EN(n){return n instanceof Zs||(n=Gs(n)),n?(n=n.rgb(),new $n(n.r,n.g,n.b,n.opacity)):new $n}function gf(n,a,o,s){return arguments.length===1?EN(n):new $n(n,a,o,s??1)}function $n(n,a,o,s){this.r=+n,this.g=+a,this.b=+o,this.opacity=+s}qf($n,gf,c0(Zs,{brighter(n){return n=n==null?Ac:Math.pow(Ac,n),new $n(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?js:Math.pow(js,n),new $n(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new $n(_l(this.r),_l(this.g),_l(this.b),Cc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lv,formatHex:lv,formatHex8:_N,formatRgb:ov,toString:ov}));function lv(){return`#${Sl(this.r)}${Sl(this.g)}${Sl(this.b)}`}function _N(){return`#${Sl(this.r)}${Sl(this.g)}${Sl(this.b)}${Sl((isNaN(this.opacity)?1:this.opacity)*255)}`}function ov(){const n=Cc(this.opacity);return`${n===1?"rgb(":"rgba("}${_l(this.r)}, ${_l(this.g)}, ${_l(this.b)}${n===1?")":`, ${n})`}`}function Cc(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function _l(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Sl(n){return n=_l(n),(n<16?"0":"")+n.toString(16)}function sv(n,a,o,s){return s<=0?n=a=o=NaN:o<=0||o>=1?n=a=NaN:a<=0&&(n=NaN),new Ai(n,a,o,s)}function u0(n){if(n instanceof Ai)return new Ai(n.h,n.s,n.l,n.opacity);if(n instanceof Zs||(n=Gs(n)),!n)return new Ai;if(n instanceof Ai)return n;n=n.rgb();var a=n.r/255,o=n.g/255,s=n.b/255,c=Math.min(a,o,s),f=Math.max(a,o,s),d=NaN,h=f-c,g=(f+c)/2;return h?(a===f?d=(o-s)/h+(o<s)*6:o===f?d=(s-a)/h+2:d=(a-o)/h+4,h/=g<.5?f+c:2-f-c,d*=60):h=g>0&&g<1?0:d,new Ai(d,h,g,n.opacity)}function wN(n,a,o,s){return arguments.length===1?u0(n):new Ai(n,a,o,s??1)}function Ai(n,a,o,s){this.h=+n,this.s=+a,this.l=+o,this.opacity=+s}qf(Ai,wN,c0(Zs,{brighter(n){return n=n==null?Ac:Math.pow(Ac,n),new Ai(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?js:Math.pow(js,n),new Ai(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,a=isNaN(n)||isNaN(this.s)?0:this.s,o=this.l,s=o+(o<.5?o:1-o)*a,c=2*o-s;return new $n(ef(n>=240?n-240:n+120,c,s),ef(n,c,s),ef(n<120?n+240:n-120,c,s),this.opacity)},clamp(){return new Ai(rv(this.h),uc(this.s),uc(this.l),Cc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Cc(this.opacity);return`${n===1?"hsl(":"hsla("}${rv(this.h)}, ${uc(this.s)*100}%, ${uc(this.l)*100}%${n===1?")":`, ${n})`}`}}));function rv(n){return n=(n||0)%360,n<0?n+360:n}function uc(n){return Math.max(0,Math.min(1,n||0))}function ef(n,a,o){return(n<60?a+(o-a)*n/60:n<180?o:n<240?a+(o-a)*(240-n)/60:a)*255}const d0=n=>()=>n;function AN(n,a){return function(o){return n+o*a}}function CN(n,a,o){return n=Math.pow(n,o),a=Math.pow(a,o)-n,o=1/o,function(s){return Math.pow(n+s*a,o)}}function TN(n){return(n=+n)==1?f0:function(a,o){return o-a?CN(a,o,n):d0(isNaN(a)?o:a)}}function f0(n,a){var o=a-n;return o?AN(n,o):d0(isNaN(n)?a:n)}const cv=(function n(a){var o=TN(a);function s(c,f){var d=o((c=gf(c)).r,(f=gf(f)).r),h=o(c.g,f.g),g=o(c.b,f.b),m=f0(c.opacity,f.opacity);return function(y){return c.r=d(y),c.g=h(y),c.b=g(y),c.opacity=m(y),c+""}}return s.gamma=n,s})(1);function Qa(n,a){return n=+n,a=+a,function(o){return n*(1-o)+a*o}}var pf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tf=new RegExp(pf.source,"g");function DN(n){return function(){return n}}function MN(n){return function(a){return n(a)+""}}function zN(n,a){var o=pf.lastIndex=tf.lastIndex=0,s,c,f,d=-1,h=[],g=[];for(n=n+"",a=a+"";(s=pf.exec(n))&&(c=tf.exec(a));)(f=c.index)>o&&(f=a.slice(o,f),h[d]?h[d]+=f:h[++d]=f),(s=s[0])===(c=c[0])?h[d]?h[d]+=c:h[++d]=c:(h[++d]=null,g.push({i:d,x:Qa(s,c)})),o=tf.lastIndex;return o<a.length&&(f=a.slice(o),h[d]?h[d]+=f:h[++d]=f),h.length<2?g[0]?MN(g[0].x):DN(a):(a=g.length,function(m){for(var y=0,p;y<a;++y)h[(p=g[y]).i]=p.x(m);return h.join("")})}var uv=180/Math.PI,vf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function h0(n,a,o,s,c,f){var d,h,g;return(d=Math.sqrt(n*n+a*a))&&(n/=d,a/=d),(g=n*o+a*s)&&(o-=n*g,s-=a*g),(h=Math.sqrt(o*o+s*s))&&(o/=h,s/=h,g/=h),n*s<a*o&&(n=-n,a=-a,g=-g,d=-d),{translateX:c,translateY:f,rotate:Math.atan2(a,n)*uv,skewX:Math.atan(g)*uv,scaleX:d,scaleY:h}}var dc;function kN(n){const a=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return a.isIdentity?vf:h0(a.a,a.b,a.c,a.d,a.e,a.f)}function ON(n){return n==null||(dc||(dc=document.createElementNS("http://www.w3.org/2000/svg","g")),dc.setAttribute("transform",n),!(n=dc.transform.baseVal.consolidate()))?vf:(n=n.matrix,h0(n.a,n.b,n.c,n.d,n.e,n.f))}function m0(n,a,o,s){function c(m){return m.length?m.pop()+" ":""}function f(m,y,p,S,_,q){if(m!==p||y!==S){var C=_.push("translate(",null,a,null,o);q.push({i:C-4,x:Qa(m,p)},{i:C-2,x:Qa(y,S)})}else(p||S)&&_.push("translate("+p+a+S+o)}function d(m,y,p,S){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),S.push({i:p.push(c(p)+"rotate(",null,s)-2,x:Qa(m,y)})):y&&p.push(c(p)+"rotate("+y+s)}function h(m,y,p,S){m!==y?S.push({i:p.push(c(p)+"skewX(",null,s)-2,x:Qa(m,y)}):y&&p.push(c(p)+"skewX("+y+s)}function g(m,y,p,S,_,q){if(m!==p||y!==S){var C=_.push(c(_)+"scale(",null,",",null,")");q.push({i:C-4,x:Qa(m,p)},{i:C-2,x:Qa(y,S)})}else(p!==1||S!==1)&&_.push(c(_)+"scale("+p+","+S+")")}return function(m,y){var p=[],S=[];return m=n(m),y=n(y),f(m.translateX,m.translateY,y.translateX,y.translateY,p,S),d(m.rotate,y.rotate,p,S),h(m.skewX,y.skewX,p,S),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,p,S),m=y=null,function(_){for(var q=-1,C=S.length,k;++q<C;)p[(k=S[q]).i]=k.x(_);return p.join("")}}}var RN=m0(kN,"px, ","px)","deg)"),qN=m0(ON,", ",")",")"),jN=1e-12;function dv(n){return((n=Math.exp(n))+1/n)/2}function HN(n){return((n=Math.exp(n))-1/n)/2}function GN(n){return((n=Math.exp(2*n))-1)/(n+1)}const UN=(function n(a,o,s){function c(f,d){var h=f[0],g=f[1],m=f[2],y=d[0],p=d[1],S=d[2],_=y-h,q=p-g,C=_*_+q*q,k,M;if(C<jN)M=Math.log(S/m)/a,k=function(W){return[h+W*_,g+W*q,m*Math.exp(a*W*M)]};else{var O=Math.sqrt(C),U=(S*S-m*m+s*C)/(2*m*o*O),w=(S*S-m*m-s*C)/(2*S*o*O),J=Math.log(Math.sqrt(U*U+1)-U),Q=Math.log(Math.sqrt(w*w+1)-w);M=(Q-J)/a,k=function(W){var ce=W*M,ue=dv(J),te=m/(o*O)*(ue*GN(a*ce+J)-HN(J));return[h+te*_,g+te*q,m*ue/dv(a*ce+J)]}}return k.duration=M*1e3*a/Math.SQRT2,k}return c.rho=function(f){var d=Math.max(.001,+f),h=d*d,g=h*h;return n(d,h,g)},c})(Math.SQRT2,2,4);var Ao=0,Ms=0,ws=0,g0=1e3,Tc,zs,Dc=0,Al=0,Hc=0,Us=typeof performance=="object"&&performance.now?performance:Date,p0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function jf(){return Al||(p0(BN),Al=Us.now()+Hc)}function BN(){Al=0}function Mc(){this._call=this._time=this._next=null}Mc.prototype=v0.prototype={constructor:Mc,restart:function(n,a,o){if(typeof n!="function")throw new TypeError("callback is not a function");o=(o==null?jf():+o)+(a==null?0:+a),!this._next&&zs!==this&&(zs?zs._next=this:Tc=this,zs=this),this._call=n,this._time=o,yf()},stop:function(){this._call&&(this._call=null,this._time=1/0,yf())}};function v0(n,a,o){var s=new Mc;return s.restart(n,a,o),s}function YN(){jf(),++Ao;for(var n=Tc,a;n;)(a=Al-n._time)>=0&&n._call.call(void 0,a),n=n._next;--Ao}function fv(){Al=(Dc=Us.now())+Hc,Ao=Ms=0;try{YN()}finally{Ao=0,VN(),Al=0}}function $N(){var n=Us.now(),a=n-Dc;a>g0&&(Hc-=a,Dc=n)}function VN(){for(var n,a=Tc,o,s=1/0;a;)a._call?(s>a._time&&(s=a._time),n=a,a=a._next):(o=a._next,a._next=null,a=n?n._next=o:Tc=o);zs=n,yf(s)}function yf(n){if(!Ao){Ms&&(Ms=clearTimeout(Ms));var a=n-Al;a>24?(n<1/0&&(Ms=setTimeout(fv,n-Us.now()-Hc)),ws&&(ws=clearInterval(ws))):(ws||(Dc=Us.now(),ws=setInterval($N,g0)),Ao=1,p0(fv))}}function hv(n,a,o){var s=new Mc;return a=a==null?0:+a,s.restart(c=>{s.stop(),n(c+a)},a,o),s}var LN=qc("start","end","cancel","interrupt"),XN=[],y0=0,mv=1,xf=2,yc=3,gv=4,bf=5,xc=6;function Gc(n,a,o,s,c,f){var d=n.__transition;if(!d)n.__transition={};else if(o in d)return;ZN(n,o,{name:a,index:s,group:c,on:LN,tween:XN,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:y0})}function Hf(n,a){var o=Ci(n,a);if(o.state>y0)throw new Error("too late; already scheduled");return o}function Ui(n,a){var o=Ci(n,a);if(o.state>yc)throw new Error("too late; already running");return o}function Ci(n,a){var o=n.__transition;if(!o||!(o=o[a]))throw new Error("transition not found");return o}function ZN(n,a,o){var s=n.__transition,c;s[a]=o,o.timer=v0(f,0,o.time);function f(m){o.state=mv,o.timer.restart(d,o.delay,o.time),o.delay<=m&&d(m-o.delay)}function d(m){var y,p,S,_;if(o.state!==mv)return g();for(y in s)if(_=s[y],_.name===o.name){if(_.state===yc)return hv(d);_.state===gv?(_.state=xc,_.timer.stop(),_.on.call("interrupt",n,n.__data__,_.index,_.group),delete s[y]):+y<a&&(_.state=xc,_.timer.stop(),_.on.call("cancel",n,n.__data__,_.index,_.group),delete s[y])}if(hv(function(){o.state===yc&&(o.state=gv,o.timer.restart(h,o.delay,o.time),h(m))}),o.state=xf,o.on.call("start",n,n.__data__,o.index,o.group),o.state===xf){for(o.state=yc,c=new Array(S=o.tween.length),y=0,p=-1;y<S;++y)(_=o.tween[y].value.call(n,n.__data__,o.index,o.group))&&(c[++p]=_);c.length=p+1}}function h(m){for(var y=m<o.duration?o.ease.call(null,m/o.duration):(o.timer.restart(g),o.state=bf,1),p=-1,S=c.length;++p<S;)c[p].call(n,y);o.state===bf&&(o.on.call("end",n,n.__data__,o.index,o.group),g())}function g(){o.state=xc,o.timer.stop(),delete s[a];for(var m in s)return;delete n.__transition}}function bc(n,a){var o=n.__transition,s,c,f=!0,d;if(o){a=a==null?null:a+"";for(d in o){if((s=o[d]).name!==a){f=!1;continue}c=s.state>xf&&s.state<bf,s.state=xc,s.timer.stop(),s.on.call(c?"interrupt":"cancel",n,n.__data__,s.index,s.group),delete o[d]}f&&delete n.__transition}}function IN(n){return this.each(function(){bc(this,n)})}function QN(n,a){var o,s;return function(){var c=Ui(this,n),f=c.tween;if(f!==o){s=o=f;for(var d=0,h=s.length;d<h;++d)if(s[d].name===a){s=s.slice(),s.splice(d,1);break}}c.tween=s}}function KN(n,a,o){var s,c;if(typeof o!="function")throw new Error;return function(){var f=Ui(this,n),d=f.tween;if(d!==s){c=(s=d).slice();for(var h={name:a,value:o},g=0,m=c.length;g<m;++g)if(c[g].name===a){c[g]=h;break}g===m&&c.push(h)}f.tween=c}}function JN(n,a){var o=this._id;if(n+="",arguments.length<2){for(var s=Ci(this.node(),o).tween,c=0,f=s.length,d;c<f;++c)if((d=s[c]).name===n)return d.value;return null}return this.each((a==null?QN:KN)(o,n,a))}function Gf(n,a,o){var s=n._id;return n.each(function(){var c=Ui(this,s);(c.value||(c.value={}))[a]=o.apply(this,arguments)}),function(c){return Ci(c,s).value[a]}}function x0(n,a){var o;return(typeof a=="number"?Qa:a instanceof Gs?cv:(o=Gs(a))?(a=o,cv):zN)(n,a)}function WN(n){return function(){this.removeAttribute(n)}}function FN(n){return function(){this.removeAttributeNS(n.space,n.local)}}function PN(n,a,o){var s,c=o+"",f;return function(){var d=this.getAttribute(n);return d===c?null:d===s?f:f=a(s=d,o)}}function eE(n,a,o){var s,c=o+"",f;return function(){var d=this.getAttributeNS(n.space,n.local);return d===c?null:d===s?f:f=a(s=d,o)}}function tE(n,a,o){var s,c,f;return function(){var d,h=o(this),g;return h==null?void this.removeAttribute(n):(d=this.getAttribute(n),g=h+"",d===g?null:d===s&&g===c?f:(c=g,f=a(s=d,h)))}}function nE(n,a,o){var s,c,f;return function(){var d,h=o(this),g;return h==null?void this.removeAttributeNS(n.space,n.local):(d=this.getAttributeNS(n.space,n.local),g=h+"",d===g?null:d===s&&g===c?f:(c=g,f=a(s=d,h)))}}function iE(n,a){var o=jc(n),s=o==="transform"?qN:x0;return this.attrTween(n,typeof a=="function"?(o.local?nE:tE)(o,s,Gf(this,"attr."+n,a)):a==null?(o.local?FN:WN)(o):(o.local?eE:PN)(o,s,a))}function aE(n,a){return function(o){this.setAttribute(n,a.call(this,o))}}function lE(n,a){return function(o){this.setAttributeNS(n.space,n.local,a.call(this,o))}}function oE(n,a){var o,s;function c(){var f=a.apply(this,arguments);return f!==s&&(o=(s=f)&&lE(n,f)),o}return c._value=a,c}function sE(n,a){var o,s;function c(){var f=a.apply(this,arguments);return f!==s&&(o=(s=f)&&aE(n,f)),o}return c._value=a,c}function rE(n,a){var o="attr."+n;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(a==null)return this.tween(o,null);if(typeof a!="function")throw new Error;var s=jc(n);return this.tween(o,(s.local?oE:sE)(s,a))}function cE(n,a){return function(){Hf(this,n).delay=+a.apply(this,arguments)}}function uE(n,a){return a=+a,function(){Hf(this,n).delay=a}}function dE(n){var a=this._id;return arguments.length?this.each((typeof n=="function"?cE:uE)(a,n)):Ci(this.node(),a).delay}function fE(n,a){return function(){Ui(this,n).duration=+a.apply(this,arguments)}}function hE(n,a){return a=+a,function(){Ui(this,n).duration=a}}function mE(n){var a=this._id;return arguments.length?this.each((typeof n=="function"?fE:hE)(a,n)):Ci(this.node(),a).duration}function gE(n,a){if(typeof a!="function")throw new Error;return function(){Ui(this,n).ease=a}}function pE(n){var a=this._id;return arguments.length?this.each(gE(a,n)):Ci(this.node(),a).ease}function vE(n,a){return function(){var o=a.apply(this,arguments);if(typeof o!="function")throw new Error;Ui(this,n).ease=o}}function yE(n){if(typeof n!="function")throw new Error;return this.each(vE(this._id,n))}function xE(n){typeof n!="function"&&(n=Wv(n));for(var a=this._groups,o=a.length,s=new Array(o),c=0;c<o;++c)for(var f=a[c],d=f.length,h=s[c]=[],g,m=0;m<d;++m)(g=f[m])&&n.call(g,g.__data__,m,f)&&h.push(g);return new fa(s,this._parents,this._name,this._id)}function bE(n){if(n._id!==this._id)throw new Error;for(var a=this._groups,o=n._groups,s=a.length,c=o.length,f=Math.min(s,c),d=new Array(s),h=0;h<f;++h)for(var g=a[h],m=o[h],y=g.length,p=d[h]=new Array(y),S,_=0;_<y;++_)(S=g[_]||m[_])&&(p[_]=S);for(;h<s;++h)d[h]=a[h];return new fa(d,this._parents,this._name,this._id)}function SE(n){return(n+"").trim().split(/^|\s+/).every(function(a){var o=a.indexOf(".");return o>=0&&(a=a.slice(0,o)),!a||a==="start"})}function NE(n,a,o){var s,c,f=SE(a)?Hf:Ui;return function(){var d=f(this,n),h=d.on;h!==s&&(c=(s=h).copy()).on(a,o),d.on=c}}function EE(n,a){var o=this._id;return arguments.length<2?Ci(this.node(),o).on.on(n):this.each(NE(o,n,a))}function _E(n){return function(){var a=this.parentNode;for(var o in this.__transition)if(+o!==n)return;a&&a.removeChild(this)}}function wE(){return this.on("end.remove",_E(this._id))}function AE(n){var a=this._name,o=this._id;typeof n!="function"&&(n=Of(n));for(var s=this._groups,c=s.length,f=new Array(c),d=0;d<c;++d)for(var h=s[d],g=h.length,m=f[d]=new Array(g),y,p,S=0;S<g;++S)(y=h[S])&&(p=n.call(y,y.__data__,S,h))&&("__data__"in y&&(p.__data__=y.__data__),m[S]=p,Gc(m[S],a,o,S,m,Ci(y,o)));return new fa(f,this._parents,a,o)}function CE(n){var a=this._name,o=this._id;typeof n!="function"&&(n=Jv(n));for(var s=this._groups,c=s.length,f=[],d=[],h=0;h<c;++h)for(var g=s[h],m=g.length,y,p=0;p<m;++p)if(y=g[p]){for(var S=n.call(y,y.__data__,p,g),_,q=Ci(y,o),C=0,k=S.length;C<k;++C)(_=S[C])&&Gc(_,a,o,C,S,q);f.push(S),d.push(y)}return new fa(f,d,a,o)}var TE=Xs.prototype.constructor;function DE(){return new TE(this._groups,this._parents)}function ME(n,a){var o,s,c;return function(){var f=wo(this,n),d=(this.style.removeProperty(n),wo(this,n));return f===d?null:f===o&&d===s?c:c=a(o=f,s=d)}}function b0(n){return function(){this.style.removeProperty(n)}}function zE(n,a,o){var s,c=o+"",f;return function(){var d=wo(this,n);return d===c?null:d===s?f:f=a(s=d,o)}}function kE(n,a,o){var s,c,f;return function(){var d=wo(this,n),h=o(this),g=h+"";return h==null&&(g=h=(this.style.removeProperty(n),wo(this,n))),d===g?null:d===s&&g===c?f:(c=g,f=a(s=d,h))}}function OE(n,a){var o,s,c,f="style."+a,d="end."+f,h;return function(){var g=Ui(this,n),m=g.on,y=g.value[f]==null?h||(h=b0(a)):void 0;(m!==o||c!==y)&&(s=(o=m).copy()).on(d,c=y),g.on=s}}function RE(n,a,o){var s=(n+="")=="transform"?RN:x0;return a==null?this.styleTween(n,ME(n,s)).on("end.style."+n,b0(n)):typeof a=="function"?this.styleTween(n,kE(n,s,Gf(this,"style."+n,a))).each(OE(this._id,n)):this.styleTween(n,zE(n,s,a),o).on("end.style."+n,null)}function qE(n,a,o){return function(s){this.style.setProperty(n,a.call(this,s),o)}}function jE(n,a,o){var s,c;function f(){var d=a.apply(this,arguments);return d!==c&&(s=(c=d)&&qE(n,d,o)),s}return f._value=a,f}function HE(n,a,o){var s="style."+(n+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(a==null)return this.tween(s,null);if(typeof a!="function")throw new Error;return this.tween(s,jE(n,a,o??""))}function GE(n){return function(){this.textContent=n}}function UE(n){return function(){var a=n(this);this.textContent=a??""}}function BE(n){return this.tween("text",typeof n=="function"?UE(Gf(this,"text",n)):GE(n==null?"":n+""))}function YE(n){return function(a){this.textContent=n.call(this,a)}}function $E(n){var a,o;function s(){var c=n.apply(this,arguments);return c!==o&&(a=(o=c)&&YE(c)),a}return s._value=n,s}function VE(n){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;return this.tween(a,$E(n))}function LE(){for(var n=this._name,a=this._id,o=S0(),s=this._groups,c=s.length,f=0;f<c;++f)for(var d=s[f],h=d.length,g,m=0;m<h;++m)if(g=d[m]){var y=Ci(g,a);Gc(g,n,o,m,d,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new fa(s,this._parents,n,o)}function XE(){var n,a,o=this,s=o._id,c=o.size();return new Promise(function(f,d){var h={value:d},g={value:function(){--c===0&&f()}};o.each(function(){var m=Ui(this,s),y=m.on;y!==n&&(a=(n=y).copy(),a._.cancel.push(h),a._.interrupt.push(h),a._.end.push(g)),m.on=a}),c===0&&f()})}var ZE=0;function fa(n,a,o,s){this._groups=n,this._parents=a,this._name=o,this._id=s}function S0(){return++ZE}var sa=Xs.prototype;fa.prototype={constructor:fa,select:AE,selectAll:CE,selectChild:sa.selectChild,selectChildren:sa.selectChildren,filter:xE,merge:bE,selection:DE,transition:LE,call:sa.call,nodes:sa.nodes,node:sa.node,size:sa.size,empty:sa.empty,each:sa.each,on:EE,attr:iE,attrTween:rE,style:RE,styleTween:HE,text:BE,textTween:VE,remove:wE,tween:JN,delay:dE,duration:mE,ease:pE,easeVarying:yE,end:XE,[Symbol.iterator]:sa[Symbol.iterator]};function IE(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var QE={time:null,delay:0,duration:250,ease:IE};function KE(n,a){for(var o;!(o=n.__transition)||!(o=o[a]);)if(!(n=n.parentNode))throw new Error(`transition ${a} not found`);return o}function JE(n){var a,o;n instanceof fa?(a=n._id,n=n._name):(a=S0(),(o=QE).time=jf(),n=n==null?null:n+"");for(var s=this._groups,c=s.length,f=0;f<c;++f)for(var d=s[f],h=d.length,g,m=0;m<h;++m)(g=d[m])&&Gc(g,n,a,m,d,o||KE(g,a));return new fa(s,this._parents,n,a)}Xs.prototype.interrupt=IN;Xs.prototype.transition=JE;const fc=n=>()=>n;function WE(n,{sourceEvent:a,target:o,transform:s,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function ua(n,a,o){this.k=n,this.x=a,this.y=o}ua.prototype={constructor:ua,scale:function(n){return n===1?this:new ua(this.k*n,this.x,this.y)},translate:function(n,a){return n===0&a===0?this:new ua(this.k,this.x+this.k*n,this.y+this.k*a)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var da=new ua(1,0,0);ua.prototype;function nf(n){n.stopImmediatePropagation()}function As(n){n.preventDefault(),n.stopImmediatePropagation()}function FE(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function PE(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function pv(){return this.__zoom||da}function e_(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function t_(){return navigator.maxTouchPoints||"ontouchstart"in this}function n_(n,a,o){var s=n.invertX(a[0][0])-o[0][0],c=n.invertX(a[1][0])-o[1][0],f=n.invertY(a[0][1])-o[0][1],d=n.invertY(a[1][1])-o[1][1];return n.translate(c>s?(s+c)/2:Math.min(0,s)||Math.max(0,c),d>f?(f+d)/2:Math.min(0,f)||Math.max(0,d))}function N0(){var n=FE,a=PE,o=n_,s=e_,c=t_,f=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],h=250,g=UN,m=qc("start","zoom","end"),y,p,S,_=500,q=150,C=0,k=10;function M(z){z.property("__zoom",pv).on("wheel.zoom",ce,{passive:!1}).on("mousedown.zoom",ue).on("dblclick.zoom",te).filter(c).on("touchstart.zoom",oe).on("touchmove.zoom",me).on("touchend.zoom touchcancel.zoom",ve).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(z,B,N,L){var ne=z.selection?z.selection():z;ne.property("__zoom",pv),z!==ne?J(z,B,N,L):ne.interrupt().each(function(){Q(this,arguments).event(L).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},M.scaleBy=function(z,B,N,L){M.scaleTo(z,function(){var ne=this.__zoom.k,I=typeof B=="function"?B.apply(this,arguments):B;return ne*I},N,L)},M.scaleTo=function(z,B,N,L){M.transform(z,function(){var ne=a.apply(this,arguments),I=this.__zoom,se=N==null?w(ne):typeof N=="function"?N.apply(this,arguments):N,D=I.invert(se),V=typeof B=="function"?B.apply(this,arguments):B;return o(U(O(I,V),se,D),ne,d)},N,L)},M.translateBy=function(z,B,N,L){M.transform(z,function(){return o(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof N=="function"?N.apply(this,arguments):N),a.apply(this,arguments),d)},null,L)},M.translateTo=function(z,B,N,L,ne){M.transform(z,function(){var I=a.apply(this,arguments),se=this.__zoom,D=L==null?w(I):typeof L=="function"?L.apply(this,arguments):L;return o(da.translate(D[0],D[1]).scale(se.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof N=="function"?-N.apply(this,arguments):-N),I,d)},L,ne)};function O(z,B){return B=Math.max(f[0],Math.min(f[1],B)),B===z.k?z:new ua(B,z.x,z.y)}function U(z,B,N){var L=B[0]-N[0]*z.k,ne=B[1]-N[1]*z.k;return L===z.x&&ne===z.y?z:new ua(z.k,L,ne)}function w(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function J(z,B,N,L){z.on("start.zoom",function(){Q(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){Q(this,arguments).event(L).end()}).tween("zoom",function(){var ne=this,I=arguments,se=Q(ne,I).event(L),D=a.apply(ne,I),V=N==null?w(D):typeof N=="function"?N.apply(ne,I):N,de=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),ge=ne.__zoom,we=typeof B=="function"?B.apply(ne,I):B,Ce=g(ge.invert(V).concat(de/ge.k),we.invert(V).concat(de/we.k));return function(ke){if(ke===1)ke=we;else{var Re=Ce(ke),Oe=de/Re[2];ke=new ua(Oe,V[0]-Re[0]*Oe,V[1]-Re[1]*Oe)}se.zoom(null,ke)}})}function Q(z,B,N){return!N&&z.__zooming||new W(z,B)}function W(z,B){this.that=z,this.args=B,this.active=0,this.sourceEvent=null,this.extent=a.apply(z,B),this.taps=0}W.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,B){return this.mouse&&z!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var B=hi(this.that).datum();m.call(z,this.that,new WE(z,{sourceEvent:this.sourceEvent,target:M,transform:this.that.__zoom,dispatch:m}),B)}};function ce(z,...B){if(!n.apply(this,arguments))return;var N=Q(this,B).event(z),L=this.__zoom,ne=Math.max(f[0],Math.min(f[1],L.k*Math.pow(2,s.apply(this,arguments)))),I=_i(z);if(N.wheel)(N.mouse[0][0]!==I[0]||N.mouse[0][1]!==I[1])&&(N.mouse[1]=L.invert(N.mouse[0]=I)),clearTimeout(N.wheel);else{if(L.k===ne)return;N.mouse=[I,L.invert(I)],bc(this),N.start()}As(z),N.wheel=setTimeout(se,q),N.zoom("mouse",o(U(O(L,ne),N.mouse[0],N.mouse[1]),N.extent,d));function se(){N.wheel=null,N.end()}}function ue(z,...B){if(S||!n.apply(this,arguments))return;var N=z.currentTarget,L=Q(this,B,!0).event(z),ne=hi(z.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",de,!0),I=_i(z,N),se=z.clientX,D=z.clientY;s0(z.view),nf(z),L.mouse=[I,this.__zoom.invert(I)],bc(this),L.start();function V(ge){if(As(ge),!L.moved){var we=ge.clientX-se,Ce=ge.clientY-D;L.moved=we*we+Ce*Ce>C}L.event(ge).zoom("mouse",o(U(L.that.__zoom,L.mouse[0]=_i(ge,N),L.mouse[1]),L.extent,d))}function de(ge){ne.on("mousemove.zoom mouseup.zoom",null),r0(ge.view,L.moved),As(ge),L.event(ge).end()}}function te(z,...B){if(n.apply(this,arguments)){var N=this.__zoom,L=_i(z.changedTouches?z.changedTouches[0]:z,this),ne=N.invert(L),I=N.k*(z.shiftKey?.5:2),se=o(U(O(N,I),L,ne),a.apply(this,B),d);As(z),h>0?hi(this).transition().duration(h).call(J,se,L,z):hi(this).call(M.transform,se,L,z)}}function oe(z,...B){if(n.apply(this,arguments)){var N=z.touches,L=N.length,ne=Q(this,B,z.changedTouches.length===L).event(z),I,se,D,V;for(nf(z),se=0;se<L;++se)D=N[se],V=_i(D,this),V=[V,this.__zoom.invert(V),D.identifier],ne.touch0?!ne.touch1&&ne.touch0[2]!==V[2]&&(ne.touch1=V,ne.taps=0):(ne.touch0=V,I=!0,ne.taps=1+!!y);y&&(y=clearTimeout(y)),I&&(ne.taps<2&&(p=V[0],y=setTimeout(function(){y=null},_)),bc(this),ne.start())}}function me(z,...B){if(this.__zooming){var N=Q(this,B).event(z),L=z.changedTouches,ne=L.length,I,se,D,V;for(As(z),I=0;I<ne;++I)se=L[I],D=_i(se,this),N.touch0&&N.touch0[2]===se.identifier?N.touch0[0]=D:N.touch1&&N.touch1[2]===se.identifier&&(N.touch1[0]=D);if(se=N.that.__zoom,N.touch1){var de=N.touch0[0],ge=N.touch0[1],we=N.touch1[0],Ce=N.touch1[1],ke=(ke=we[0]-de[0])*ke+(ke=we[1]-de[1])*ke,Re=(Re=Ce[0]-ge[0])*Re+(Re=Ce[1]-ge[1])*Re;se=O(se,Math.sqrt(ke/Re)),D=[(de[0]+we[0])/2,(de[1]+we[1])/2],V=[(ge[0]+Ce[0])/2,(ge[1]+Ce[1])/2]}else if(N.touch0)D=N.touch0[0],V=N.touch0[1];else return;N.zoom("touch",o(U(se,D,V),N.extent,d))}}function ve(z,...B){if(this.__zooming){var N=Q(this,B).event(z),L=z.changedTouches,ne=L.length,I,se;for(nf(z),S&&clearTimeout(S),S=setTimeout(function(){S=null},_),I=0;I<ne;++I)se=L[I],N.touch0&&N.touch0[2]===se.identifier?delete N.touch0:N.touch1&&N.touch1[2]===se.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(se=_i(se,this),Math.hypot(p[0]-se[0],p[1]-se[1])<k)){var D=hi(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return M.wheelDelta=function(z){return arguments.length?(s=typeof z=="function"?z:fc(+z),M):s},M.filter=function(z){return arguments.length?(n=typeof z=="function"?z:fc(!!z),M):n},M.touchable=function(z){return arguments.length?(c=typeof z=="function"?z:fc(!!z),M):c},M.extent=function(z){return arguments.length?(a=typeof z=="function"?z:fc([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),M):a},M.scaleExtent=function(z){return arguments.length?(f[0]=+z[0],f[1]=+z[1],M):[f[0],f[1]]},M.translateExtent=function(z){return arguments.length?(d[0][0]=+z[0][0],d[1][0]=+z[1][0],d[0][1]=+z[0][1],d[1][1]=+z[1][1],M):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},M.constrain=function(z){return arguments.length?(o=z,M):o},M.duration=function(z){return arguments.length?(h=+z,M):h},M.interpolate=function(z){return arguments.length?(g=z,M):g},M.on=function(){var z=m.on.apply(m,arguments);return z===m?M:z},M.clickDistance=function(z){return arguments.length?(C=(z=+z)*z,M):Math.sqrt(C)},M.tapDistance=function(z){return arguments.length?(k=+z,M):k},M}Lv();const Uc=A.createContext(null),i_=Uc.Provider,ha={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,a)=>`Couldn't create edge for ${n?"target":"source"} handle id: "${n?a.targetHandle:a.sourceHandle}", edge id: ${a.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},E0=ha.error001();function Yt(n,a){const o=A.useContext(Uc);if(o===null)throw new Error(E0);return Qv(o,n,a)}const hn=()=>{const n=A.useContext(Uc);if(n===null)throw new Error(E0);return A.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe,destroy:n.destroy}),[n])},a_=n=>n.userSelectionActive?"none":"all";function Uf({position:n,children:a,className:o,style:s,...c}){const f=Yt(a_),d=`${n}`.split("-");return pe.createElement("div",{className:En(["react-flow__panel",o,...d]),style:{...s,pointerEvents:f},...c},a)}function l_({proOptions:n,position:a="bottom-right"}){return n?.hideAttribution?null:pe.createElement(Uf,{position:a,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},pe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const o_=({x:n,y:a,label:o,labelStyle:s={},labelShowBg:c=!0,labelBgStyle:f={},labelBgPadding:d=[2,4],labelBgBorderRadius:h=2,children:g,className:m,...y})=>{const p=A.useRef(null),[S,_]=A.useState({x:0,y:0,width:0,height:0}),q=En(["react-flow__edge-textwrapper",m]);return A.useEffect(()=>{if(p.current){const C=p.current.getBBox();_({x:C.x,y:C.y,width:C.width,height:C.height})}},[o]),typeof o>"u"||!o?null:pe.createElement("g",{transform:`translate(${n-S.width/2} ${a-S.height/2})`,className:q,visibility:S.width?"visible":"hidden",...y},c&&pe.createElement("rect",{width:S.width+2*d[0],x:-d[0],y:-d[1],height:S.height+2*d[1],className:"react-flow__edge-textbg",style:f,rx:h,ry:h}),pe.createElement("text",{className:"react-flow__edge-text",y:S.height/2,dy:"0.3em",ref:p,style:s},o),g)};var s_=A.memo(o_);const Bf=n=>({width:n.offsetWidth,height:n.offsetHeight}),Co=(n,a=0,o=1)=>Math.min(Math.max(n,a),o),Yf=(n={x:0,y:0},a)=>({x:Co(n.x,a[0][0],a[1][0]),y:Co(n.y,a[0][1],a[1][1])}),vv=(n,a,o)=>n<a?Co(Math.abs(n-a),1,50)/50:n>o?-Co(Math.abs(n-o),1,50)/50:0,_0=(n,a)=>{const o=vv(n.x,35,a.width-35)*20,s=vv(n.y,35,a.height-35)*20;return[o,s]},w0=n=>n.getRootNode?.()||window?.document,A0=(n,a)=>({x:Math.min(n.x,a.x),y:Math.min(n.y,a.y),x2:Math.max(n.x2,a.x2),y2:Math.max(n.y2,a.y2)}),Bs=({x:n,y:a,width:o,height:s})=>({x:n,y:a,x2:n+o,y2:a+s}),C0=({x:n,y:a,x2:o,y2:s})=>({x:n,y:a,width:o-n,height:s-a}),yv=n=>({...n.positionAbsolute||{x:0,y:0},width:n.width||0,height:n.height||0}),r_=(n,a)=>C0(A0(Bs(n),Bs(a))),Sf=(n,a)=>{const o=Math.max(0,Math.min(n.x+n.width,a.x+a.width)-Math.max(n.x,a.x)),s=Math.max(0,Math.min(n.y+n.height,a.y+a.height)-Math.max(n.y,a.y));return Math.ceil(o*s)},c_=n=>mi(n.width)&&mi(n.height)&&mi(n.x)&&mi(n.y),mi=n=>!isNaN(n)&&isFinite(n),en=Symbol.for("internals"),T0=["Enter"," ","Escape"],u_=(n,a)=>{},d_=n=>"nativeEvent"in n;function Nf(n){const o=(d_(n)?n.nativeEvent:n).composedPath?.()?.[0]||n.target;return["INPUT","SELECT","TEXTAREA"].includes(o?.nodeName)||o?.hasAttribute("contenteditable")||!!o?.closest(".nokey")}const D0=n=>"clientX"in n,Pa=(n,a)=>{const o=D0(n),s=o?n.clientX:n.touches?.[0].clientX,c=o?n.clientY:n.touches?.[0].clientY;return{x:s-(a?.left??0),y:c-(a?.top??0)}},zc=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,To=({id:n,path:a,labelX:o,labelY:s,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:S,interactionWidth:_=20})=>pe.createElement(pe.Fragment,null,pe.createElement("path",{id:n,style:y,d:a,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:S}),_&&pe.createElement("path",{d:a,fill:"none",strokeOpacity:0,strokeWidth:_,className:"react-flow__edge-interaction"}),c&&mi(o)&&mi(s)?pe.createElement(s_,{x:o,y:s,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m}):null);To.displayName="BaseEdge";function Cs(n,a,o){return o===void 0?o:s=>{const c=a().edges.find(f=>f.id===n);c&&o(s,{...c})}}function M0({sourceX:n,sourceY:a,targetX:o,targetY:s}){const c=Math.abs(o-n)/2,f=o<n?o+c:o-c,d=Math.abs(s-a)/2,h=s<a?s+d:s-d;return[f,h,c,d]}function z0({sourceX:n,sourceY:a,targetX:o,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:d,targetControlY:h}){const g=n*.125+c*.375+d*.375+o*.125,m=a*.125+f*.375+h*.375+s*.125,y=Math.abs(g-n),p=Math.abs(m-a);return[g,m,y,p]}var Cl;(function(n){n.Strict="strict",n.Loose="loose"})(Cl||(Cl={}));var Nl;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Nl||(Nl={}));var Ys;(function(n){n.Partial="partial",n.Full="full"})(Ys||(Ys={}));var ji;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(ji||(ji={}));var Gi;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Gi||(Gi={}));var He;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(He||(He={}));function xv({pos:n,x1:a,y1:o,x2:s,y2:c}){return n===He.Left||n===He.Right?[.5*(a+s),o]:[a,.5*(o+c)]}function k0({sourceX:n,sourceY:a,sourcePosition:o=He.Bottom,targetX:s,targetY:c,targetPosition:f=He.Top}){const[d,h]=xv({pos:o,x1:n,y1:a,x2:s,y2:c}),[g,m]=xv({pos:f,x1:s,y1:c,x2:n,y2:a}),[y,p,S,_]=z0({sourceX:n,sourceY:a,targetX:s,targetY:c,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:m});return[`M${n},${a} C${d},${h} ${g},${m} ${s},${c}`,y,p,S,_]}const $f=A.memo(({sourceX:n,sourceY:a,targetX:o,targetY:s,sourcePosition:c=He.Bottom,targetPosition:f=He.Top,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:S,markerEnd:_,markerStart:q,interactionWidth:C})=>{const[k,M,O]=k0({sourceX:n,sourceY:a,sourcePosition:c,targetX:o,targetY:s,targetPosition:f});return pe.createElement(To,{path:k,labelX:M,labelY:O,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:S,markerEnd:_,markerStart:q,interactionWidth:C})});$f.displayName="SimpleBezierEdge";const bv={[He.Left]:{x:-1,y:0},[He.Right]:{x:1,y:0},[He.Top]:{x:0,y:-1},[He.Bottom]:{x:0,y:1}},f_=({source:n,sourcePosition:a=He.Bottom,target:o})=>a===He.Left||a===He.Right?n.x<o.x?{x:1,y:0}:{x:-1,y:0}:n.y<o.y?{x:0,y:1}:{x:0,y:-1},Sv=(n,a)=>Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2));function h_({source:n,sourcePosition:a=He.Bottom,target:o,targetPosition:s=He.Top,center:c,offset:f}){const d=bv[a],h=bv[s],g={x:n.x+d.x*f,y:n.y+d.y*f},m={x:o.x+h.x*f,y:o.y+h.y*f},y=f_({source:g,sourcePosition:a,target:m}),p=y.x!==0?"x":"y",S=y[p];let _=[],q,C;const k={x:0,y:0},M={x:0,y:0},[O,U,w,J]=M0({sourceX:n.x,sourceY:n.y,targetX:o.x,targetY:o.y});if(d[p]*h[p]===-1){q=c.x??O,C=c.y??U;const W=[{x:q,y:g.y},{x:q,y:m.y}],ce=[{x:g.x,y:C},{x:m.x,y:C}];d[p]===S?_=p==="x"?W:ce:_=p==="x"?ce:W}else{const W=[{x:g.x,y:m.y}],ce=[{x:m.x,y:g.y}];if(p==="x"?_=d.x===S?ce:W:_=d.y===S?W:ce,a===s){const ve=Math.abs(n[p]-o[p]);if(ve<=f){const z=Math.min(f-1,f-ve);d[p]===S?k[p]=(g[p]>n[p]?-1:1)*z:M[p]=(m[p]>o[p]?-1:1)*z}}if(a!==s){const ve=p==="x"?"y":"x",z=d[p]===h[ve],B=g[ve]>m[ve],N=g[ve]<m[ve];(d[p]===1&&(!z&&B||z&&N)||d[p]!==1&&(!z&&N||z&&B))&&(_=p==="x"?W:ce)}const ue={x:g.x+k.x,y:g.y+k.y},te={x:m.x+M.x,y:m.y+M.y},oe=Math.max(Math.abs(ue.x-_[0].x),Math.abs(te.x-_[0].x)),me=Math.max(Math.abs(ue.y-_[0].y),Math.abs(te.y-_[0].y));oe>=me?(q=(ue.x+te.x)/2,C=_[0].y):(q=_[0].x,C=(ue.y+te.y)/2)}return[[n,{x:g.x+k.x,y:g.y+k.y},..._,{x:m.x+M.x,y:m.y+M.y},o],q,C,w,J]}function m_(n,a,o,s){const c=Math.min(Sv(n,a)/2,Sv(a,o)/2,s),{x:f,y:d}=a;if(n.x===f&&f===o.x||n.y===d&&d===o.y)return`L${f} ${d}`;if(n.y===d){const m=n.x<o.x?-1:1,y=n.y<o.y?1:-1;return`L ${f+c*m},${d}Q ${f},${d} ${f},${d+c*y}`}const h=n.x<o.x?1:-1,g=n.y<o.y?-1:1;return`L ${f},${d+c*g}Q ${f},${d} ${f+c*h},${d}`}function Ef({sourceX:n,sourceY:a,sourcePosition:o=He.Bottom,targetX:s,targetY:c,targetPosition:f=He.Top,borderRadius:d=5,centerX:h,centerY:g,offset:m=20}){const[y,p,S,_,q]=h_({source:{x:n,y:a},sourcePosition:o,target:{x:s,y:c},targetPosition:f,center:{x:h,y:g},offset:m});return[y.reduce((k,M,O)=>{let U="";return O>0&&O<y.length-1?U=m_(y[O-1],M,y[O+1],d):U=`${O===0?"M":"L"}${M.x} ${M.y}`,k+=U,k},""),p,S,_,q]}const Bc=A.memo(({sourceX:n,sourceY:a,targetX:o,targetY:s,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:p=He.Bottom,targetPosition:S=He.Top,markerEnd:_,markerStart:q,pathOptions:C,interactionWidth:k})=>{const[M,O,U]=Ef({sourceX:n,sourceY:a,sourcePosition:p,targetX:o,targetY:s,targetPosition:S,borderRadius:C?.borderRadius,offset:C?.offset});return pe.createElement(To,{path:M,labelX:O,labelY:U,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:_,markerStart:q,interactionWidth:k})});Bc.displayName="SmoothStepEdge";const Vf=A.memo(n=>pe.createElement(Bc,{...n,pathOptions:A.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])}));Vf.displayName="StepEdge";function g_({sourceX:n,sourceY:a,targetX:o,targetY:s}){const[c,f,d,h]=M0({sourceX:n,sourceY:a,targetX:o,targetY:s});return[`M ${n},${a}L ${o},${s}`,c,f,d,h]}const Lf=A.memo(({sourceX:n,sourceY:a,targetX:o,targetY:s,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:S,interactionWidth:_})=>{const[q,C,k]=g_({sourceX:n,sourceY:a,targetX:o,targetY:s});return pe.createElement(To,{path:q,labelX:C,labelY:k,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:S,interactionWidth:_})});Lf.displayName="StraightEdge";function hc(n,a){return n>=0?.5*n:a*25*Math.sqrt(-n)}function Nv({pos:n,x1:a,y1:o,x2:s,y2:c,c:f}){switch(n){case He.Left:return[a-hc(a-s,f),o];case He.Right:return[a+hc(s-a,f),o];case He.Top:return[a,o-hc(o-c,f)];case He.Bottom:return[a,o+hc(c-o,f)]}}function Xf({sourceX:n,sourceY:a,sourcePosition:o=He.Bottom,targetX:s,targetY:c,targetPosition:f=He.Top,curvature:d=.25}){const[h,g]=Nv({pos:o,x1:n,y1:a,x2:s,y2:c,c:d}),[m,y]=Nv({pos:f,x1:s,y1:c,x2:n,y2:a,c:d}),[p,S,_,q]=z0({sourceX:n,sourceY:a,targetX:s,targetY:c,sourceControlX:h,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${n},${a} C${h},${g} ${m},${y} ${s},${c}`,p,S,_,q]}const kc=A.memo(({sourceX:n,sourceY:a,targetX:o,targetY:s,sourcePosition:c=He.Bottom,targetPosition:f=He.Top,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:S,markerEnd:_,markerStart:q,pathOptions:C,interactionWidth:k})=>{const[M,O,U]=Xf({sourceX:n,sourceY:a,sourcePosition:c,targetX:o,targetY:s,targetPosition:f,curvature:C?.curvature});return pe.createElement(To,{path:M,labelX:O,labelY:U,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:S,markerEnd:_,markerStart:q,interactionWidth:k})});kc.displayName="BezierEdge";const Zf=A.createContext(null),p_=Zf.Provider;Zf.Consumer;const v_=()=>A.useContext(Zf),y_=n=>"id"in n&&"source"in n&&"target"in n,x_=({source:n,sourceHandle:a,target:o,targetHandle:s})=>`reactflow__edge-${n}${a||""}-${o}${s||""}`,_f=(n,a)=>typeof n>"u"?"":typeof n=="string"?n:`${a?`${a}__`:""}${Object.keys(n).sort().map(s=>`${s}=${n[s]}`).join("&")}`,b_=(n,a)=>a.some(o=>o.source===n.source&&o.target===n.target&&(o.sourceHandle===n.sourceHandle||!o.sourceHandle&&!n.sourceHandle)&&(o.targetHandle===n.targetHandle||!o.targetHandle&&!n.targetHandle)),S_=(n,a)=>{if(!n.source||!n.target)return a;let o;return y_(n)?o={...n}:o={...n,id:x_(n)},b_(o,a)?a:a.concat(o)},wf=({x:n,y:a},[o,s,c],f,[d,h])=>{const g={x:(n-o)/c,y:(a-s)/c};return f?{x:d*Math.round(g.x/d),y:h*Math.round(g.y/h)}:g},O0=({x:n,y:a},[o,s,c])=>({x:n*c+o,y:a*c+s}),wl=(n,a=[0,0])=>{if(!n)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const o=(n.width??0)*a[0],s=(n.height??0)*a[1],c={x:n.position.x-o,y:n.position.y-s};return{...c,positionAbsolute:n.positionAbsolute?{x:n.positionAbsolute.x-o,y:n.positionAbsolute.y-s}:c}},Yc=(n,a=[0,0])=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const o=n.reduce((s,c)=>{const{x:f,y:d}=wl(c,a).positionAbsolute;return A0(s,Bs({x:f,y:d,width:c.width||0,height:c.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return C0(o)},R0=(n,a,[o,s,c]=[0,0,1],f=!1,d=!1,h=[0,0])=>{const g={x:(a.x-o)/c,y:(a.y-s)/c,width:a.width/c,height:a.height/c},m=[];return n.forEach(y=>{const{width:p,height:S,selectable:_=!0,hidden:q=!1}=y;if(d&&!_||q)return!1;const{positionAbsolute:C}=wl(y,h),k={x:C.x,y:C.y,width:p||0,height:S||0},M=Sf(g,k),O=typeof p>"u"||typeof S>"u"||p===null||S===null,U=f&&M>0,w=(p||0)*(S||0);(O||U||M>=w||y.dragging)&&m.push(y)}),m},q0=(n,a)=>{const o=n.map(s=>s.id);return a.filter(s=>o.includes(s.source)||o.includes(s.target))},j0=(n,a,o,s,c,f=.1)=>{const d=a/(n.width*(1+f)),h=o/(n.height*(1+f)),g=Math.min(d,h),m=Co(g,s,c),y=n.x+n.width/2,p=n.y+n.height/2,S=a/2-y*m,_=o/2-p*m;return{x:S,y:_,zoom:m}},bl=(n,a=0)=>n.transition().duration(a);function Ev(n,a,o,s){return(a[o]||[]).reduce((c,f)=>(`${n.id}-${f.id}-${o}`!==s&&c.push({id:f.id||null,type:o,nodeId:n.id,x:(n.positionAbsolute?.x??0)+f.x+f.width/2,y:(n.positionAbsolute?.y??0)+f.y+f.height/2}),c),[])}function N_(n,a,o,s,c,f){const{x:d,y:h}=Pa(n),m=a.elementsFromPoint(d,h).find(q=>q.classList.contains("react-flow__handle"));if(m){const q=m.getAttribute("data-nodeid");if(q){const C=If(void 0,m),k=m.getAttribute("data-handleid"),M=f({nodeId:q,id:k,type:C});if(M){const O=c.find(U=>U.nodeId===q&&U.type===C&&U.id===k);return{handle:{id:k,type:C,nodeId:q,x:O?.x||o.x,y:O?.y||o.y},validHandleResult:M}}}}let y=[],p=1/0;if(c.forEach(q=>{const C=Math.sqrt((q.x-o.x)**2+(q.y-o.y)**2);if(C<=s){const k=f(q);C<=p&&(C<p?y=[{handle:q,validHandleResult:k}]:C===p&&y.push({handle:q,validHandleResult:k}),p=C)}}),!y.length)return{handle:null,validHandleResult:H0()};if(y.length===1)return y[0];const S=y.some(({validHandleResult:q})=>q.isValid),_=y.some(({handle:q})=>q.type==="target");return y.find(({handle:q,validHandleResult:C})=>_?q.type==="target":S?C.isValid:!0)||y[0]}const E_={source:null,target:null,sourceHandle:null,targetHandle:null},H0=()=>({handleDomNode:null,isValid:!1,connection:E_,endHandle:null});function G0(n,a,o,s,c,f,d){const h=c==="target",g=d.querySelector(`.react-flow__handle[data-id="${n?.nodeId}-${n?.id}-${n?.type}"]`),m={...H0(),handleDomNode:g};if(g){const y=If(void 0,g),p=g.getAttribute("data-nodeid"),S=g.getAttribute("data-handleid"),_=g.classList.contains("connectable"),q=g.classList.contains("connectableend"),C={source:h?p:o,sourceHandle:h?S:s,target:h?o:p,targetHandle:h?s:S};m.connection=C,_&&q&&(a===Cl.Strict?h&&y==="source"||!h&&y==="target":p!==o||S!==s)&&(m.endHandle={nodeId:p,handleId:S,type:y},m.isValid=f(C))}return m}function __({nodes:n,nodeId:a,handleId:o,handleType:s}){return n.reduce((c,f)=>{if(f[en]){const{handleBounds:d}=f[en];let h=[],g=[];d&&(h=Ev(f,d,"source",`${a}-${o}-${s}`),g=Ev(f,d,"target",`${a}-${o}-${s}`)),c.push(...h,...g)}return c},[])}function If(n,a){return n||(a?.classList.contains("target")?"target":a?.classList.contains("source")?"source":null)}function af(n){n?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function w_(n,a){let o=null;return a?o="valid":n&&!a&&(o="invalid"),o}function U0({event:n,handleId:a,nodeId:o,onConnect:s,isTarget:c,getState:f,setState:d,isValidConnection:h,edgeUpdaterType:g,onReconnectEnd:m}){const y=w0(n.target),{connectionMode:p,domNode:S,autoPanOnConnect:_,connectionRadius:q,onConnectStart:C,panBy:k,getNodes:M,cancelConnection:O}=f();let U=0,w;const{x:J,y:Q}=Pa(n),W=y?.elementFromPoint(J,Q),ce=If(g,W),ue=S?.getBoundingClientRect();if(!ue||!ce)return;let te,oe=Pa(n,ue),me=!1,ve=null,z=!1,B=null;const N=__({nodes:M(),nodeId:o,handleId:a,handleType:ce}),L=()=>{if(!_)return;const[se,D]=_0(oe,ue);k({x:se,y:D}),U=requestAnimationFrame(L)};d({connectionPosition:oe,connectionStatus:null,connectionNodeId:o,connectionHandleId:a,connectionHandleType:ce,connectionStartHandle:{nodeId:o,handleId:a,type:ce},connectionEndHandle:null}),C?.(n,{nodeId:o,handleId:a,handleType:ce});function ne(se){const{transform:D}=f();oe=Pa(se,ue);const{handle:V,validHandleResult:de}=N_(se,y,wf(oe,D,!1,[1,1]),q,N,ge=>G0(ge,p,o,a,c?"target":"source",h,y));if(w=V,me||(L(),me=!0),B=de.handleDomNode,ve=de.connection,z=de.isValid,d({connectionPosition:w&&z?O0({x:w.x,y:w.y},D):oe,connectionStatus:w_(!!w,z),connectionEndHandle:de.endHandle}),!w&&!z&&!B)return af(te);ve.source!==ve.target&&B&&(af(te),te=B,B.classList.add("connecting","react-flow__handle-connecting"),B.classList.toggle("valid",z),B.classList.toggle("react-flow__handle-valid",z))}function I(se){(w||B)&&ve&&z&&s?.(ve),f().onConnectEnd?.(se),g&&m?.(se),af(te),O(),cancelAnimationFrame(U),me=!1,z=!1,ve=null,B=null,y.removeEventListener("mousemove",ne),y.removeEventListener("mouseup",I),y.removeEventListener("touchmove",ne),y.removeEventListener("touchend",I)}y.addEventListener("mousemove",ne),y.addEventListener("mouseup",I),y.addEventListener("touchmove",ne),y.addEventListener("touchend",I)}const _v=()=>!0,A_=n=>({connectionStartHandle:n.connectionStartHandle,connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName}),C_=(n,a,o)=>s=>{const{connectionStartHandle:c,connectionEndHandle:f,connectionClickStartHandle:d}=s;return{connecting:c?.nodeId===n&&c?.handleId===a&&c?.type===o||f?.nodeId===n&&f?.handleId===a&&f?.type===o,clickConnecting:d?.nodeId===n&&d?.handleId===a&&d?.type===o}},B0=A.forwardRef(({type:n="source",position:a=He.Top,isValidConnection:o,isConnectable:s=!0,isConnectableStart:c=!0,isConnectableEnd:f=!0,id:d,onConnect:h,children:g,className:m,onMouseDown:y,onTouchStart:p,...S},_)=>{const q=d||null,C=n==="target",k=hn(),M=v_(),{connectOnClick:O,noPanClassName:U}=Yt(A_,Vn),{connecting:w,clickConnecting:J}=Yt(C_(M,q,n),Vn);M||k.getState().onError?.("010",ha.error010());const Q=ue=>{const{defaultEdgeOptions:te,onConnect:oe,hasDefaultEdges:me}=k.getState(),ve={...te,...ue};if(me){const{edges:z,setEdges:B}=k.getState();B(S_(ve,z))}oe?.(ve),h?.(ve)},W=ue=>{if(!M)return;const te=D0(ue);c&&(te&&ue.button===0||!te)&&U0({event:ue,handleId:q,nodeId:M,onConnect:Q,isTarget:C,getState:k.getState,setState:k.setState,isValidConnection:o||k.getState().isValidConnection||_v}),te?y?.(ue):p?.(ue)},ce=ue=>{const{onClickConnectStart:te,onClickConnectEnd:oe,connectionClickStartHandle:me,connectionMode:ve,isValidConnection:z}=k.getState();if(!M||!me&&!c)return;if(!me){te?.(ue,{nodeId:M,handleId:q,handleType:n}),k.setState({connectionClickStartHandle:{nodeId:M,type:n,handleId:q}});return}const B=w0(ue.target),N=o||z||_v,{connection:L,isValid:ne}=G0({nodeId:M,id:q,type:n},ve,me.nodeId,me.handleId||null,me.type,N,B);ne&&Q(L),oe?.(ue),k.setState({connectionClickStartHandle:null})};return pe.createElement("div",{"data-handleid":q,"data-nodeid":M,"data-handlepos":a,"data-id":`${M}-${q}-${n}`,className:En(["react-flow__handle",`react-flow__handle-${a}`,"nodrag",U,m,{source:!C,target:C,connectable:s,connectablestart:c,connectableend:f,connecting:J,connectionindicator:s&&(c&&!w||f&&w)}]),onMouseDown:W,onTouchStart:W,onClick:O?ce:void 0,ref:_,...S},g)});B0.displayName="Handle";var fi=A.memo(B0);const Y0=({data:n,isConnectable:a,targetPosition:o=He.Top,sourcePosition:s=He.Bottom})=>pe.createElement(pe.Fragment,null,pe.createElement(fi,{type:"target",position:o,isConnectable:a}),n?.label,pe.createElement(fi,{type:"source",position:s,isConnectable:a}));Y0.displayName="DefaultNode";var Af=A.memo(Y0);const $0=({data:n,isConnectable:a,sourcePosition:o=He.Bottom})=>pe.createElement(pe.Fragment,null,n?.label,pe.createElement(fi,{type:"source",position:o,isConnectable:a}));$0.displayName="InputNode";var V0=A.memo($0);const L0=({data:n,isConnectable:a,targetPosition:o=He.Top})=>pe.createElement(pe.Fragment,null,pe.createElement(fi,{type:"target",position:o,isConnectable:a}),n?.label);L0.displayName="OutputNode";var X0=A.memo(L0);const Qf=()=>null;Qf.displayName="GroupNode";const T_=n=>({selectedNodes:n.getNodes().filter(a=>a.selected),selectedEdges:n.edges.filter(a=>a.selected).map(a=>({...a}))}),mc=n=>n.id;function D_(n,a){return Vn(n.selectedNodes.map(mc),a.selectedNodes.map(mc))&&Vn(n.selectedEdges.map(mc),a.selectedEdges.map(mc))}const Z0=A.memo(({onSelectionChange:n})=>{const a=hn(),{selectedNodes:o,selectedEdges:s}=Yt(T_,D_);return A.useEffect(()=>{const c={nodes:o,edges:s};n?.(c),a.getState().onSelectionChange.forEach(f=>f(c))},[o,s,n]),null});Z0.displayName="SelectionListener";const M_=n=>!!n.onSelectionChange;function z_({onSelectionChange:n}){const a=Yt(M_);return n||a?pe.createElement(Z0,{onSelectionChange:n}):null}const k_=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset});function mo(n,a){A.useEffect(()=>{typeof n<"u"&&a(n)},[n])}function nt(n,a,o){A.useEffect(()=>{typeof a<"u"&&o({[n]:a})},[a])}const O_=({nodes:n,edges:a,defaultNodes:o,defaultEdges:s,onConnect:c,onConnectStart:f,onConnectEnd:d,onClickConnectStart:h,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:p,edgesFocusable:S,edgesUpdatable:_,elevateNodesOnSelect:q,minZoom:C,maxZoom:k,nodeExtent:M,onNodesChange:O,onEdgesChange:U,elementsSelectable:w,connectionMode:J,snapGrid:Q,snapToGrid:W,translateExtent:ce,connectOnClick:ue,defaultEdgeOptions:te,fitView:oe,fitViewOptions:me,onNodesDelete:ve,onEdgesDelete:z,onNodeDrag:B,onNodeDragStart:N,onNodeDragStop:L,onSelectionDrag:ne,onSelectionDragStart:I,onSelectionDragStop:se,noPanClassName:D,nodeOrigin:V,rfId:de,autoPanOnConnect:ge,autoPanOnNodeDrag:we,onError:Ce,connectionRadius:ke,isValidConnection:Re,nodeDragThreshold:Oe})=>{const{setNodes:$e,setEdges:at,setDefaultNodesAndEdges:Pe,setMinZoom:Et,setMaxZoom:gt,setTranslateExtent:et,setNodeExtent:pt,reset:Fe}=Yt(k_,Vn),je=hn();return A.useEffect(()=>{const _t=s?.map(Qt=>({...Qt,...te}));return Pe(o,_t),()=>{Fe()}},[]),nt("defaultEdgeOptions",te,je.setState),nt("connectionMode",J,je.setState),nt("onConnect",c,je.setState),nt("onConnectStart",f,je.setState),nt("onConnectEnd",d,je.setState),nt("onClickConnectStart",h,je.setState),nt("onClickConnectEnd",g,je.setState),nt("nodesDraggable",m,je.setState),nt("nodesConnectable",y,je.setState),nt("nodesFocusable",p,je.setState),nt("edgesFocusable",S,je.setState),nt("edgesUpdatable",_,je.setState),nt("elementsSelectable",w,je.setState),nt("elevateNodesOnSelect",q,je.setState),nt("snapToGrid",W,je.setState),nt("snapGrid",Q,je.setState),nt("onNodesChange",O,je.setState),nt("onEdgesChange",U,je.setState),nt("connectOnClick",ue,je.setState),nt("fitViewOnInit",oe,je.setState),nt("fitViewOnInitOptions",me,je.setState),nt("onNodesDelete",ve,je.setState),nt("onEdgesDelete",z,je.setState),nt("onNodeDrag",B,je.setState),nt("onNodeDragStart",N,je.setState),nt("onNodeDragStop",L,je.setState),nt("onSelectionDrag",ne,je.setState),nt("onSelectionDragStart",I,je.setState),nt("onSelectionDragStop",se,je.setState),nt("noPanClassName",D,je.setState),nt("nodeOrigin",V,je.setState),nt("rfId",de,je.setState),nt("autoPanOnConnect",ge,je.setState),nt("autoPanOnNodeDrag",we,je.setState),nt("onError",Ce,je.setState),nt("connectionRadius",ke,je.setState),nt("isValidConnection",Re,je.setState),nt("nodeDragThreshold",Oe,je.setState),mo(n,$e),mo(a,at),mo(C,Et),mo(k,gt),mo(ce,et),mo(M,pt),null},wv={display:"none"},R_={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},I0="react-flow__node-desc",Q0="react-flow__edge-desc",q_="react-flow__aria-live",j_=n=>n.ariaLiveMessage;function H_({rfId:n}){const a=Yt(j_);return pe.createElement("div",{id:`${q_}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:R_},a)}function G_({rfId:n,disableKeyboardA11y:a}){return pe.createElement(pe.Fragment,null,pe.createElement("div",{id:`${I0}-${n}`,style:wv},"Press enter or space to select a node.",!a&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),pe.createElement("div",{id:`${Q0}-${n}`,style:wv},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!a&&pe.createElement(H_,{rfId:n}))}var $s=(n=null,a={actInsideInputWithModifier:!0})=>{const[o,s]=A.useState(!1),c=A.useRef(!1),f=A.useRef(new Set([])),[d,h]=A.useMemo(()=>{if(n!==null){const m=(Array.isArray(n)?n:[n]).filter(p=>typeof p=="string").map(p=>p.split("+")),y=m.reduce((p,S)=>p.concat(...S),[]);return[m,y]}return[[],[]]},[n]);return A.useEffect(()=>{const g=typeof document<"u"?document:null,m=a?.target||g;if(n!==null){const y=_=>{if(c.current=_.ctrlKey||_.metaKey||_.shiftKey,(!c.current||c.current&&!a.actInsideInputWithModifier)&&Nf(_))return!1;const C=Cv(_.code,h);f.current.add(_[C]),Av(d,f.current,!1)&&(_.preventDefault(),s(!0))},p=_=>{if((!c.current||c.current&&!a.actInsideInputWithModifier)&&Nf(_))return!1;const C=Cv(_.code,h);Av(d,f.current,!0)?(s(!1),f.current.clear()):f.current.delete(_[C]),_.key==="Meta"&&f.current.clear(),c.current=!1},S=()=>{f.current.clear(),s(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",p),window.addEventListener("blur",S),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",p),window.removeEventListener("blur",S)}}},[n,s]),o};function Av(n,a,o){return n.filter(s=>o||s.length===a.size).some(s=>s.every(c=>a.has(c)))}function Cv(n,a){return a.includes(n)?"code":"key"}function K0(n,a,o,s){const c=n.parentNode||n.parentId;if(!c)return o;const f=a.get(c),d=wl(f,s);return K0(f,a,{x:(o.x??0)+d.x,y:(o.y??0)+d.y,z:(f[en]?.z??0)>(o.z??0)?f[en]?.z??0:o.z??0},s)}function J0(n,a,o){n.forEach(s=>{const c=s.parentNode||s.parentId;if(c&&!n.has(c))throw new Error(`Parent node ${c} not found`);if(c||o?.[s.id]){const{x:f,y:d,z:h}=K0(s,n,{...s.position,z:s[en]?.z??0},a);s.positionAbsolute={x:f,y:d},s[en].z=h,o?.[s.id]&&(s[en].isParent=!0)}})}function lf(n,a,o,s){const c=new Map,f={},d=s?1e3:0;return n.forEach(h=>{const g=(mi(h.zIndex)?h.zIndex:0)+(h.selected?d:0),m=a.get(h.id),y={...h,positionAbsolute:{x:h.position.x,y:h.position.y}},p=h.parentNode||h.parentId;p&&(f[p]=!0);const S=m?.type&&m?.type!==h.type;Object.defineProperty(y,en,{enumerable:!1,value:{handleBounds:S?void 0:m?.[en]?.handleBounds,z:g}}),c.set(h.id,y)}),J0(c,o,f),c}function W0(n,a={}){const{getNodes:o,width:s,height:c,minZoom:f,maxZoom:d,d3Zoom:h,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:p}=n(),S=a.initial&&!m&&y;if(h&&g&&(S||!a.initial)){const q=o().filter(k=>{const M=a.includeHiddenNodes?k.width&&k.height:!k.hidden;return a.nodes?.length?M&&a.nodes.some(O=>O.id===k.id):M}),C=q.every(k=>k.width&&k.height);if(q.length>0&&C){const k=Yc(q,p),{x:M,y:O,zoom:U}=j0(k,s,c,a.minZoom??f,a.maxZoom??d,a.padding??.1),w=da.translate(M,O).scale(U);return typeof a.duration=="number"&&a.duration>0?h.transform(bl(g,a.duration),w):h.transform(g,w),!0}}return!1}function U_(n,a){return n.forEach(o=>{const s=a.get(o.id);s&&a.set(s.id,{...s,[en]:s[en],selected:o.selected})}),new Map(a)}function B_(n,a){return a.map(o=>{const s=n.find(c=>c.id===o.id);return s&&(o.selected=s.selected),o})}function gc({changedNodes:n,changedEdges:a,get:o,set:s}){const{nodeInternals:c,edges:f,onNodesChange:d,onEdgesChange:h,hasDefaultNodes:g,hasDefaultEdges:m}=o();n?.length&&(g&&s({nodeInternals:U_(n,c)}),d?.(n)),a?.length&&(m&&s({edges:B_(a,f)}),h?.(a))}const go=()=>{},Y_={zoomIn:go,zoomOut:go,zoomTo:go,getZoom:()=>1,setViewport:go,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:go,fitBounds:go,project:n=>n,screenToFlowPosition:n=>n,flowToScreenPosition:n=>n,viewportInitialized:!1},$_=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection}),V_=()=>{const n=hn(),{d3Zoom:a,d3Selection:o}=Yt($_,Vn);return A.useMemo(()=>o&&a?{zoomIn:c=>a.scaleBy(bl(o,c?.duration),1.2),zoomOut:c=>a.scaleBy(bl(o,c?.duration),1/1.2),zoomTo:(c,f)=>a.scaleTo(bl(o,f?.duration),c),getZoom:()=>n.getState().transform[2],setViewport:(c,f)=>{const[d,h,g]=n.getState().transform,m=da.translate(c.x??d,c.y??h).scale(c.zoom??g);a.transform(bl(o,f?.duration),m)},getViewport:()=>{const[c,f,d]=n.getState().transform;return{x:c,y:f,zoom:d}},fitView:c=>W0(n.getState,c),setCenter:(c,f,d)=>{const{width:h,height:g,maxZoom:m}=n.getState(),y=typeof d?.zoom<"u"?d.zoom:m,p=h/2-c*y,S=g/2-f*y,_=da.translate(p,S).scale(y);a.transform(bl(o,d?.duration),_)},fitBounds:(c,f)=>{const{width:d,height:h,minZoom:g,maxZoom:m}=n.getState(),{x:y,y:p,zoom:S}=j0(c,d,h,g,m,f?.padding??.1),_=da.translate(y,p).scale(S);a.transform(bl(o,f?.duration),_)},project:c=>{const{transform:f,snapToGrid:d,snapGrid:h}=n.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),wf(c,f,d,h)},screenToFlowPosition:c=>{const{transform:f,snapToGrid:d,snapGrid:h,domNode:g}=n.getState();if(!g)return c;const{x:m,y}=g.getBoundingClientRect(),p={x:c.x-m,y:c.y-y};return wf(p,f,d,h)},flowToScreenPosition:c=>{const{transform:f,domNode:d}=n.getState();if(!d)return c;const{x:h,y:g}=d.getBoundingClientRect(),m=O0(c,f);return{x:m.x+h,y:m.y+g}},viewportInitialized:!0}:Y_,[a,o])};function Kf(){const n=V_(),a=hn(),o=A.useCallback(()=>a.getState().getNodes().map(C=>({...C})),[]),s=A.useCallback(C=>a.getState().nodeInternals.get(C),[]),c=A.useCallback(()=>{const{edges:C=[]}=a.getState();return C.map(k=>({...k}))},[]),f=A.useCallback(C=>{const{edges:k=[]}=a.getState();return k.find(M=>M.id===C)},[]),d=A.useCallback(C=>{const{getNodes:k,setNodes:M,hasDefaultNodes:O,onNodesChange:U}=a.getState(),w=k(),J=typeof C=="function"?C(w):C;if(O)M(J);else if(U){const Q=J.length===0?w.map(W=>({type:"remove",id:W.id})):J.map(W=>({item:W,type:"reset"}));U(Q)}},[]),h=A.useCallback(C=>{const{edges:k=[],setEdges:M,hasDefaultEdges:O,onEdgesChange:U}=a.getState(),w=typeof C=="function"?C(k):C;if(O)M(w);else if(U){const J=w.length===0?k.map(Q=>({type:"remove",id:Q.id})):w.map(Q=>({item:Q,type:"reset"}));U(J)}},[]),g=A.useCallback(C=>{const k=Array.isArray(C)?C:[C],{getNodes:M,setNodes:O,hasDefaultNodes:U,onNodesChange:w}=a.getState();if(U){const Q=[...M(),...k];O(Q)}else if(w){const J=k.map(Q=>({item:Q,type:"add"}));w(J)}},[]),m=A.useCallback(C=>{const k=Array.isArray(C)?C:[C],{edges:M=[],setEdges:O,hasDefaultEdges:U,onEdgesChange:w}=a.getState();if(U)O([...M,...k]);else if(w){const J=k.map(Q=>({item:Q,type:"add"}));w(J)}},[]),y=A.useCallback(()=>{const{getNodes:C,edges:k=[],transform:M}=a.getState(),[O,U,w]=M;return{nodes:C().map(J=>({...J})),edges:k.map(J=>({...J})),viewport:{x:O,y:U,zoom:w}}},[]),p=A.useCallback(({nodes:C,edges:k})=>{const{nodeInternals:M,getNodes:O,edges:U,hasDefaultNodes:w,hasDefaultEdges:J,onNodesDelete:Q,onEdgesDelete:W,onNodesChange:ce,onEdgesChange:ue}=a.getState(),te=(C||[]).map(B=>B.id),oe=(k||[]).map(B=>B.id),me=O().reduce((B,N)=>{const L=N.parentNode||N.parentId,ne=!te.includes(N.id)&&L&&B.find(se=>se.id===L);return(typeof N.deletable!="boolean"||N.deletable)&&(te.includes(N.id)||ne)&&B.push(N),B},[]),ve=U.filter(B=>typeof B.deletable=="boolean"?B.deletable:!0),z=ve.filter(B=>oe.includes(B.id));if(me||z){const B=q0(me,ve),N=[...z,...B],L=N.reduce((ne,I)=>(ne.includes(I.id)||ne.push(I.id),ne),[]);if((J||w)&&(J&&a.setState({edges:U.filter(ne=>!L.includes(ne.id))}),w&&(me.forEach(ne=>{M.delete(ne.id)}),a.setState({nodeInternals:new Map(M)}))),L.length>0&&(W?.(N),ue&&ue(L.map(ne=>({id:ne,type:"remove"})))),me.length>0&&(Q?.(me),ce)){const ne=me.map(I=>({id:I.id,type:"remove"}));ce(ne)}}},[]),S=A.useCallback(C=>{const k=c_(C),M=k?null:a.getState().nodeInternals.get(C.id);return!k&&!M?[null,null,k]:[k?C:yv(M),M,k]},[]),_=A.useCallback((C,k=!0,M)=>{const[O,U,w]=S(C);return O?(M||a.getState().getNodes()).filter(J=>{if(!w&&(J.id===U.id||!J.positionAbsolute))return!1;const Q=yv(J),W=Sf(Q,O);return k&&W>0||W>=O.width*O.height}):[]},[]),q=A.useCallback((C,k,M=!0)=>{const[O]=S(C);if(!O)return!1;const U=Sf(O,k);return M&&U>0||U>=O.width*O.height},[]);return A.useMemo(()=>({...n,getNodes:o,getNode:s,getEdges:c,getEdge:f,setNodes:d,setEdges:h,addNodes:g,addEdges:m,toObject:y,deleteElements:p,getIntersectingNodes:_,isNodeIntersecting:q}),[n,o,s,c,f,d,h,g,m,y,p,_,q])}const L_={actInsideInputWithModifier:!1};var X_=({deleteKeyCode:n,multiSelectionKeyCode:a})=>{const o=hn(),{deleteElements:s}=Kf(),c=$s(n,L_),f=$s(a);A.useEffect(()=>{if(c){const{edges:d,getNodes:h}=o.getState(),g=h().filter(y=>y.selected),m=d.filter(y=>y.selected);s({nodes:g,edges:m}),o.setState({nodesSelectionActive:!1})}},[c]),A.useEffect(()=>{o.setState({multiSelectionActive:f})},[f])};function Z_(n){const a=hn();A.useEffect(()=>{let o;const s=()=>{if(!n.current)return;const c=Bf(n.current);(c.height===0||c.width===0)&&a.getState().onError?.("004",ha.error004()),a.setState({width:c.width||500,height:c.height||500})};return s(),window.addEventListener("resize",s),n.current&&(o=new ResizeObserver(()=>s()),o.observe(n.current)),()=>{window.removeEventListener("resize",s),o&&n.current&&o.unobserve(n.current)}},[])}const Jf={position:"absolute",width:"100%",height:"100%",top:0,left:0},I_=(n,a)=>n.x!==a.x||n.y!==a.y||n.zoom!==a.k,pc=n=>({x:n.x,y:n.y,zoom:n.k}),po=(n,a)=>n.target.closest(`.${a}`),Tv=(n,a)=>a===2&&Array.isArray(n)&&n.includes(2),Dv=n=>{const a=n.ctrlKey&&zc()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*a},Q_=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection,d3ZoomHandler:n.d3ZoomHandler,userSelectionActive:n.userSelectionActive}),K_=({onMove:n,onMoveStart:a,onMoveEnd:o,onPaneContextMenu:s,zoomOnScroll:c=!0,zoomOnPinch:f=!0,panOnScroll:d=!1,panOnScrollSpeed:h=.5,panOnScrollMode:g=Nl.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:p=!0,defaultViewport:S,translateExtent:_,minZoom:q,maxZoom:C,zoomActivationKeyCode:k,preventScrolling:M=!0,children:O,noWheelClassName:U,noPanClassName:w})=>{const J=A.useRef(),Q=hn(),W=A.useRef(!1),ce=A.useRef(!1),ue=A.useRef(null),te=A.useRef({x:0,y:0,zoom:0}),{d3Zoom:oe,d3Selection:me,d3ZoomHandler:ve,userSelectionActive:z}=Yt(Q_,Vn),B=$s(k),N=A.useRef(0),L=A.useRef(!1),ne=A.useRef();return Z_(ue),A.useEffect(()=>{if(ue.current){const I=ue.current.getBoundingClientRect(),se=N0().scaleExtent([q,C]).translateExtent(_),D=hi(ue.current).call(se),V=da.translate(S.x,S.y).scale(Co(S.zoom,q,C)),de=[[0,0],[I.width,I.height]],ge=se.constrain()(V,de,_);se.transform(D,ge),se.wheelDelta(Dv),Q.setState({d3Zoom:se,d3Selection:D,d3ZoomHandler:D.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:ue.current.closest(".react-flow")})}},[]),A.useEffect(()=>{me&&oe&&(d&&!B&&!z?me.on("wheel.zoom",I=>{if(po(I,U))return!1;I.preventDefault(),I.stopImmediatePropagation();const se=me.property("__zoom").k||1;if(I.ctrlKey&&f){const Re=_i(I),Oe=Dv(I),$e=se*Math.pow(2,Oe);oe.scaleTo(me,$e,Re,I);return}const D=I.deltaMode===1?20:1;let V=g===Nl.Vertical?0:I.deltaX*D,de=g===Nl.Horizontal?0:I.deltaY*D;!zc()&&I.shiftKey&&g!==Nl.Vertical&&(V=I.deltaY*D,de=0),oe.translateBy(me,-(V/se)*h,-(de/se)*h,{internal:!0});const ge=pc(me.property("__zoom")),{onViewportChangeStart:we,onViewportChange:Ce,onViewportChangeEnd:ke}=Q.getState();clearTimeout(ne.current),L.current||(L.current=!0,a?.(I,ge),we?.(ge)),L.current&&(n?.(I,ge),Ce?.(ge),ne.current=setTimeout(()=>{o?.(I,ge),ke?.(ge),L.current=!1},150))},{passive:!1}):typeof ve<"u"&&me.on("wheel.zoom",function(I,se){if(!M&&I.type==="wheel"&&!I.ctrlKey||po(I,U))return null;I.preventDefault(),ve.call(this,I,se)},{passive:!1}))},[z,d,g,me,oe,ve,B,f,M,U,a,n,o]),A.useEffect(()=>{oe&&oe.on("start",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;N.current=I.sourceEvent?.button;const{onViewportChangeStart:se}=Q.getState(),D=pc(I.transform);W.current=!0,te.current=D,I.sourceEvent?.type==="mousedown"&&Q.setState({paneDragging:!0}),se?.(D),a?.(I.sourceEvent,D)})},[oe,a]),A.useEffect(()=>{oe&&(z&&!W.current?oe.on("zoom",null):z||oe.on("zoom",I=>{const{onViewportChange:se}=Q.getState();if(Q.setState({transform:[I.transform.x,I.transform.y,I.transform.k]}),ce.current=!!(s&&Tv(p,N.current??0)),(n||se)&&!I.sourceEvent?.internal){const D=pc(I.transform);se?.(D),n?.(I.sourceEvent,D)}}))},[z,oe,n,p,s]),A.useEffect(()=>{oe&&oe.on("end",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;const{onViewportChangeEnd:se}=Q.getState();if(W.current=!1,Q.setState({paneDragging:!1}),s&&Tv(p,N.current??0)&&!ce.current&&s(I.sourceEvent),ce.current=!1,(o||se)&&I_(te.current,I.transform)){const D=pc(I.transform);te.current=D,clearTimeout(J.current),J.current=setTimeout(()=>{se?.(D),o?.(I.sourceEvent,D)},d?150:0)}})},[oe,d,p,o,s]),A.useEffect(()=>{oe&&oe.filter(I=>{const se=B||c,D=f&&I.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&I.button===1&&I.type==="mousedown"&&(po(I,"react-flow__node")||po(I,"react-flow__edge")))return!0;if(!p&&!se&&!d&&!m&&!f||z||!m&&I.type==="dblclick"||po(I,U)&&I.type==="wheel"||po(I,w)&&(I.type!=="wheel"||d&&I.type==="wheel"&&!B)||!f&&I.ctrlKey&&I.type==="wheel"||!se&&!d&&!D&&I.type==="wheel"||!p&&(I.type==="mousedown"||I.type==="touchstart")||Array.isArray(p)&&!p.includes(I.button)&&I.type==="mousedown")return!1;const V=Array.isArray(p)&&p.includes(I.button)||!I.button||I.button<=1;return(!I.ctrlKey||I.type==="wheel")&&V})},[z,oe,c,f,d,m,p,y,B]),pe.createElement("div",{className:"react-flow__renderer",ref:ue,style:Jf},O)},J_=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function W_(){const{userSelectionActive:n,userSelectionRect:a}=Yt(J_,Vn);return n&&a?pe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:a.width,height:a.height,transform:`translate(${a.x}px, ${a.y}px)`}}):null}function Mv(n,a){const o=a.parentNode||a.parentId,s=n.find(c=>c.id===o);if(s){const c=a.position.x+a.width-s.width,f=a.position.y+a.height-s.height;if(c>0||f>0||a.position.x<0||a.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,c>0&&(s.style.width+=c),f>0&&(s.style.height+=f),a.position.x<0){const d=Math.abs(a.position.x);s.position.x=s.position.x-d,s.style.width+=d,a.position.x=0}if(a.position.y<0){const d=Math.abs(a.position.y);s.position.y=s.position.y-d,s.style.height+=d,a.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function F_(n,a){if(n.some(s=>s.type==="reset"))return n.filter(s=>s.type==="reset").map(s=>s.item);const o=n.filter(s=>s.type==="add").map(s=>s.item);return a.reduce((s,c)=>{const f=n.filter(h=>h.id===c.id);if(f.length===0)return s.push(c),s;const d={...c};for(const h of f)if(h)switch(h.type){case"select":{d.selected=h.selected;break}case"position":{typeof h.position<"u"&&(d.position=h.position),typeof h.positionAbsolute<"u"&&(d.positionAbsolute=h.positionAbsolute),typeof h.dragging<"u"&&(d.dragging=h.dragging),d.expandParent&&Mv(s,d);break}case"dimensions":{typeof h.dimensions<"u"&&(d.width=h.dimensions.width,d.height=h.dimensions.height),typeof h.updateStyle<"u"&&(d.style={...d.style||{},...h.dimensions}),typeof h.resizing=="boolean"&&(d.resizing=h.resizing),d.expandParent&&Mv(s,d);break}case"remove":return s}return s.push(d),s},o)}function Wf(n,a){return F_(n,a)}const Ka=(n,a)=>({id:n,type:"select",selected:a});function bo(n,a){return n.reduce((o,s)=>{const c=a.includes(s.id);return!s.selected&&c?(s.selected=!0,o.push(Ka(s.id,!0))):s.selected&&!c&&(s.selected=!1,o.push(Ka(s.id,!1))),o},[])}const of=(n,a)=>o=>{o.target===a.current&&n?.(o)},P_=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging}),F0=A.memo(({isSelecting:n,selectionMode:a=Ys.Full,panOnDrag:o,onSelectionStart:s,onSelectionEnd:c,onPaneClick:f,onPaneContextMenu:d,onPaneScroll:h,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:p})=>{const S=A.useRef(null),_=hn(),q=A.useRef(0),C=A.useRef(0),k=A.useRef(),{userSelectionActive:M,elementsSelectable:O,dragging:U}=Yt(P_,Vn),w=()=>{_.setState({userSelectionActive:!1,userSelectionRect:null}),q.current=0,C.current=0},J=ve=>{f?.(ve),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},Q=ve=>{if(Array.isArray(o)&&o?.includes(2)){ve.preventDefault();return}d?.(ve)},W=h?ve=>h(ve):void 0,ce=ve=>{const{resetSelectedElements:z,domNode:B}=_.getState();if(k.current=B?.getBoundingClientRect(),!O||!n||ve.button!==0||ve.target!==S.current||!k.current)return;const{x:N,y:L}=Pa(ve,k.current);z(),_.setState({userSelectionRect:{width:0,height:0,startX:N,startY:L,x:N,y:L}}),s?.(ve)},ue=ve=>{const{userSelectionRect:z,nodeInternals:B,edges:N,transform:L,onNodesChange:ne,onEdgesChange:I,nodeOrigin:se,getNodes:D}=_.getState();if(!n||!k.current||!z)return;_.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=Pa(ve,k.current),de=z.startX??0,ge=z.startY??0,we={...z,x:V.x<de?V.x:de,y:V.y<ge?V.y:ge,width:Math.abs(V.x-de),height:Math.abs(V.y-ge)},Ce=D(),ke=R0(B,we,L,a===Ys.Partial,!0,se),Re=q0(ke,N).map($e=>$e.id),Oe=ke.map($e=>$e.id);if(q.current!==Oe.length){q.current=Oe.length;const $e=bo(Ce,Oe);$e.length&&ne?.($e)}if(C.current!==Re.length){C.current=Re.length;const $e=bo(N,Re);$e.length&&I?.($e)}_.setState({userSelectionRect:we})},te=ve=>{if(ve.button!==0)return;const{userSelectionRect:z}=_.getState();!M&&z&&ve.target===S.current&&J?.(ve),_.setState({nodesSelectionActive:q.current>0}),w(),c?.(ve)},oe=ve=>{M&&(_.setState({nodesSelectionActive:q.current>0}),c?.(ve)),w()},me=O&&(n||M);return pe.createElement("div",{className:En(["react-flow__pane",{dragging:U,selection:n}]),onClick:me?void 0:of(J,S),onContextMenu:of(Q,S),onWheel:of(W,S),onMouseEnter:me?void 0:g,onMouseDown:me?ce:void 0,onMouseMove:me?ue:m,onMouseUp:me?te:void 0,onMouseLeave:me?oe:y,ref:S,style:Jf},p,pe.createElement(W_,null))});F0.displayName="Pane";function P0(n,a){const o=n.parentNode||n.parentId;if(!o)return!1;const s=a.get(o);return s?s.selected?!0:P0(s,a):!1}function zv(n,a,o){let s=n;do{if(s?.matches(a))return!0;if(s===o.current)return!1;s=s.parentElement}while(s);return!1}function ew(n,a,o,s){return Array.from(n.values()).filter(c=>(c.selected||c.id===s)&&(!c.parentNode||c.parentId||!P0(c,n))&&(c.draggable||a&&typeof c.draggable>"u")).map(c=>({id:c.id,position:c.position||{x:0,y:0},positionAbsolute:c.positionAbsolute||{x:0,y:0},distance:{x:o.x-(c.positionAbsolute?.x??0),y:o.y-(c.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:c.extent,parentNode:c.parentNode||c.parentId,parentId:c.parentNode||c.parentId,width:c.width,height:c.height,expandParent:c.expandParent}))}function tw(n,a){return!a||a==="parent"?a:[a[0],[a[1][0]-(n.width||0),a[1][1]-(n.height||0)]]}function ey(n,a,o,s,c=[0,0],f){const d=tw(n,n.extent||s);let h=d;const g=n.parentNode||n.parentId;if(n.extent==="parent"&&!n.expandParent)if(g&&n.width&&n.height){const p=o.get(g),{x:S,y:_}=wl(p,c).positionAbsolute;h=p&&mi(S)&&mi(_)&&mi(p.width)&&mi(p.height)?[[S+n.width*c[0],_+n.height*c[1]],[S+p.width-n.width+n.width*c[0],_+p.height-n.height+n.height*c[1]]]:h}else f?.("005",ha.error005()),h=d;else if(n.extent&&g&&n.extent!=="parent"){const p=o.get(g),{x:S,y:_}=wl(p,c).positionAbsolute;h=[[n.extent[0][0]+S,n.extent[0][1]+_],[n.extent[1][0]+S,n.extent[1][1]+_]]}let m={x:0,y:0};if(g){const p=o.get(g);m=wl(p,c).positionAbsolute}const y=h&&h!=="parent"?Yf(a,h):a;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function sf({nodeId:n,dragItems:a,nodeInternals:o}){const s=a.map(c=>({...o.get(c.id),position:c.position,positionAbsolute:c.positionAbsolute}));return[n?s.find(c=>c.id===n):s[0],s]}const kv=(n,a,o,s)=>{const c=a.querySelectorAll(n);if(!c||!c.length)return null;const f=Array.from(c),d=a.getBoundingClientRect(),h={x:d.width*s[0],y:d.height*s[1]};return f.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-d.left-h.x)/o,y:(m.top-d.top-h.y)/o,...Bf(g)}})};function Ts(n,a,o){return o===void 0?o:s=>{const c=a().nodeInternals.get(n);c&&o(s,{...c})}}function Cf({id:n,store:a,unselect:o=!1,nodeRef:s}){const{addSelectedNodes:c,unselectNodesAndEdges:f,multiSelectionActive:d,nodeInternals:h,onError:g}=a.getState(),m=h.get(n);if(!m){g?.("012",ha.error012(n));return}a.setState({nodesSelectionActive:!1}),m.selected?(o||m.selected&&d)&&(f({nodes:[m],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):c([n])}function nw(){const n=hn();return A.useCallback(({sourceEvent:o})=>{const{transform:s,snapGrid:c,snapToGrid:f}=n.getState(),d=o.touches?o.touches[0].clientX:o.clientX,h=o.touches?o.touches[0].clientY:o.clientY,g={x:(d-s[0])/s[2],y:(h-s[1])/s[2]};return{xSnapped:f?c[0]*Math.round(g.x/c[0]):g.x,ySnapped:f?c[1]*Math.round(g.y/c[1]):g.y,...g}},[])}function rf(n){return(a,o,s)=>n?.(a,s)}function ty({nodeRef:n,disabled:a=!1,noDragClassName:o,handleSelector:s,nodeId:c,isSelectable:f,selectNodesOnDrag:d}){const h=hn(),[g,m]=A.useState(!1),y=A.useRef([]),p=A.useRef({x:null,y:null}),S=A.useRef(0),_=A.useRef(null),q=A.useRef({x:0,y:0}),C=A.useRef(null),k=A.useRef(!1),M=A.useRef(!1),O=A.useRef(!1),U=nw();return A.useEffect(()=>{if(n?.current){const w=hi(n.current),J=({x:ce,y:ue})=>{const{nodeInternals:te,onNodeDrag:oe,onSelectionDrag:me,updateNodePositions:ve,nodeExtent:z,snapGrid:B,snapToGrid:N,nodeOrigin:L,onError:ne}=h.getState();p.current={x:ce,y:ue};let I=!1,se={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&z){const V=Yc(y.current,L);se=Bs(V)}if(y.current=y.current.map(V=>{const de={x:ce-V.distance.x,y:ue-V.distance.y};N&&(de.x=B[0]*Math.round(de.x/B[0]),de.y=B[1]*Math.round(de.y/B[1]));const ge=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];y.current.length>1&&z&&!V.extent&&(ge[0][0]=V.positionAbsolute.x-se.x+z[0][0],ge[1][0]=V.positionAbsolute.x+(V.width??0)-se.x2+z[1][0],ge[0][1]=V.positionAbsolute.y-se.y+z[0][1],ge[1][1]=V.positionAbsolute.y+(V.height??0)-se.y2+z[1][1]);const we=ey(V,de,te,ge,L,ne);return I=I||V.position.x!==we.position.x||V.position.y!==we.position.y,V.position=we.position,V.positionAbsolute=we.positionAbsolute,V}),!I)return;ve(y.current,!0,!0),m(!0);const D=c?oe:rf(me);if(D&&C.current){const[V,de]=sf({nodeId:c,dragItems:y.current,nodeInternals:te});D(C.current,V,de)}},Q=()=>{if(!_.current)return;const[ce,ue]=_0(q.current,_.current);if(ce!==0||ue!==0){const{transform:te,panBy:oe}=h.getState();p.current.x=(p.current.x??0)-ce/te[2],p.current.y=(p.current.y??0)-ue/te[2],oe({x:ce,y:ue})&&J(p.current)}S.current=requestAnimationFrame(Q)},W=ce=>{const{nodeInternals:ue,multiSelectionActive:te,nodesDraggable:oe,unselectNodesAndEdges:me,onNodeDragStart:ve,onSelectionDragStart:z}=h.getState();M.current=!0;const B=c?ve:rf(z);(!d||!f)&&!te&&c&&(ue.get(c)?.selected||me()),c&&f&&d&&Cf({id:c,store:h,nodeRef:n});const N=U(ce);if(p.current=N,y.current=ew(ue,oe,N,c),B&&y.current){const[L,ne]=sf({nodeId:c,dragItems:y.current,nodeInternals:ue});B(ce.sourceEvent,L,ne)}};if(a)w.on(".drag",null);else{const ce=hN().on("start",ue=>{const{domNode:te,nodeDragThreshold:oe}=h.getState();oe===0&&W(ue),O.current=!1;const me=U(ue);p.current=me,_.current=te?.getBoundingClientRect()||null,q.current=Pa(ue.sourceEvent,_.current)}).on("drag",ue=>{const te=U(ue),{autoPanOnNodeDrag:oe,nodeDragThreshold:me}=h.getState();if(ue.sourceEvent.type==="touchmove"&&ue.sourceEvent.touches.length>1&&(O.current=!0),!O.current){if(!k.current&&M.current&&oe&&(k.current=!0,Q()),!M.current){const ve=te.xSnapped-(p?.current?.x??0),z=te.ySnapped-(p?.current?.y??0);Math.sqrt(ve*ve+z*z)>me&&W(ue)}(p.current.x!==te.xSnapped||p.current.y!==te.ySnapped)&&y.current&&M.current&&(C.current=ue.sourceEvent,q.current=Pa(ue.sourceEvent,_.current),J(te))}}).on("end",ue=>{if(!(!M.current||O.current)&&(m(!1),k.current=!1,M.current=!1,cancelAnimationFrame(S.current),y.current)){const{updateNodePositions:te,nodeInternals:oe,onNodeDragStop:me,onSelectionDragStop:ve}=h.getState(),z=c?me:rf(ve);if(te(y.current,!1,!1),z){const[B,N]=sf({nodeId:c,dragItems:y.current,nodeInternals:oe});z(ue.sourceEvent,B,N)}}}).filter(ue=>{const te=ue.target;return!ue.button&&(!o||!zv(te,`.${o}`,n))&&(!s||zv(te,s,n))});return w.call(ce),()=>{w.on(".drag",null)}}}},[n,a,o,s,f,h,c,d,U]),g}function ny(){const n=hn();return A.useCallback(o=>{const{nodeInternals:s,nodeExtent:c,updateNodePositions:f,getNodes:d,snapToGrid:h,snapGrid:g,onError:m,nodesDraggable:y}=n.getState(),p=d().filter(O=>O.selected&&(O.draggable||y&&typeof O.draggable>"u")),S=h?g[0]:5,_=h?g[1]:5,q=o.isShiftPressed?4:1,C=o.x*S*q,k=o.y*_*q,M=p.map(O=>{if(O.positionAbsolute){const U={x:O.positionAbsolute.x+C,y:O.positionAbsolute.y+k};h&&(U.x=g[0]*Math.round(U.x/g[0]),U.y=g[1]*Math.round(U.y/g[1]));const{positionAbsolute:w,position:J}=ey(O,U,s,c,void 0,m);O.position=J,O.positionAbsolute=w}return O});f(M,!0,!1)},[])}const _o={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ds=n=>{const a=({id:o,type:s,data:c,xPos:f,yPos:d,xPosOrigin:h,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:p,onMouseMove:S,onMouseLeave:_,onContextMenu:q,onDoubleClick:C,style:k,className:M,isDraggable:O,isSelectable:U,isConnectable:w,isFocusable:J,selectNodesOnDrag:Q,sourcePosition:W,targetPosition:ce,hidden:ue,resizeObserver:te,dragHandle:oe,zIndex:me,isParent:ve,noDragClassName:z,noPanClassName:B,initialized:N,disableKeyboardA11y:L,ariaLabel:ne,rfId:I,hasHandleBounds:se})=>{const D=hn(),V=A.useRef(null),de=A.useRef(null),ge=A.useRef(W),we=A.useRef(ce),Ce=A.useRef(s),ke=U||O||y||p||S||_,Re=ny(),Oe=Ts(o,D.getState,p),$e=Ts(o,D.getState,S),at=Ts(o,D.getState,_),Pe=Ts(o,D.getState,q),Et=Ts(o,D.getState,C),gt=Fe=>{const{nodeDragThreshold:je}=D.getState();if(U&&(!Q||!O||je>0)&&Cf({id:o,store:D,nodeRef:V}),y){const _t=D.getState().nodeInternals.get(o);_t&&y(Fe,{..._t})}},et=Fe=>{if(!Nf(Fe)&&!L)if(T0.includes(Fe.key)&&U){const je=Fe.key==="Escape";Cf({id:o,store:D,unselect:je,nodeRef:V})}else O&&m&&Object.prototype.hasOwnProperty.call(_o,Fe.key)&&(D.setState({ariaLiveMessage:`Moved selected node ${Fe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~f}, y: ${~~d}`}),Re({x:_o[Fe.key].x,y:_o[Fe.key].y,isShiftPressed:Fe.shiftKey}))};A.useEffect(()=>()=>{de.current&&(te?.unobserve(de.current),de.current=null)},[]),A.useEffect(()=>{if(V.current&&!ue){const Fe=V.current;(!N||!se||de.current!==Fe)&&(de.current&&te?.unobserve(de.current),te?.observe(Fe),de.current=Fe)}},[ue,N,se]),A.useEffect(()=>{const Fe=Ce.current!==s,je=ge.current!==W,_t=we.current!==ce;V.current&&(Fe||je||_t)&&(Fe&&(Ce.current=s),je&&(ge.current=W),_t&&(we.current=ce),D.getState().updateNodeDimensions([{id:o,nodeElement:V.current,forceUpdate:!0}]))},[o,s,W,ce]);const pt=ty({nodeRef:V,disabled:ue||!O,noDragClassName:z,handleSelector:oe,nodeId:o,isSelectable:U,selectNodesOnDrag:Q});return ue?null:pe.createElement("div",{className:En(["react-flow__node",`react-flow__node-${s}`,{[B]:O},M,{selected:m,selectable:U,parent:ve,dragging:pt}]),ref:V,style:{zIndex:me,transform:`translate(${h}px,${g}px)`,pointerEvents:ke?"all":"none",visibility:N?"visible":"hidden",...k},"data-id":o,"data-testid":`rf__node-${o}`,onMouseEnter:Oe,onMouseMove:$e,onMouseLeave:at,onContextMenu:Pe,onClick:gt,onDoubleClick:Et,onKeyDown:J?et:void 0,tabIndex:J?0:void 0,role:J?"button":void 0,"aria-describedby":L?void 0:`${I0}-${I}`,"aria-label":ne},pe.createElement(p_,{value:o},pe.createElement(n,{id:o,data:c,type:s,xPos:f,yPos:d,selected:m,isConnectable:w,sourcePosition:W,targetPosition:ce,dragging:pt,dragHandle:oe,zIndex:me})))};return a.displayName="NodeWrapper",A.memo(a)};const iw=n=>{const a=n.getNodes().filter(o=>o.selected);return{...Yc(a,n.nodeOrigin),transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`,userSelectionActive:n.userSelectionActive}};function aw({onSelectionContextMenu:n,noPanClassName:a,disableKeyboardA11y:o}){const s=hn(),{width:c,height:f,x:d,y:h,transformString:g,userSelectionActive:m}=Yt(iw,Vn),y=ny(),p=A.useRef(null);if(A.useEffect(()=>{o||p.current?.focus({preventScroll:!0})},[o]),ty({nodeRef:p}),m||!c||!f)return null;const S=n?q=>{const C=s.getState().getNodes().filter(k=>k.selected);n(q,C)}:void 0,_=q=>{Object.prototype.hasOwnProperty.call(_o,q.key)&&y({x:_o[q.key].x,y:_o[q.key].y,isShiftPressed:q.shiftKey})};return pe.createElement("div",{className:En(["react-flow__nodesselection","react-flow__container",a]),style:{transform:g}},pe.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:S,tabIndex:o?void 0:-1,onKeyDown:o?void 0:_,style:{width:c,height:f,top:h,left:d}}))}var lw=A.memo(aw);const ow=n=>n.nodesSelectionActive,iy=({children:n,onPaneClick:a,onPaneMouseEnter:o,onPaneMouseMove:s,onPaneMouseLeave:c,onPaneContextMenu:f,onPaneScroll:d,deleteKeyCode:h,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:p,selectionOnDrag:S,selectionMode:_,onSelectionStart:q,onSelectionEnd:C,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:O,elementsSelectable:U,zoomOnScroll:w,zoomOnPinch:J,panOnScroll:Q,panOnScrollSpeed:W,panOnScrollMode:ce,zoomOnDoubleClick:ue,panOnDrag:te,defaultViewport:oe,translateExtent:me,minZoom:ve,maxZoom:z,preventScrolling:B,onSelectionContextMenu:N,noWheelClassName:L,noPanClassName:ne,disableKeyboardA11y:I})=>{const se=Yt(ow),D=$s(p),V=$s(M),de=V||te,ge=V||Q,we=D||S&&de!==!0;return X_({deleteKeyCode:h,multiSelectionKeyCode:k}),pe.createElement(K_,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:f,elementsSelectable:U,zoomOnScroll:w,zoomOnPinch:J,panOnScroll:ge,panOnScrollSpeed:W,panOnScrollMode:ce,zoomOnDoubleClick:ue,panOnDrag:!D&&de,defaultViewport:oe,translateExtent:me,minZoom:ve,maxZoom:z,zoomActivationKeyCode:O,preventScrolling:B,noWheelClassName:L,noPanClassName:ne},pe.createElement(F0,{onSelectionStart:q,onSelectionEnd:C,onPaneClick:a,onPaneMouseEnter:o,onPaneMouseMove:s,onPaneMouseLeave:c,onPaneContextMenu:f,onPaneScroll:d,panOnDrag:de,isSelecting:!!we,selectionMode:_},n,se&&pe.createElement(lw,{onSelectionContextMenu:N,noPanClassName:ne,disableKeyboardA11y:I})))};iy.displayName="FlowRenderer";var sw=A.memo(iy);function rw(n){return Yt(A.useCallback(o=>n?R0(o.nodeInternals,{x:0,y:0,width:o.width,height:o.height},o.transform,!0):o.getNodes(),[n]))}function cw(n){const a={input:Ds(n.input||V0),default:Ds(n.default||Af),output:Ds(n.output||X0),group:Ds(n.group||Qf)},o={},s=Object.keys(n).filter(c=>!["input","default","output","group"].includes(c)).reduce((c,f)=>(c[f]=Ds(n[f]||Af),c),o);return{...a,...s}}const uw=({x:n,y:a,width:o,height:s,origin:c})=>!o||!s?{x:n,y:a}:c[0]<0||c[1]<0||c[0]>1||c[1]>1?{x:n,y:a}:{x:n-o*c[0],y:a-s*c[1]},dw=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,updateNodeDimensions:n.updateNodeDimensions,onError:n.onError}),ay=n=>{const{nodesDraggable:a,nodesConnectable:o,nodesFocusable:s,elementsSelectable:c,updateNodeDimensions:f,onError:d}=Yt(dw,Vn),h=rw(n.onlyRenderVisibleElements),g=A.useRef(),m=A.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(p=>{const S=p.map(_=>({id:_.target.getAttribute("data-id"),nodeElement:_.target,forceUpdate:!0}));f(S)});return g.current=y,y},[]);return A.useEffect(()=>()=>{g?.current?.disconnect()},[]),pe.createElement("div",{className:"react-flow__nodes",style:Jf},h.map(y=>{let p=y.type||"default";n.nodeTypes[p]||(d?.("003",ha.error003(p)),p="default");const S=n.nodeTypes[p]||n.nodeTypes.default,_=!!(y.draggable||a&&typeof y.draggable>"u"),q=!!(y.selectable||c&&typeof y.selectable>"u"),C=!!(y.connectable||o&&typeof y.connectable>"u"),k=!!(y.focusable||s&&typeof y.focusable>"u"),M=n.nodeExtent?Yf(y.positionAbsolute,n.nodeExtent):y.positionAbsolute,O=M?.x??0,U=M?.y??0,w=uw({x:O,y:U,width:y.width??0,height:y.height??0,origin:n.nodeOrigin});return pe.createElement(S,{key:y.id,id:y.id,className:y.className,style:y.style,type:p,data:y.data,sourcePosition:y.sourcePosition||He.Bottom,targetPosition:y.targetPosition||He.Top,hidden:y.hidden,xPos:O,yPos:U,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:n.selectNodesOnDrag,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,selected:!!y.selected,isDraggable:_,isSelectable:q,isConnectable:C,isFocusable:k,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[en]?.z??0,isParent:!!y[en]?.isParent,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,initialized:!!y.width&&!!y.height,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[en]?.handleBounds})}))};ay.displayName="NodeRenderer";var fw=A.memo(ay);const hw=(n,a,o)=>o===He.Left?n-a:o===He.Right?n+a:n,mw=(n,a,o)=>o===He.Top?n-a:o===He.Bottom?n+a:n,Ov="react-flow__edgeupdater",Rv=({position:n,centerX:a,centerY:o,radius:s=10,onMouseDown:c,onMouseEnter:f,onMouseOut:d,type:h})=>pe.createElement("circle",{onMouseDown:c,onMouseEnter:f,onMouseOut:d,className:En([Ov,`${Ov}-${h}`]),cx:hw(a,s,n),cy:mw(o,s,n),r:s,stroke:"transparent",fill:"transparent"}),gw=()=>!0;var vo=n=>{const a=({id:o,className:s,type:c,data:f,onClick:d,onEdgeDoubleClick:h,selected:g,animated:m,label:y,labelStyle:p,labelShowBg:S,labelBgStyle:_,labelBgPadding:q,labelBgBorderRadius:C,style:k,source:M,target:O,sourceX:U,sourceY:w,targetX:J,targetY:Q,sourcePosition:W,targetPosition:ce,elementsSelectable:ue,hidden:te,sourceHandleId:oe,targetHandleId:me,onContextMenu:ve,onMouseEnter:z,onMouseMove:B,onMouseLeave:N,reconnectRadius:L,onReconnect:ne,onReconnectStart:I,onReconnectEnd:se,markerEnd:D,markerStart:V,rfId:de,ariaLabel:ge,isFocusable:we,isReconnectable:Ce,pathOptions:ke,interactionWidth:Re,disableKeyboardA11y:Oe})=>{const $e=A.useRef(null),[at,Pe]=A.useState(!1),[Et,gt]=A.useState(!1),et=hn(),pt=A.useMemo(()=>`url('#${_f(V,de)}')`,[V,de]),Fe=A.useMemo(()=>`url('#${_f(D,de)}')`,[D,de]);if(te)return null;const je=dt=>{const{edges:De,addSelectedEdges:ie,unselectNodesAndEdges:ee,multiSelectionActive:be}=et.getState(),Be=De.find(ft=>ft.id===o);Be&&(ue&&(et.setState({nodesSelectionActive:!1}),Be.selected&&be?(ee({nodes:[],edges:[Be]}),$e.current?.blur()):ie([o])),d&&d(dt,Be))},_t=Cs(o,et.getState,h),Qt=Cs(o,et.getState,ve),vn=Cs(o,et.getState,z),Mn=Cs(o,et.getState,B),_n=Cs(o,et.getState,N),wt=(dt,De)=>{if(dt.button!==0)return;const{edges:ie,isValidConnection:ee}=et.getState(),be=De?O:M,Be=(De?me:oe)||null,ft=De?"target":"source",Xe=ee||gw,Tt=De,Qe=ie.find(vt=>vt.id===o);gt(!0),I?.(dt,Qe,ft);const Ze=vt=>{gt(!1),se?.(vt,Qe,ft)};U0({event:dt,handleId:Be,nodeId:be,onConnect:vt=>ne?.(Qe,vt),isTarget:Tt,getState:et.getState,setState:et.setState,isValidConnection:Xe,edgeUpdaterType:ft,onReconnectEnd:Ze})},zn=dt=>wt(dt,!0),tt=dt=>wt(dt,!1),Rt=()=>Pe(!0),cn=()=>Pe(!1),qt=!ue&&!d,wn=dt=>{if(!Oe&&T0.includes(dt.key)&&ue){const{unselectNodesAndEdges:De,addSelectedEdges:ie,edges:ee}=et.getState();dt.key==="Escape"?($e.current?.blur(),De({edges:[ee.find(Be=>Be.id===o)]})):ie([o])}};return pe.createElement("g",{className:En(["react-flow__edge",`react-flow__edge-${c}`,s,{selected:g,animated:m,inactive:qt,updating:at}]),onClick:je,onDoubleClick:_t,onContextMenu:Qt,onMouseEnter:vn,onMouseMove:Mn,onMouseLeave:_n,onKeyDown:we?wn:void 0,tabIndex:we?0:void 0,role:we?"button":"img","data-testid":`rf__edge-${o}`,"aria-label":ge===null?void 0:ge||`Edge from ${M} to ${O}`,"aria-describedby":we?`${Q0}-${de}`:void 0,ref:$e},!Et&&pe.createElement(n,{id:o,source:M,target:O,selected:g,animated:m,label:y,labelStyle:p,labelShowBg:S,labelBgStyle:_,labelBgPadding:q,labelBgBorderRadius:C,data:f,style:k,sourceX:U,sourceY:w,targetX:J,targetY:Q,sourcePosition:W,targetPosition:ce,sourceHandleId:oe,targetHandleId:me,markerStart:pt,markerEnd:Fe,pathOptions:ke,interactionWidth:Re}),Ce&&pe.createElement(pe.Fragment,null,(Ce==="source"||Ce===!0)&&pe.createElement(Rv,{position:W,centerX:U,centerY:w,radius:L,onMouseDown:zn,onMouseEnter:Rt,onMouseOut:cn,type:"source"}),(Ce==="target"||Ce===!0)&&pe.createElement(Rv,{position:ce,centerX:J,centerY:Q,radius:L,onMouseDown:tt,onMouseEnter:Rt,onMouseOut:cn,type:"target"})))};return a.displayName="EdgeWrapper",A.memo(a)};function pw(n){const a={default:vo(n.default||kc),straight:vo(n.bezier||Lf),step:vo(n.step||Vf),smoothstep:vo(n.step||Bc),simplebezier:vo(n.simplebezier||$f)},o={},s=Object.keys(n).filter(c=>!["default","bezier"].includes(c)).reduce((c,f)=>(c[f]=vo(n[f]||kc),c),o);return{...a,...s}}function qv(n,a,o=null){const s=(o?.x||0)+a.x,c=(o?.y||0)+a.y,f=o?.width||a.width,d=o?.height||a.height;switch(n){case He.Top:return{x:s+f/2,y:c};case He.Right:return{x:s+f,y:c+d/2};case He.Bottom:return{x:s+f/2,y:c+d};case He.Left:return{x:s,y:c+d/2}}}function jv(n,a){return n?n.length===1||!a?n[0]:a&&n.find(o=>o.id===a)||null:null}const vw=(n,a,o,s,c,f)=>{const d=qv(o,n,a),h=qv(f,s,c);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y}};function yw({sourcePos:n,targetPos:a,sourceWidth:o,sourceHeight:s,targetWidth:c,targetHeight:f,width:d,height:h,transform:g}){const m={x:Math.min(n.x,a.x),y:Math.min(n.y,a.y),x2:Math.max(n.x+o,a.x+c),y2:Math.max(n.y+s,a.y+f)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Bs({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:d/g[2],height:h/g[2]}),p=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),S=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(p*S)>0}function Hv(n){const a=n?.[en]?.handleBounds||null,o=a&&n?.width&&n?.height&&typeof n?.positionAbsolute?.x<"u"&&typeof n?.positionAbsolute?.y<"u";return[{x:n?.positionAbsolute?.x||0,y:n?.positionAbsolute?.y||0,width:n?.width||0,height:n?.height||0},a,!!o]}const xw=[{level:0,isMaxLevel:!0,edges:[]}];function bw(n,a,o=!1){let s=-1;const c=n.reduce((d,h)=>{const g=mi(h.zIndex);let m=g?h.zIndex:0;if(o){const y=a.get(h.target),p=a.get(h.source),S=h.selected||y?.selected||p?.selected,_=Math.max(p?.[en]?.z||0,y?.[en]?.z||0,1e3);m=(g?h.zIndex:0)+(S?_:0)}return d[m]?d[m].push(h):d[m]=[h],s=m>s?m:s,d},{}),f=Object.entries(c).map(([d,h])=>{const g=+d;return{edges:h,level:g,isMaxLevel:g===s}});return f.length===0?xw:f}function Sw(n,a,o){const s=Yt(A.useCallback(c=>n?c.edges.filter(f=>{const d=a.get(f.source),h=a.get(f.target);return d?.width&&d?.height&&h?.width&&h?.height&&yw({sourcePos:d.positionAbsolute||{x:0,y:0},targetPos:h.positionAbsolute||{x:0,y:0},sourceWidth:d.width,sourceHeight:d.height,targetWidth:h.width,targetHeight:h.height,width:c.width,height:c.height,transform:c.transform})}):c.edges,[n,a]));return bw(s,a,o)}const Nw=({color:n="none",strokeWidth:a=1})=>pe.createElement("polyline",{style:{stroke:n,strokeWidth:a},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Ew=({color:n="none",strokeWidth:a=1})=>pe.createElement("polyline",{style:{stroke:n,fill:n,strokeWidth:a},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Gv={[Gi.Arrow]:Nw,[Gi.ArrowClosed]:Ew};function _w(n){const a=hn();return A.useMemo(()=>Object.prototype.hasOwnProperty.call(Gv,n)?Gv[n]:(a.getState().onError?.("009",ha.error009(n)),null),[n])}const ww=({id:n,type:a,color:o,width:s=12.5,height:c=12.5,markerUnits:f="strokeWidth",strokeWidth:d,orient:h="auto-start-reverse"})=>{const g=_w(a);return g?pe.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${s}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:f,orient:h,refX:"0",refY:"0"},pe.createElement(g,{color:o,strokeWidth:d})):null},Aw=({defaultColor:n,rfId:a})=>o=>{const s=[];return o.edges.reduce((c,f)=>([f.markerStart,f.markerEnd].forEach(d=>{if(d&&typeof d=="object"){const h=_f(d,a);s.includes(h)||(c.push({id:h,color:d.color||n,...d}),s.push(h))}}),c),[]).sort((c,f)=>c.id.localeCompare(f.id))},ly=({defaultColor:n,rfId:a})=>{const o=Yt(A.useCallback(Aw({defaultColor:n,rfId:a}),[n,a]),(s,c)=>!(s.length!==c.length||s.some((f,d)=>f.id!==c[d].id)));return pe.createElement("defs",null,o.map(s=>pe.createElement(ww,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};ly.displayName="MarkerDefinitions";var Cw=A.memo(ly);const Tw=n=>({nodesConnectable:n.nodesConnectable,edgesFocusable:n.edgesFocusable,edgesUpdatable:n.edgesUpdatable,elementsSelectable:n.elementsSelectable,width:n.width,height:n.height,connectionMode:n.connectionMode,nodeInternals:n.nodeInternals,onError:n.onError}),oy=({defaultMarkerColor:n,onlyRenderVisibleElements:a,elevateEdgesOnSelect:o,rfId:s,edgeTypes:c,noPanClassName:f,onEdgeContextMenu:d,onEdgeMouseEnter:h,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:p,onReconnect:S,onReconnectStart:_,onReconnectEnd:q,reconnectRadius:C,children:k,disableKeyboardA11y:M})=>{const{edgesFocusable:O,edgesUpdatable:U,elementsSelectable:w,width:J,height:Q,connectionMode:W,nodeInternals:ce,onError:ue}=Yt(Tw,Vn),te=Sw(a,ce,o);return J?pe.createElement(pe.Fragment,null,te.map(({level:oe,edges:me,isMaxLevel:ve})=>pe.createElement("svg",{key:oe,style:{zIndex:oe},width:J,height:Q,className:"react-flow__edges react-flow__container"},ve&&pe.createElement(Cw,{defaultColor:n,rfId:s}),pe.createElement("g",null,me.map(z=>{const[B,N,L]=Hv(ce.get(z.source)),[ne,I,se]=Hv(ce.get(z.target));if(!L||!se)return null;let D=z.type||"default";c[D]||(ue?.("011",ha.error011(D)),D="default");const V=c[D]||c.default,de=W===Cl.Strict?I.target:(I.target??[]).concat(I.source??[]),ge=jv(N.source,z.sourceHandle),we=jv(de,z.targetHandle),Ce=ge?.position||He.Bottom,ke=we?.position||He.Top,Re=!!(z.focusable||O&&typeof z.focusable>"u"),Oe=z.reconnectable||z.updatable,$e=typeof S<"u"&&(Oe||U&&typeof Oe>"u");if(!ge||!we)return ue?.("008",ha.error008(ge,z)),null;const{sourceX:at,sourceY:Pe,targetX:Et,targetY:gt}=vw(B,ge,Ce,ne,we,ke);return pe.createElement(V,{key:z.id,id:z.id,className:En([z.className,f]),type:D,data:z.data,selected:!!z.selected,animated:!!z.animated,hidden:!!z.hidden,label:z.label,labelStyle:z.labelStyle,labelShowBg:z.labelShowBg,labelBgStyle:z.labelBgStyle,labelBgPadding:z.labelBgPadding,labelBgBorderRadius:z.labelBgBorderRadius,style:z.style,source:z.source,target:z.target,sourceHandleId:z.sourceHandle,targetHandleId:z.targetHandle,markerEnd:z.markerEnd,markerStart:z.markerStart,sourceX:at,sourceY:Pe,targetX:Et,targetY:gt,sourcePosition:Ce,targetPosition:ke,elementsSelectable:w,onContextMenu:d,onMouseEnter:h,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:p,onReconnect:S,onReconnectStart:_,onReconnectEnd:q,reconnectRadius:C,rfId:s,ariaLabel:z.ariaLabel,isFocusable:Re,isReconnectable:$e,pathOptions:"pathOptions"in z?z.pathOptions:void 0,interactionWidth:z.interactionWidth,disableKeyboardA11y:M})})))),k):null};oy.displayName="EdgeRenderer";var Dw=A.memo(oy);const Mw=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function zw({children:n}){const a=Yt(Mw);return pe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:a}},n)}function kw(n){const a=Kf(),o=A.useRef(!1);A.useEffect(()=>{!o.current&&a.viewportInitialized&&n&&(setTimeout(()=>n(a),1),o.current=!0)},[n,a.viewportInitialized])}const Ow={[He.Left]:He.Right,[He.Right]:He.Left,[He.Top]:He.Bottom,[He.Bottom]:He.Top},sy=({nodeId:n,handleType:a,style:o,type:s=ji.Bezier,CustomComponent:c,connectionStatus:f})=>{const{fromNode:d,handleId:h,toX:g,toY:m,connectionMode:y}=Yt(A.useCallback(Q=>({fromNode:Q.nodeInternals.get(n),handleId:Q.connectionHandleId,toX:(Q.connectionPosition.x-Q.transform[0])/Q.transform[2],toY:(Q.connectionPosition.y-Q.transform[1])/Q.transform[2],connectionMode:Q.connectionMode}),[n]),Vn),p=d?.[en]?.handleBounds;let S=p?.[a];if(y===Cl.Loose&&(S=S||p?.[a==="source"?"target":"source"]),!d||!S)return null;const _=h?S.find(Q=>Q.id===h):S[0],q=_?_.x+_.width/2:(d.width??0)/2,C=_?_.y+_.height/2:d.height??0,k=(d.positionAbsolute?.x??0)+q,M=(d.positionAbsolute?.y??0)+C,O=_?.position,U=O?Ow[O]:null;if(!O||!U)return null;if(c)return pe.createElement(c,{connectionLineType:s,connectionLineStyle:o,fromNode:d,fromHandle:_,fromX:k,fromY:M,toX:g,toY:m,fromPosition:O,toPosition:U,connectionStatus:f});let w="";const J={sourceX:k,sourceY:M,sourcePosition:O,targetX:g,targetY:m,targetPosition:U};return s===ji.Bezier?[w]=Xf(J):s===ji.Step?[w]=Ef({...J,borderRadius:0}):s===ji.SmoothStep?[w]=Ef(J):s===ji.SimpleBezier?[w]=k0(J):w=`M${k},${M} ${g},${m}`,pe.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:o})};sy.displayName="ConnectionLine";const Rw=n=>({nodeId:n.connectionNodeId,handleType:n.connectionHandleType,nodesConnectable:n.nodesConnectable,connectionStatus:n.connectionStatus,width:n.width,height:n.height});function qw({containerStyle:n,style:a,type:o,component:s}){const{nodeId:c,handleType:f,nodesConnectable:d,width:h,height:g,connectionStatus:m}=Yt(Rw,Vn);return!(c&&f&&h&&d)?null:pe.createElement("svg",{style:n,width:h,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},pe.createElement("g",{className:En(["react-flow__connection",m])},pe.createElement(sy,{nodeId:c,handleType:f,style:a,type:o,CustomComponent:s,connectionStatus:m})))}function Uv(n,a){return A.useRef(null),hn(),A.useMemo(()=>a(n),[n])}const ry=({nodeTypes:n,edgeTypes:a,onMove:o,onMoveStart:s,onMoveEnd:c,onInit:f,onNodeClick:d,onEdgeClick:h,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:p,onNodeMouseLeave:S,onNodeContextMenu:_,onSelectionContextMenu:q,onSelectionStart:C,onSelectionEnd:k,connectionLineType:M,connectionLineStyle:O,connectionLineComponent:U,connectionLineContainerStyle:w,selectionKeyCode:J,selectionOnDrag:Q,selectionMode:W,multiSelectionKeyCode:ce,panActivationKeyCode:ue,zoomActivationKeyCode:te,deleteKeyCode:oe,onlyRenderVisibleElements:me,elementsSelectable:ve,selectNodesOnDrag:z,defaultViewport:B,translateExtent:N,minZoom:L,maxZoom:ne,preventScrolling:I,defaultMarkerColor:se,zoomOnScroll:D,zoomOnPinch:V,panOnScroll:de,panOnScrollSpeed:ge,panOnScrollMode:we,zoomOnDoubleClick:Ce,panOnDrag:ke,onPaneClick:Re,onPaneMouseEnter:Oe,onPaneMouseMove:$e,onPaneMouseLeave:at,onPaneScroll:Pe,onPaneContextMenu:Et,onEdgeContextMenu:gt,onEdgeMouseEnter:et,onEdgeMouseMove:pt,onEdgeMouseLeave:Fe,onReconnect:je,onReconnectStart:_t,onReconnectEnd:Qt,reconnectRadius:vn,noDragClassName:Mn,noWheelClassName:_n,noPanClassName:wt,elevateEdgesOnSelect:zn,disableKeyboardA11y:tt,nodeOrigin:Rt,nodeExtent:cn,rfId:qt})=>{const wn=Uv(n,cw),dt=Uv(a,pw);return kw(f),pe.createElement(sw,{onPaneClick:Re,onPaneMouseEnter:Oe,onPaneMouseMove:$e,onPaneMouseLeave:at,onPaneContextMenu:Et,onPaneScroll:Pe,deleteKeyCode:oe,selectionKeyCode:J,selectionOnDrag:Q,selectionMode:W,onSelectionStart:C,onSelectionEnd:k,multiSelectionKeyCode:ce,panActivationKeyCode:ue,zoomActivationKeyCode:te,elementsSelectable:ve,onMove:o,onMoveStart:s,onMoveEnd:c,zoomOnScroll:D,zoomOnPinch:V,zoomOnDoubleClick:Ce,panOnScroll:de,panOnScrollSpeed:ge,panOnScrollMode:we,panOnDrag:ke,defaultViewport:B,translateExtent:N,minZoom:L,maxZoom:ne,onSelectionContextMenu:q,preventScrolling:I,noDragClassName:Mn,noWheelClassName:_n,noPanClassName:wt,disableKeyboardA11y:tt},pe.createElement(zw,null,pe.createElement(Dw,{edgeTypes:dt,onEdgeClick:h,onEdgeDoubleClick:m,onlyRenderVisibleElements:me,onEdgeContextMenu:gt,onEdgeMouseEnter:et,onEdgeMouseMove:pt,onEdgeMouseLeave:Fe,onReconnect:je,onReconnectStart:_t,onReconnectEnd:Qt,reconnectRadius:vn,defaultMarkerColor:se,noPanClassName:wt,elevateEdgesOnSelect:!!zn,disableKeyboardA11y:tt,rfId:qt},pe.createElement(qw,{style:O,type:M,component:U,containerStyle:w})),pe.createElement("div",{className:"react-flow__edgelabel-renderer"}),pe.createElement(fw,{nodeTypes:wn,onNodeClick:d,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:p,onNodeMouseLeave:S,onNodeContextMenu:_,selectNodesOnDrag:z,onlyRenderVisibleElements:me,noPanClassName:wt,noDragClassName:Mn,disableKeyboardA11y:tt,nodeOrigin:Rt,nodeExtent:cn,rfId:qt})))};ry.displayName="GraphView";var jw=A.memo(ry);const Tf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],La={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Tf,nodeExtent:Tf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Cl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:u_,isValidConnection:void 0},Hw=()=>w1((n,a)=>({...La,setNodes:o=>{const{nodeInternals:s,nodeOrigin:c,elevateNodesOnSelect:f}=a();n({nodeInternals:lf(o,s,c,f)})},getNodes:()=>Array.from(a().nodeInternals.values()),setEdges:o=>{const{defaultEdgeOptions:s={}}=a();n({edges:o.map(c=>({...s,...c}))})},setDefaultNodesAndEdges:(o,s)=>{const c=typeof o<"u",f=typeof s<"u",d=c?lf(o,new Map,a().nodeOrigin,a().elevateNodesOnSelect):new Map;n({nodeInternals:d,edges:f?s:[],hasDefaultNodes:c,hasDefaultEdges:f})},updateNodeDimensions:o=>{const{onNodesChange:s,nodeInternals:c,fitViewOnInit:f,fitViewOnInitDone:d,fitViewOnInitOptions:h,domNode:g,nodeOrigin:m}=a(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const p=window.getComputedStyle(y),{m22:S}=new window.DOMMatrixReadOnly(p.transform),_=o.reduce((C,k)=>{const M=c.get(k.id);if(M?.hidden)c.set(M.id,{...M,[en]:{...M[en],handleBounds:void 0}});else if(M){const O=Bf(k.nodeElement);O.width&&O.height&&(M.width!==O.width||M.height!==O.height||k.forceUpdate)&&(c.set(M.id,{...M,[en]:{...M[en],handleBounds:{source:kv(".source",k.nodeElement,S,m),target:kv(".target",k.nodeElement,S,m)}},...O}),C.push({id:M.id,type:"dimensions",dimensions:O}))}return C},[]);J0(c,m);const q=d||f&&!d&&W0(a,{initial:!0,...h});n({nodeInternals:new Map(c),fitViewOnInitDone:q}),_?.length>0&&s?.(_)},updateNodePositions:(o,s=!0,c=!1)=>{const{triggerNodeChanges:f}=a(),d=o.map(h=>{const g={id:h.id,type:"position",dragging:c};return s&&(g.positionAbsolute=h.positionAbsolute,g.position=h.position),g});f(d)},triggerNodeChanges:o=>{const{onNodesChange:s,nodeInternals:c,hasDefaultNodes:f,nodeOrigin:d,getNodes:h,elevateNodesOnSelect:g}=a();if(o?.length){if(f){const m=Wf(o,h()),y=lf(m,c,d,g);n({nodeInternals:y})}s?.(o)}},addSelectedNodes:o=>{const{multiSelectionActive:s,edges:c,getNodes:f}=a();let d,h=null;s?d=o.map(g=>Ka(g,!0)):(d=bo(f(),o),h=bo(c,[])),gc({changedNodes:d,changedEdges:h,get:a,set:n})},addSelectedEdges:o=>{const{multiSelectionActive:s,edges:c,getNodes:f}=a();let d,h=null;s?d=o.map(g=>Ka(g,!0)):(d=bo(c,o),h=bo(f(),[])),gc({changedNodes:h,changedEdges:d,get:a,set:n})},unselectNodesAndEdges:({nodes:o,edges:s}={})=>{const{edges:c,getNodes:f}=a(),d=o||f(),h=s||c,g=d.map(y=>(y.selected=!1,Ka(y.id,!1))),m=h.map(y=>Ka(y.id,!1));gc({changedNodes:g,changedEdges:m,get:a,set:n})},setMinZoom:o=>{const{d3Zoom:s,maxZoom:c}=a();s?.scaleExtent([o,c]),n({minZoom:o})},setMaxZoom:o=>{const{d3Zoom:s,minZoom:c}=a();s?.scaleExtent([c,o]),n({maxZoom:o})},setTranslateExtent:o=>{a().d3Zoom?.translateExtent(o),n({translateExtent:o})},resetSelectedElements:()=>{const{edges:o,getNodes:s}=a(),f=s().filter(h=>h.selected).map(h=>Ka(h.id,!1)),d=o.filter(h=>h.selected).map(h=>Ka(h.id,!1));gc({changedNodes:f,changedEdges:d,get:a,set:n})},setNodeExtent:o=>{const{nodeInternals:s}=a();s.forEach(c=>{c.positionAbsolute=Yf(c.position,o)}),n({nodeExtent:o,nodeInternals:new Map(s)})},panBy:o=>{const{transform:s,width:c,height:f,d3Zoom:d,d3Selection:h,translateExtent:g}=a();if(!d||!h||!o.x&&!o.y)return!1;const m=da.translate(s[0]+o.x,s[1]+o.y).scale(s[2]),y=[[0,0],[c,f]],p=d?.constrain()(m,y,g);return d.transform(h,p),s[0]!==p.x||s[1]!==p.y||s[2]!==p.k},cancelConnection:()=>n({connectionNodeId:La.connectionNodeId,connectionHandleId:La.connectionHandleId,connectionHandleType:La.connectionHandleType,connectionStatus:La.connectionStatus,connectionStartHandle:La.connectionStartHandle,connectionEndHandle:La.connectionEndHandle}),reset:()=>n({...La})}),Object.is),cy=({children:n})=>{const a=A.useRef(null);return a.current||(a.current=Hw()),pe.createElement(i_,{value:a.current},n)};cy.displayName="ReactFlowProvider";const uy=({children:n})=>A.useContext(Uc)?pe.createElement(pe.Fragment,null,n):pe.createElement(cy,null,n);uy.displayName="ReactFlowWrapper";const Gw={input:V0,default:Af,output:X0,group:Qf},Uw={default:kc,straight:Lf,step:Vf,smoothstep:Bc,simplebezier:$f},Bw=[0,0],Yw=[15,15],$w={x:0,y:0,zoom:1},Vw={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ff=A.forwardRef(({nodes:n,edges:a,defaultNodes:o,defaultEdges:s,className:c,nodeTypes:f=Gw,edgeTypes:d=Uw,onNodeClick:h,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:p,onMoveEnd:S,onConnect:_,onConnectStart:q,onConnectEnd:C,onClickConnectStart:k,onClickConnectEnd:M,onNodeMouseEnter:O,onNodeMouseMove:U,onNodeMouseLeave:w,onNodeContextMenu:J,onNodeDoubleClick:Q,onNodeDragStart:W,onNodeDrag:ce,onNodeDragStop:ue,onNodesDelete:te,onEdgesDelete:oe,onSelectionChange:me,onSelectionDragStart:ve,onSelectionDrag:z,onSelectionDragStop:B,onSelectionContextMenu:N,onSelectionStart:L,onSelectionEnd:ne,connectionMode:I=Cl.Strict,connectionLineType:se=ji.Bezier,connectionLineStyle:D,connectionLineComponent:V,connectionLineContainerStyle:de,deleteKeyCode:ge="Backspace",selectionKeyCode:we="Shift",selectionOnDrag:Ce=!1,selectionMode:ke=Ys.Full,panActivationKeyCode:Re="Space",multiSelectionKeyCode:Oe=zc()?"Meta":"Control",zoomActivationKeyCode:$e=zc()?"Meta":"Control",snapToGrid:at=!1,snapGrid:Pe=Yw,onlyRenderVisibleElements:Et=!1,selectNodesOnDrag:gt=!0,nodesDraggable:et,nodesConnectable:pt,nodesFocusable:Fe,nodeOrigin:je=Bw,edgesFocusable:_t,edgesUpdatable:Qt,elementsSelectable:vn,defaultViewport:Mn=$w,minZoom:_n=.5,maxZoom:wt=2,translateExtent:zn=Tf,preventScrolling:tt=!0,nodeExtent:Rt,defaultMarkerColor:cn="#b1b1b7",zoomOnScroll:qt=!0,zoomOnPinch:wn=!0,panOnScroll:dt=!1,panOnScrollSpeed:De=.5,panOnScrollMode:ie=Nl.Free,zoomOnDoubleClick:ee=!0,panOnDrag:be=!0,onPaneClick:Be,onPaneMouseEnter:ft,onPaneMouseMove:Xe,onPaneMouseLeave:Tt,onPaneScroll:Qe,onPaneContextMenu:Ze,children:$t,onEdgeContextMenu:vt,onEdgeDoubleClick:mt,onEdgeMouseEnter:An,onEdgeMouseMove:ni,onEdgeMouseLeave:Bi,onEdgeUpdate:ma,onEdgeUpdateStart:Ti,onEdgeUpdateEnd:We,onReconnect:lt,onReconnectStart:ga,onReconnectEnd:pa,reconnectRadius:yn=10,edgeUpdaterRadius:un=10,onNodesChange:Cn,onEdgesChange:tl,noDragClassName:Ln="nodrag",noWheelClassName:Kt="nowheel",noPanClassName:bt="nopan",fitView:gi=!1,fitViewOptions:nl,connectOnClick:Do=!0,attributionPosition:Mo,proOptions:va,defaultEdgeOptions:Yi,elevateNodesOnSelect:il=!0,elevateEdgesOnSelect:Di=!1,disableKeyboardA11y:pi=!1,autoPanOnConnect:$i=!0,autoPanOnNodeDrag:Mi=!0,connectionRadius:Jt=20,isValidConnection:Tl,onError:Dl,style:vi,id:yi,nodeDragThreshold:zo,...Ml},zl)=>{const Vi=yi||"1";return pe.createElement("div",{...Ml,style:{...vi,...Vw},ref:zl,className:En(["react-flow",c]),"data-testid":"rf__wrapper",id:yi},pe.createElement(uy,null,pe.createElement(jw,{onInit:m,onMove:y,onMoveStart:p,onMoveEnd:S,onNodeClick:h,onEdgeClick:g,onNodeMouseEnter:O,onNodeMouseMove:U,onNodeMouseLeave:w,onNodeContextMenu:J,onNodeDoubleClick:Q,nodeTypes:f,edgeTypes:d,connectionLineType:se,connectionLineStyle:D,connectionLineComponent:V,connectionLineContainerStyle:de,selectionKeyCode:we,selectionOnDrag:Ce,selectionMode:ke,deleteKeyCode:ge,multiSelectionKeyCode:Oe,panActivationKeyCode:Re,zoomActivationKeyCode:$e,onlyRenderVisibleElements:Et,selectNodesOnDrag:gt,defaultViewport:Mn,translateExtent:zn,minZoom:_n,maxZoom:wt,preventScrolling:tt,zoomOnScroll:qt,zoomOnPinch:wn,zoomOnDoubleClick:ee,panOnScroll:dt,panOnScrollSpeed:De,panOnScrollMode:ie,panOnDrag:be,onPaneClick:Be,onPaneMouseEnter:ft,onPaneMouseMove:Xe,onPaneMouseLeave:Tt,onPaneScroll:Qe,onPaneContextMenu:Ze,onSelectionContextMenu:N,onSelectionStart:L,onSelectionEnd:ne,onEdgeContextMenu:vt,onEdgeDoubleClick:mt,onEdgeMouseEnter:An,onEdgeMouseMove:ni,onEdgeMouseLeave:Bi,onReconnect:lt??ma,onReconnectStart:ga??Ti,onReconnectEnd:pa??We,reconnectRadius:yn??un,defaultMarkerColor:cn,noDragClassName:Ln,noWheelClassName:Kt,noPanClassName:bt,elevateEdgesOnSelect:Di,rfId:Vi,disableKeyboardA11y:pi,nodeOrigin:je,nodeExtent:Rt}),pe.createElement(O_,{nodes:n,edges:a,defaultNodes:o,defaultEdges:s,onConnect:_,onConnectStart:q,onConnectEnd:C,onClickConnectStart:k,onClickConnectEnd:M,nodesDraggable:et,nodesConnectable:pt,nodesFocusable:Fe,edgesFocusable:_t,edgesUpdatable:Qt,elementsSelectable:vn,elevateNodesOnSelect:il,minZoom:_n,maxZoom:wt,nodeExtent:Rt,onNodesChange:Cn,onEdgesChange:tl,snapToGrid:at,snapGrid:Pe,connectionMode:I,translateExtent:zn,connectOnClick:Do,defaultEdgeOptions:Yi,fitView:gi,fitViewOptions:nl,onNodesDelete:te,onEdgesDelete:oe,onNodeDragStart:W,onNodeDrag:ce,onNodeDragStop:ue,onSelectionDrag:z,onSelectionDragStart:ve,onSelectionDragStop:B,noPanClassName:bt,nodeOrigin:je,rfId:Vi,autoPanOnConnect:$i,autoPanOnNodeDrag:Mi,onError:Dl,connectionRadius:Jt,isValidConnection:Tl,nodeDragThreshold:zo}),pe.createElement(z_,{onSelectionChange:me}),$t,pe.createElement(l_,{proOptions:va,position:Mo}),pe.createElement(G_,{rfId:Vi,disableKeyboardA11y:pi})))});Ff.displayName="ReactFlow";function dy(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[s,c]of n)if(!Object.is(c,a.get(s)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const s of n)if(!a.has(s))return!1;return!0}const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(n[s],a[s]))return!1;return!0}const fy=({id:n,x:a,y:o,width:s,height:c,style:f,color:d,strokeColor:h,strokeWidth:g,className:m,borderRadius:y,shapeRendering:p,onClick:S,selected:_})=>{const{background:q,backgroundColor:C}=f||{},k=d||q||C;return pe.createElement("rect",{className:En(["react-flow__minimap-node",{selected:_},m]),x:a,y:o,rx:y,ry:y,width:s,height:c,fill:k,stroke:h,strokeWidth:g,shapeRendering:p,onClick:S?M=>S(M,n):void 0})};fy.displayName="MiniMapNode";var Lw=A.memo(fy);const Xw=n=>n.nodeOrigin,Zw=n=>n.getNodes().filter(a=>!a.hidden&&a.width&&a.height),cf=n=>n instanceof Function?n:()=>n;function Iw({nodeStrokeColor:n="transparent",nodeColor:a="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:c=2,nodeComponent:f=Lw,onClick:d}){const h=Yt(Zw,dy),g=Yt(Xw),m=cf(a),y=cf(n),p=cf(o),S=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return pe.createElement(pe.Fragment,null,h.map(_=>{const{x:q,y:C}=wl(_,g).positionAbsolute;return pe.createElement(f,{key:_.id,x:q,y:C,width:_.width,height:_.height,style:_.style,selected:_.selected,className:p(_),color:m(_),borderRadius:s,strokeColor:y(_),strokeWidth:c,shapeRendering:S,onClick:d,id:_.id})}))}var Qw=A.memo(Iw);const Kw=200,Jw=150,Ww=n=>{const a=n.getNodes(),o={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:o,boundingRect:a.length>0?r_(Yc(a,n.nodeOrigin),o):o,rfId:n.rfId}},Fw="react-flow__minimap-desc";function hy({style:n,className:a,nodeStrokeColor:o="transparent",nodeColor:s="#e2e2e2",nodeClassName:c="",nodeBorderRadius:f=5,nodeStrokeWidth:d=2,nodeComponent:h,maskColor:g="rgb(240, 240, 240, 0.6)",maskStrokeColor:m="none",maskStrokeWidth:y=1,position:p="bottom-right",onClick:S,onNodeClick:_,pannable:q=!1,zoomable:C=!1,ariaLabel:k="React Flow mini map",inversePan:M=!1,zoomStep:O=10,offsetScale:U=5}){const w=hn(),J=A.useRef(null),{boundingRect:Q,viewBB:W,rfId:ce}=Yt(Ww,dy),ue=n?.width??Kw,te=n?.height??Jw,oe=Q.width/ue,me=Q.height/te,ve=Math.max(oe,me),z=ve*ue,B=ve*te,N=U*ve,L=Q.x-(z-Q.width)/2-N,ne=Q.y-(B-Q.height)/2-N,I=z+N*2,se=B+N*2,D=`${Fw}-${ce}`,V=A.useRef(0);V.current=ve,A.useEffect(()=>{if(J.current){const we=hi(J.current),Ce=Oe=>{const{transform:$e,d3Selection:at,d3Zoom:Pe}=w.getState();if(Oe.sourceEvent.type!=="wheel"||!at||!Pe)return;const Et=-Oe.sourceEvent.deltaY*(Oe.sourceEvent.deltaMode===1?.05:Oe.sourceEvent.deltaMode?1:.002)*O,gt=$e[2]*Math.pow(2,Et);Pe.scaleTo(at,gt)},ke=Oe=>{const{transform:$e,d3Selection:at,d3Zoom:Pe,translateExtent:Et,width:gt,height:et}=w.getState();if(Oe.sourceEvent.type!=="mousemove"||!at||!Pe)return;const pt=V.current*Math.max(1,$e[2])*(M?-1:1),Fe={x:$e[0]-Oe.sourceEvent.movementX*pt,y:$e[1]-Oe.sourceEvent.movementY*pt},je=[[0,0],[gt,et]],_t=da.translate(Fe.x,Fe.y).scale($e[2]),Qt=Pe.constrain()(_t,je,Et);Pe.transform(at,Qt)},Re=N0().on("zoom",q?ke:null).on("zoom.wheel",C?Ce:null);return we.call(Re),()=>{we.on("zoom",null)}}},[q,C,M,O]);const de=S?we=>{const Ce=_i(we);S(we,{x:Ce[0],y:Ce[1]})}:void 0,ge=_?(we,Ce)=>{const ke=w.getState().nodeInternals.get(Ce);_(we,ke)}:void 0;return pe.createElement(Uf,{position:p,style:n,className:En(["react-flow__minimap",a]),"data-testid":"rf__minimap"},pe.createElement("svg",{width:ue,height:te,viewBox:`${L} ${ne} ${I} ${se}`,role:"img","aria-labelledby":D,ref:J,onClick:de},k&&pe.createElement("title",{id:D},k),pe.createElement(Qw,{onClick:ge,nodeColor:s,nodeStrokeColor:o,nodeBorderRadius:f,nodeClassName:c,nodeStrokeWidth:d,nodeComponent:h}),pe.createElement("path",{className:"react-flow__minimap-mask",d:`M${L-N},${ne-N}h${I+N*2}v${se+N*2}h${-I-N*2}z
        M${W.x},${W.y}h${W.width}v${W.height}h${-W.width}z`,fill:g,fillRule:"evenodd",stroke:m,strokeWidth:y,pointerEvents:"none"})))}hy.displayName="MiniMap";var my=A.memo(hy);function Pw(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[s,c]of n)if(!Object.is(c,a.get(s)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const s of n)if(!a.has(s))return!1;return!0}const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(n[s],a[s]))return!1;return!0}function e2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},pe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function t2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},pe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function n2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},pe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function i2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function a2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ks=({children:n,className:a,...o})=>pe.createElement("button",{type:"button",className:En(["react-flow__controls-button",a]),...o},n);ks.displayName="ControlButton";const l2=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom}),gy=({style:n,showZoom:a=!0,showFitView:o=!0,showInteractive:s=!0,fitViewOptions:c,onZoomIn:f,onZoomOut:d,onFitView:h,onInteractiveChange:g,className:m,children:y,position:p="bottom-left"})=>{const S=hn(),[_,q]=A.useState(!1),{isInteractive:C,minZoomReached:k,maxZoomReached:M}=Yt(l2,Pw),{zoomIn:O,zoomOut:U,fitView:w}=Kf();if(A.useEffect(()=>{q(!0)},[]),!_)return null;const J=()=>{O(),f?.()},Q=()=>{U(),d?.()},W=()=>{w(c),h?.()},ce=()=>{S.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),g?.(!C)};return pe.createElement(Uf,{className:En(["react-flow__controls",m]),position:p,style:n,"data-testid":"rf__controls"},a&&pe.createElement(pe.Fragment,null,pe.createElement(ks,{onClick:J,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:M},pe.createElement(e2,null)),pe.createElement(ks,{onClick:Q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},pe.createElement(t2,null))),o&&pe.createElement(ks,{className:"react-flow__controls-fitview",onClick:W,title:"fit view","aria-label":"fit view"},pe.createElement(n2,null)),s&&pe.createElement(ks,{className:"react-flow__controls-interactive",onClick:ce,title:"toggle interactivity","aria-label":"toggle interactivity"},C?pe.createElement(a2,null):pe.createElement(i2,null)),y)};gy.displayName="Controls";var py=A.memo(gy);function o2(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[s,c]of n)if(!Object.is(c,a.get(s)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const s of n)if(!a.has(s))return!1;return!0}const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(n[s],a[s]))return!1;return!0}var Pn;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Pn||(Pn={}));function s2({color:n,dimensions:a,lineWidth:o}){return pe.createElement("path",{stroke:n,strokeWidth:o,d:`M${a[0]/2} 0 V${a[1]} M0 ${a[1]/2} H${a[0]}`})}function r2({color:n,radius:a}){return pe.createElement("circle",{cx:a,cy:a,r:a,fill:n})}const c2={[Pn.Dots]:"#91919a",[Pn.Lines]:"#eee",[Pn.Cross]:"#e2e2e2"},u2={[Pn.Dots]:1,[Pn.Lines]:1,[Pn.Cross]:6},d2=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function vy({id:n,variant:a=Pn.Dots,gap:o=20,size:s,lineWidth:c=1,offset:f=2,color:d,style:h,className:g}){const m=A.useRef(null),{transform:y,patternId:p}=Yt(d2,o2),S=d||c2[a],_=s||u2[a],q=a===Pn.Dots,C=a===Pn.Cross,k=Array.isArray(o)?o:[o,o],M=[k[0]*y[2]||1,k[1]*y[2]||1],O=_*y[2],U=C?[O,O]:M,w=q?[O/f,O/f]:[U[0]/f,U[1]/f];return pe.createElement("svg",{className:En(["react-flow__background",g]),style:{...h,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},pe.createElement("pattern",{id:p+n,x:y[0]%M[0],y:y[1]%M[1],width:M[0],height:M[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},q?pe.createElement(r2,{color:S,radius:O/f}):pe.createElement(s2,{dimensions:U,color:S,lineWidth:c})),pe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+n})`}))}vy.displayName="Background";var yy=A.memo(vy);const f2={margin:8,minOverlap:1,maxIterations:40,fallbackWidth:300,fallbackHeight:170},h2=(n,a,o)=>{const s=n.measured;return{width:s?.width??n.width??a,height:s?.height??n.height??o}},Bv=(n,a,o,s,c)=>{const{width:f,height:d}=h2(n,s,c);return{left:a,right:a+f,top:o,bottom:o+d,cx:a+f/2,cy:o+d/2}},m2=(n,a)=>({x:Math.min(n.right,a.right)-Math.max(n.left,a.left),y:Math.min(n.bottom,a.bottom)-Math.max(n.top,a.top)}),xy=(n,a)=>{if(n.length<2)return n;const o={...f2,...a},s=n.map(c=>({...c,position:{...c.position}}));for(let c=0;c<o.maxIterations;c+=1){let f=!1;for(let d=0;d<s.length;d+=1)for(let h=d+1;h<s.length;h+=1){const g=s[d],m=s[h],y=Bv(g,g.position.x,g.position.y,o.fallbackWidth,o.fallbackHeight),p=Bv(m,m.position.x,m.position.y,o.fallbackWidth,o.fallbackHeight),S=m2(y,p);if(!(S.x<=o.minOverlap||S.y<=o.minOverlap))if(f=!0,S.x<S.y){const _=(S.x+o.margin)/2,q=y.cx<=p.cx?-1:1;g.position.x+=q*_,m.position.x-=q*_}else{const _=(S.y+o.margin)/2,q=y.cy<=p.cy?-1:1;g.position.y+=q*_,m.position.y-=q*_}}if(!f)break}return s},El=(n,a,o,s,c)=>{const f=o.trim();if(!f)return;const d=`${f}|${s}|${c}`;a.has(d)||(a.add(d),n.push({condition:f,targetId:s,targetHandle:c}))},g2=n=>{const a=[],o=new Set;for(const s of n.menus){for(const c of s.requires)El(a,o,c,s.id,"cond:node");for(const[c,f]of s.options.entries()){const d=an(n,f);if(d)for(const h of d.requires)El(a,o,h,s.id,`cond:${ei(c)}`)}}for(const s of n.nodes){for(const c of s.requires)El(a,o,c,s.id,"cond:node");for(const[c,f]of s.options.entries()){const d=an(n,f);if(d)for(const h of d.requires)El(a,o,h,s.id,`cond:${ei(c)}`)}}return a},So=(n,a,o,s,c)=>{const f=o.trim();if(!f)return;const d=`${f}|${s}|${c}`;a.has(d)||(a.add(d),n.push({action:f,targetId:s,targetHandle:c}))},p2=n=>{const a=[],o=new Set;for(const s of n.menus){const c=s.itemAction?.trim();c&&So(a,o,c,s.id,"act:node");for(const[f,d]of s.options.entries()){const h=an(n,d);if(h)for(const g of h.actions)So(a,o,g,s.id,`act:${ei(f)}`)}}for(const s of n.nodes){for(const c of s.actions)So(a,o,c,s.id,"act:node");for(const[c,f]of s.options.entries()){const d=an(n,f);if(d)for(const h of d.actions)So(a,o,h,s.id,`act:${ei(c)}`)}}return a},v2=(n,a)=>{const o=[],s=new Set;for(const c of n.nodes){if(a.has(c.id))continue;for(const d of c.requires)El(o,s,d,c.id,"cond:node");for(const[d,h]of c.options.entries()){const g=el(n,h,a);if(!g)continue;const m=ut(n,g);if(m)for(const y of m.requires)El(o,s,y,c.id,`cond:${ei(d)}`)}const f=el(n,c.next,a);if(f){const d=ut(n,f);if(d)for(const h of d.requires)El(o,s,h,c.id,"cond:next")}}return o},y2=(n,a)=>{const o=[],s=new Set;for(const c of n.nodes)if(!a.has(c.id)){for(const f of c.actions)So(o,s,f,c.id,"act:node");for(const[f,d]of c.options.entries()){const h=ut(n,d);if(h)for(const g of h.actions)So(o,s,g,c.id,`act:${ei(f)}`)}}return o},x2=n=>{if(!n||n.collapsed)return 0;const a=(n.editableText??n.body??"").replace(/\s+/g," ").trim(),o=Math.max(a.length,48),s=Math.max(2,Math.min(12,Math.ceil(o/38)));return Math.max(72,s*18+22)},by=(n,a)=>{if(!n)return 120;const o=38,s=n.collapsed?0:34,c=x2(n),f=o+s+c+19;if(a==="act:node")return f-8;if(a==="cond:node")return f+8;if(a==="cond:next")return f+36;const d=a.startsWith("cond:")?a.slice(5):a.startsWith("act:")?a.slice(4):a,h=jt(d);return h!==null?f+36*(h+1):f},b2=(n,a,o,s,c,f)=>{const d=n.find(S=>a[S.targetId]);if(!d)return{x:c,y:f};const h=a[d.targetId];if(!h)return{x:c,y:f};const g=s.get(d.targetId),m=232;if(o==="horizontal")return{x:h.x-m,y:h.y+by(g,d.targetHandle)};const y=d.targetHandle.startsWith("cond:")?d.targetHandle.slice(5):d.targetHandle,p=jt(y)??0;return{x:h.x+p*28,y:h.y-130}},Sy=(n,a,o,s,c,f,d)=>{const h=[...n.map(k=>k.condition),...a].map(k=>k.trim()).filter(Boolean);if(!h.length)return[];const g=Array.from(new Set(h)),m=Object.entries(s).filter(([k])=>!Bn(k)&&!Yn(k)).map(([,k])=>k),y=m.length?Math.min(...m.map(k=>k.x)):0,p=m.length?Math.min(...m.map(k=>k.y)):0,S=y-240,_=new Map(f.map(k=>[k.id,k.data])),q=new Map;for(const k of n)q.has(k.condition)||q.set(k.condition,[]),q.get(k.condition)?.push(k);const C=new Set;return g.map((k,M)=>{const O=Xa(k);let U=o[O];if(!U){const w=b2(q.get(k)??[],s,c,_,S,p+M*76);let J=w,Q=0;for(;C.has(`${Math.round(J.x)}:${Math.round(J.y)}`)&&Q<12;)Q+=1,J=c==="horizontal"?{x:w.x,y:w.y+Q*22}:{x:w.x+Q*20,y:w.y};U=J}return C.add(`${Math.round(U.x)}:${Math.round(U.y)}`),{id:O,type:"sensei",position:U,className:"flow-node flow-node-condition",style:{width:170},data:{kind:"condition",nodeId:O,title:k,direction:c},selected:O===d,draggable:!0}})},S2=(n,a,o,s,c,f)=>{const d=n.find(S=>a[S.targetId]);if(!d)return{x:c,y:f};const h=a[d.targetId];if(!h)return{x:c,y:f};const g=s.get(d.targetId),m=270;if(o==="horizontal")return{x:h.x-m,y:h.y+by(g,d.targetHandle)};const y=d.targetHandle.startsWith("act:")?d.targetHandle.slice(4):d.targetHandle,p=jt(y)??0;return{x:h.x+p*28,y:h.y-160}},Ny=(n,a,o,s,c,f,d)=>{const h=[...n.map(k=>k.action),...a].map(k=>k.trim()).filter(Boolean);if(!h.length)return[];const g=Array.from(new Set(h)),m=Object.entries(s).filter(([k])=>!Yn(k)&&!Bn(k)).map(([,k])=>k),y=m.length?Math.min(...m.map(k=>k.x)):0,p=m.length?Math.min(...m.map(k=>k.y)):0,S=y-300,_=new Map(f.map(k=>[k.id,k.data])),q=new Map;for(const k of n)q.has(k.action)||q.set(k.action,[]),q.get(k.action)?.push(k);const C=new Set;return g.map((k,M)=>{const O=ra(k);let U=o[O];if(!U){const w=S2(q.get(k)??[],s,c,_,S,p+M*70);let J=w,Q=0;for(;C.has(`${Math.round(J.x)}:${Math.round(J.y)}`)&&Q<12;)Q+=1,J=c==="horizontal"?{x:w.x,y:w.y+Q*22}:{x:w.x+Q*20,y:w.y};U=J}return C.add(`${Math.round(U.x)}:${Math.round(U.y)}`),{id:O,type:"sensei",position:U,className:"flow-node flow-node-action",style:{width:180},data:{kind:"action",nodeId:O,title:k,direction:c},selected:O===d,draggable:!0}})},N2=(n,a,o,s,c,f,d,h,g,m,y,p,S,_)=>n.map(q=>{const C=Rs(q),k=q.kind,M=o[C]??{x:0,y:0};let O="",U="",w=[],J=[],Q=!1,W,ce=!1,ue,te,oe;const me=f.has(C);if(k==="menu"){const N=q.data;oe=Sc({id:N.id,color:N.color,kind:"menu"}),J=N.options,Q=N.requires.length>0,W=N.requires[0],ce=!!N.itemAction?.trim(),ue=N.itemAction?.trim()||void 0,te=N.text,O=`text = ${Fa(N.text)}`;const L=[];N.source&&L.push(`source = ${N.source}`),N.autoRoute&&L.push("auto_route = true"),N.backBlocked&&L.push("back_blocked = true"),U=L.join(" | "),w=N.options.map((ne,I)=>{const se=an(a,ne);return{id:ei(I),label:Nc(a,ne),hasCondition:!!se?.requires.length,conditionText:se?.requires[0],hasAction:!!se?.actions.length,actionText:se?.actions[0],editable:!0}})}else if(k==="option"){const N=q.data;te=N.label,O=`label = ${Fa(N.label)}`,U=N.target?`target = ${N.target}`:"",w=[{id:"target",label:N.target?"Go to response":"Set next response",hasCondition:N.requires.length>0,conditionText:N.requires[0],editable:!1}]}else{const N=q.data;oe=Sc({id:N.id,color:N.color,kind:"node"}),J=N.options,Q=N.requires.length>0,W=N.requires[0],ce=N.actions.length>0,ue=N.actions[0],te=N.text,O=`text = ${Fa(N.text)}`;const L=[];N.next?L.push(`next = ${N.next}`):N.options.length&&L.push(`options = ${N.options.length}`),N.backBlocked&&L.push("back_blocked = true"),U=L.join(" | "),w=N.options.map((ne,I)=>{const se=an(a,ne);return{id:ei(I),label:Nc(a,ne),hasCondition:!!se?.requires.length,conditionText:se?.requires[0],hasAction:!!se?.actions.length,actionText:se?.actions[0],editable:!0}}),w.push({id:"next",label:N.next?"Continue":"Set continue",editable:!1})}const ve=k==="menu"||k==="node",z=!0,B=ve&&J.length>0;return{id:C,type:"sensei",position:M,className:"flow-node",style:{width:320},data:{kind:k,nodeId:C,title:C,body:O,meta:U,nodeColor:oe,direction:c,outputs:w,outputOptionIds:J,nodeHasCondition:Q,nodeConditionText:W,nodeHasAction:ce,nodeActionText:ue,nodeHasIncoming:me,editableText:te,onTextChange:(N,L)=>d(k,N,L),onRequestMainEdit:k==="menu"||k==="node"?N=>h(k,N):void 0,onRequestOutputEdit:g,canAddChoice:ve,canAddCondition:z,canAddAction:B,onAddChoice:ve?m:void 0,onAddCondition:y,onAddAction:B?p:void 0,onReorderOutputs:ve?S:void 0,onCycleNodeColor:k==="menu"||k==="node"?_:void 0},selected:C===s,draggable:!0}}),E2=(n,a,o,s,c,f,d,h,g,m,y,p,S,_,q,C,k)=>a.map(M=>{const O=o[M.id]??{x:0,y:0},U=c[M.id]??!1,w=M.options.map((ue,te)=>{const oe=_c(n,ue),me=el(n,ue,f),ve=ut(n,ue);return{id:ei(te),label:Fa(oe||me||ue,72),hasCondition:!!ve?.requires.length,conditionText:ve?.requires[0],hasAction:!!ve?.actions.length,actionText:ve?.actions[0],editable:!0}}),J=el(n,M.next,f),Q=M.next?ut(n,M.next):void 0;w.push({id:"next",label:J?"Continue":"Set continue",hasCondition:!!Q?.requires.length,conditionText:Q?.requires[0],editable:!1});const W=M.quest?`quest = ${M.quest.questType}`:M.next?`next = ${M.next}`:M.options.length?`options = ${M.options.length}`:"",ce=df(M);return{id:M.id,type:"sensei",position:O,className:"flow-node",style:{width:320},data:{kind:"narrative",nodeId:M.id,title:M.id,body:`text = ${Fa(M.text)}`,meta:W,speaker:M.speaker,nodeColor:ce,optionCount:M.options.length,questType:M.quest?.questType,completion:!!M.completion,collapsed:U,onToggleCollapse:h,direction:g,outputs:w,outputOptionIds:M.options,nodeHasCondition:M.requires.length>0,nodeConditionText:M.requires[0],nodeHasAction:M.actions.length>0,nodeActionText:M.actions[0],nodeHasIncoming:d.has(M.id),editableText:M.text,onTextChange:m,onRequestMainEdit:y,onRequestOutputEdit:p,canAddChoice:!0,canAddCondition:!0,canAddAction:!0,onAddChoice:S,onAddCondition:_,onAddAction:q,onReorderOutputs:C,onCycleNodeColor:k},selected:M.id===s,draggable:!0}}),_2=(n,a)=>{const o=[],s=new Set,c=(d,h,g,m,y,p)=>{if(!d||!h||d===h)return;const S=`${d}:${g??""}->${h}:${m}`;if(s.has(S))return;s.add(S);const _=[];p&&_.push(p),y&&_.push("edge-node-color"),o.push({id:`e-${S}`,source:d,target:h,sourceHandle:g,targetHandle:m,className:_.length?_.join(" "):void 0,markerEnd:y?{type:Gi.ArrowClosed,width:16,height:16,color:y}:void 0,style:y?{strokeWidth:2.5,"--edge-color":y,"--edge-color-hover":y}:void 0})},f=d=>{const h=Gt(n,d);if(h)return Sc({id:h.id,color:h.color,kind:"menu"});const g=Ut(n,d);if(g)return Sc({id:g.id,color:g.color,kind:"node"})};for(const d of n.menus)for(const[h,g]of d.options.entries()){const m=Up(n,g);if(!m)continue;const y=!!a&&m===a;c(d.id,m,ei(h),Wa,f(m),y?"edge-choice edge-linked-selected":"edge-choice")}for(const d of n.nodes){for(const[h,g]of d.options.entries()){const m=Up(n,g);if(!m)continue;const y=!!a&&m===a;c(d.id,m,ei(h),Wa,f(m),y?"edge-choice edge-linked-selected":"edge-choice")}if(d.next){const h=wi(d.next,n);if(!h?.id)continue;const g=!!a&&h.id===a;c(d.id,h.id,"next",Wa,f(h.id),g?"edge-continue edge-linked-selected":"edge-continue")}}return o},w2=(n,a,o)=>{const s=[],c=new Set,f=(d,h,g,m,y,p)=>{if(!d||!h||d===h)return;const S=`${d}:${g??""}->${h}:${m}`;if(c.has(S))return;c.add(S);const _=[];p&&_.push(p),y&&_.push("edge-node-color"),s.push({id:`e-${S}`,source:d,target:h,sourceHandle:g,targetHandle:m,className:_.length?_.join(" "):void 0,markerEnd:y?{type:Gi.ArrowClosed,width:16,height:16,color:y}:void 0,style:y?{strokeWidth:2.5,"--edge-color":y,"--edge-color-hover":y}:void 0})};for(const d of n.nodes){if(a.has(d.id))continue;for(const[g,m]of d.options.entries()){const y=el(n,m,a);if(y){const p=ut(n,y),S=p?df(p):void 0,_=!!o&&y===o;f(d.id,y,ei(g),Wa,S,_?"edge-choice edge-linked-selected":"edge-choice")}}const h=el(n,d.next,a);if(h){const g=ut(n,h),m=g?df(g):void 0,y=!!o&&h===o;f(d.id,h,"next",Wa,m,y?"edge-continue edge-linked-selected":"edge-continue")}}return s},Ey=n=>{const a=[],o=new Set;for(const s of n){const c=Xa(s.condition),f=`${c}->${s.targetId}:${s.targetHandle}`;o.has(f)||(o.add(f),a.push({id:`e-${f}`,source:c,target:s.targetId,sourceHandle:"cond-out",targetHandle:s.targetHandle,className:"edge-condition",markerEnd:{type:Gi.ArrowClosed,width:16,height:16,color:"#fbbf24"},style:{stroke:"#fbbf24",strokeWidth:2.5}}))}return a},_y=n=>{const a=[],o=new Set;for(const s of n){const c=ra(s.action),f=`${c}->${s.targetId}:${s.targetHandle}`;o.has(f)||(o.add(f),a.push({id:`e-${f}`,source:c,target:s.targetId,sourceHandle:"act-out",targetHandle:s.targetHandle,className:"edge-action",markerEnd:{type:Gi.ArrowClosed,width:16,height:16,color:"#f87171"},style:{stroke:"#f87171",strokeWidth:2.5}}))}return a},A2=(n,a,o)=>{const s=Object.values(n);if(!s.length)return n;const c=Math.min(...s.map(m=>m.x)),f=Math.min(...s.map(m=>m.y)),d=c<a?a-c:0,h=f<o?o-f:0;if(d===0&&h===0)return n;const g={};for(const[m,y]of Object.entries(n))g[m]={x:y.x+d,y:y.y+h};return g},wy=(n,a,o,s,c,f)=>{const d=new Map,h=new Map,g=new Map;for(const w of n)d.set(w,[]),h.set(w,[]),g.set(w,0);for(const w of a)!n.includes(w.source)||!n.includes(w.target)||(d.get(w.source)?.push(w.target),h.get(w.target)?.push(w.source),g.set(w.target,(g.get(w.target)??0)+1));const m=o.length?o.filter(w=>n.includes(w)):n.filter(w=>(g.get(w)??0)===0),y=[],p=new Map;for(const w of m)p.set(w,0),y.push(w);for(;y.length;){const w=y.shift();if(!w)break;const J=p.get(w)??0;for(const Q of d.get(w)??[]){const W=J+1,ce=p.get(Q);(ce===void 0||W<ce)&&(p.set(Q,W),y.push(Q))}}let S=0;for(const w of p.values())w>S&&(S=w);n.filter(w=>!p.has(w)).forEach((w,J)=>{p.set(w,S+1+J)});const q=new Map;for(const w of n){const J=p.get(w)??0;q.has(J)||q.set(J,[]),q.get(J)?.push(w)}const C=new Map;for(const[w,J]of q.entries())C.set(w,[...J]);const k=w=>{const J=new Map;return(C.get(w)??[]).forEach((Q,W)=>J.set(Q,W)),J},M=(w,J,Q)=>{if(!w.length)return Q;const W=w.map(ce=>J.get(ce)).filter(ce=>ce!==void 0);return W.length?W.reduce((ce,ue)=>ce+ue,0)/W.length:Q},O=w=>{(w==="down"?Array.from(C.keys()).sort((Q,W)=>Q-W):Array.from(C.keys()).sort((Q,W)=>W-Q)).forEach(Q=>{const W=w==="down"?Q-1:Q+1;if(!C.has(W))return;const ce=k(W),te=(C.get(Q)??[]).map((oe,me)=>{const ve=w==="down"?h.get(oe)??[]:d.get(oe)??[];return{id:oe,score:M(ve,ce,me)}}).sort((oe,me)=>oe.score-me.score);C.set(Q,te.map(oe=>oe.id))})};for(let w=0;w<2;w+=1)O("down"),O("up");const U={};for(const[w,J]of C.entries())J.forEach((Q,W)=>{const ce=f==="horizontal"?w*s:W*s,ue=f==="horizontal"?W*c:w*c;U[Q]={x:ce,y:ue}});return A2(U,80,80)},C2=n=>{const a=n.trim(),o=/^#([0-9a-f]{3})$/i.exec(a);if(o){const[c,f,d]=o[1].split("").map(h=>parseInt(h+h,16));return{r:c,g:f,b:d}}const s=/^#([0-9a-f]{6})$/i.exec(a);if(s){const c=s[1];return{r:parseInt(c.slice(0,2),16),g:parseInt(c.slice(2,4),16),b:parseInt(c.slice(4,6),16)}}return null},T2=({data:n,selected:a})=>{const[o,s]=A.useState(null),[c,f]=A.useState(null),d=n.kind==="menu"?"menu":n.kind==="option"?"option":"dialog",h=n.kind==="condition",g=n.kind==="action",m=n.kind==="narrative",y=m||n.kind==="node"||n.kind==="menu",p=m&&!!n.collapsed,S=n.direction??"horizontal",_=S==="horizontal"?He.Left:He.Top,q=S==="horizontal"?He.Right:He.Bottom,C=S==="horizontal"?{top:"calc(var(--node-header-height) / 2)",left:-6,transform:"translateY(-50%)"}:{left:"50%",top:-6,transform:"translateX(-50%)"},k=n.outputs??[],M=n.outputOptionIds??[],O=n.onReorderOutputs&&M.length>1,U=m?n.questType?"quest":n.completion?"completion":n.speaker==="user"?"user":"sensei":n.kind,w=n.nodeColor?C2(n.nodeColor):null,J=n.nodeColor?{"--node-accent":n.nodeColor,...w?{"--node-header-tint":`rgba(${w.r}, ${w.g}, ${w.b}, 0.35)`,"--node-accent-glow":`rgba(${w.r}, ${w.g}, ${w.b}, 0.35)`,"--node-selected-tint":`rgba(${w.r}, ${w.g}, ${w.b}, 0.45)`,"--node-selected-secondary":`rgba(${w.r}, ${w.g}, ${w.b}, 0.14)`}:{}}:void 0,Q=B=>N=>{N.stopPropagation(),s(B),N.dataTransfer.effectAllowed="move",N.dataTransfer.setData("text/plain",String(B))},W=B=>N=>{N.preventDefault(),N.stopPropagation(),N.dataTransfer.dropEffect="move",o!==null&&B!==o&&f(B)},ce=B=>{B.stopPropagation(),f(null)},ue=B=>{if(B.preventDefault(),B.stopPropagation(),o===null||c===null||o===c){s(null),f(null);return}if(n.nodeId&&n.onReorderOutputs&&M.length>0){const N=[...M],[L]=N.splice(o,1);N.splice(c,0,L),n.onReorderOutputs(n.nodeId,N)}s(null),f(null)},te=()=>{s(null),f(null)},oe=B=>{B.preventDefault(),B.stopPropagation(),n.nodeId&&n.onToggleCollapse&&n.onToggleCollapse(n.nodeId)},me=B=>{B.preventDefault(),B.stopPropagation(),!(!n.nodeId||!n.onRequestMainEdit)&&n.onRequestMainEdit(n.nodeId)},ve=(B,N)=>{B.preventDefault(),B.stopPropagation(),!(!n.nodeId||!n.onRequestOutputEdit)&&n.onRequestOutputEdit(n.nodeId,N)},z=()=>n.questType?"Q":n.completion?"!":n.speaker==="user"?"U":n.speaker==="sensei"?"S":n.kind==="menu"?"M":n.kind==="option"?"O":"N";return h?b.jsxs("div",{className:`flow-condition-node ${a?"selected":""}`,title:"Double-click to edit condition",children:[b.jsx("div",{className:"flow-condition-chip",children:Fa(n.title,40)}),b.jsx(fi,{type:"source",id:"cond-out",position:q,className:"flow-handle flow-handle-condition-node",style:S==="horizontal"?{top:"50%",right:-11,transform:"translateY(-50%)"}:{left:"50%",bottom:-11,transform:"translateX(-50%)"}})]}):g?b.jsxs("div",{className:`flow-action-node ${a?"selected":""}`,title:"Double-click to edit action",children:[b.jsx("div",{className:"flow-action-chip",children:Fa(n.title,40)}),b.jsx(fi,{type:"source",id:"act-out",position:q,className:"flow-handle flow-handle-action-node",style:S==="horizontal"?{top:"50%",right:-11,transform:"translateY(-50%)"}:{left:"50%",bottom:-11,transform:"translateX(-50%)"}})]}):b.jsxs("div",{className:`flow-node-card node ${d} ${a?"selected":""} ${p?"collapsed":""} narrative-card narrative-tone-${U} ${n.nodeColor?"has-node-color":""}`,style:J,children:[b.jsx(fi,{type:"target",id:Wa,position:_,className:`flow-handle flow-handle-root ${n.nodeHasIncoming?"filled":""}`,style:C}),b.jsxs("div",{className:"node-id-bar",children:[b.jsx("div",{className:`node-avatar ${n.questType?"quest":n.completion?"completion":n.speaker?n.speaker:n.kind??"node"}`,children:z()}),b.jsx("div",{className:"node-id-text",children:n.title}),n.nodeId&&n.onToggleCollapse?b.jsx("button",{type:"button",className:"node-collapse-btn nodrag",onClick:oe,title:p?"Expand node":"Collapse node","aria-label":p?"Expand node":"Collapse node",children:p?"+":"-"}):null,(m||n.kind==="menu"||n.kind==="node")&&n.nodeId&&n.onCycleNodeColor?b.jsx("button",{type:"button",className:"node-color-dot nodrag",onClick:B=>{B.preventDefault(),B.stopPropagation(),n.onCycleNodeColor?.(n.nodeId,n.nodeColor)},onMouseDown:B=>B.stopPropagation(),title:"Cycle node color","aria-label":"Cycle node color",style:n.nodeColor?{background:n.nodeColor}:void 0}):null]}),p?null:b.jsx("div",{className:"node-tags",children:m?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:`node-tag speaker ${n.speaker??"sensei"}`,children:n.speaker??"sensei"}),n.questType?b.jsx("span",{className:"node-tag quest",children:n.questType}):null,n.completion?b.jsx("span",{className:"node-tag completion",children:"completion"}):null]}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:`node-tag kind ${n.kind}`,children:n.kind}),k.length?b.jsx("span",{className:"node-tag options",children:"choices"}):null]})}),!p&&n.onRequestMainEdit?b.jsx("button",{type:"button",className:"node-inline-input node-inline-trigger nodrag",onClick:me,onMouseDown:B=>B.stopPropagation(),title:"Edit dialogue text",children:Fa(n.editableText??"",200)||b.jsx("span",{style:{opacity:.5,fontStyle:"italic"},children:n.speaker==="sensei"?"sensei speaks here...":n.speaker==="user"?"player responds here...":"click to add text..."})}):null,!p&&!n.onRequestMainEdit&&n.body?b.jsx("div",{className:"node-body",children:n.body}):null,!p&&(n.canAddChoice||n.canAddCondition||n.canAddAction)?b.jsxs("div",{className:"node-actions",children:[n.canAddChoice&&n.onAddChoice?b.jsxs("button",{type:"button",className:"node-action-btn nodrag",onClick:B=>{B.stopPropagation(),n.onAddChoice(n.nodeId)},onMouseDown:B=>B.stopPropagation(),children:[b.jsx("span",{className:"action-icon",children:"+"}),"choice"]}):null,n.canAddCondition&&n.onAddCondition?b.jsxs("button",{type:"button",className:"node-action-btn condition nodrag",onClick:B=>{B.stopPropagation(),n.onAddCondition(n.nodeId)},onMouseDown:B=>B.stopPropagation(),children:[b.jsx("span",{className:"action-icon",children:"+"}),"condition"]}):null,n.canAddAction&&n.onAddAction?b.jsxs("button",{type:"button",className:"node-action-btn action nodrag",onClick:B=>{B.stopPropagation(),n.onAddAction(n.nodeId)},onMouseDown:B=>B.stopPropagation(),children:[b.jsx("span",{className:"action-icon",children:"+"}),"action"]}):null]}):null,p?null:b.jsxs("div",{className:"node-dialogue-gate",children:[b.jsx("span",{className:"node-output-action node-output-main-gate",children:"main gate"}),b.jsx(fi,{type:"target",id:"cond:node",position:_,className:`flow-handle flow-handle-condition ${n.nodeHasCondition?"filled":""}`,style:S==="horizontal"?{top:"50%",left:8,transform:"translateY(-50%) translateY(8px)"}:{left:"50%",top:24,transform:"translateX(-50%)"}}),y?b.jsx(fi,{type:"target",id:"act:node",position:_,className:`flow-handle flow-handle-action ${n.nodeHasAction?"filled":""}`,style:S==="horizontal"?{top:"50%",left:8,transform:"translateY(-50%) translateY(-8px)"}:{left:"50%",top:8,transform:"translateX(-50%)"}}):null]}),!p&&k.length?b.jsx("div",{className:"node-outputs",children:k.map((B,N)=>{const L=o===N,ne=c===N,I=O&&B.editable;return b.jsxs("div",{className:`node-output-row ${L?"dragging":""} ${ne?"drag-over":""} ${I?"reorderable":""}`,draggable:I,onDragStart:I?Q(N):void 0,onDragOver:I?W(N):void 0,onDragLeave:I?ce:void 0,onDrop:I?ue:void 0,onDragEnd:I?te:void 0,children:[(()=>{const se=S==="horizontal"?{left:8,top:"50%",transform:"translateY(-50%) translateY(-8px)"}:{left:"50%",top:8,transform:"translateX(-50%)"},D=S==="horizontal"?{left:8,top:"50%",transform:"translateY(-50%) translateY(8px)"}:{left:"50%",top:24,transform:"translateX(-50%)"};return b.jsxs(b.Fragment,{children:[b.jsx(fi,{type:"target",id:`act:${B.id}`,position:_,className:`flow-handle flow-handle-action ${B.hasAction?"filled":""}`,style:se}),b.jsx(fi,{type:"target",id:`cond:${B.id}`,position:_,className:`flow-handle flow-handle-condition ${B.hasCondition?"filled":""}`,style:D})]})})(),b.jsx("span",{className:"node-output-action node-output-main-gate",children:"gate"}),b.jsx("button",{type:"button",className:`node-output-label ${B.editable?"editable":""} nodrag`,onClick:B.editable?se=>ve(se,B.id):void 0,onMouseDown:se=>se.stopPropagation(),title:B.editable?"Edit choice text":void 0,children:B.label}),b.jsx(fi,{type:"source",id:B.id,position:q,className:"flow-handle flow-handle-inline",style:S==="horizontal"?{top:"50%",right:-14,transform:"translateY(-50%)"}:{left:"50%",bottom:-12,transform:"translateX(-50%)"}})]},B.id)})}):null]})},Ay={sensei:T2},Yv=(n,a,o,s)=>{switch(o){case He.Top:return{x:n,y:a-s};case He.Bottom:return{x:n,y:a+s};case He.Left:return{x:n-s,y:a};case He.Right:return{x:n+s,y:a};default:return{x:n,y:a}}},D2=n=>{const{id:a,sourceX:o,sourceY:s,targetX:c,targetY:f,sourcePosition:d,targetPosition:h,markerEnd:g,markerStart:m,style:y,label:p,labelStyle:S,labelShowBg:_,labelBgStyle:q,labelBgPadding:C,labelBgBorderRadius:k,interactionWidth:M}=n,O=n,U=O.targetHandle,w=O.targetHandleId,J=U??w,Q=O.sourceHandleId,W=O.sourceHandle??Q,ce=O.className??"",ue=W?.startsWith("opt:")||ce.includes("edge-choice"),te=W==="next"||ce.includes("edge-continue"),oe=W==="cond-out"||W==="act-out"||J?.startsWith("cond:")||J?.startsWith("act:")||ce.includes("edge-condition")||ce.includes("edge-action"),me=g,ve=me&&typeof me=="object"&&typeof me.width=="number"?me.width??16:16,N=g?Math.max(oe?9:ue?7:te?8:10,Math.round(ve*(oe?.64:ue?.48:te?.56:.64))):0,L=Yv(c,f,h,N),ne=oe?9:0,I=ne?Yv(L.x,L.y,h,ne):L,[se,D,V]=Xf({sourceX:o,sourceY:s,targetX:I.x,targetY:I.y,sourcePosition:d,targetPosition:h,curvature:.25});return b.jsx(To,{id:a,path:se,labelX:D,labelY:V,label:p,labelStyle:S,labelShowBg:_,labelBgStyle:q,labelBgPadding:C,labelBgBorderRadius:k,style:y,markerEnd:g,markerStart:m,interactionWidth:M})},Cy={arrow:D2},M2=({onInlineTextChange:n,onRequestMainEdit:a,onRequestOutputEdit:o,onAddChoice:s,onAddCondition:c,onAddAction:f,onReorderOutputs:d,onCycleNodeColor:h,onEdgeDropCreate:g,onConnect:m,onNodesDelete:y,onEdgesDelete:p,onEdgeClick:S,onInventoryDrop:_,onNodeDragStop:q})=>{const C=Rc(),k=It(De=>De.flowDirection),M=Ve(De=>De.selectedGuidanceId),O=Ve(De=>De.setSelectedGuidanceId),U=Ve(De=>De.guidancePositions),w=Ve(De=>De.guidanceAnchorPositions),J=Ve(De=>De.extraGuidanceConditions),Q=Ve(De=>De.extraGuidanceActions),W=it(De=>De.activeGuidanceId),ce=Ve(De=>De.setFlowInstance),ue=Ht(De=>De.openConditionEdit),te=Ht(De=>De.openActionEdit),oe=A.useRef(null),me=A.useRef(null),ve=A.useRef(null),z=A.useRef(null);oe.current=s,me.current=c,ve.current=f,z.current=d;const B=A.useRef(null),N=A.useRef(null),L=A.useRef(null),ne=A.useRef(!0),I=A.useRef(!1),se=A.useRef(null),D=A.useRef(null),[V,de]=A.useState([]),ge=A.useMemo(()=>J[W]??[],[W,J]),we=A.useMemo(()=>Q[W]??[],[W,Q]),Ce=A.useMemo(()=>C?Oc(C.module):[],[C]),ke=A.useMemo(()=>Ce.filter(De=>De.kind!=="option"),[Ce]),Re=A.useMemo(()=>C?g2(C.module):[],[C]),Oe=A.useMemo(()=>C?p2(C.module):[],[C]),$e=A.useMemo(()=>C?[..._2(C.module,M),...Ey(Re),..._y(Oe)]:[],[C,Re,Oe,M]),at=A.useMemo(()=>{const De=new Set;for(const ie of $e)ie.target&&ie.targetHandle===Wa&&De.add(ie.target);return De},[$e]),Pe=A.useRef({}),Et=A.useRef(""),gt=`${W}::${k}`;if(gt!==Et.current)if(Et.current=gt,!C)Pe.current={};else{const De=ke.map(Rs),ie=wi(C.module.meta.rootMenu,C.module),ee=ie?[ie.id]:[];Pe.current=wy(De,$e,ee,500,360,k)}const et=Pe.current,pt=A.useMemo(()=>{if(!C)return[];const De={...et,...U},ie={...et,...w},ee={...et,...w},be=N2(ke,C.module,De,M,k,at,n,a,o,Xe=>oe.current?.(Xe),Xe=>me.current?.(Xe),Xe=>ve.current?.(Xe),(Xe,Tt)=>z.current?.(Xe,Tt),h),Be=Sy(Re,ge,De,ie,k,be,M),ft=Ny(Oe,we,De,ee,k,be,M);return[...be,...Be,...ft]},[C,ge,we,k,et,Re,Oe,ke,at,U,w,n,a,o,h,M]);A.useEffect(()=>{de(pt)},[pt]);const Fe=A.useCallback(De=>{de(ie=>Wf(De,ie))},[]),je=A.useCallback(()=>{N.current=null;const De=L.current;if(!De)return;const ie=B.current;ie&&ie.setNodes(ee=>ee.map(be=>be.id===De.id?{...be,position:De.position}:be))},[]),_t=A.useCallback((De,ie)=>{L.current={id:ie.id,position:ie.position},de(ee=>ee.map(be=>be.id===ie.id?{...be,position:ie.position}:be)),N.current===null&&(N.current=requestAnimationFrame(je))},[je]),Qt=A.useCallback((De,ie)=>{N.current!==null&&(cancelAnimationFrame(N.current),N.current=null),L.current=null;const ee=B.current?.getNodes()??V,be=ee.map(Qe=>Qe.id===ie.id?{...Qe,position:ie.position}:Qe),ft=xy(be).reduce((Qe,Ze)=>{const $t=ee.find(vt=>vt.id===Ze.id);return $t&&($t.position.x!==Ze.position.x||$t.position.y!==Ze.position.y)&&(Qe[Ze.id]=Ze.position),Qe},{}),Xe=ft[ie.id]??ie.position,Tt=Xe.x===ie.position.x&&Xe.y===ie.position.y?ie:{...ie,position:Xe};de(Qe=>Qe.map(Ze=>ft[Ze.id]?{...Ze,position:ft[Ze.id]}:Ze)),B.current?.setNodes(Qe=>Qe.map(Ze=>ft[Ze.id]?{...Ze,position:ft[Ze.id]}:Ze)),q(De,Tt,ft)},[V,q]);A.useEffect(()=>()=>{N.current!==null&&cancelAnimationFrame(N.current)},[]);const vn=A.useCallback((De,ie)=>{O(ie.id)},[O]),Mn=A.useCallback((De,ie)=>{if(Bn(ie.id)){const ee=Za(ie.id);ee&&ue({mode:"guidance",value:ee});return}if(Yn(ie.id)){const ee=Ia(ie.id);ee&&te({mode:"guidance",value:ee})}},[te,ue]),_n=A.useCallback(()=>{O("")},[O]),wt=A.useCallback(De=>{De.preventDefault(),De.dataTransfer.dropEffect="copy"},[]),zn=De=>{const ie=De;if(typeof ie.clientX=="number"&&typeof ie.clientY=="number")return{x:ie.clientX,y:ie.clientY};const ee=ie.changedTouches?.[0]??ie.touches?.[0];return ee?{x:ee.clientX,y:ee.clientY}:null},tt=A.useCallback((De,ie)=>{if(!ie?.nodeId){D.current=null;return}D.current={nodeId:ie.nodeId,handleId:ie.handleId??void 0,handleType:ie.handleType??void 0}},[]),Rt=A.useCallback((De,ie)=>{if(I.current)return;const ee=D.current;if(D.current=null,!ee||ee.handleType!=="source"&&ee.handleType!=="target"||ie&&ie.isValid)return;const be=De?.target;if(!ie&&!be?.classList?.contains("react-flow__pane"))return;const Be=zn(De);if(!Be)return;const ft=se.current,Xe=B.current;if(!ft||!Xe)return;const Tt=ft.getBoundingClientRect(),Qe=Xe.project({x:Be.x-Tt.left,y:Be.y-Tt.top});g(ee.nodeId,ee.handleId,Qe,ee.handleType)},[g]),cn=A.useCallback(()=>{ne.current=!1,I.current=!0},[]),qt=A.useCallback((De,ie)=>{ne.current=!0,p([De]),m(ie)},[m,p]),wn=A.useCallback((De,ie)=>{ne.current||p([ie]),ne.current=!0,I.current=!1},[p]),dt=A.useCallback(De=>{B.current=De,ce("guidance",De)},[ce]);return V.length?b.jsx("div",{className:"flow-canvas",ref:se,children:b.jsxs(Ff,{nodes:V,edges:$e,edgeTypes:Cy,nodeTypes:Ay,onInit:dt,onNodesChange:Fe,onNodeClick:vn,onNodeDoubleClick:Mn,onPaneClick:_n,onNodeDrag:_t,onNodeDragStop:Qt,onConnectStart:tt,onConnectEnd:Rt,onConnect:m,onReconnectStart:cn,onReconnect:qt,onReconnectEnd:wn,onNodesDelete:y,onEdgesDelete:p,onEdgeClick:S,onDragOver:wt,onDrop:_,connectionLineType:ji.Bezier,defaultEdgeOptions:{type:"arrow",markerEnd:{type:Gi.ArrowClosed,width:16,height:16,color:"rgba(228, 224, 218, 0.58)"}},style:{width:"100%",height:"100%"},defaultViewport:{x:0,y:0,zoom:1},minZoom:.35,maxZoom:1.6,edgesUpdatable:!0,onlyRenderVisibleElements:!0,deleteKeyCode:["Backspace","Delete"],children:[b.jsx(yy,{variant:Pn.Dots,gap:20,size:1,color:"rgba(255,255,255,0.05)"}),b.jsx(py,{position:"bottom-right"}),b.jsx(my,{position:"bottom-right",nodeColor:De=>{const ie=De.data?.kind;return ie==="condition"?"#facc15":ie==="action"?"#f87171":ie==="menu"?"#06b6d4":ie==="option"?"#a855f7":"#8b5cf6"},maskColor:"rgba(0,0,0,0.8)",style:{background:"rgba(26,28,32,0.9)"}})]})}):b.jsx("div",{className:"flow-empty",children:"No guidance nodes to show."})},z2=({onInlineTextChange:n,onRequestMainEdit:a,onRequestOutputEdit:o,onAddChoice:s,onAddCondition:c,onAddAction:f,onReorderOutputs:d,onCycleNodeColor:h,onEdgeDropCreate:g,onConnect:m,onNodesDelete:y,onEdgesDelete:p,onEdgeClick:S,onInventoryDrop:_,onNodeDragStop:q})=>{const C=Mf(),k=It(ie=>ie.flowDirection),M=Ve(ie=>ie.selectedNarrativeId),O=Ve(ie=>ie.setSelectedNarrativeId),U=Ve(ie=>ie.narrativePositions),w=Ve(ie=>ie.narrativeAnchorPositions),J=Ve(ie=>ie.narrativeStageFilter),Q=Ve(ie=>ie.extraNarrativeConditions),W=Ve(ie=>ie.extraNarrativeActions),ce=it(ie=>ie.activeNarrativeId),ue=Ve(ie=>ie.collapsedNodes),te=Ve(ie=>ie.toggleCollapsed),oe=Ve(ie=>ie.setFlowInstance),me=Ht(ie=>ie.openConditionEdit),ve=Ht(ie=>ie.openActionEdit),z=A.useRef(null),B=A.useRef(null),N=A.useRef(null),L=A.useRef(!0),ne=A.useRef(!1),I=A.useRef(null),se=A.useRef(null),[D,V]=A.useState([]),de=A.useMemo(()=>Q[ce]??[],[ce,Q]),ge=A.useMemo(()=>W[ce]??[],[ce,W]),we=A.useMemo(()=>C?Xv(C.narrative):new Set,[C]),Ce=A.useMemo(()=>C?(J==="all"?C.narrative.nodes:C.narrative.nodes.filter(ee=>Ec(ee.id)===J)).filter(ee=>!we.has(ee.id)):[],[C,we,J]),ke=A.useMemo(()=>{const ie={};if(!C)return ie;for(const ee of C.narrative.nodes){const be=`${C.id}::${ee.id}`;ue[be]&&(ie[ee.id]=!0)}return ie},[C,ue]),Re=A.useCallback(ie=>{if(!ce)return;const ee=`${ce}::${ie}`;te(ee)},[ce,te]),Oe=A.useMemo(()=>C?v2(C.narrative,we):[],[C,we]),$e=A.useMemo(()=>C?y2(C.narrative,we):[],[C,we]),at=A.useMemo(()=>{if(!C)return[];const ie=[...w2(C.narrative,we,M),...Ey(Oe),..._y($e)];if(J==="all")return ie;const ee=new Set(Ce.map(be=>be.id));return ie.filter(be=>(Bn(be.source)||Yn(be.source)||ee.has(be.source))&&ee.has(be.target))},[C,Oe,$e,we,J,Ce,M]),Pe=A.useMemo(()=>{const ie=new Set;for(const ee of at)ee.target&&ee.targetHandle===Wa&&ie.add(ee.target);return ie},[at]),Et=A.useRef({}),gt=A.useRef(""),et=`${ce}::${k}::${J}`;if(et!==gt.current)if(gt.current=et,!C||!Ce.length)Et.current={};else{const ie=Ce.map(ee=>ee.id);Et.current=wy(ie,at,[],500,360,k)}const pt=Et.current,Fe=A.useMemo(()=>{if(!C||!Ce.length)return[];const ie={...pt,...U},ee={...pt,...w},be=E2(C.narrative,Ce,ie,M,ke,we,Pe,Re,k,n,a,o,s,c,f,d,h),Be=new Set(Ce.map(Qe=>Qe.id)),ft=J==="all"?Oe:Oe.filter(Qe=>Be.has(Qe.targetId)),Xe=Sy(ft,de,ie,ee,k,be,M),Tt=Ny($e,ge,ie,ee,k,be,M);return[...be,...Xe,...Tt]},[C,de,ge,ke,k,n,a,o,s,c,f,d,h,pt,Oe,$e,we,Pe,U,w,J,Ce,M,Re]);A.useEffect(()=>{V(Fe)},[Fe]),A.useEffect(()=>{Ce.length&&M&&(Bn(M)||Yn(M)||Ce.some(ie=>ie.id===M)||O(Ce[0].id))},[Ce,M,O]);const je=A.useCallback(ie=>{V(ee=>Wf(ie,ee))},[]),_t=A.useCallback(()=>{B.current=null;const ie=N.current;if(!ie)return;const ee=z.current;ee&&ee.setNodes(be=>be.map(Be=>Be.id===ie.id?{...Be,position:ie.position}:Be))},[]),Qt=A.useCallback((ie,ee)=>{N.current={id:ee.id,position:ee.position},V(be=>be.map(Be=>Be.id===ee.id?{...Be,position:ee.position}:Be)),B.current===null&&(B.current=requestAnimationFrame(_t))},[_t]),vn=A.useCallback((ie,ee)=>{B.current!==null&&(cancelAnimationFrame(B.current),B.current=null),N.current=null;let be;const Be=z.current;if(Be)try{be=Be.getIntersectingNodes(ee).filter(mt=>mt.id!==ee.id&&!Bn(mt.id)&&!Yn(mt.id))[0]?.id}catch{be=void 0}const ft=z.current?.getNodes()??D,Xe=ft.map(vt=>vt.id===ee.id?{...vt,position:ee.position}:vt),Qe=xy(Xe).reduce((vt,mt)=>{const An=ft.find(ni=>ni.id===mt.id);return An&&(An.position.x!==mt.position.x||An.position.y!==mt.position.y)&&(vt[mt.id]=mt.position),vt},{}),Ze=Qe[ee.id]??ee.position,$t=Ze.x===ee.position.x&&Ze.y===ee.position.y?ee:{...ee,position:Ze};V(vt=>vt.map(mt=>Qe[mt.id]?{...mt,position:Qe[mt.id]}:mt)),z.current?.setNodes(vt=>vt.map(mt=>Qe[mt.id]?{...mt,position:Qe[mt.id]}:mt)),q(ie,$t,be,Qe)},[D,q]);A.useEffect(()=>()=>{B.current!==null&&cancelAnimationFrame(B.current)},[]);const Mn=A.useCallback((ie,ee)=>{O(ee.id)},[O]),_n=A.useCallback((ie,ee)=>{if(Bn(ee.id)){const be=Za(ee.id);be&&me({mode:"narrative",value:be});return}if(Yn(ee.id)){const be=Ia(ee.id);be&&ve({mode:"narrative",value:be})}},[ve,me]),wt=A.useCallback(()=>{O("")},[O]),zn=A.useCallback(ie=>{ie.preventDefault(),ie.dataTransfer.dropEffect="copy"},[]),tt=ie=>{const ee=ie;if(typeof ee.clientX=="number"&&typeof ee.clientY=="number")return{x:ee.clientX,y:ee.clientY};const be=ee.changedTouches?.[0]??ee.touches?.[0];return be?{x:be.clientX,y:be.clientY}:null},Rt=A.useCallback((ie,ee)=>{if(!ee?.nodeId){se.current=null;return}se.current={nodeId:ee.nodeId,handleId:ee.handleId??void 0,handleType:ee.handleType??void 0}},[]),cn=A.useCallback((ie,ee)=>{if(ne.current)return;const be=se.current;if(se.current=null,!be||be.handleType!=="source"&&be.handleType!=="target"||ee&&ee.isValid)return;const Be=ie?.target;if(!ee&&!Be?.classList?.contains("react-flow__pane"))return;const ft=tt(ie);if(!ft)return;const Xe=I.current,Tt=z.current;if(!Xe||!Tt)return;const Qe=Xe.getBoundingClientRect(),Ze=Tt.project({x:ft.x-Qe.left,y:ft.y-Qe.top});g(be.nodeId,be.handleId,Ze,be.handleType)},[g]),qt=A.useCallback(()=>{L.current=!1,ne.current=!0},[]),wn=A.useCallback((ie,ee)=>{L.current=!0,p([ie]),m(ee)},[m,p]),dt=A.useCallback((ie,ee)=>{L.current||p([ee]),L.current=!0,ne.current=!1},[p]),De=A.useCallback(ie=>{z.current=ie,oe("narrative",ie)},[oe]);return D.length?b.jsx("div",{className:"flow-canvas",ref:I,children:b.jsxs(Ff,{nodes:D,edges:at,edgeTypes:Cy,nodeTypes:Ay,onInit:De,onNodesChange:je,onNodeClick:Mn,onNodeDoubleClick:_n,onPaneClick:wt,onNodeDrag:Qt,onNodeDragStop:vn,onConnectStart:Rt,onConnectEnd:cn,onConnect:m,onReconnectStart:qt,onReconnect:wn,onReconnectEnd:dt,onNodesDelete:y,onEdgesDelete:p,onEdgeClick:S,onDragOver:zn,onDrop:_,connectionLineType:ji.Bezier,defaultEdgeOptions:{type:"arrow",markerEnd:{type:Gi.ArrowClosed,width:16,height:16,color:"rgba(228, 224, 218, 0.58)"}},style:{width:"100%",height:"100%"},defaultViewport:{x:0,y:0,zoom:1},minZoom:.35,maxZoom:1.6,edgesUpdatable:!0,onlyRenderVisibleElements:!0,deleteKeyCode:["Backspace","Delete"],children:[b.jsx(yy,{variant:Pn.Dots,gap:20,size:1,color:"rgba(255,255,255,0.05)"}),b.jsx(py,{position:"bottom-right"}),b.jsx(my,{position:"bottom-right",nodeColor:ie=>{const ee=ie.data?.kind;if(ee==="condition")return"#facc15";if(ee==="action")return"#f87171";const be=ie.data?.speaker,Be=ie.data?.questType,ft=ie.data?.completion;return Be?"#14b8a6":ft?"#ec4899":be==="user"?"#3b82f6":"#f59e0b"},maskColor:"rgba(0,0,0,0.8)",style:{background:"rgba(26,28,32,0.9)"}})]})}):b.jsx("div",{className:"flow-empty",children:"No narrative nodes to show."})},gn=n=>{n.preventDefault(),n.dataTransfer.dropEffect="copy"},pn=(n,a,o)=>{n.preventDefault();const s=n.dataTransfer.getData("text/plain");if(!s)return;const c=n.currentTarget,f=c.selectionStart??a.length,d=c.selectionEnd??a.length,h=`${a.slice(0,f)}${s}${a.slice(d)}`;o(h),requestAnimationFrame(()=>{try{c.selectionStart=f+s.length,c.selectionEnd=f+s.length}catch{}})},k2=({entity:n,allOptions:a,onUpdateMenu:o,onUpdateNode:s,onUpdateOption:c,onAddOption:f,onRemoveOption:d,onReorderOptions:h})=>{const[g,m]=A.useState(null),[y,p]=A.useState(null),S=O=>U=>{m(O),U.dataTransfer.effectAllowed="move",U.dataTransfer.setData("text/plain",String(O))},_=O=>U=>{U.preventDefault(),U.dataTransfer.dropEffect="move",g!==null&&O!==g&&p(O)},q=()=>{p(null)},C=(O,U)=>w=>{if(w.preventDefault(),g===null||y===null||g===y){m(null),p(null);return}const J=[...U],[Q]=J.splice(g,1);J.splice(y,0,Q),h(O,J),m(null),p(null)},k=()=>{m(null),p(null)};if(n.kind==="menu"){const O=n.data;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"id"}),b.jsx("input",{className:"field",value:O.id,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"text"}),b.jsx("textarea",{className:"field area",value:O.text,onChange:U=>o(O.id,{text:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.text,w=>o(O.id,{text:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"auto route"}),b.jsx("input",{type:"checkbox",checked:!!O.autoRoute,onChange:U=>o(O.id,{autoRoute:U.currentTarget.checked})})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"back blocked"}),b.jsx("input",{type:"checkbox",checked:!!O.backBlocked,onChange:U=>o(O.id,{backBlocked:U.currentTarget.checked})})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"choices"}),b.jsxs("div",{style:{flex:1},children:[O.options.map((U,w)=>{const J=a.get(U),Q=g===w,W=y===w;return b.jsxs("div",{className:`choice-row ${Q?"dragging":""} ${W?"drag-over":""}`,draggable:!0,onDragStart:S(w),onDragOver:_(w),onDragLeave:q,onDrop:C(O.id,O.options),onDragEnd:k,children:[b.jsx("span",{className:"choice-drag-handle",title:"Drag to reorder",children:""}),b.jsx("span",{className:"choice-indicator"}),b.jsx("input",{value:J?.label??U,onChange:ce=>c(U,{label:ce.currentTarget.value}),placeholder:"Choice label..."}),b.jsx("button",{className:"choice-delete",onClick:()=>d(O.id,U),title:"Remove choice",children:""})]},U)}),b.jsxs("button",{className:"add-choice-btn",onClick:()=>f(O.id),children:[b.jsx("span",{className:"icon",children:"+"}),"add choice"]})]})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"source"}),b.jsx("input",{className:"field",value:O.source??"",onChange:U=>o(O.id,{source:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.source??"",w=>o(O.id,{source:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"item label"}),b.jsx("input",{className:"field",value:O.itemLabel??"",onChange:U=>o(O.id,{itemLabel:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.itemLabel??"",w=>o(O.id,{itemLabel:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"item target"}),b.jsx("input",{className:"field",value:O.itemTarget??"",onChange:U=>o(O.id,{itemTarget:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.itemTarget??"",w=>o(O.id,{itemTarget:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"item action"}),b.jsx("input",{className:"field",value:O.itemAction??"",onChange:U=>o(O.id,{itemAction:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.itemAction??"",w=>o(O.id,{itemAction:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"empty text"}),b.jsx("input",{className:"field",value:O.emptyText??"",onChange:U=>o(O.id,{emptyText:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.emptyText??"",w=>o(O.id,{emptyText:w}))})]})]})}if(n.kind==="option"){const O=n.data,U=O.actions.join(`
`);return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"id"}),b.jsx("input",{className:"field",value:O.id,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"label"}),b.jsx("textarea",{className:"field area",value:O.label,onChange:w=>c(O.id,{label:w.currentTarget.value}),onDragOver:gn,onDrop:w=>pn(w,O.label,J=>c(O.id,{label:J}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"target"}),b.jsx("input",{className:"field",value:O.target??"",onChange:w=>c(O.id,{target:w.currentTarget.value}),onDragOver:gn,onDrop:w=>pn(w,O.target??"",J=>c(O.id,{target:J}))})]}),O.requires.length?b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"requires"}),b.jsx("div",{className:"chips",children:O.requires.map(w=>b.jsx("span",{className:"chip",children:w},w))})]}):null,b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"actions (one per line)"}),b.jsx("textarea",{className:"field area",value:U,onChange:w=>{const J=w.currentTarget.value.split(`
`).map(Q=>Q.trim()).filter(Boolean);c(O.id,{actions:J})},onDragOver:gn,onDrop:w=>pn(w,U,J=>c(O.id,{actions:J.split(`
`).map(Q=>Q.trim()).filter(Boolean)}))})]})]})}const M=n.data;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"id"}),b.jsx("input",{className:"field",value:M.id,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"speaker"}),b.jsxs("select",{className:"field",value:M.speaker??"sensei",onChange:O=>s(M.id,{speaker:O.currentTarget.value}),children:[b.jsx("option",{value:"sensei",children:"sensei"}),b.jsx("option",{value:"user",children:"user"})]})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"text"}),b.jsx("textarea",{className:"field area",value:M.text,onChange:O=>s(M.id,{text:O.currentTarget.value}),onDragOver:gn,onDrop:O=>pn(O,M.text,U=>s(M.id,{text:U}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"back blocked"}),b.jsx("input",{type:"checkbox",checked:!!M.backBlocked,onChange:O=>s(M.id,{backBlocked:O.currentTarget.checked})})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"next"}),b.jsx("input",{className:"field",value:M.next??"",onChange:O=>s(M.id,{next:O.currentTarget.value}),onDragOver:gn,onDrop:O=>pn(O,M.next??"",U=>s(M.id,{next:U}))})]}),M.actions.length?b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"actions"}),b.jsx("div",{className:"chips",children:M.actions.map(O=>b.jsx("span",{className:"chip",children:O},O))})]}):null]})},O2=({node:n,onUpdateNode:a,onUpdateQuest:o})=>{const s=n.quest,c=n.actions.join(`
`);return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"id"}),b.jsx("input",{className:"field",value:n.id,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"text"}),b.jsx("textarea",{className:"field area",value:n.text,onChange:f=>a(n.id,{text:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,n.text,d=>a(n.id,{text:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"next"}),b.jsx("input",{className:"field",value:n.next??"",onChange:f=>a(n.id,{next:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,n.next??"",d=>a(n.id,{next:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"actions (one per line)"}),b.jsx("textarea",{className:"field area",value:c,onChange:f=>{const d=f.currentTarget.value.split(`
`).map(h=>h.trim()).filter(Boolean);a(n.id,{actions:d})},onDragOver:gn,onDrop:f=>pn(f,c,d=>{const h=d.split(`
`).map(g=>g.trim()).filter(Boolean);a(n.id,{actions:h})})})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"quest objective"}),b.jsx("input",{className:"field checkbox",type:"checkbox",checked:!!n.quest,onChange:f=>{if(f.currentTarget.checked){a(n.id,{quest:n.quest??{questType:"play_game"}});return}a(n.id,{quest:void 0})}})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"completion"}),b.jsx("input",{className:"field checkbox",type:"checkbox",checked:!!n.completion,onChange:f=>{a(n.id,{completion:f.currentTarget.checked})}})]}),s?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"quest type"}),b.jsxs("select",{className:"field",value:s.questType,onChange:f=>o(n.id,{questType:f.currentTarget.value}),children:[b.jsx("option",{value:"play_game",children:"play_game"}),b.jsx("option",{value:"play_console",children:"play_console"}),b.jsx("option",{value:"earn_achievement",children:"earn_achievement"})]})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"game title"}),b.jsx("input",{className:"field",value:s.gameTitle??"",onChange:f=>o(n.id,{gameTitle:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,s.gameTitle??"",d=>o(n.id,{gameTitle:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"game system"}),b.jsx("input",{className:"field",value:s.gameSystem??"",onChange:f=>o(n.id,{gameSystem:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,s.gameSystem??"",d=>o(n.id,{gameSystem:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"duration (minutes)"}),b.jsx("input",{className:"field",type:"number",value:s.durationMinutes??"",onChange:f=>{const d=Number(f.currentTarget.value);o(n.id,{durationMinutes:Number.isNaN(d)?void 0:d})}})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"achievement id"}),b.jsx("input",{className:"field",value:s.achievementId??"",onChange:f=>o(n.id,{achievementId:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,s.achievementId??"",d=>o(n.id,{achievementId:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"achievement name"}),b.jsx("input",{className:"field",value:s.achievementName??"",onChange:f=>o(n.id,{achievementName:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,s.achievementName??"",d=>o(n.id,{achievementName:d}))})]})]}):null]})},R2=({item:n,onEdit:a})=>{const o=s=>{const c={kind:n.kind,value:n.value,id:n.id,label:n.label};s.dataTransfer.setData("text/plain",n.value),s.dataTransfer.setData(uf,JSON.stringify(c)),s.dataTransfer.effectAllowed="copyMove"};return b.jsx("button",{type:"button",className:`inventory-chip inventory-chip-${n.kind}`,draggable:!0,onDragStart:o,onClick:()=>a(n),title:n.hint??"Click to edit",children:n.label})},q2=({category:n,onEditItem:a})=>b.jsxs("section",{className:`inventory-category inventory-tone-${n.tone}`,children:[b.jsx("div",{className:"inventory-category-title",children:n.title}),b.jsx("div",{className:"inventory-items",children:n.items.map(o=>b.jsx(R2,{item:o,onEdit:a},o.id))})]}),j2=({categories:n,onEditItem:a})=>{const[o,s]=A.useState(!1);return b.jsxs("aside",{className:`inventory-dock${o?" is-collapsed":""}`,children:[b.jsxs("div",{className:"inventory-dock-header",children:[o?null:b.jsx("div",{className:"inventory-dock-title",children:"Logic Inventory"}),b.jsx("button",{type:"button",className:"inventory-dock-toggle",onClick:()=>s(c=>!c),"aria-label":o?"Expand logic inventory":"Collapse logic inventory",title:o?"Expand":"Collapse",children:o?">":"<"})]}),o?null:b.jsxs(b.Fragment,{children:[n.map(c=>b.jsx(q2,{category:c,onEditItem:a},c.id)),b.jsx("div",{className:"panel-note",children:"Drag condition or action chips onto canvas. Drag tokens/variables into text fields."})]})]})},H2=({title:n,value:a,onChange:o,onSave:s,onCancel:c})=>b.jsx("div",{className:"quickedit-overlay",onClick:c,children:b.jsxs("div",{className:"quickedit-panel",onClick:f=>f.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:n}),b.jsx("div",{className:"field-row",children:b.jsx("label",{className:"field-label",children:"Text"})}),b.jsx("textarea",{className:"field area quickedit-input",value:a,onChange:f=>o(f.currentTarget.value),autoFocus:!0}),b.jsx("div",{className:"panel-note",children:"Conditions are represented as separate boxes in the canvas and connected to gate ports."}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:c,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:s,children:"Save"})]})]})}),G2=({mode:n,value:a,onChange:o,onSave:s,onCancel:c})=>b.jsx("div",{className:"quickedit-overlay",onClick:c,children:b.jsxs("div",{className:"quickedit-panel",onClick:f=>f.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Edit Condition"}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"condition expression"}),b.jsx("textarea",{className:"field area quickedit-input condition",value:a,onChange:f=>o(f.currentTarget.value),autoFocus:!0})]}),b.jsxs("div",{className:"panel-note",children:["This updates the condition node and all references in the active"," ",n," manuscript."]}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:c,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:s,children:"Save"})]})]})}),U2=({mode:n,value:a,onChange:o,onSave:s,onCancel:c})=>b.jsx("div",{className:"quickedit-overlay",onClick:c,children:b.jsxs("div",{className:"quickedit-panel",onClick:f=>f.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Edit Action"}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"action"}),b.jsx("textarea",{className:"field area quickedit-input action",value:a,onChange:f=>o(f.currentTarget.value),autoFocus:!0})]}),b.jsxs("div",{className:"panel-note",children:["This updates the action node and all references in the active"," ",n," manuscript."]}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:c,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:s,children:"Save"})]})]})}),B2=({label:n,value:a,onChange:o,onSave:s,onCancel:c})=>b.jsx("div",{className:"quickedit-overlay",onClick:c,children:b.jsxs("div",{className:"quickedit-panel",onClick:f=>f.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Edit Inventory Item"}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"item"}),b.jsx("input",{className:"field",value:n,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"value"}),b.jsx("textarea",{className:"field area quickedit-input condition",value:a,onChange:f=>o(f.currentTarget.value),autoFocus:!0})]}),b.jsx("div",{className:"panel-note",children:"This custom value is used when you drag this item next time."}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:c,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:s,children:"Save"})]})]})}),Bt=(...n)=>n.filter(Boolean).slice(0,5).join(`
`),Y2=n=>{const a=["==","!=",">=","<=",">","<"];for(const o of a){const s=n.indexOf(o);if(s===-1)continue;const c=n.slice(0,s).trim(),f=n.slice(s+o.length).trim();return{key:c,op:o,rhs:f,implicit:!1}}return{key:n.trim(),op:">",rhs:"0",implicit:!0}},$2=n=>{if(n==="focus_minutes_today")return"today's cumulative focus duration in minutes.";if(n==="focus_sessions_today")return"today's focus session count.";if(n==="meditation_minutes_today")return"today's meditation duration in minutes.";if(n==="tasks_total")return"the number of loaded tasks for today.";if(n==="tasks_done")return"the number of tasks already completed today.";if(n==="routines_total")return"the number of routines scheduled for today.";if(n==="routines_done")return"the number of scheduled routines already completed today.";if(n==="narratives_available")return"the count of narratives discovered by the runtime.";if(n==="narrative_active")return"whether a narrative is currently active (1 or 0).";if(n==="quests_active")return"the count of currently active quest slots.";if(n==="quests_claimable")return"whether at least one quest can be claimed now (1 or 0).";if(n==="quest_slots_open")return"whether there is an empty quest slot (1 or 0).";if(n==="quests_abandonable")return"the count of active quest slots that can be abandoned.";if(n==="has_unseen_completion")return"whether today's recommendation completed and has not been acknowledged.";if(n==="guided_routine_pending")return"the count of guided routine items still pending right now.";if(n==="focus_rewarded_today")return"whether today's focus reward has already been granted (1 or 0).";if(n==="meditation_rewarded_today")return"whether today's meditation reward has already been granted (1 or 0).";if(n==="has_roms")return"whether at least one ROM exists in the runtime cache (1 or 0).";if(n==="needs_ra_scan")return"whether RetroAchievements scan is required before RA-only recommendation can proceed.";if(n==="ra_achievement_ready")return"whether a locked achievement is currently available for the selected game.";if(n==="hour")return"the current local hour (0-23).";if(n==="phase")return"the current guided phase index (morning/afternoon/evening/night).";if(n==="rec_active")return"whether a daily recommendation is currently active (1 or 0).";if(n==="narratives_completed_total")return"the count of completed narratives tracked by Sensei completion data.";if(n==="total_visits")return"lifetime count of Sensei visits from memory state.";if(n==="current_streak")return"current consecutive-day Sensei visit streak.";if(n==="longest_streak")return"best historical consecutive-day Sensei visit streak.";if(n==="mem_narratives_completed")return"narratives completed counter from persistent memory state.";if(n==="mem_quests_completed")return"quests completed counter from persistent memory state.";if(n.startsWith("narrative_completed.")){const a=n.slice(20);return a?`whether narrative '${a}' is completed (1 or 0).`:"whether a narrative with a specific id is completed (1 or 0)."}if(n.startsWith("flag.")){const a=n.slice(5),o=a.indexOf(".");if(o>0){const s=a.slice(0,o);return`persisted flag '${a.slice(o+1)}' in '${s}' scope.`}return"a persisted flag value."}return"a runtime numeric field resolved by the condition evaluator."},V2=n=>{const a=Y2(n),o=a.implicit?"No explicit operator was found, so the evaluator treats this as '> 0'.":`The comparison is '${a.op} ${a.rhs}', evaluated with integer semantics.`;return Bt(`Condition '${n}' is a boolean gate that controls whether a branch is eligible.`,`Key '${a.key}' reads ${$2(a.key)}`,o,"This expression is re-evaluated against current stats/flags each time the branch is considered.")},L2=n=>n.trim().split(/\s+/,1)[0]??"",X2=n=>{const a=L2(n);return a==="set_flag"?Bt(`Action '${n}' writes a persisted flag value.`,"Scopes are daily, weekly, and perm; daily and weekly scopes reset on their calendar boundaries.","This is typically used to mark completions so later conditions can detect state transitions."):a==="clear_flag"?Bt(`Action '${n}' resets a persisted flag to zero.`,"It is the inverse of set_flag and is used to reopen a path or clear one-time status."):a==="inc_flag"?Bt(`Action '${n}' increments a persisted flag counter.`,"If amount is omitted the increment is 1, allowing concise counter-based progression logic.","Counter flags pair naturally with thresholds such as '>= N'."):a==="award_minutes"?Bt(`Action '${n}' grants focus minutes as a direct reward mutation.`,"The numeric operand is unrestricted and parsed as an integer.","This changes progression totals immediately at action execution time."):a==="award_exp"?Bt(`Action '${n}' grants EXP using a seconds-based amount.`,"The operand is parsed as an integer and applied immediately.","Use this when branch completion should produce explicit progression credit."):a==="goto"?Bt(`Action '${n}' performs an immediate flow jump to a target menu/node id.`,"It bypasses normal next/target chaining and transfers control directly.","Valid targets are resolved by the module runtime lookup."):a==="reward_focus"?Bt("Action 'reward_focus' grants the built-in daily focus reward exactly once per day.","It toggles today's focus reward flag and persists daily state."):a==="reward_meditation"?Bt("Action 'reward_meditation' grants the built-in daily meditation reward exactly once per day.","It toggles today's meditation reward flag and persists daily state."):a==="pick_game"?Bt("Action 'pick_game' chooses a daily game recommendation from available ROMs.","When RA-only mode is enabled, it tries RA-supported picks first and falls back when needed.","It also kicks off achievement fetch for the selected recommendation."):a==="accept_game"?Bt("Action 'accept_game' accepts the current daily recommendation and exits Sensei to menu.","This marks recommendation acceptance and persists daily quest state."):a==="claim_achievement"?Bt("Action 'claim_achievement' claims the current claimable quest slot reward and clears that slot.","It also increments Sensei memory quest-completion tracking."):a==="abandon_quest"?Bt(`Action '${n}' clears an abandonable quest slot.`,"If slot id is omitted, it uses selected item id first, then first eligible slot.","Only active, non-unlocked slots with enough played time are eligible."):a==="mark_completion_seen"?Bt("Action 'mark_completion_seen' marks today's recommendation completion as acknowledged.","This hides completion reminder branches gated by has_unseen_completion."):a==="mark_routine_done"?Bt(`Action '${n}' marks a guided routine item as completed for today.`,"If id is omitted, it uses selected item id first, then current pending guided routine."):a==="open_ra_scan"?Bt("Action 'open_ra_scan' opens RetroAchievements scan prompt and exits Sensei module view.","Use this for branches gated by needs_ra_scan."):a==="open_narratives"?Bt("Action 'open_narratives' switches the UI to the narrative list view.","It is a state-transition action rather than a data mutation."):a==="start_narrative"?Bt(`Action '${n}' starts a narrative by id and enters narrative stage flow.`,"The id must match a loaded narrative definition.","If the id is invalid, no narrative transition occurs."):a==="accept_quest"?Bt(`Action '${n}' activates acceptance for the active narrative quest objective.`,"If a node id is supplied, acceptance is attempted against that explicit quest node first.","This separates quest acceptance timing from quest-node entry timing."):a==="advance_stage"?Bt("Action 'advance_stage' increments narrative stage and persists stage transition state.","It clears quest-active tracking for the previous stage and moves to the next stage entry when available.","When the final stage is exceeded, the narrative is marked completed."):a==="exit"?Bt("Action 'exit' returns from the current Sensei interaction context to the menu layer.","It is a UI flow termination action for the current branch."):Bt(`Action '${n}' is parsed by the runtime action dispatcher at execution time.`,"Only supported command tokens are executed; unknown tokens have no effect.")},Z2={"tasks.today":"rows from today's tasks with title and done fields.","routines.today":"rows from today's scheduled routines with title, detail, minutes, and done.","guided_routines.pending":"rows from guided routines relevant now that are not yet completed today.","focus.today":"rows from today's focus history with activity title and minutes.","focus.unrewarded":"rows from today's focus history only when today's focus reward has not yet been claimed.","narratives.available":"rows from all loaded narratives with id, title, detail, stage, and stage_total.","narratives.completed":"rows from completed narratives with id, title, detail/date, done, and stage_total.","narratives.active":"a single row for the currently active narrative, if one exists.","quests.active":"rows from active quest slots with title, detail, system, minutes, and done.","quests.abandonable":"rows from active quest slots eligible for abandon flow, including slot id for action targeting."},I2=n=>Bt(`Source '${n}' materializes a dynamic list at render time.`,`It yields ${Z2[n]??"runtime-defined rows from current state."}`,"Row variables such as {id}, {title}, {detail}, {date}, {minutes}, {done}, {stage}, and {stage_total} resolve from this materialized row."),Q2=n=>n.trim().replace(/^\{/,"").replace(/\}$/,""),$v={title_name:"the active player title/name string.",date:"the current date string.",week:"the current ISO week identifier.",focus_minutes:"today's total focus minutes (alias of focus_minutes_today).",focus_minutes_today:"today's total focus minutes.",focus_sessions:"today's focus session count (alias of focus_sessions_today).",focus_sessions_today:"today's focus session count.",meditation_minutes:"today's meditation minutes (alias of meditation_minutes_today).",meditation_minutes_today:"today's meditation minutes.",tasks_total:"today's total task count.",tasks_done:"today's completed task count.",routines_total:"today's scheduled routine count.",routines_done:"today's completed routine count.",narratives_available:"the number of available narratives.",quests_active:"the number of active quests.",rec_title:"today's recommended game title, lowercased for display text.",rec_system:"today's recommended system display name, lowercased for display text.",rec_minutes:"recommended play minutes for today's game.",achievement_desc:"first locked achievement description for current context, lowercased.",claim_detail:"claim/completion detail text for current context, lowercased.",routine_action:"action/title text for the first pending guided routine.",routine_minutes:"duration minutes for the first pending guided routine.",phase_name:"current guided phase name (morning, afternoon, evening, night).",hour:"current local hour number.",total_visits:"lifetime Sensei visit count.",current_streak:"current visit streak count.",longest_streak:"best visit streak count.",days_since_first:"days since first visit date in memory.",mem_narratives_completed:"persistent memory counter of completed narratives.",mem_quests_completed:"persistent memory counter of completed quests.",title:"default context title when no list item row is active.",detail:"default context detail when no list item row is active.",system:"default context system when no list item row is active.",minutes:"default context minutes when no list item row is active."},Vv={id:"the row identifier.",title:"the row title text.",detail:"the row detail/description text.",date:"the row date string when provided by source.",system:"the row platform/system field.",minutes:"the row duration/count in minutes.",done:"the row completion flag (1/0).",stage:"the row current stage index.",stage_total:"the row total stage count."},K2=n=>{const a=Q2(n);return a in Vv?Bt(`Variable '${n}' resolves from the current dynamic list row.`,`It represents ${Vv[a]}`,"Outside a list-row context, this placeholder usually resolves empty or remains unchanged depending on the renderer path."):Bt(`Variable '${n}' resolves from global runtime state.`,$v[a]?`It represents ${$v[a]}`:"If no provider exists for this key, the placeholder is left literal in output.","Global variables are evaluated after token expansion.")},J2=n=>Bt(`Token '${n}' represents a text pool key.`,"For '@custom', define lines in 'sensei/texts/custom.txt' (one line per entry) and the runtime resolves one line from that pool.","Token expansion runs before variable interpolation, enabling token text to include variables safely."),xo=(n,a)=>n==="condition"?V2(a):n==="action"?X2(a):n==="source"?I2(a):n==="variable"?K2(a):n==="token"?J2(a):a,W2=({kind:n,title:a,options:o,value:s,targetLabel:c,targetOptions:f,targetValue:d,onTargetChange:h,onChange:g,onPick:m,onSave:y,onCancel:p})=>b.jsx("div",{className:"quickedit-overlay",onClick:p,children:b.jsxs("div",{className:"quickedit-panel addexpr-panel",onClick:S=>S.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:a}),f&&f.length>0&&h?b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:c??"target"}),b.jsx("select",{className:"field",value:d??"",onChange:S=>h(S.currentTarget.value),children:f.map(S=>b.jsx("option",{value:S.id,children:S.label},S.id))})]}):null,b.jsxs("div",{className:"field-row",children:[b.jsxs("label",{className:"field-label",children:["available ",n,"s"]}),b.jsx("div",{className:"addexpr-list",children:o.length?o.map(S=>b.jsx("button",{type:"button",className:`addexpr-chip addexpr-chip-${n}`,onClick:()=>m(S),title:xo(n,S),children:S},S)):b.jsxs("div",{className:"panel-note",children:["No presets yet. Type a custom ",n," below."]})})]}),b.jsxs("div",{className:"field-row",children:[b.jsxs("label",{className:"field-label",children:[n," value"]}),b.jsx("textarea",{className:`field area quickedit-input ${n}`,value:s,onChange:S=>g(S.currentTarget.value),autoFocus:!0})]}),b.jsx("div",{className:"panel-note",children:"You can click a preset and then edit numbers or text before saving."}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:p,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:y,children:"Add"})]})]})}),F2=({normalizeOnExport:n,onToggleNormalize:a,onClose:o})=>b.jsx("div",{className:"settings-overlay",onClick:o,children:b.jsxs("div",{className:"settings-panel",onClick:s=>s.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Settings"}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"Normalize on export/save"}),b.jsx("input",{className:"field checkbox",type:"checkbox",checked:n,onChange:s=>a(s.currentTarget.checked)})]}),b.jsx("div",{className:"panel-note",children:"Preserve mode is default. Normalization rewrites with canonical formatting."}),b.jsx("button",{className:"ghost",onClick:o,children:"Close"})]})}),P2=({text:n,options:a,onClose:o})=>b.jsx("div",{className:"preview-overlay",onClick:o,children:b.jsxs("div",{className:"preview-panel",onClick:s=>s.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Quick Preview"}),b.jsx("div",{className:"preview-bubble large",children:n||"(empty)"}),a.length?b.jsx("div",{className:"preview-options",children:a.map(s=>b.jsx("span",{className:"chip",children:s},s))}):null,b.jsx("div",{className:"preview-meta",children:"Preview mode: literal"}),b.jsx("button",{className:"ghost",onClick:o,children:"Close"})]})}),eA=({mode:n,guidanceModule:a,narrative:o,onClose:s})=>{const[c,f]=A.useState(!0),[d,h]=A.useState(!1),[g,m]=A.useState([]),[y,p]=A.useState(null),[S,_]=A.useState(null),q=A.useMemo(()=>a&&y?.kind==="menu"?Gt(a,y.id):null,[a,y]),C=A.useMemo(()=>a&&y?.kind==="node"?Ut(a,y.id):null,[a,y]),k=A.useMemo(()=>o&&S?ut(o,S):null,[o,S]),M=A.useCallback((te,oe)=>{if(!o)return{finalId:null,lines:[]};const me=ut(o,te);if(!me)return{finalId:null,lines:[{speaker:"system",text:`Missing node: ${te}`}]};const ve=[];oe&&ve.push({speaker:"user",text:oe});let z=me,B=0;for(;z&&B<8;){if(ve.push({speaker:z.speaker==="user"?"user":"sensei",text:z.text||"(empty)"}),z.speaker==="user"&&z.next){const N=ut(o,z.next);if(N){z=N,B+=1;continue}}break}return{finalId:z?.id??me.id,lines:ve}},[o]),O=A.useCallback(()=>{if(!a){p(null),m([{speaker:"system",text:"No guidance module loaded."}]);return}const te=wi(a.meta.rootMenu,a)??(a.menus[0]?{kind:"menu",id:a.menus[0].id}:null);if(!te){p(null),m([{speaker:"system",text:"No root menu found."}]);return}if(p(te),te.kind==="menu"){const me=Gt(a,te.id);m([{speaker:"sensei",text:me?.text||"(empty)"}]);return}const oe=Ut(a,te.id);m([{speaker:oe?.speaker==="user"?"user":"sensei",text:oe?.text||"(empty)"}])},[a]),U=A.useCallback(()=>{if(!o){_(null),m([{speaker:"system",text:"No narrative loaded."}]);return}const te=o.nodes.find(me=>me.id.startsWith("stage.1."))??o.nodes[0];if(!te){_(null),m([{speaker:"system",text:"No narrative nodes found."}]);return}const oe=M(te.id);_(oe.finalId),m(oe.lines)},[M,o]),w=A.useCallback(()=>{n==="guidance"?O():U()},[n,O,U]);A.useEffect(()=>{w()},[w]);const J=A.useCallback(te=>{if(!a)return;const oe=an(a,te);if(!oe)return;const me=wi(oe.target,a);if(!me){m(ve=>[...ve,{speaker:"user",text:oe.label||oe.id},{speaker:"system",text:"Option target is missing."}]);return}p(me),m(ve=>{const z=[...ve,{speaker:"user",text:oe.label||oe.id}];if(me.kind==="menu"){const N=Gt(a,me.id);return z.push({speaker:"sensei",text:N?.text||"(empty)"}),z}const B=Ut(a,me.id);return z.push({speaker:B?.speaker==="user"?"user":"sensei",text:B?.text||"(empty)"}),z})},[a]),Q=A.useCallback(()=>{if(!a||!C?.next)return;const te=wi(C.next,a);if(!te){m(oe=>[...oe,{speaker:"system",text:"Next target is missing."}]);return}p(te),m(oe=>{const me=[...oe];if(te.kind==="menu"){const z=Gt(a,te.id);return me.push({speaker:"sensei",text:z?.text||"(empty)"}),me}const ve=Ut(a,te.id);return me.push({speaker:ve?.speaker==="user"?"user":"sensei",text:ve?.text||"(empty)"}),me})},[a,C]),W=A.useCallback(te=>{if(!o)return;const oe=_c(o,te),me=M(te,oe);me.finalId&&(_(me.finalId),m(ve=>[...ve,...me.lines]))},[M,o]),ce=A.useCallback(te=>{const oe=M(te);oe.finalId&&(_(oe.finalId),m(me=>[...me,...oe.lines]))},[M]),ue=A.useCallback(()=>{if(!o||!k)return;const te=k.id.match(/^stage\.(\d+)\./);if(!te){m(B=>[...B,{speaker:"system",text:"Unable to determine stage."}]);return}const oe=Number(te[1]);if(Number.isNaN(oe))return;const me=oe+1,ve=o.nodes.find(B=>B.id.startsWith(`stage.${me}.`));if(!ve){m(B=>[...B,{speaker:"system",text:"Narrative complete."}]);return}const z=M(ve.id);z.finalId&&(_(z.finalId),m(B=>[...B,...z.lines]))},[M,o,k]);return b.jsx("div",{className:"sim-overlay",onClick:s,children:b.jsxs("div",{className:`sim-shell ${c?"show-transcript":"hide-transcript"} ${d?"show-stats":"hide-stats"}`,onClick:te=>te.stopPropagation(),children:[c?b.jsxs("div",{className:"sim-transcript",children:[b.jsx("div",{className:"sim-title",children:"Transcript"}),b.jsx("div",{className:"sim-log",children:g.length?g.map((te,oe)=>b.jsxs("div",{className:"sim-line",children:[b.jsx("span",{className:`sim-speaker ${te.speaker}`,children:te.speaker}),b.jsx("span",{children:te.text})]},`${te.speaker}-${oe}`)):b.jsx("div",{className:"muted",children:"No simulation yet."})})]}):null,b.jsxs("div",{className:"sim-panel",children:[b.jsxs("div",{className:"sim-header",children:[b.jsxs("div",{children:[b.jsx("div",{className:"panel-title",children:"Simulator"}),b.jsxs("div",{className:"sim-subtitle",children:["Mode: ",n==="guidance"?"Guidance":"Narrative"]})]}),b.jsxs("div",{className:"sim-actions",children:[b.jsx("button",{className:"ghost",onClick:()=>f(te=>!te),children:"Transcript"}),b.jsx("button",{className:"ghost",onClick:()=>h(te=>!te),children:"Stats"}),b.jsx("button",{className:"ghost",onClick:w,children:"Reset"}),b.jsx("button",{className:"ghost",onClick:s,children:"Close"})]})]}),b.jsx("div",{className:"sim-body",children:n==="guidance"?b.jsxs("div",{className:"sim-card sim-center",children:[b.jsx("div",{className:"sim-title",children:y?.kind==="menu"?"Menu":y?.kind==="node"?"Node":"Flow"}),b.jsx("div",{className:"sim-text",children:y?.kind==="menu"?q?.text||"(empty)":C?.text||"(empty)"}),b.jsxs("div",{className:"sim-options",children:[y?.kind==="menu"&&q?q.options.map(te=>{const oe=an(a,te);return oe?b.jsx("button",{className:"ghost",onClick:()=>J(te),children:oe.label||te},te):null}):null,y?.kind==="node"&&C?C.options.length?C.options.map(te=>{const oe=an(a,te);return oe?b.jsx("button",{className:"ghost",onClick:()=>J(te),children:oe.label||te},te):null}):C.next?b.jsx("button",{className:"ghost",onClick:Q,children:"Continue"}):null:null,y&&!q&&!C?b.jsx("div",{className:"sim-dead-end",children:"Current node is missing."}):null]})]}):b.jsxs("div",{className:"sim-card sim-center",children:[b.jsx("div",{className:"sim-title",children:"Node"}),b.jsx("div",{className:"sim-text",children:k?.text||"(empty)"}),k?.quest?b.jsx("div",{className:"sim-list",children:b.jsxs("div",{className:"sim-list-item",children:[b.jsxs("div",{children:["quest: ",k.quest.questType]}),b.jsx("div",{className:"muted",children:k.quest.gameTitle||k.quest.gameSystem||"quest details"})]})}):null,b.jsxs("div",{className:"sim-options",children:[k?.options.length?k.options.map(te=>b.jsx("button",{className:"ghost",onClick:()=>W(te),children:o?_c(o,te):te},te)):k?.next?b.jsx("button",{className:"ghost",onClick:()=>ce(k.next),children:"Continue"}):null,k?.completion?b.jsx("button",{className:"ghost",onClick:ue,children:"Advance stage"}):null,k&&k.options.length===0&&!k.next&&!k.quest&&!k.completion?b.jsx("div",{className:"sim-dead-end",children:"No outgoing path from this node. Add a next link or choices."}):null]})]})})]}),d?b.jsxs("div",{className:"sim-stats",children:[b.jsx("div",{className:"sim-title",children:"Session"}),b.jsxs("div",{className:"panel-note",children:["Current node: ",n==="guidance"?y?.id||"-":S||"-"]}),b.jsxs("div",{className:"panel-note",children:["Transcript lines: ",g.length]}),b.jsx("div",{className:"panel-note",children:"Conditions and actions are not executed in this simplified simulator."})]}):null]})})},tA=["focus_minutes_today >= 5","focus_sessions_today >= 1","meditation_minutes_today >= 5","tasks_total > 0","tasks_done >= 1","tasks_done >= 3","routines_total > 0","routines_done >= 1","narratives_available > 0","narrative_active > 0","quests_active > 0","quests_claimable > 0","quest_slots_open > 0","quests_abandonable > 0","has_unseen_completion > 0","guided_routine_pending > 0","focus_rewarded_today == 0","meditation_rewarded_today == 0","has_roms > 0","needs_ra_scan > 0","ra_achievement_ready > 0","hour >= 5","hour < 21","phase == 0","rec_active > 0","narratives_completed_total > 0","narrative_completed.intro > 0","total_visits > 0","current_streak > 0","longest_streak > 0","mem_narratives_completed > 0","mem_quests_completed > 0","flag.daily.reading_done == 1","flag.weekly.review_done == 1","flag.perm.intro_complete == 1"],nA=["tasks.today","routines.today","guided_routines.pending","focus.today","focus.unrewarded","narratives.available","narratives.completed","narratives.active","quests.active","quests.abandonable"],iA=["goto menu.guidance.root","reward_focus","reward_meditation","pick_game","accept_game","claim_achievement","abandon_quest","abandon_quest {id}","mark_completion_seen","mark_routine_done","mark_routine_done {id}","open_ra_scan","set_flag daily reading_done 1","inc_flag daily sessions 1","clear_flag daily reading_done","award_minutes 10","award_exp 300","open_narratives","start_narrative {id}","accept_quest","accept_quest node.example","advance_stage","exit"],aA=["{title_name}","{date}","{week}","{focus_minutes}","{focus_minutes_today}","{focus_sessions}","{focus_sessions_today}","{meditation_minutes}","{meditation_minutes_today}","{tasks_total}","{tasks_done}","{routines_total}","{routines_done}","{narratives_available}","{quests_active}","{rec_title}","{rec_system}","{rec_minutes}","{achievement_desc}","{claim_detail}","{routine_action}","{routine_minutes}","{phase_name}","{hour}","{total_visits}","{current_streak}","{longest_streak}","{days_since_first}","{mem_narratives_completed}","{mem_quests_completed}","{title}","{detail}","{system}","{minutes}"],lA=["{id}","{title}","{detail}","{date}","{system}","{minutes}","{done}","{stage}","{stage_total}"],oA=(n,a)=>({meta:{id:n,title:a,priority:0,enabled:!0,rootMenu:"menu.guidance.root"},menus:[{id:"menu.guidance.root",text:"welcome. where do you want to begin?",options:["option.start"],requires:[]}],nodes:[{id:"node.start",speaker:"sensei",text:"begin writing your first dialogue here.",options:[],requires:[],next:void 0,actions:[]}],options:[{id:"option.start",label:"begin",target:"node.start",actions:[],requires:[]}]}),sA=(n,a)=>({meta:{id:n,title:a,description:"A new narrative quest.",author:"Sensei",version:1},rewards:{expPerStage:300,finalExpBonus:600},nodes:[{id:"stage.1.intro",speaker:"sensei",color:Fn[0],text:"set the stage for your journey.",options:["stage.1.accept","stage.1.later"],requires:[],actions:[]},{id:"stage.1.accept",speaker:"user",text:"i accept this quest.",options:[],requires:[],actions:["accept_quest"],next:"stage.1.quest"},{id:"stage.1.later",speaker:"user",text:"not now.",options:[],requires:[],actions:["exit"]},{id:"stage.1.quest",speaker:"sensei",color:Fn[1],text:"define the first challenge.",options:[],requires:[],actions:[],quest:{questType:"play_console",gameSystem:"FC",durationMinutes:5},next:"stage.1.complete"},{id:"stage.1.complete",speaker:"sensei",color:Fn[2],text:"well done. continue forward.",options:["stage.1.advance"],requires:[],actions:[],completion:!0},{id:"stage.1.advance",speaker:"user",text:"let us continue.",options:[],requires:[],actions:["advance_stage"]}]}),yo=()=>Fn[Math.floor(Math.random()*Fn.length)];function rA(){const n=A.useRef(null),a=It(x=>x.mode),o=It(x=>x.setMode),s=It(x=>x.setProjectName),c=It(x=>x.setShowSimulator),f=it(x=>x.guidanceDocs),d=it(x=>x.narrativeDocs),h=it(x=>x.setGuidanceDocs),g=it(x=>x.setNarrativeDocs),m=it(x=>x.setActiveGuidanceId),y=it(x=>x.setActiveNarrativeId),p=it(x=>x.activeGuidanceId),S=it(x=>x.activeNarrativeId),_=it(x=>x.updateGuidanceDoc),q=it(x=>x.updateNarrativeDoc),C=it(x=>x.setTokens),k=it(x=>x.setVariables),M=Ve(x=>x.selectedGuidanceId),O=Ve(x=>x.selectedNarrativeId),U=Ve(x=>x.setSelectedGuidanceId),w=Ve(x=>x.setSelectedNarrativeId),J=Ve(x=>x.setStageFilter),Q=Ve(x=>x.setGuidancePositions),W=Ve(x=>x.setNarrativePositions),ce=Ve(x=>x.setGuidanceAnchorPositions),ue=Ve(x=>x.setNarrativeAnchorPositions),te=fo(x=>x.pushGuidanceSnapshot),oe=fo(x=>x.pushNarrativeSnapshot),me=fo(x=>x.undoGuidance),ve=fo(x=>x.redoGuidance),z=fo(x=>x.undoNarrative),B=fo(x=>x.redoNarrative),N=It(x=>x.showPreview),L=It(x=>x.setShowPreview),ne=It(x=>x.showSimulator),I=It(x=>x.showSettings),se=It(x=>x.setShowSettings),D=it(x=>x.variables),V=Ve(x=>x.inventoryOverrides),de=Ve(x=>x.setInventoryOverrides),ge=Ve(x=>x.extraGuidanceConditions),we=Ve(x=>x.extraGuidanceActions),Ce=Ve(x=>x.extraNarrativeConditions),ke=Ve(x=>x.extraNarrativeActions),Re=Ht(x=>x.quickEditTarget),Oe=Ht(x=>x.quickEditValue),$e=Ht(x=>x.setQuickEditValue),at=Ht(x=>x.closeQuickEdit),Pe=Ht(x=>x.conditionEditTarget),Et=Ht(x=>x.conditionEditValue),gt=Ht(x=>x.setConditionEditValue),et=Ht(x=>x.closeConditionEdit),pt=Ht(x=>x.actionEditTarget),Fe=Ht(x=>x.actionEditValue),je=Ht(x=>x.setActionEditValue),_t=Ht(x=>x.closeActionEdit),Qt=Ht(x=>x.inventoryEditTarget),vn=Ht(x=>x.inventoryEditValue),Mn=Ht(x=>x.setInventoryEditValue),_n=Ht(x=>x.closeInventoryEdit),[wt,zn]=A.useState(!1),[tt,Rt]=A.useState(null),[cn,qt]=A.useState(""),[wn,dt]=A.useState(""),[De,ie]=A.useState(null),ee=Rc(),be=Mf(),Be=Yb(),ft=A.useMemo(()=>ee?new Map(ee.module.options.map(x=>[x.id,x])):new Map,[ee]),Xe=A.useMemo(()=>Be.find(x=>Rs(x)===M),[Be,M]),Tt=A.useMemo(()=>be?.narrative.nodes.find(x=>x.id===O),[be,O]),Qe=A.useMemo(()=>be?Xv(be.narrative):new Set,[be]),Ze=A.useMemo(()=>{const x=a==="guidance"?Xb(ee?.module):Zb(be?.narrative),H=a==="guidance"?ge[p]??[]:Ce[S]??[];return Array.from(new Set([...x,...H,...tA])).map(T=>T.trim()).filter(Boolean).sort((T,R)=>T.localeCompare(R))},[a,ee,be,ge,Ce,p,S]),$t=A.useMemo(()=>{const x=a==="guidance"?Ib(ee?.module):Qb(be?.narrative),H=a==="guidance"?we[p]??[]:ke[S]??[];return Array.from(new Set([...x,...H,...iA])).map(T=>T.trim()).filter(Boolean).sort((T,R)=>T.localeCompare(R))},[a,ee,be,we,ke,p,S]),vt=A.useRef(!1);A.useEffect(()=>{vt.current||(vt.current=!0,h([]),g([]),C([]),k([]),s("untitled"),m(""),y(""),U(""),w(""))},[h,g,C,k,s,m,y,U,w]);const mt=Ve(x=>x.guidancePositions),An=Ve(x=>x.guidanceAnchorPositions),ni=Ve(x=>x.narrativePositions),Bi=Ve(x=>x.narrativeAnchorPositions),ma=A.useCallback(()=>({docs:f,positions:mt,activeId:p,selectedId:M}),[p,f,mt,M]),Ti=A.useCallback(()=>({docs:d,positions:ni,activeId:S,selectedId:O}),[S,d,ni,O]),We=A.useCallback(()=>{te(ma())},[ma,te]),lt=A.useCallback(()=>{oe(Ti())},[Ti,oe]);A.useEffect(()=>{const x=T=>{if(!(T instanceof HTMLElement))return!1;const R=T.tagName.toLowerCase();return R==="input"||R==="textarea"?!0:T.isContentEditable},H=T=>{if(x(T.target))return;const R=T.key.toLowerCase();if(T.ctrlKey||T.metaKey){if(R==="z")if(T.preventDefault(),T.shiftKey)if(a==="guidance"){const X=ve();X&&ga(X)}else{const X=B();X&&pa(X)}else if(a==="guidance"){const X=me();X&&ga(X)}else{const X=z();X&&pa(X)}else if(R==="y")if(T.preventDefault(),a==="guidance"){const X=ve();X&&ga(X)}else{const X=B();X&&pa(X)}}};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[a,me,ve,z,B]);const ga=A.useCallback(x=>{h(x.docs),Q(x.positions),ce(x.positions),m(x.activeId),U(x.selectedId)},[h,Q,ce,m,U]),pa=A.useCallback(x=>{g(x.docs),W(x.positions),ue(x.positions),y(x.activeId),w(x.selectedId)},[g,W,ue,y,w]),yn=A.useCallback((x,H)=>{We(),_(p,T=>({...T,isDirty:!0,module:{...T.module,menus:T.module.menus.map(R=>R.id===x?{...R,...H}:R)}}))},[p,We,_]),un=A.useCallback((x,H)=>{We(),_(p,T=>({...T,isDirty:!0,module:{...T.module,nodes:T.module.nodes.map(R=>R.id===x?{...R,...H}:R)}}))},[p,We,_]),Cn=A.useCallback((x,H)=>{We(),_(p,T=>({...T,isDirty:!0,module:{...T.module,options:T.module.options.map(R=>R.id===x?{...R,...H}:R)}}))},[p,We,_]),tl=A.useCallback(x=>{We();const H=`opt_${Date.now()}`,T={id:H,label:"New Choice",target:"",actions:[],requires:[]};_(p,R=>{const j=R.module.menus.some(K=>K.id===x),X=R.module.nodes.some(K=>K.id===x);return{...R,isDirty:!0,module:{...R.module,menus:j?R.module.menus.map(K=>K.id===x?{...K,options:[...K.options,H]}:K):R.module.menus,nodes:X?R.module.nodes.map(K=>K.id===x?{...K,options:[...K.options,H]}:K):R.module.nodes,options:[...R.module.options,T]}}})},[p,We,_]),Ln=A.useCallback((x,H)=>{We(),_(p,T=>{const R=T.module.menus.some(X=>X.id===x),j=T.module.nodes.some(X=>X.id===x);return{...T,isDirty:!0,module:{...T.module,menus:R?T.module.menus.map(X=>X.id===x?{...X,options:X.options.filter(K=>K!==H)}:X):T.module.menus,nodes:j?T.module.nodes.map(X=>X.id===x?{...X,options:X.options.filter(K=>K!==H)}:X):T.module.nodes,options:T.module.options.filter(X=>X.id!==H)}}})},[p,We,_]),Kt=A.useCallback((x,H)=>{We(),_(p,T=>({...T,isDirty:!0,module:{...T.module,menus:T.module.menus.map(R=>R.id===x?{...R,options:H}:R),nodes:T.module.nodes.map(R=>R.id===x?{...R,options:H}:R)}}))},[p,We,_]),bt=A.useCallback((x,H)=>{lt(),q(S,T=>({...T,isDirty:!0,narrative:{...T.narrative,nodes:T.narrative.nodes.map(R=>R.id===x?{...R,...H}:R)}}))},[S,lt,q]),gi=A.useCallback((x,H)=>{lt(),q(S,T=>({...T,isDirty:!0,narrative:{...T.narrative,nodes:T.narrative.nodes.map(R=>R.id===x&&R.quest?{...R,quest:{...R.quest,...H}}:R)}}))},[S,lt,q]),nl=A.useCallback((x,H,T)=>{_(p,R=>x==="menu"?{...R,isDirty:!0,module:{...R.module,menus:R.module.menus.map(j=>j.id===H?{...j,text:T}:j)}}:x==="option"?{...R,isDirty:!0,module:{...R.module,options:R.module.options.map(j=>j.id===H?{...j,label:T}:j)}}:{...R,isDirty:!0,module:{...R.module,nodes:R.module.nodes.map(j=>j.id===H?{...j,text:T}:j)}})},[p,_]),Do=A.useCallback((x,H)=>{if(!ee)return;const R=(x==="menu"?Gt(ee.module,H):Ut(ee.module,H))?.text;R!==void 0&&Ht.getState().openQuickEdit({scope:"guidance-main",kind:x,nodeId:H},R)},[ee]),Mo=A.useCallback((x,H)=>{if(!ee)return;const T=jt(H);if(T===null)return;const R=Gt(ee.module,x),j=Ut(ee.module,x),X=R?R.options[T]:j?j.options[T]:void 0;if(!X)return;const K=an(ee.module,X);K&&Ht.getState().openQuickEdit({scope:"guidance-choice",sourceId:x,optionIndex:T},K.label)},[ee]),va=A.useCallback(x=>{We();const H=`opt_${Date.now()}`,T={id:H,label:"New Choice",target:"",actions:[],requires:[]};_(p,R=>{const j=R.module.menus.some(K=>K.id===x),X=R.module.nodes.some(K=>K.id===x);return{...R,isDirty:!0,module:{...R.module,menus:j?R.module.menus.map(K=>K.id===x?{...K,options:[...K.options,H]}:K):R.module.menus,nodes:X?R.module.nodes.map(K=>K.id===x?{...K,options:[...K.options,H]}:K):R.module.nodes,options:[...R.module.options,T]}}})},[p,We,_]),Yi=A.useCallback(x=>{const H=it.getState(),T=H.activeGuidanceId,R=H.guidanceDocs.find(Ae=>Ae.id===T);if(!R)return;const j=Gt(R.module,x),X=Ut(R.module,x);if(!j&&!X)return;const K=j?.requires[0]??X?.requires[0]??Ze[0]??"new_condition";Rt({mode:"guidance",kind:"condition",nodeId:x}),qt(K),dt("")},[Ze]),il=A.useCallback(x=>{const H=it.getState(),T=H.activeGuidanceId,R=H.guidanceDocs.find(G=>G.id===T);if(!R)return;const j=Gt(R.module,x),X=Ut(R.module,x),K=j?j.options:X?X.options:[];if(!K.length)return;const Ae=K.map(G=>{const $=an(R.module,G);if(!$)return null;const P=($.label||$.id||"").trim()||$.id;return{id:$.id,label:P}}).filter(G=>!!G);if(!Ae.length)return;const he=an(R.module,Ae[0].id)?.actions[0]??$t[0]??"new_action";Rt({mode:"guidance",kind:"action",nodeId:x,optionTargets:Ae}),dt(Ae[0].id),qt(he)},[$t]),Di=A.useCallback((x,H)=>{We(),_(p,T=>({...T,isDirty:!0,module:{...T.module,menus:T.module.menus.map(R=>R.id===x?{...R,options:H}:R),nodes:T.module.nodes.map(R=>R.id===x?{...R,options:H}:R)}}))},[p,We,_]),pi=A.useCallback((x,H)=>{lt(),q(S,T=>({...T,isDirty:!0,narrative:{...T.narrative,nodes:T.narrative.nodes.map(R=>R.id===x?{...R,options:H}:R)}}))},[S,lt,q]),$i=A.useCallback(x=>{if(!ee||!x.source||!x.target)return;const H=ee.module;if(Yn(x.source)){const X=Ia(x.source);if(!X)return;const K=la(H,x.target);if(K!=="menu"&&K!=="node"||!x.targetHandle||!x.targetHandle.startsWith("act:"))return;if(x.targetHandle==="act:node"){if(K==="menu"){const $=Gt(H,x.target);if(!$)return;yn($.id,{itemAction:X});return}if(K!=="node")return;const G=Ut(H,x.target);if(!G)return;un(G.id,{actions:oa(G.actions,X)});return}const Ae=x.targetHandle.slice(4),he=jt(Ae);if(he!==null){const G=Gt(H,x.target),$=Ut(H,x.target),P=G?G.options[he]:$?$.options[he]:void 0;if(!P)return;Cn(P,{actions:oa(an(H,P)?.actions??[],X)})}return}if(Bn(x.source)){const X=Za(x.source);if(!X)return;const K=la(H,x.target);if(K!=="menu"&&K!=="node"||!x.targetHandle)return;if(x.targetHandle==="cond:node"){if(K==="menu"){const $=Gt(H,x.target);if(!$)return;yn($.id,{requires:di($.requires,X)});return}const G=Ut(H,x.target);if(!G)return;un(G.id,{requires:di(G.requires,X)});return}const Ae=x.targetHandle.startsWith("cond:")?x.targetHandle.slice(5):x.targetHandle,he=jt(Ae);if(he!==null){const G=Gt(H,x.target),$=Ut(H,x.target),P=G?G.options[he]:$?$.options[he]:void 0;if(!P)return;const ye=an(H,P);if(!ye)return;Cn(ye.id,{requires:di(ye.requires,X)});return}return}const T=la(H,x.source),R=la(H,x.target),j=jt(x.sourceHandle);if(!(!T||!R)){if(T==="menu"){const X=Gt(H,x.source);if(!X)return;if((R==="menu"||R==="node")&&j!==null){const Ae=X.options[j];if(!Ae)return;Cn(Ae,{target:x.target});return}if(R!=="option")return;let K=X.options.slice();if(j!==null){for(;K.length<=j;)K.push(x.target);K[j]=x.target}else K=Array.from(new Set([...X.options,x.target]));yn(X.id,{options:K});return}if(T==="node"){const X=Ut(H,x.source);if(!X)return;if(x.sourceHandle==="next"){if(R==="menu"||R==="node"){un(X.id,{next:x.target});return}return}if(R==="option"){let K=X.options.slice();if(j!==null){for(;K.length<=j;)K.push(x.target);K[j]=x.target}else K=Array.from(new Set([...X.options,x.target]));un(X.id,{options:K});return}if((R==="menu"||R==="node")&&j!==null){const K=X.options[j];if(!K)return;Cn(K,{target:x.target});return}if(R==="menu"||R==="node"){un(X.id,{next:x.target});return}}if(T==="option"){if((x.sourceHandle==="target"||!x.sourceHandle)&&(R==="menu"||R==="node")){Cn(x.source,{target:x.target});return}return}}},[ee,yn,un,Cn]),Mi=A.useCallback((x,H,T,R="source")=>{if(!ee)return;const j=ee.module;if(R==="target"&&H){if(H.startsWith("cond:")){const G=la(j,x);if(G!=="menu"&&G!=="node")return;let $=Ze[0]??"new_condition";if(H==="cond:node"){const P=Gt(j,x),ye=Ut(j,x);$=P?.requires[0]??ye?.requires[0]??$}else{const P=H.slice(5),ye=jt(P),Te=ye===null?void 0:G==="menu"?Gt(j,x)?.options[ye]:Ut(j,x)?.options[ye];$=(Te?an(j,Te):void 0)?.requires[0]??$}Rt({mode:"guidance",kind:"condition",nodeId:x}),qt($),dt(""),ie({mode:"guidance",kind:"condition",nodeId:x,targetHandle:H,position:T});return}if(H.startsWith("act:")){const G=la(j,x);if(G!=="menu"&&G!=="node")return;let $=$t[0]??"new_action";if(H==="act:node")G==="menu"?$=Gt(j,x)?.itemAction?.trim()||$:$=Ut(j,x)?.actions[0]??$;else{const P=H.slice(4),ye=jt(P);if(ye===null)return;const Te=G==="menu"?Gt(j,x)?.options[ye]:Ut(j,x)?.options[ye];$=(Te?an(j,Te):void 0)?.actions[0]??$}Rt({mode:"guidance",kind:"action",nodeId:x}),qt($),dt(""),ie({mode:"guidance",kind:"action",nodeId:x,targetHandle:H,position:T})}return}const X=la(j,x);if(X!=="menu"&&X!=="node")return;const K=jt(H);if(K===null)return;if(X==="menu"){const G=Gt(j,x);if(!G||!G.options[K])return}if(X==="node"){const G=Ut(j,x);if(!G||!G.options[K])return}const Ae=new Set([...j.menus.map(G=>G.id),...j.nodes.map(G=>G.id),...j.options.map(G=>G.id)]),he=qi("node.new_dialogue",Ae);We(),_(p,G=>{let $=G.module.nodes,P=G.module.options;if(X==="menu"){const Te=Gt(G.module,x)?.options[K];if(!Te)return G;P=P.map(Ne=>Ne.id===Te?{...Ne,target:he}:Ne)}if(X==="node"){const Te=Ut(G.module,x)?.options[K];if(!Te)return G;P=P.map(Ne=>Ne.id===Te?{...Ne,target:he}:Ne)}return{...G,isDirty:!0,module:{...G.module,nodes:$.concat([{id:he,color:yo(),speaker:"sensei",text:"new dialogue node",options:[],requires:[],next:void 0,actions:[]}]),options:P}}}),Q({...mt,[he]:T}),ce({...An,[he]:T}),U(he)},[ee,p,$t,Ze,mt,An,We,dt,Rt,qt,ce,Q,ie,U,_]),Jt=A.useCallback(x=>{if(!ee||x.length===0)return;We();const H=new Map,T=[],R=[];x.forEach(j=>{if(!(!j.source||!j.target)){if(Yn(j.source)&&j.targetHandle?.startsWith("act:")){const X=Ia(j.source);X&&R.push({action:X,targetId:j.target,targetHandle:j.targetHandle});return}if(Bn(j.source)&&j.targetHandle?.startsWith("cond:")){const X=Za(j.source);X&&T.push({condition:X,targetId:j.target,targetHandle:j.targetHandle});return}H.has(j.source)||H.set(j.source,new Set),H.get(j.source)?.add(`${j.sourceHandle??""}|${j.target}`)}}),_(p,j=>{let X=!1,K=j.module.menus,Ae=j.module.nodes,he=j.module.options.slice();const G=($,P,ye)=>{const Te=he.find(ze=>ze.id===$);if(!Te?.target)return;const Ne=wi(Te.target,j.module)?.id;Ne&&(ye.has(`${ei(P)}|${Ne}`)||ye.has(`|${Ne}`))&&(he=he.map(ze=>ze.id===Te.id?{...ze,target:void 0}:ze),X=!0)};for(const $ of K){const P=H.get($.id);P&&$.options.forEach((ye,Te)=>G(ye,Te,P))}if(Ae=Ae.map($=>{const P=H.get($.id);if(!P)return $;let ye=!1,Te=$.next;const Ne=wi(Te,j.module)?.id;return(Te&&(P.has(`next|${Te}`)||P.has(`|${Te}`))||Te&&Ne&&(P.has(`next|${Ne}`)||P.has(`|${Ne}`)))&&(Te=void 0,ye=!0,X=!0),$.options.forEach((ze,_e)=>G(ze,_e,P)),ye?{...$,next:Te}:$}),he=he.map($=>{const P=H.get($.id);return P&&$.target&&(P.has(`target|${$.target}`)||P.has(`|${$.target}`)||wi($.target,j.module)?.id&&(P.has(`target|${wi($.target,j.module)?.id}`)||P.has(`|${wi($.target,j.module)?.id}`)))?(X=!0,{...$,target:void 0}):$}),T.length)for(const $ of T){if($.targetHandle==="cond:node"){K=K.map(_e=>{if(_e.id!==$.targetId)return _e;const Me=oc(_e.requires,$.condition);return Me.length===_e.requires.length?_e:(X=!0,{..._e,requires:Me})}),Ae=Ae.map(_e=>{if(_e.id!==$.targetId)return _e;const Me=oc(_e.requires,$.condition);return Me.length===_e.requires.length?_e:(X=!0,{..._e,requires:Me})});continue}const P=$.targetHandle.startsWith("cond:")?$.targetHandle.slice(5):$.targetHandle,ye=jt(P);if(ye===null)continue;const Te=K.find(_e=>_e.id===$.targetId),Ne=Ae.find(_e=>_e.id===$.targetId),ze=Te?Te.options[ye]:Ne?Ne.options[ye]:void 0;ze&&(he=he.map(_e=>{if(_e.id!==ze)return _e;const Me=oc(_e.requires,$.condition);return Me.length===_e.requires.length?_e:(X=!0,{..._e,requires:Me})}))}if(R.length)for(const $ of R){if($.targetHandle==="act:node"){K=K.map(_e=>{if(_e.id!==$.targetId)return _e;const Me=(_e.itemAction??"").trim();return!Me||Me!==$.action.trim()?_e:(X=!0,{..._e,itemAction:""})}),Ae=Ae.map(_e=>{if(_e.id!==$.targetId)return _e;const Me=Qd(_e.actions,$.action);return Me.length===_e.actions.length?_e:(X=!0,{..._e,actions:Me})});continue}const P=$.targetHandle.startsWith("act:")?$.targetHandle.slice(4):$.targetHandle,ye=jt(P);if(ye===null)continue;const Te=K.find(_e=>_e.id===$.targetId),Ne=Ae.find(_e=>_e.id===$.targetId),ze=Te?Te.options[ye]:Ne?Ne.options[ye]:void 0;ze&&(he=he.map(_e=>{if(_e.id!==ze)return _e;const Me=Qd(_e.actions,$.action);return Me.length===_e.actions.length?_e:(X=!0,{..._e,actions:Me})}))}return X?{...j,isDirty:!0,module:{...j.module,menus:K,nodes:Ae,options:he}}:j})},[ee,p,We,_]),Tl=A.useCallback(x=>{if(!ee||!p||x.length===0)return;const H=new Set,T=new Set,R=new Set;for(const G of x){if(Bn(G.id)){const $=Za(G.id)?.trim();$&&(H.add(G.id),T.add($));continue}if(Yn(G.id)){const $=Ia(G.id)?.trim();$&&(H.add(G.id),R.add($))}}if(!H.size)return;We(),(T.size||R.size)&&_(p,G=>{let $=!1;const P=G.module.menus.map(Ne=>{const ze=T.size?Ne.requires.filter(Me=>!T.has(Me.trim())):Ne.requires,_e=R.size&&(Ne.itemAction??"").trim()&&R.has((Ne.itemAction??"").trim())?"":Ne.itemAction;return ze.length===Ne.requires.length&&(_e??"")===(Ne.itemAction??"")?Ne:($=!0,{...Ne,requires:ze,itemAction:_e})}),ye=G.module.nodes.map(Ne=>{const ze=T.size?Ne.requires.filter(Me=>!T.has(Me.trim())):Ne.requires,_e=R.size?Ne.actions.filter(Me=>!R.has(Me.trim())):Ne.actions;return ze.length===Ne.requires.length&&_e.length===Ne.actions.length?Ne:($=!0,{...Ne,requires:ze,actions:_e})}),Te=G.module.options.map(Ne=>{const ze=T.size?Ne.requires.filter(Me=>!T.has(Me.trim())):Ne.requires,_e=R.size?Ne.actions.filter(Me=>!R.has(Me.trim())):Ne.actions;return ze.length===Ne.requires.length&&_e.length===Ne.actions.length?Ne:($=!0,{...Ne,requires:ze,actions:_e})});return $?{...G,isDirty:!0,module:{...G.module,menus:P,nodes:ye,options:Te}}:G});const j=Ve.getState();if(T.size){const G=j.extraGuidanceConditions[p]??[],$=G.filter(P=>!T.has(P.trim()));$.length!==G.length&&j.setExtraGuidanceConditions({...j.extraGuidanceConditions,[p]:$})}if(R.size){const G=j.extraGuidanceActions[p]??[],$=G.filter(P=>!R.has(P.trim()));$.length!==G.length&&j.setExtraGuidanceActions({...j.extraGuidanceActions,[p]:$})}const X={...j.guidancePositions},K={...j.guidanceAnchorPositions};let Ae=!1,he=!1;for(const G of H)X[G]&&(delete X[G],Ae=!0),K[G]&&(delete K[G],he=!0);Ae&&j.setGuidancePositions(X),he&&j.setGuidanceAnchorPositions(K)},[ee,p,We,_]),Dl=A.useCallback(()=>{},[]),vi=A.useCallback(x=>{x.preventDefault();const H=Bp(x.dataTransfer.getData(uf));if(!H||H.kind!=="condition"&&H.kind!=="action")return;const T=Ve.getState(),j=it.getState().activeGuidanceId;if(j)if(H.kind==="condition"){const X=H.value.trim();if(!X)return;const K=Xa(X),Ae=T.extraGuidanceConditions[j]??[];Ae.includes(X)||T.setExtraGuidanceConditions({...T.extraGuidanceConditions,[j]:[...Ae,X]});const he=T.guidanceFlowInstance;if(he)try{const G=document.querySelector(".react-flow");if(G){const $=G.getBoundingClientRect(),P=he.project({x:x.clientX-$.left,y:x.clientY-$.top});T.setGuidancePositions({...T.guidancePositions,[K]:P}),T.setGuidanceAnchorPositions({...T.guidanceAnchorPositions,[K]:P})}}catch{}}else{const X=H.value.trim();if(!X)return;const K=ra(X),Ae=T.extraGuidanceActions[j]??[];Ae.includes(X)||T.setExtraGuidanceActions({...T.extraGuidanceActions,[j]:[...Ae,X]});const he=T.guidanceFlowInstance;if(he)try{const G=document.querySelector(".react-flow");if(G){const $=G.getBoundingClientRect(),P=he.project({x:x.clientX-$.left,y:x.clientY-$.top});T.setGuidancePositions({...T.guidancePositions,[K]:P}),T.setGuidanceAnchorPositions({...T.guidanceAnchorPositions,[K]:P})}}catch{}}},[]),yi=A.useCallback((x,H,T)=>{We();const R={...mt,...T??{},[H.id]:H.position};Q(R),ce({...An,...T??{},[H.id]:H.position})},[We,mt,An,Q,ce]),zo=A.useCallback((x,H)=>{q(S,T=>({...T,isDirty:!0,narrative:{...T.narrative,nodes:T.narrative.nodes.map(R=>R.id===x?{...R,text:H}:R)}}))},[S,q]),Ml=A.useCallback(x=>{if(!be)return;const H=ut(be.narrative,x);H&&Ht.getState().openQuickEdit({scope:"narrative-main",nodeId:x},H.text)},[be]),zl=A.useCallback((x,H)=>{if(!be)return;const T=jt(H);if(T===null)return;const j=ut(be.narrative,x)?.options[T];if(!j)return;const X=ut(be.narrative,j);X&&Ht.getState().openQuickEdit({scope:"narrative-choice",targetNodeId:j},X.text)},[be]),Vi=A.useCallback(x=>{if(!be)return;lt();const H=new Set(be.narrative.nodes.map(R=>R.id)),T=qi("stage.1.user_reply",H);q(S,R=>({...R,isDirty:!0,narrative:{...R.narrative,nodes:R.narrative.nodes.map(j=>j.id!==x?j:{...j,options:[...j.options,T]}).concat([{id:T,speaker:"user",text:"new player response",options:[],requires:[],actions:[]}])}}))},[be,S,lt,q]),kl=A.useCallback(x=>{const H=it.getState(),T=H.activeNarrativeId,R=H.narrativeDocs.find(K=>K.id===T);if(!R)return;const j=ut(R.narrative,x);if(!j)return;const X=j.requires[0]??Ze[0]??"new_condition";Rt({mode:"narrative",kind:"condition",nodeId:x}),qt(X),dt("")},[Ze]),Ol=A.useCallback(x=>{const H=it.getState(),T=H.activeNarrativeId,R=H.narrativeDocs.find(K=>K.id===T);if(!R)return;const j=ut(R.narrative,x);if(!j)return;const X=j.actions[0]??$t[0]??"new_action";Rt({mode:"narrative",kind:"action",nodeId:x}),qt(X),dt("")},[$t]),xi=A.useCallback((x,H)=>{const T=(H??"").trim().toLowerCase(),R=Fn.findIndex(X=>X.toLowerCase()===T),j=R>=0?Fn[(R+1)%Fn.length]:yo();bt(x,{color:j})},[bt]),kn=A.useCallback((x,H)=>{if(!ee)return;const T=(H??"").trim().toLowerCase(),R=Fn.findIndex(K=>K.toLowerCase()===T),j=R>=0?Fn[(R+1)%Fn.length]:yo(),X=la(ee.module,x);if(X==="menu"){yn(x,{color:j});return}X==="node"&&un(x,{color:j})},[ee,yn,un]),Is=A.useCallback(x=>{if(!be||!x.source||!x.target)return;const H=be.narrative;if(Bn(x.source)){const X=Za(x.source);if(!X)return;const K=ut(H,x.target);if(!K||!x.targetHandle)return;if(x.targetHandle==="cond:node"){bt(K.id,{requires:di(K.requires,X)});return}if(x.targetHandle==="cond:next"){if(!K.next)return;const G=ut(H,K.next);if(!G)return;bt(G.id,{requires:di(G.requires,X)});return}const Ae=x.targetHandle.startsWith("cond:")?x.targetHandle.slice(5):x.targetHandle,he=jt(Ae);if(he!==null){const G=K.options[he];if(!G)return;const $=ut(H,G);if(!$)return;bt($.id,{requires:di($.requires,X)});return}return}if(Yn(x.source)){const X=Ia(x.source);if(!X)return;const K=ut(H,x.target);if(!K||!x.targetHandle)return;if(x.targetHandle==="act:node"){bt(K.id,{actions:oa(K.actions,X)});return}const Ae=x.targetHandle.startsWith("act:")?x.targetHandle.slice(4):x.targetHandle,he=jt(Ae);if(he===null)return;const G=K.options[he];if(!G)return;const $=ut(H,G);if(!$)return;bt($.id,{actions:oa($.actions,X)});return}const T=ut(H,x.source),R=ut(H,x.target),j=jt(x.sourceHandle);!T||!R||(lt(),q(S,X=>({...X,isDirty:!0,narrative:{...X.narrative,nodes:X.narrative.nodes.map(K=>{if(K.id!==T.id)return K;if(x.sourceHandle==="next")return{...K,next:R.id};if(j!==null){const Ae=K.options[j];if(Ae){const G=ut(X.narrative,Ae);if(G&&G.speaker==="user"&&!G.quest&&!G.completion)return K}const he=K.options.slice();for(;he.length<=j;)he.push(R.id);return he[j]=R.id,{...K,options:he}}return K.options.length?K.options.includes(R.id)?K:{...K,options:[...K.options,R.id]}:K.next&&K.next!==R.id?{...K,next:void 0,options:[K.next,R.id]}:{...K,next:R.id}}).map(K=>{if(j===null)return K;const Ae=T.options[j];return K.id!==Ae||K.speaker!=="user"||K.quest||K.completion?K:{...K,next:R.id}})}})))},[be,S,lt,q,bt]),$c=A.useCallback((x,H,T,R="source")=>{if(!be)return;const j=ut(be.narrative,x);if(!j)return;if(R==="target"&&H){if(H.startsWith("cond:")){let G=Ze[0]??"new_condition";if(H==="cond:node")G=j.requires[0]??G;else if(H==="cond:next")G=(j.next?ut(be.narrative,j.next):void 0)?.requires[0]??G;else{const $=H.slice(5),P=jt($),ye=P===null?void 0:j.options[P];G=(ye?ut(be.narrative,ye):void 0)?.requires[0]??G}Rt({mode:"narrative",kind:"condition",nodeId:x}),qt(G),dt(""),ie({mode:"narrative",kind:"condition",nodeId:x,targetHandle:H,position:T});return}if(H.startsWith("act:")){let G=$t[0]??"new_action";if(H==="act:node")G=j.actions[0]??G;else{const $=H.slice(4),P=jt($),ye=P===null?void 0:j.options[P];G=(ye?ut(be.narrative,ye):void 0)?.actions[0]??G}Rt({mode:"narrative",kind:"action",nodeId:x}),qt(G),dt(""),ie({mode:"narrative",kind:"action",nodeId:x,targetHandle:H,position:T});return}}const X=jt(H);if(X===null||!j.options[X])return;const K=new Set(be.narrative.nodes.map(G=>G.id)),Ae=Ec(j.id)??1,he=qi(`stage.${Ae}.new_dialogue`,K);lt(),q(S,G=>({...G,isDirty:!0,narrative:{...G.narrative,nodes:G.narrative.nodes.map($=>{if($.id!==x)return $;const P=$.options[X];if(!P)return $;const ye=ut(G.narrative,P);if(ye&&ye.speaker==="user"&&!ye.quest&&!ye.completion)return $;const Te=$.options.slice();for(;Te.length<=X;)Te.push(he);return Te[X]=he,{...$,options:Te}}).map($=>{const ye=ut(G.narrative,x)?.options[X];return!ye||$.id!==ye||$.speaker!=="user"||$.quest||$.completion?$:{...$,next:he}}).concat([{id:he,speaker:"sensei",color:yo(),text:"new dialogue node",options:[],requires:[],actions:[]}])}})),W({...ni,[he]:T}),ue({...Bi,[he]:T}),w(he)},[be,S,$t,Ze,ni,Bi,lt,dt,Rt,qt,ue,W,ie,w,q]),ko=A.useCallback(x=>{if(!be||x.length===0)return;lt();const H=new Map,T=[],R=[];x.forEach(j=>{if(!(!j.source||!j.target)){if(Bn(j.source)&&j.targetHandle?.startsWith("cond:")){const X=Za(j.source);X&&T.push({condition:X,targetId:j.target,targetHandle:j.targetHandle});return}if(Yn(j.source)&&j.targetHandle?.startsWith("act:")){const X=Ia(j.source);X&&R.push({action:X,targetId:j.target,targetHandle:j.targetHandle});return}H.has(j.source)||H.set(j.source,new Set),H.get(j.source)?.add(`${j.sourceHandle??""}|${j.target}`)}}),q(S,j=>{let X=!1;const K=new Set;let Ae=j.narrative.nodes.map(he=>{const G=H.get(he.id);if(!G)return he;let $=!1,P=he.next,ye=he.options;const Te=el(j.narrative,P,Qe);P&&Te&&(G.has(`next|${Te}`)||G.has(`|${Te}`))&&(P=void 0,$=!0,X=!0);for(const Ne of G){const[ze,_e]=Ne.split("|"),Me=jt(ze);if(Me===null)continue;const Ke=ye[Me];if(!Ke)continue;const St=ut(j.narrative,Ke);if(!St||St.speaker!=="user"||St.quest||St.completion)continue;const Wt=el(j.narrative,Ke,Qe);_e&&Wt&&_e!==Wt||K.add(Ke)}return $?{...he,next:P,options:ye}:he});if(K.size&&(Ae=Ae.map(he=>!K.has(he.id)||!he.next?he:(X=!0,{...he,next:void 0}))),T.length){const he=(G,$)=>{Ae=Ae.map(P=>{if(P.id!==G)return P;const ye=oc(P.requires,$);return ye.length===P.requires.length?P:(X=!0,{...P,requires:ye})})};for(const G of T){const $=Ae.find(Ne=>Ne.id===G.targetId);if(!$)continue;if(G.targetHandle==="cond:node"){he($.id,G.condition);continue}if(G.targetHandle==="cond:next"){$.next&&he($.next,G.condition);continue}const P=G.targetHandle.startsWith("cond:")?G.targetHandle.slice(5):G.targetHandle,ye=jt(P);if(ye===null)continue;const Te=$.options[ye];Te&&he(Te,G.condition)}}if(R.length){const he=(G,$)=>{Ae=Ae.map(P=>{if(P.id!==G)return P;const ye=Qd(P.actions,$);return ye.length===P.actions.length?P:(X=!0,{...P,actions:ye})})};for(const G of R){const $=Ae.find(Ne=>Ne.id===G.targetId);if(!$)continue;if(G.targetHandle==="act:node"){he(G.targetId,G.action);continue}const P=G.targetHandle.startsWith("act:")?G.targetHandle.slice(4):G.targetHandle,ye=jt(P);if(ye===null)continue;const Te=$.options[ye];Te&&he(Te,G.action)}}return X?{...j,isDirty:!0,narrative:{...j.narrative,nodes:Ae}}:j})},[be,S,Qe,lt,q]),Qs=A.useCallback(x=>{if(!be||!S||x.length===0)return;const H=new Set,T=new Set,R=new Set,j=new Set;for(const Ne of x){if(Bn(Ne.id)){const ze=Za(Ne.id)?.trim();if(!ze)continue;H.add(Ne.id),T.add(ze);continue}if(Yn(Ne.id)){const ze=Ia(Ne.id)?.trim();if(!ze)continue;H.add(Ne.id),R.add(ze);continue}H.add(Ne.id),j.add(Ne.id)}if(!H.size)return;lt(),q(S,Ne=>{let ze=!1,_e=Ne.narrative.nodes;if(j.size){const Me=_e.filter(Ke=>!j.has(Ke.id));Me.length!==_e.length&&(_e=Me,ze=!0)}return _e=_e.map(Me=>{let Ke=!1,St=Me.next,Wt=Me.options;if(St&&j.has(St)&&(St=void 0,Ke=!0),Wt.length){const Sa=Wt.filter(Uo=>!j.has(Uo));Sa.length!==Wt.length&&(Wt=Sa,Ke=!0)}const Rn=Me.requires.filter(Sa=>!T.has(Sa.trim())),nr=Me.actions.filter(Sa=>!R.has(Sa.trim()));return Rn.length!==Me.requires.length&&(Ke=!0),nr.length!==Me.actions.length&&(Ke=!0),Ke?(ze=!0,{...Me,next:St,options:Wt,requires:Rn,actions:nr}):Me}),ze?{...Ne,isDirty:!0,narrative:{...Ne.narrative,nodes:_e}}:Ne});const X=Ve.getState(),K=X.extraNarrativeConditions[S]??[],Ae=K.filter(Ne=>!T.has(Ne.trim()));Ae.length!==K.length&&X.setExtraNarrativeConditions({...X.extraNarrativeConditions,[S]:Ae});const he=X.extraNarrativeActions[S]??[],G=he.filter(Ne=>!R.has(Ne.trim()));G.length!==he.length&&X.setExtraNarrativeActions({...X.extraNarrativeActions,[S]:G});const $={...X.narrativePositions},P={...X.narrativeAnchorPositions};let ye=!1,Te=!1;for(const Ne of H)$[Ne]&&(delete $[Ne],ye=!0),P[Ne]&&(delete P[Ne],Te=!0);ye&&X.setNarrativePositions($),Te&&X.setNarrativeAnchorPositions(P)},[be,S,lt,q]),Rl=A.useCallback(()=>{},[]),Vc=A.useCallback(x=>{x.preventDefault();const H=Bp(x.dataTransfer.getData(uf));if(!H||H.kind!=="condition"&&H.kind!=="action")return;const T=Ve.getState(),j=it.getState().activeNarrativeId;if(!j)return;const X=H.value.trim();if(!X)return;const K=H.kind==="condition"?Xa(X):ra(X);if(H.kind==="condition"){const he=T.extraNarrativeConditions[j]??[];he.includes(X)||T.setExtraNarrativeConditions({...T.extraNarrativeConditions,[j]:[...he,X]})}else{const he=T.extraNarrativeActions[j]??[];he.includes(X)||T.setExtraNarrativeActions({...T.extraNarrativeActions,[j]:[...he,X]})}const Ae=T.narrativeFlowInstance;if(Ae)try{const he=document.querySelector(".react-flow");if(he){const G=he.getBoundingClientRect(),$=Ae.project({x:x.clientX-G.left,y:x.clientY-G.top});T.setNarrativePositions({...T.narrativePositions,[K]:$}),T.setNarrativeAnchorPositions({...T.narrativeAnchorPositions,[K]:$})}}catch{}},[]),On=A.useCallback((x,H,T,R)=>{lt();const j={...ni,...R??{},[H.id]:H.position};W(j),ue({...Bi,...R??{},[H.id]:H.position})},[lt,ni,Bi,W,ue]),Oo=A.useCallback(()=>{a==="guidance"?(Q({}),ce({})):(W({}),ue({}))},[a,Q,ce,W,ue]),Ks=A.useCallback(()=>{if(a!=="narrative"||!be)return;const x=new Set(be.narrative.nodes.map(j=>j.id)),H=be.narrative.nodes.map(j=>Ec(j.id)).filter(j=>j!==null),T=(H.length?Math.max(...H):0)+1,R=qi(`stage.${T}.intro`,x);lt(),q(S,j=>({...j,isDirty:!0,narrative:{...j.narrative,nodes:[...j.narrative.nodes,{id:R,speaker:"sensei",color:yo(),text:`stage ${T} begins.`,options:[],requires:[],actions:[]}]}})),w(R),J("narrative",T)},[a,be,S,lt,w,J,q]),Ro=A.useCallback(()=>{if(a==="guidance"){if(!ee)return;We();const x=new Set([...ee.module.menus.map(T=>T.id),...ee.module.nodes.map(T=>T.id),...ee.module.options.map(T=>T.id)]),H=qi("node.new_dialogue",x);_(p,T=>({...T,isDirty:!0,module:{...T.module,nodes:[...T.module.nodes,{id:H,speaker:"sensei",text:"new dialogue node",options:[],requires:[],next:void 0,actions:[]}]}})),U(H)}else{if(!be)return;lt();const x=new Set(be.narrative.nodes.map(T=>T.id)),H=qi("stage.1.new_dialogue",x);q(S,T=>({...T,isDirty:!0,narrative:{...T.narrative,nodes:[...T.narrative.nodes,{id:H,speaker:"sensei",color:yo(),text:"new dialogue node",options:[],requires:[],actions:[]}]}})),w(H)}},[a,ee,p,be,S,We,lt,_,q,U,w]),ya=A.useCallback(()=>{if(a==="guidance"){if(!M)return;va(M)}else{if(!O)return;Vi(O)}},[a,M,O,va,Vi]),Js=A.useCallback(()=>{Ht.getState().openConditionEdit({mode:a,value:""})},[a]),Ws=A.useCallback(()=>{if(a==="guidance"){const he=new Set(f.map(_e=>_e.id)),G=qi("new_guidance",he),$=window.prompt("New guidance module id:",G);if($===null)return;const P=Yp($)||G,ye=qi(P,he),Te=ye.split("_").map(_e=>_e&&_e[0].toUpperCase()+_e.slice(1)).join(" "),Ne=oA(ye,Te||"New Guidance"),ze={id:ye,path:`modules/${ye}/module.txt`,module:Ne,diagnostics:[],isDirty:!0};it.getState().setGuidanceDocs([...f,ze]),m(ye),U("menu.guidance.root"),o("guidance");return}const x=new Set(d.map(he=>he.id)),H=qi("new_narrative",x),T=window.prompt("New narrative file id:",H);if(T===null)return;const R=Yp(T)||H,j=qi(R,x),X=j.split("_").map(he=>he&&he[0].toUpperCase()+he.slice(1)).join(" "),K=sA(j,X||"New Narrative"),Ae={id:j,path:`narratives/${j}.txt`,narrative:K,diagnostics:[],isDirty:!0};it.getState().setNarrativeDocs([...d,Ae]),y(j),w("stage.1.intro"),o("narrative")},[a,f,d,m,y,U,w,o]),xa=A.useCallback(async()=>{if(It.getState().mode==="guidance"){const H=it.getState(),T=H.guidanceDocs.find(X=>X.id===H.activeGuidanceId);if(!T)return;const R=`${T.id||"module"}.txt`,j=Lp(T.module);try{await Zp(R,j)}catch{}}else{const H=it.getState(),T=H.narrativeDocs.find(X=>X.id===H.activeNarrativeId);if(!T)return;const R=`${T.id||"narrative"}.txt`,j=Xp(T.narrative);try{await Zp(R,j)}catch{}}},[]),Lc=A.useCallback(()=>{if(a==="guidance"&&ee){const x=`${ee.id||"module"}.txt`,H=Lp(ee.module);ff(x,H)}else if(a==="narrative"&&be){const x=`${be.id||"narrative"}.txt`,H=Xp(be.narrative);ff(x,H)}},[a,ee,be]),Fs=A.useCallback(()=>{c(!0)},[c]),Ps=A.useCallback(async x=>{const H=Array.from(x.target.files??[]);if(!H.length)return;const T=Iv(H[0].webkitRelativePath||H[0].name).split("/")[0].trim(),R=[],j=[],X=[];for(const K of H){const Ae=o1(K.webkitRelativePath||K.name);if(Ae.startsWith("modules/")&&Ae.endsWith("/module.txt")){const he=await K.text(),G=t1(he),$=Ae.split("/")[1]||"module",P=G.module.meta.id||$;R.push({id:P,path:Ae,module:{...G.module,meta:{...G.module.meta,id:P}},diagnostics:G.diagnostics,isDirty:!1,sourceText:he})}if(Ae.startsWith("narratives/")&&Ae.endsWith(".txt")){const he=await K.text(),G=l1(he),P=(Ae.split("/").pop()??"narrative").replace(/\.txt$/i,""),ye=G.narrative.meta.id||P;j.push({id:ye,path:Ae,narrative:{...G.narrative,meta:{...G.narrative.meta,id:ye}},diagnostics:G.diagnostics,isDirty:!1,sourceText:he})}if(Ae.startsWith("texts/")&&Ae.endsWith(".txt")){const he=Ae.split("/").pop()??"";he&&X.push(`@${he.replace(/\.txt$/i,"")}`)}}if(R.length||j.length){if(R.length){h(R);const K=R[0];m(K.id);const Ae=Oc(K.module)[0];U(Ae?Rs(Ae):"")}if(j.length){g(j);const K=j[0];y(K.id),w(K.narrative.nodes[0]?.id??"")}s(T||"project"),X.length?C(Array.from(new Set(X))):C(Vb)}x.target.value=""},[h,g,m,y,U,w,s,C]),qo=A.useMemo(()=>{const x=(P,ye)=>V[P]??ye,H=Ze.map(P=>{const ye=`condition:${P}`,Te=x(ye,P);return{id:ye,kind:"condition",label:P,value:Te,hint:xo("condition",Te)}}),T="@custom",R=`token:${T}`,j=x(R,T),X={id:"tokens",title:"Tokens",tone:"token",items:[{id:R,kind:"token",label:T,value:j,hint:xo("token",j)}]},Ae=Array.from(new Set([...D,...aA,...lA])).sort((P,ye)=>P.localeCompare(ye)).map(P=>{const ye=`variable:${P}`,Te=x(ye,P);return{id:ye,kind:"variable",label:P,value:Te,hint:xo("variable",Te)}}),he=nA.map(P=>{const ye=`source:${P}`,Te=x(ye,P);return{id:ye,kind:"source",label:P,value:Te,hint:xo("source",Te)}}),G=$t.map(P=>{const ye=`action:${P}`,Te=x(ye,P);return{id:ye,kind:"action",label:P,value:Te,hint:xo("action",Te)}});return[{id:"conditions",title:"Conditions",tone:"condition",items:H},{id:"variables",title:"Variables",tone:"variable",items:Ae},{id:"sources",title:"List Sources",tone:"source",items:he},{id:"actions",title:"Actions",tone:"action",items:G},X].filter(P=>P.items.length>0)},[$t,Ze,V,D]),Xc=A.useMemo(()=>{if(!Re)return"";switch(Re.scope){case"guidance-main":return`Edit ${Re.kind} text`;case"guidance-choice":return"Edit choice text";case"narrative-main":return"Edit dialogue text";case"narrative-choice":return"Edit player response text";default:return"Edit text"}},[Re]),Zc=A.useMemo(()=>a==="guidance"&&Xe?Xe.kind==="option"?Xe.data.label:Xe.data.text:a==="narrative"&&Tt?Tt.text:"",[a,Xe,Tt]),ql=A.useMemo(()=>{if(a==="guidance"&&Xe&&ee){if(Xe.kind==="menu")return Xe.data.options.map(x=>Nc(ee.module,x));if(Xe.kind==="node")return Xe.data.options.map(x=>Nc(ee.module,x))}return a==="narrative"&&Tt&&be?Tt.options.map(x=>_c(be.narrative,x)):[]},[ee,be,a,Xe,Tt]),bi=A.useCallback(()=>{if(Re){if(Re.scope==="guidance-main"){We();const{kind:x,nodeId:H}=Re;_(p,T=>({...T,isDirty:!0,module:{...T.module,menus:x==="menu"?T.module.menus.map(R=>R.id===H?{...R,text:Oe}:R):T.module.menus,nodes:x==="node"?T.module.nodes.map(R=>R.id===H?{...R,text:Oe}:R):T.module.nodes}})),at();return}if(Re.scope==="guidance-choice"){We();const{sourceId:x,optionIndex:H}=Re;_(p,T=>{const R=Gt(T.module,x),j=Ut(T.module,x),X=R?R.options[H]:j?j.options[H]:void 0;return X?{...T,isDirty:!0,module:{...T.module,options:T.module.options.map(K=>K.id===X?{...K,label:Oe}:K)}}:T}),at();return}if(Re.scope==="narrative-main"){lt();const{nodeId:x}=Re;q(S,H=>({...H,isDirty:!0,narrative:{...H.narrative,nodes:H.narrative.nodes.map(T=>T.id===x?{...T,text:Oe}:T)}})),at();return}if(Re.scope==="narrative-choice"){lt();const{targetNodeId:x}=Re;q(S,H=>({...H,isDirty:!0,narrative:{...H.narrative,nodes:H.narrative.nodes.map(T=>T.id===x?{...T,text:Oe}:T)}})),at()}}},[p,S,at,We,lt,Re,Oe,_,q]),jo=A.useCallback(()=>{if(!Pe)return;const x=Pe.value.trim(),H=Et.trim();if(!H)return;if(x===H){et();return}const T=Xa(x),R=Xa(H);if(Pe.mode==="guidance"&&p){We(),_(p,G=>{let $=!1;const P=G.module.menus.map(Ne=>{const ze=ho(Ne.requires,x,H);return ze.changed?($=!0,{...Ne,requires:ze.next}):Ne}),ye=G.module.nodes.map(Ne=>{const ze=ho(Ne.requires,x,H);return ze.changed?($=!0,{...Ne,requires:ze.next}):Ne}),Te=G.module.options.map(Ne=>{const ze=ho(Ne.requires,x,H);return ze.changed?($=!0,{...Ne,requires:ze.next}):Ne});return $?{...G,isDirty:!0,module:{...G.module,menus:P,nodes:ye,options:Te}}:G});const j=Ve.getState(),X=j.extraGuidanceConditions[p]??[],K=ho(X,x,H),Ae=K.next.includes(H)?K.next:[...K.next,H];j.setExtraGuidanceConditions({...j.extraGuidanceConditions,[p]:Ae});const he=j.guidancePositions;if(he[T]){const G=he[T],$={...he};delete $[T],$[R]||($[R]=G),j.setGuidancePositions($)}}if(Pe.mode==="narrative"&&S){lt(),q(S,G=>{let $=!1;const P=G.narrative.nodes.map(ye=>{const Te=ho(ye.requires,x,H);return Te.changed?($=!0,{...ye,requires:Te.next}):ye});return $?{...G,isDirty:!0,narrative:{...G.narrative,nodes:P}}:G});const j=Ve.getState(),X=j.extraNarrativeConditions[S]??[],K=ho(X,x,H),Ae=K.next.includes(H)?K.next:[...K.next,H];j.setExtraNarrativeConditions({...j.extraNarrativeConditions,[S]:Ae});const he=j.narrativePositions;if(he[T]){const G=he[T],$={...he};delete $[T],$[R]||($[R]=G),j.setNarrativePositions($)}}et()},[p,S,et,Pe,Et,We,lt,_,q]),Ho=A.useCallback(()=>{if(!pt)return;const x=pt.value.trim(),H=Fe.trim();if(!H)return;if(x===H){_t();return}const T=ra(x),R=ra(H);if(pt.mode==="guidance"&&p){We(),_(p,he=>{let G=!1;const $=he.module.options.map(P=>{const ye=sc(P.actions,x,H);return ye.changed?(G=!0,{...P,actions:ye.next}):P});return G?{...he,isDirty:!0,module:{...he.module,options:$}}:he});const j=Ve.getState(),X=j.extraGuidanceActions[p]??[],K=sc(X,x,H);K.changed&&j.setExtraGuidanceActions({...j.extraGuidanceActions,[p]:K.next});const Ae=j.guidancePositions;if(Ae[T]){const he=Ae[T],G={...Ae};delete G[T],G[R]||(G[R]=he),j.setGuidancePositions(G)}}if(pt.mode==="narrative"&&S){lt(),q(S,he=>{let G=!1;const $=he.narrative.nodes.map(P=>{const ye=sc(P.actions,x,H);return ye.changed?(G=!0,{...P,actions:ye.next}):P});return G?{...he,isDirty:!0,narrative:{...he.narrative,nodes:$}}:he});const j=Ve.getState(),X=j.extraNarrativeActions[S]??[],K=sc(X,x,H);K.changed&&j.setExtraNarrativeActions({...j.extraNarrativeActions,[S]:K.next});const Ae=j.narrativePositions;if(Ae[T]){const he=Ae[T],G={...Ae};delete G[T],G[R]||(G[R]=he),j.setNarrativePositions(G)}}_t()},[p,S,pt,Fe,_t,We,lt,_,q]),Vt=A.useCallback(()=>{Rt(null),qt(""),dt(""),ie(null)},[]),ba=A.useCallback(()=>{if(!tt)return;const x=cn.trim();if(!x)return;const H=it.getState(),T=Ve.getState(),R=De&&De.mode===tt.mode&&De.kind===tt.kind&&De.nodeId===tt.nodeId?De:null;if(R&&R.mode==="guidance"){const G=H.activeGuidanceId;if(!G)return;const $=H.guidanceDocs.find(Me=>Me.id===G);if(!$)return;const P=la($.module,R.nodeId);if(P!=="menu"&&P!=="node")return;let ye=!1;if(R.kind==="condition"){if(R.targetHandle==="cond:node")if(P==="menu"){const Me=Gt($.module,R.nodeId);if(Me){const Ke=di(Me.requires,x);yn(Me.id,{requires:Ke}),ye=!0}}else{const Me=Ut($.module,R.nodeId);if(Me){const Ke=di(Me.requires,x);un(Me.id,{requires:Ke}),ye=!0}}else{const Me=R.targetHandle.startsWith("cond:")?R.targetHandle.slice(5):R.targetHandle,Ke=jt(Me),St=Ke===null?void 0:P==="menu"?Gt($.module,R.nodeId)?.options[Ke]:Ut($.module,R.nodeId)?.options[Ke],Wt=St?an($.module,St):void 0;if(Wt){const Rn=di(Wt.requires,x);Cn(Wt.id,{requires:Rn}),ye=!0}}if(ye){const Me=T.extraGuidanceConditions[G]??[];Me.includes(x)||T.setExtraGuidanceConditions({...T.extraGuidanceConditions,[G]:[...Me,x]});const Ke=Xa(x);T.setGuidancePositions({...T.guidancePositions,[Ke]:R.position}),T.setGuidanceAnchorPositions({...T.guidanceAnchorPositions,[Ke]:R.position}),T.setSelectedGuidanceId(Ke)}Vt();return}if(R.targetHandle==="act:node"){if(P==="menu"){const St=Gt($.module,R.nodeId);if(!St){Vt();return}yn(St.id,{itemAction:x})}else if(P==="node"){const St=Ut($.module,R.nodeId);if(!St){Vt();return}const Wt=oa(St.actions,x);un(St.id,{actions:Wt})}else{Vt();return}const Me=T.extraGuidanceActions[G]??[];Me.includes(x)||T.setExtraGuidanceActions({...T.extraGuidanceActions,[G]:[...Me,x]});const Ke=ra(x);T.setGuidancePositions({...T.guidancePositions,[Ke]:R.position}),T.setGuidanceAnchorPositions({...T.guidanceAnchorPositions,[Ke]:R.position}),T.setSelectedGuidanceId(Ke),Vt();return}const Te=R.targetHandle.startsWith("act:")?R.targetHandle.slice(4):R.targetHandle,Ne=jt(Te),ze=Ne===null?void 0:P==="menu"?Gt($.module,R.nodeId)?.options[Ne]:Ut($.module,R.nodeId)?.options[Ne],_e=ze?an($.module,ze):void 0;if(_e){const Me=oa(_e.actions,x);Cn(_e.id,{actions:Me});const Ke=T.extraGuidanceActions[G]??[];Ke.includes(x)||T.setExtraGuidanceActions({...T.extraGuidanceActions,[G]:[...Ke,x]});const St=ra(x);T.setGuidancePositions({...T.guidancePositions,[St]:R.position}),T.setGuidanceAnchorPositions({...T.guidanceAnchorPositions,[St]:R.position}),T.setSelectedGuidanceId(St)}Vt();return}if(R&&R.mode==="narrative"){const G=H.activeNarrativeId;if(!G)return;const $=H.narrativeDocs.find(ze=>ze.id===G);if(!$)return;const P=ut($.narrative,R.nodeId);if(!P)return;const ye=ze=>{const _e=ut($.narrative,ze);if(!_e)return!1;const Me=di(_e.requires,x);return bt(_e.id,{requires:Me}),!0},Te=ze=>{const _e=ut($.narrative,ze);if(!_e)return!1;const Me=oa(_e.actions,x);return bt(_e.id,{actions:Me}),!0};let Ne=!1;if(R.kind==="condition"){if(R.targetHandle==="cond:node")Ne=ye(P.id);else if(R.targetHandle==="cond:next")Ne=P.next?ye(P.next):!1;else{const ze=R.targetHandle.startsWith("cond:")?R.targetHandle.slice(5):R.targetHandle,_e=jt(ze),Me=_e===null?void 0:P.options[_e];Ne=Me?ye(Me):!1}if(Ne){const ze=T.extraNarrativeConditions[G]??[];ze.includes(x)||T.setExtraNarrativeConditions({...T.extraNarrativeConditions,[G]:[...ze,x]});const _e=Xa(x);T.setNarrativePositions({...T.narrativePositions,[_e]:R.position}),T.setNarrativeAnchorPositions({...T.narrativeAnchorPositions,[_e]:R.position}),T.setSelectedNarrativeId(_e)}Vt();return}if(R.targetHandle==="act:node")Ne=Te(P.id);else{const ze=R.targetHandle.startsWith("act:")?R.targetHandle.slice(4):R.targetHandle,_e=jt(ze),Me=_e===null?void 0:P.options[_e];Ne=Me?Te(Me):!1}if(Ne){const ze=T.extraNarrativeActions[G]??[];ze.includes(x)||T.setExtraNarrativeActions({...T.extraNarrativeActions,[G]:[...ze,x]});const _e=ra(x);T.setNarrativePositions({...T.narrativePositions,[_e]:R.position}),T.setNarrativeAnchorPositions({...T.narrativeAnchorPositions,[_e]:R.position}),T.setSelectedNarrativeId(_e)}Vt();return}if(tt.mode==="guidance"){const G=H.activeGuidanceId;if(!G)return;const $=H.guidanceDocs.find(ze=>ze.id===G);if(!$)return;if(tt.kind==="condition"){const ze=Gt($.module,tt.nodeId),_e=Ut($.module,tt.nodeId),Me=ze?.requires??_e?.requires??null;if(!Me)return;const Ke=di(Me,x);if(Ke.length===Me.length){Vt();return}We(),_(G,Wt=>({...Wt,isDirty:!0,module:{...Wt.module,menus:Wt.module.menus.map(Rn=>ze&&Rn.id===ze.id?{...Rn,requires:Ke}:Rn),nodes:Wt.module.nodes.map(Rn=>_e&&Rn.id===_e.id?{...Rn,requires:Ke}:Rn)}}));const St=T.extraGuidanceConditions[G]??[];St.includes(x)||T.setExtraGuidanceConditions({...T.extraGuidanceConditions,[G]:[...St,x]}),Vt();return}const P=wn||tt.optionTargets?.[0]?.id;if(!P)return;const ye=an($.module,P);if(!ye)return;const Te=oa(ye.actions,x);if(Te.length===ye.actions.length){Vt();return}We(),_(G,ze=>({...ze,isDirty:!0,module:{...ze.module,options:ze.module.options.map(_e=>_e.id===P?{..._e,actions:Te}:_e)}}));const Ne=T.extraGuidanceActions[G]??[];Ne.includes(x)||T.setExtraGuidanceActions({...T.extraGuidanceActions,[G]:[...Ne,x]}),Vt();return}const j=H.activeNarrativeId;if(!j)return;const X=H.narrativeDocs.find(G=>G.id===j);if(!X)return;const K=ut(X.narrative,tt.nodeId);if(!K)return;if(tt.kind==="condition"){const G=di(K.requires,x);if(G.length===K.requires.length){Vt();return}lt(),q(j,P=>({...P,isDirty:!0,narrative:{...P.narrative,nodes:P.narrative.nodes.map(ye=>ye.id===K.id?{...ye,requires:G}:ye)}}));const $=T.extraNarrativeConditions[j]??[];$.includes(x)||T.setExtraNarrativeConditions({...T.extraNarrativeConditions,[j]:[...$,x]}),Vt();return}const Ae=oa(K.actions,x);if(Ae.length===K.actions.length){Vt();return}lt(),q(j,G=>({...G,isDirty:!0,narrative:{...G.narrative,nodes:G.narrative.nodes.map($=>$.id===K.id?{...$,actions:Ae}:$)}}));const he=T.extraNarrativeActions[j]??[];he.includes(x)||T.setExtraNarrativeActions({...T.extraNarrativeActions,[j]:[...he,x]}),Vt()},[wn,tt,cn,Vt,De,We,lt,yn,un,Cn,_,bt,q]),er=A.useCallback(()=>{Qt&&(de({...V,[Qt.itemId]:vn}),_n())},[_n,Qt,vn,V,de]),Go=A.useCallback(x=>{Ht.getState().openInventoryEdit(x.id,x.value)},[]),tr=A.useMemo(()=>a==="guidance"&&Xe?b.jsx(k2,{entity:Xe,allOptions:ft,onUpdateMenu:yn,onUpdateNode:un,onUpdateOption:Cn,onAddOption:tl,onRemoveOption:Ln,onReorderOptions:Kt}):a==="narrative"&&Tt?b.jsx(O2,{node:Tt,onUpdateNode:bt,onUpdateQuest:gi}):null,[a,Xe,Tt,ft,yn,un,Cn,tl,Ln,Kt,bt,gi]);return b.jsxs(f1,{onNew:Ws,onSave:xa,onExport:Lc,onTest:Fs,fileInputRef:n,inspectorChildren:tr,children:[b.jsxs("main",{className:"canvas canvas-narrative",children:[b.jsx(h1,{onAutoArrange:Oo,onAddDialogue:Ro,onAddChoice:ya,onEditConditions:Js,onAddStage:Ks}),b.jsxs("div",{className:"flow-shell",children:[b.jsx(j2,{categories:qo,onEditItem:Go}),a==="guidance"?b.jsx(M2,{onInlineTextChange:nl,onRequestMainEdit:Do,onRequestOutputEdit:Mo,onAddChoice:va,onAddCondition:Yi,onAddAction:il,onReorderOutputs:Di,onCycleNodeColor:kn,onEdgeDropCreate:Mi,onConnect:$i,onNodesDelete:Tl,onEdgesDelete:Jt,onEdgeClick:Dl,onInventoryDrop:vi,onNodeDragStop:yi}):null,a==="narrative"?b.jsx(z2,{onInlineTextChange:zo,onRequestMainEdit:Ml,onRequestOutputEdit:zl,onAddChoice:Vi,onAddCondition:kl,onAddAction:Ol,onReorderOutputs:pi,onCycleNodeColor:xi,onEdgeDropCreate:$c,onConnect:Is,onNodesDelete:Qs,onEdgesDelete:ko,onEdgeClick:Rl,onInventoryDrop:Vc,onNodeDragStop:On}):null]})]}),b.jsx("input",{ref:n,type:"file",style:{display:"none"},multiple:!0,onChange:Ps,webkitdirectory:"true",directory:"true"}),Re?b.jsx(H2,{title:Xc,value:Oe,onChange:$e,onSave:bi,onCancel:at}):null,tt?b.jsx(W2,{kind:tt.kind,title:tt.kind==="condition"?"Add Condition":"Add Action",options:tt.kind==="condition"?Ze:$t,value:cn,targetLabel:tt.kind==="action"&&tt.mode==="guidance"?"apply to choice":void 0,targetOptions:tt.kind==="action"&&tt.mode==="guidance"?tt.optionTargets:void 0,targetValue:tt.kind==="action"&&tt.mode==="guidance"?wn:void 0,onTargetChange:dt,onChange:qt,onPick:qt,onSave:ba,onCancel:Vt}):null,Pe?b.jsx(G2,{mode:Pe.mode,value:Et,onChange:gt,onSave:jo,onCancel:et}):null,pt?b.jsx(U2,{mode:pt.mode,value:Fe,onChange:je,onSave:Ho,onCancel:_t}):null,Qt?b.jsx(B2,{label:Qt.itemId,value:vn,onChange:Mn,onSave:er,onCancel:_n}):null,I?b.jsx(F2,{normalizeOnExport:wt,onToggleNormalize:zn,onClose:()=>se(!1)}):null,N?b.jsx(P2,{text:Zc,options:ql,onClose:()=>L(!1)}):null,ne?b.jsx(eA,{mode:a,guidanceModule:ee?.module,narrative:be?.narrative,onClose:()=>c(!1)}):null]})}qb.createRoot(document.getElementById("root")).render(b.jsx(pe.StrictMode,{children:b.jsx(rA,{})}));
