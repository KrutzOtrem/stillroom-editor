(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=o(c);fetch(c.href,f)}})();function Df(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yd={exports:{}},Es={};var Ap;function Cb(){if(Ap)return Es;Ap=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function o(s,c,f){var d=null;if(f!==void 0&&(d=""+f),c.key!==void 0&&(d=""+c.key),"key"in c){f={};for(var h in c)h!=="key"&&(f[h]=c[h])}else f=c;return c=f.ref,{$$typeof:n,type:s,key:d,ref:c!==void 0?c:null,props:f}}return Es.Fragment=a,Es.jsx=o,Es.jsxs=o,Es}var Cp;function Tb(){return Cp||(Cp=1,Yd.exports=Cb()),Yd.exports}var b=Tb(),Vd={exports:{}},Le={};var Tp;function Db(){if(Tp)return Le;Tp=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),S=Symbol.iterator;function E(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,k={};function M(D,V,de){this.props=D,this.context=V,this.refs=k,this.updater=de||R}M.prototype.isReactComponent={},M.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},M.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function O(){}O.prototype=M.prototype;function U(D,V,de){this.props=D,this.context=V,this.refs=k,this.updater=de||R}var w=U.prototype=new O;w.constructor=U,T(w,M.prototype),w.isPureReactComponent=!0;var J=Array.isArray;function Q(){}var F={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function ue(D,V,de){var ge=de.ref;return{$$typeof:n,type:D,key:V,ref:ge!==void 0?ge:null,props:de}}function te(D,V){return ue(D.type,V,D.props)}function oe(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function me(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(de){return V[de]})}var ve=/\/+/g;function z(D,V){return typeof D=="object"&&D!==null&&D.key!=null?me(""+D.key):V.toString(36)}function B(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Q,Q):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function N(D,V,de,ge,we){var Ce=typeof D;(Ce==="undefined"||Ce==="boolean")&&(D=null);var ke=!1;if(D===null)ke=!0;else switch(Ce){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(D.$$typeof){case n:case a:ke=!0;break;case y:return ke=D._init,N(ke(D._payload),V,de,ge,we)}}if(ke)return we=we(D),ke=ge===""?"."+z(D,0):ge,J(we)?(de="",ke!=null&&(de=ke.replace(ve,"$&/")+"/"),N(we,V,de,"",function(Ye){return Ye})):we!=null&&(oe(we)&&(we=te(we,de+(we.key==null||D&&D.key===we.key?"":(""+we.key).replace(ve,"$&/")+"/")+ke)),V.push(we)),1;ke=0;var qe=ge===""?".":ge+":";if(J(D))for(var Oe=0;Oe<D.length;Oe++)ge=D[Oe],Ce=qe+z(ge,Oe),ke+=N(ge,V,de,Ce,we);else if(Oe=E(D),typeof Oe=="function")for(D=Oe.call(D),Oe=0;!(ge=D.next()).done;)ge=ge.value,Ce=qe+z(ge,Oe++),ke+=N(ge,V,de,Ce,we);else if(Ce==="object"){if(typeof D.then=="function")return N(B(D),V,de,ge,we);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ke}function L(D,V,de){if(D==null)return D;var ge=[],we=0;return N(D,ge,"","",function(Ce){return V.call(de,Ce,we++)}),ge}function ne(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(de){(D._status===0||D._status===-1)&&(D._status=1,D._result=de)},function(de){(D._status===0||D._status===-1)&&(D._status=2,D._result=de)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var I=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},se={map:L,forEach:function(D,V,de){L(D,function(){V.apply(this,arguments)},de)},count:function(D){var V=0;return L(D,function(){V++}),V},toArray:function(D){return L(D,function(V){return V})||[]},only:function(D){if(!oe(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Le.Activity=p,Le.Children=se,Le.Component=M,Le.Fragment=o,Le.Profiler=c,Le.PureComponent=U,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Le.__COMPILER_RUNTIME={__proto__:null,c:function(D){return F.H.useMemoCache(D)}},Le.cache=function(D){return function(){return D.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(D,V,de){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ge=T({},D.props),we=D.key;if(V!=null)for(Ce in V.key!==void 0&&(we=""+V.key),V)!ce.call(V,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&V.ref===void 0||(ge[Ce]=V[Ce]);var Ce=arguments.length-2;if(Ce===1)ge.children=de;else if(1<Ce){for(var ke=Array(Ce),qe=0;qe<Ce;qe++)ke[qe]=arguments[qe+2];ge.children=ke}return ue(D.type,we,ge)},Le.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:f,_context:D},D},Le.createElement=function(D,V,de){var ge,we={},Ce=null;if(V!=null)for(ge in V.key!==void 0&&(Ce=""+V.key),V)ce.call(V,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(we[ge]=V[ge]);var ke=arguments.length-2;if(ke===1)we.children=de;else if(1<ke){for(var qe=Array(ke),Oe=0;Oe<ke;Oe++)qe[Oe]=arguments[Oe+2];we.children=qe}if(D&&D.defaultProps)for(ge in ke=D.defaultProps,ke)we[ge]===void 0&&(we[ge]=ke[ge]);return ue(D,Ce,we)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(D){return{$$typeof:h,render:D}},Le.isValidElement=oe,Le.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:ne}},Le.memo=function(D,V){return{$$typeof:m,type:D,compare:V===void 0?null:V}},Le.startTransition=function(D){var V=F.T,de={};F.T=de;try{var ge=D(),we=F.S;we!==null&&we(de,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(Q,I)}catch(Ce){I(Ce)}finally{V!==null&&de.types!==null&&(V.types=de.types),F.T=V}},Le.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Le.use=function(D){return F.H.use(D)},Le.useActionState=function(D,V,de){return F.H.useActionState(D,V,de)},Le.useCallback=function(D,V){return F.H.useCallback(D,V)},Le.useContext=function(D){return F.H.useContext(D)},Le.useDebugValue=function(){},Le.useDeferredValue=function(D,V){return F.H.useDeferredValue(D,V)},Le.useEffect=function(D,V){return F.H.useEffect(D,V)},Le.useEffectEvent=function(D){return F.H.useEffectEvent(D)},Le.useId=function(){return F.H.useId()},Le.useImperativeHandle=function(D,V,de){return F.H.useImperativeHandle(D,V,de)},Le.useInsertionEffect=function(D,V){return F.H.useInsertionEffect(D,V)},Le.useLayoutEffect=function(D,V){return F.H.useLayoutEffect(D,V)},Le.useMemo=function(D,V){return F.H.useMemo(D,V)},Le.useOptimistic=function(D,V){return F.H.useOptimistic(D,V)},Le.useReducer=function(D,V,de){return F.H.useReducer(D,V,de)},Le.useRef=function(D){return F.H.useRef(D)},Le.useState=function(D){return F.H.useState(D)},Le.useSyncExternalStore=function(D,V,de){return F.H.useSyncExternalStore(D,V,de)},Le.useTransition=function(){return F.H.useTransition()},Le.version="19.2.4",Le}var Dp;function Ls(){return Dp||(Dp=1,Vd.exports=Db()),Vd.exports}var A=Ls();const pe=Df(A);var Ld={exports:{}},ws={},Xd={exports:{}},Zd={};var Mp;function Mb(){return Mp||(Mp=1,(function(n){function a(N,L){var ne=N.length;N.push(L);e:for(;0<ne;){var I=ne-1>>>1,se=N[I];if(0<c(se,L))N[I]=L,N[ne]=se,ne=I;else break e}}function o(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var L=N[0],ne=N.pop();if(ne!==L){N[0]=ne;e:for(var I=0,se=N.length,D=se>>>1;I<D;){var V=2*(I+1)-1,de=N[V],ge=V+1,we=N[ge];if(0>c(de,ne))ge<se&&0>c(we,de)?(N[I]=we,N[ge]=ne,I=ge):(N[I]=de,N[V]=ne,I=V);else if(ge<se&&0>c(we,ne))N[I]=we,N[ge]=ne,I=ge;else break e}}return L}function c(N,L){var ne=N.sortIndex-L.sortIndex;return ne!==0?ne:N.id-L.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var g=[],m=[],y=1,p=null,S=3,E=!1,R=!1,T=!1,k=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function w(N){for(var L=o(m);L!==null;){if(L.callback===null)s(m);else if(L.startTime<=N)s(m),L.sortIndex=L.expirationTime,a(g,L);else break;L=o(m)}}function J(N){if(T=!1,w(N),!R)if(o(g)!==null)R=!0,Q||(Q=!0,me());else{var L=o(m);L!==null&&B(J,L.startTime-N)}}var Q=!1,F=-1,ce=5,ue=-1;function te(){return k?!0:!(n.unstable_now()-ue<ce)}function oe(){if(k=!1,Q){var N=n.unstable_now();ue=N;var L=!0;try{e:{R=!1,T&&(T=!1,O(F),F=-1),E=!0;var ne=S;try{t:{for(w(N),p=o(g);p!==null&&!(p.expirationTime>N&&te());){var I=p.callback;if(typeof I=="function"){p.callback=null,S=p.priorityLevel;var se=I(p.expirationTime<=N);if(N=n.unstable_now(),typeof se=="function"){p.callback=se,w(N),L=!0;break t}p===o(g)&&s(g),w(N)}else s(g);p=o(g)}if(p!==null)L=!0;else{var D=o(m);D!==null&&B(J,D.startTime-N),L=!1}}break e}finally{p=null,S=ne,E=!1}L=void 0}}finally{L?me():Q=!1}}}var me;if(typeof U=="function")me=function(){U(oe)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,z=ve.port2;ve.port1.onmessage=oe,me=function(){z.postMessage(null)}}else me=function(){M(oe,0)};function B(N,L){F=M(function(){N(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(N){switch(S){case 1:case 2:case 3:var L=3;break;default:L=S}var ne=S;S=L;try{return N()}finally{S=ne}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(N,L){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var ne=S;S=N;try{return L()}finally{S=ne}},n.unstable_scheduleCallback=function(N,L,ne){var I=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?I+ne:I):ne=I,N){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ne+se,N={id:y++,callback:L,priorityLevel:N,startTime:ne,expirationTime:se,sortIndex:-1},ne>I?(N.sortIndex=ne,a(m,N),o(g)===null&&N===o(m)&&(T?(O(F),F=-1):T=!0,B(J,ne-I))):(N.sortIndex=se,a(g,N),R||E||(R=!0,Q||(Q=!0,me()))),N},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(N){var L=S;return function(){var ne=S;S=L;try{return N.apply(this,arguments)}finally{S=ne}}}})(Zd)),Zd}var zp;function zb(){return zp||(zp=1,Xd.exports=Mb()),Xd.exports}var Id={exports:{}},Tn={};var kp;function kb(){if(kp)return Tn;kp=1;var n=Ls();function a(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(a(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(g,m,y){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:p==null?null:""+p,children:g,containerInfo:m,implementation:y}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Tn.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return f(g,m,null,y)},Tn.flushSync=function(g){var m=d.T,y=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=m,s.p=y,s.d.f()}},Tn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},Tn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Tn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,p=h(y,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:p,integrity:S,fetchPriority:E}):y==="script"&&s.d.X(g,{crossOrigin:p,integrity:S,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Tn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},Tn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,p=h(y,m.crossOrigin);s.d.L(g,y,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Tn.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=h(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},Tn.requestFormReset=function(g){s.d.r(g)},Tn.unstable_batchedUpdates=function(g,m){return g(m)},Tn.useFormState=function(g,m,y){return d.H.useFormState(g,m,y)},Tn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Tn.version="19.2.4",Tn}var Op;function Xv(){if(Op)return Id.exports;Op=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Id.exports=kb(),Id.exports}var qp;function Ob(){if(qp)return ws;qp=1;var n=zb(),a=Ls(),o=Xv();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(f(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,l=t;;){var r=i.return;if(r===null)break;var u=r.alternate;if(u===null){if(l=r.return,l!==null){i=l;continue}break}if(r.child===u.child){for(u=r.child;u;){if(u===i)return g(r),e;if(u===l)return g(r),t;u=u.sibling}throw Error(s(188))}if(i.return!==l.return)i=r,l=u;else{for(var v=!1,_=r.child;_;){if(_===i){v=!0,i=r,l=u;break}if(_===l){v=!0,l=r,i=u;break}_=_.sibling}if(!v){for(_=u.child;_;){if(_===i){v=!0,i=u,l=r;break}if(_===l){v=!0,l=u,i=r;break}_=_.sibling}if(!v)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),U=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=oe&&e[oe]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case M:return"Profiler";case k:return"StrictMode";case J:return"Suspense";case Q:return"SuspenseList";case ue:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case U:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:z(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return z(e(t))}catch{}}return null}var B=Array.isArray,N=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},I=[],se=-1;function D(e){return{current:e}}function V(e){0>se||(e.current=I[se],I[se]=null,se--)}function de(e,t){se++,I[se]=e.current,e.current=t}var ge=D(null),we=D(null),Ce=D(null),ke=D(null);function qe(e,t){switch(de(Ce,t),de(we,e),de(ge,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Kg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Kg(t),e=Jg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ge),de(ge,e)}function Oe(){V(ge),V(we),V(Ce)}function Ye(e){e.memoizedState!==null&&de(ke,e);var t=ge.current,i=Jg(t,e.type);t!==i&&(de(we,e),de(ge,i))}function at(e){we.current===e&&(V(ge),V(we)),ke.current===e&&(V(ke),bs._currentValue=ne)}var Pe,_t;function gt(e){if(Pe===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Pe=t&&t[1]||"",_t=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+e+_t}var et=!1;function pt(e,t){if(!e||et)return"";et=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(fe){var re=fe}Reflect.construct(e,[],_e)}else{try{_e.call()}catch(fe){re=fe}e.call(_e.prototype)}}else{try{throw Error()}catch(fe){re=fe}(_e=e())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(fe){if(fe&&re&&typeof fe.stack=="string")return[fe.stack,re.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),v=u[0],_=u[1];if(v&&_){var $=v.split(`
`),le=_.split(`
`);for(r=l=0;l<$.length&&!$[l].includes("DetermineComponentFrameRoot");)l++;for(;r<le.length&&!le[r].includes("DetermineComponentFrameRoot");)r++;if(l===$.length||r===le.length)for(l=$.length-1,r=le.length-1;1<=l&&0<=r&&$[l]!==le[r];)r--;for(;1<=l&&0<=r;l--,r--)if($[l]!==le[r]){if(l!==1||r!==1)do if(l--,r--,0>r||$[l]!==le[r]){var xe=`
`+$[l].replace(" at new "," at ");return e.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",e.displayName)),xe}while(1<=l&&0<=r);break}}}finally{et=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?gt(i):""}function We(e,t){switch(e.tag){case 26:case 27:case 5:return gt(e.type);case 16:return gt("Lazy");case 13:return e.child!==t&&t!==null?gt("Suspense Fallback"):gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return pt(e.type,!1);case 11:return pt(e.type.render,!1);case 1:return pt(e.type,!0);case 31:return gt("Activity");default:return""}}function je(e){try{var t="",i=null;do t+=We(e,i),i=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Et=Object.prototype.hasOwnProperty,Qt=n.unstable_scheduleCallback,vn=n.unstable_cancelCallback,Mn=n.unstable_shouldYield,En=n.unstable_requestPaint,wt=n.unstable_now,zn=n.unstable_getCurrentPriorityLevel,tt=n.unstable_ImmediatePriority,qt=n.unstable_UserBlockingPriority,cn=n.unstable_NormalPriority,Rt=n.unstable_LowPriority,wn=n.unstable_IdlePriority,dt=n.log,De=n.unstable_setDisableYieldValue,ie=null,ee=null;function be(e){if(typeof dt=="function"&&De(e),ee&&typeof ee.setStrictMode=="function")try{ee.setStrictMode(ie,e)}catch{}}var Be=Math.clz32?Math.clz32:Tt,ft=Math.log,Xe=Math.LN2;function Tt(e){return e>>>=0,e===0?32:31-(ft(e)/Xe|0)|0}var Qe=256,Ze=262144,Yt=4194304;function vt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function mt(e,t,i){var l=e.pendingLanes;if(l===0)return 0;var r=0,u=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~u,l!==0?r=vt(l):(v&=_,v!==0?r=vt(v):i||(i=_&~e,i!==0&&(r=vt(i))))):(_=l&~u,_!==0?r=vt(_):v!==0?r=vt(v):i||(i=l&~e,i!==0&&(r=vt(i)))),r===0?0:t!==0&&t!==r&&(t&u)===0&&(u=r&-r,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:r}function An(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ni(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bi(){var e=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),e}function ma(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ti(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Fe(e,t,i,l,r,u){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var _=e.entanglements,$=e.expirationTimes,le=e.hiddenUpdates;for(i=v&~i;0<i;){var xe=31-Be(i),_e=1<<xe;_[xe]=0,$[xe]=-1;var re=le[xe];if(re!==null)for(le[xe]=null,xe=0;xe<re.length;xe++){var fe=re[xe];fe!==null&&(fe.lane&=-536870913)}i&=~_e}l!==0&&lt(e,l,0),u!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=u&~(v&~t))}function lt(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Be(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function ga(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-Be(i),r=1<<l;r&t|e[l]&t&&(e[l]|=t),i&=~r}}function pa(e,t){var i=t&-t;return i=(i&42)!==0?1:yn(i),(i&(e.suspendedLanes|t))!==0?0:i}function yn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function un(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Cn(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:xp(e.type))}function tl(e,t){var i=L.p;try{return L.p=e,t()}finally{L.p=i}}var Ln=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Ln,bt="__reactProps$"+Ln,gi="__reactContainer$"+Ln,nl="__reactEvents$"+Ln,Mo="__reactListeners$"+Ln,zo="__reactHandles$"+Ln,va="__reactResources$"+Ln,$i="__reactMarker$"+Ln;function il(e){delete e[Kt],delete e[bt],delete e[nl],delete e[Mo],delete e[zo]}function Di(e){var t=e[Kt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[gi]||i[Kt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=ip(e);e!==null;){if(i=e[Kt])return i;e=ip(e)}return t}e=i,i=e.parentNode}return null}function pi(e){if(e=e[Kt]||e[gi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Yi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Mi(e){var t=e[va];return t||(t=e[va]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Jt(e){e[$i]=!0}var Tl=new Set,Dl={};function vi(e,t){yi(e,t),yi(e+"Capture",t)}function yi(e,t){for(Dl[e]=t,e=0;e<t.length;e++)Tl.add(t[e])}var ko=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ml={},zl={};function Vi(e){return Et.call(zl,e)?!0:Et.call(Ml,e)?!1:ko.test(e)?zl[e]=!0:(Ml[e]=!0,!1)}function kl(e,t,i){if(Vi(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Ol(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function xi(e,t,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+l)}}function kn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qs(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yc(e,t,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var r=l.get,u=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(v){i=""+v,u.call(this,v)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oo(e){if(!e._valueTracker){var t=Qs(e)?"checked":"value";e._valueTracker=Yc(e,t,""+e[t])}}function Ks(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Qs(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function ql(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vc=/[\n"\\]/g;function On(e){return e.replace(Vc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function qo(e,t,i,l,r,u,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+kn(t)):e.value!==""+kn(t)&&(e.value=""+kn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Ro(e,v,kn(t)):i!=null?Ro(e,v,kn(i)):l!=null&&e.removeAttribute("value"),r==null&&u!=null&&(e.defaultChecked=!!u),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+kn(_):e.removeAttribute("name")}function Js(e,t,i,l,r,u,v,_){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Oo(e);return}i=i!=null?""+kn(i):"",t=t!=null?""+kn(t):i,_||t===e.value||(e.value=t),e.defaultValue=t}l=l??r,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Oo(e)}function Ro(e,t,i){t==="number"&&ql(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ya(e,t,i,l){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&l&&(e[i].defaultSelected=!0)}else{for(i=""+kn(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Fs(e,t,i){if(t!=null&&(t=""+kn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+kn(i):""}function Ws(e,t,i,l){if(t==null){if(l!=null){if(i!=null)throw Error(s(92));if(B(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),t=i}i=kn(t),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),Oo(e)}function xa(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Lc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ps(e,t,i){var l=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,i):typeof i!="number"||i===0||Lc.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function er(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var r in t)l=t[r],t.hasOwnProperty(r)&&i[r]!==l&&Ps(e,r,l)}else for(var u in t)t.hasOwnProperty(u)&&Ps(e,u,t[u])}function jo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(e){return Zc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function bi(){}var Ho=null;function Go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vt=null,ba=null;function tr(e){var t=pi(e);if(t&&(e=t.stateNode)){var i=e[bt]||null;e:switch(e=t.stateNode,t.type){case"input":if(qo(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+On(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var r=l[bt]||null;if(!r)throw Error(s(90));qo(l,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<i.length;t++)l=i[t],l.form===e.form&&Ks(l)}break e;case"textarea":Fs(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ya(e,!!i.multiple,t,!1)}}}var Uo=!1;function nr(e,t,i){if(Uo)return e(t,i);Uo=!0;try{var l=e(t);return l}finally{if(Uo=!1,(Vt!==null||ba!==null)&&(Ur(),Vt&&(t=Vt,e=ba,ba=Vt=null,tr(t),e)))for(t=0;t<e.length;t++)tr(e[t])}}function x(e,t){var i=e.stateNode;if(i===null)return null;var l=i[bt]||null;if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var j=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=!1;if(j)try{var q={};Object.defineProperty(q,"passive",{get:function(){C=!0}}),window.addEventListener("test",q,q),window.removeEventListener("test",q,q)}catch{C=!1}var H=null,X=null,K=null;function Ae(){if(K)return K;var e,t=X,i=t.length,l,r="value"in H?H.value:H.textContent,u=r.length;for(e=0;e<i&&t[e]===r[e];e++);var v=i-e;for(l=1;l<=v&&t[i-l]===r[u-l];l++);return K=r.slice(e,1<l?1-l:void 0)}function he(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function G(){return!0}function Y(){return!1}function P(e){function t(i,l,r,u,v){this._reactName=i,this._targetInst=r,this.type=l,this.nativeEvent=u,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(u):u[_]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?G:Y,this.isPropagationStopped=Y,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=G)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=G)},persist:function(){},isPersistent:G}),t}var ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Te=P(ye),Ne=p({},ye,{view:0,detail:0}),ze=P(Ne),Ee,Me,Ke,St=p({},Ne,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ic,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ke&&(Ke&&e.type==="mousemove"?(Ee=e.screenX-Ke.screenX,Me=e.screenY-Ke.screenY):Me=Ee=0,Ke=e),Ee)},movementY:function(e){return"movementY"in e?e.movementY:Me}}),Ft=P(St),qn=p({},St,{dataTransfer:0}),ir=P(qn),Sa=p({},Ne,{relatedTarget:0}),Bo=P(Sa),Dy=p({},ye,{animationName:0,elapsedTime:0,pseudoElement:0}),My=P(Dy),zy=p({},ye,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ky=P(zy),Oy=p({},ye,{data:0}),Pf=P(Oy),qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ry={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jy[e])?!!t[e]:!1}function Ic(){return Hy}var Gy=p({},Ne,{key:function(e){if(e.key){var t=qy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=he(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ry[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ic,charCode:function(e){return e.type==="keypress"?he(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?he(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Uy=P(Gy),By=p({},St,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eh=P(By),$y=p({},Ne,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ic}),Yy=P($y),Vy=p({},ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ly=P(Vy),Xy=p({},St,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zy=P(Xy),Iy=p({},ye,{newState:0,oldState:0}),Qy=P(Iy),Ky=[9,13,27,32],Qc=j&&"CompositionEvent"in window,$o=null;j&&"documentMode"in document&&($o=document.documentMode);var Jy=j&&"TextEvent"in window&&!$o,th=j&&(!Qc||$o&&8<$o&&11>=$o),nh=" ",ih=!1;function ah(e,t){switch(e){case"keyup":return Ky.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jl=!1;function Fy(e,t){switch(e){case"compositionend":return lh(t);case"keypress":return t.which!==32?null:(ih=!0,nh);case"textInput":return e=t.data,e===nh&&ih?null:e;default:return null}}function Wy(e,t){if(jl)return e==="compositionend"||!Qc&&ah(e,t)?(e=Ae(),K=X=H=null,jl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return th&&t.locale!=="ko"?null:t.data;default:return null}}var Py={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Py[e.type]:t==="textarea"}function sh(e,t,i,l){Vt?ba?ba.push(l):ba=[l]:Vt=l,t=Zr(t,"onChange"),0<t.length&&(i=new Te("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Yo=null,Vo=null;function ex(e){Vg(e,0)}function ar(e){var t=Yi(e);if(Ks(t))return e}function rh(e,t){if(e==="change")return t}var ch=!1;if(j){var Kc;if(j){var Jc="oninput"in document;if(!Jc){var uh=document.createElement("div");uh.setAttribute("oninput","return;"),Jc=typeof uh.oninput=="function"}Kc=Jc}else Kc=!1;ch=Kc&&(!document.documentMode||9<document.documentMode)}function dh(){Yo&&(Yo.detachEvent("onpropertychange",fh),Vo=Yo=null)}function fh(e){if(e.propertyName==="value"&&ar(Vo)){var t=[];sh(t,Vo,e,Go(e)),nr(ex,t)}}function tx(e,t,i){e==="focusin"?(dh(),Yo=t,Vo=i,Yo.attachEvent("onpropertychange",fh)):e==="focusout"&&dh()}function nx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ar(Vo)}function ix(e,t){if(e==="click")return ar(t)}function ax(e,t){if(e==="input"||e==="change")return ar(t)}function lx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xn=typeof Object.is=="function"?Object.is:lx;function Lo(e,t){if(Xn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var r=i[l];if(!Et.call(t,r)||!Xn(e[r],t[r]))return!1}return!0}function hh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mh(e,t){var i=hh(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=hh(i)}}function gh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ph(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ql(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ql(e.document)}return t}function Fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ox=j&&"documentMode"in document&&11>=document.documentMode,Hl=null,Wc=null,Xo=null,Pc=!1;function vh(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Pc||Hl==null||Hl!==ql(l)||(l=Hl,"selectionStart"in l&&Fc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Xo&&Lo(Xo,l)||(Xo=l,l=Zr(Wc,"onSelect"),0<l.length&&(t=new Te("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Hl)))}function al(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Gl={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionrun:al("Transition","TransitionRun"),transitionstart:al("Transition","TransitionStart"),transitioncancel:al("Transition","TransitionCancel"),transitionend:al("Transition","TransitionEnd")},eu={},yh={};j&&(yh=document.createElement("div").style,"AnimationEvent"in window||(delete Gl.animationend.animation,delete Gl.animationiteration.animation,delete Gl.animationstart.animation),"TransitionEvent"in window||delete Gl.transitionend.transition);function ll(e){if(eu[e])return eu[e];if(!Gl[e])return e;var t=Gl[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in yh)return eu[e]=t[i];return e}var xh=ll("animationend"),bh=ll("animationiteration"),Sh=ll("animationstart"),sx=ll("transitionrun"),rx=ll("transitionstart"),cx=ll("transitioncancel"),Nh=ll("transitionend"),_h=new Map,tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tu.push("scrollEnd");function Si(e,t){_h.set(e,t),vi(t,[e])}var lr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ii=[],Ul=0,nu=0;function or(){for(var e=Ul,t=nu=Ul=0;t<e;){var i=ii[t];ii[t++]=null;var l=ii[t];ii[t++]=null;var r=ii[t];ii[t++]=null;var u=ii[t];if(ii[t++]=null,l!==null&&r!==null){var v=l.pending;v===null?r.next=r:(r.next=v.next,v.next=r),l.pending=r}u!==0&&Eh(i,r,u)}}function sr(e,t,i,l){ii[Ul++]=e,ii[Ul++]=t,ii[Ul++]=i,ii[Ul++]=l,nu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function iu(e,t,i,l){return sr(e,t,i,l),rr(e)}function ol(e,t){return sr(e,null,null,t),rr(e)}function Eh(e,t,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var r=!1,u=e.return;u!==null;)u.childLanes|=i,l=u.alternate,l!==null&&(l.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(r=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,r&&t!==null&&(r=31-Be(i),e=u.hiddenUpdates,l=e[r],l===null?e[r]=[t]:l.push(t),t.lane=i|536870912),u):null}function rr(e){if(50<hs)throw hs=0,fd=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Bl={};function ux(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(e,t,i,l){return new ux(e,t,i,l)}function au(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Li(e,t){var i=e.alternate;return i===null?(i=Zn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function wh(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function cr(e,t,i,l,r,u){var v=0;if(l=e,typeof e=="function")au(e)&&(v=1);else if(typeof e=="string")v=gb(e,i,ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ue:return e=Zn(31,i,t,r),e.elementType=ue,e.lanes=u,e;case T:return sl(i.children,r,u,t);case k:v=8,r|=24;break;case M:return e=Zn(12,i,t,r|2),e.elementType=M,e.lanes=u,e;case J:return e=Zn(13,i,t,r),e.elementType=J,e.lanes=u,e;case Q:return e=Zn(19,i,t,r),e.elementType=Q,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:v=10;break e;case O:v=9;break e;case w:v=11;break e;case F:v=14;break e;case ce:v=16,l=null;break e}v=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=Zn(v,i,t,r),t.elementType=e,t.type=l,t.lanes=u,t}function sl(e,t,i,l){return e=Zn(7,e,l,t),e.lanes=i,e}function lu(e,t,i){return e=Zn(6,e,null,t),e.lanes=i,e}function Ah(e){var t=Zn(18,null,null,0);return t.stateNode=e,t}function ou(e,t,i){return t=Zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ch=new WeakMap;function ai(e,t){if(typeof e=="object"&&e!==null){var i=Ch.get(e);return i!==void 0?i:(t={value:e,source:t,stack:je(t)},Ch.set(e,t),t)}return{value:e,source:t,stack:je(t)}}var $l=[],Yl=0,ur=null,Zo=0,li=[],oi=0,Na=null,zi=1,ki="";function Xi(e,t){$l[Yl++]=Zo,$l[Yl++]=ur,ur=e,Zo=t}function Th(e,t,i){li[oi++]=zi,li[oi++]=ki,li[oi++]=Na,Na=e;var l=zi;e=ki;var r=32-Be(l)-1;l&=~(1<<r),i+=1;var u=32-Be(t)+r;if(30<u){var v=r-r%5;u=(l&(1<<v)-1).toString(32),l>>=v,r-=v,zi=1<<32-Be(t)+r|i<<r|l,ki=u+e}else zi=1<<u|i<<r|l,ki=e}function su(e){e.return!==null&&(Xi(e,1),Th(e,1,0))}function ru(e){for(;e===ur;)ur=$l[--Yl],$l[Yl]=null,Zo=$l[--Yl],$l[Yl]=null;for(;e===Na;)Na=li[--oi],li[oi]=null,ki=li[--oi],li[oi]=null,zi=li[--oi],li[oi]=null}function Dh(e,t){li[oi++]=zi,li[oi++]=ki,li[oi++]=Na,zi=t.id,ki=t.overflow,Na=e}var xn=null,Lt=null,ht=!1,_a=null,si=!1,cu=Error(s(519));function Ea(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Io(ai(t,e)),cu}function Mh(e){var t=e.stateNode,i=e.type,l=e.memoizedProps;switch(t[Kt]=e,t[bt]=l,i){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(i=0;i<gs.length;i++)st(gs[i],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),Js(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),Ws(t,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||l.suppressHydrationWarning===!0||Ig(t.textContent,i)?(l.popover!=null&&(st("beforetoggle",t),st("toggle",t)),l.onScroll!=null&&st("scroll",t),l.onScrollEnd!=null&&st("scrollend",t),l.onClick!=null&&(t.onclick=bi),t=!0):t=!1,t||Ea(e,!0)}function zh(e){for(xn=e.return;xn;)switch(xn.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:xn=xn.return}}function Vl(e){if(e!==xn)return!1;if(!ht)return zh(e),ht=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Cd(e.type,e.memoizedProps)),i=!i),i&&Lt&&Ea(e),zh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Lt=np(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Lt=np(e)}else t===27?(t=Lt,Ga(e.type)?(e=kd,kd=null,Lt=e):Lt=t):Lt=xn?ci(e.stateNode.nextSibling):null;return!0}function rl(){Lt=xn=null,ht=!1}function uu(){var e=_a;return e!==null&&(Gn===null?Gn=e:Gn.push.apply(Gn,e),_a=null),e}function Io(e){_a===null?_a=[e]:_a.push(e)}var du=D(null),cl=null,Zi=null;function wa(e,t,i){de(du,t._currentValue),t._currentValue=i}function Ii(e){e._currentValue=du.current,V(du)}function fu(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function hu(e,t,i,l){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var u=r.dependencies;if(u!==null){var v=r.child;u=u.firstContext;e:for(;u!==null;){var _=u;u=r;for(var $=0;$<t.length;$++)if(_.context===t[$]){u.lanes|=i,_=u.alternate,_!==null&&(_.lanes|=i),fu(u.return,i,e),l||(v=null);break e}u=_.next}}else if(r.tag===18){if(v=r.return,v===null)throw Error(s(341));v.lanes|=i,u=v.alternate,u!==null&&(u.lanes|=i),fu(v,i,e),v=null}else v=r.child;if(v!==null)v.return=r;else for(v=r;v!==null;){if(v===e){v=null;break}if(r=v.sibling,r!==null){r.return=v.return,v=r;break}v=v.return}r=v}}function Ll(e,t,i,l){e=null;for(var r=t,u=!1;r!==null;){if(!u){if((r.flags&524288)!==0)u=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var v=r.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=r.type;Xn(r.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(r===ke.current){if(v=r.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(bs):e=[bs])}r=r.return}e!==null&&hu(t,e,i,l),t.flags|=262144}function dr(e){for(e=e.firstContext;e!==null;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ul(e){cl=e,Zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bn(e){return kh(cl,e)}function fr(e,t){return cl===null&&ul(e),kh(e,t)}function kh(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Zi===null){if(e===null)throw Error(s(308));Zi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Zi=Zi.next=t;return i}var dx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},fx=n.unstable_scheduleCallback,hx=n.unstable_NormalPriority,ln={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mu(){return{controller:new dx,data:new Map,refCount:0}}function Qo(e){e.refCount--,e.refCount===0&&fx(hx,function(){e.controller.abort()})}var Ko=null,gu=0,Xl=0,Zl=null;function mx(e,t){if(Ko===null){var i=Ko=[];gu=0,Xl=yd(),Zl={status:"pending",value:void 0,then:function(l){i.push(l)}}}return gu++,t.then(Oh,Oh),t}function Oh(){if(--gu===0&&Ko!==null){Zl!==null&&(Zl.status="fulfilled");var e=Ko;Ko=null,Xl=0,Zl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function gx(e,t){var i=[],l={status:"pending",value:null,reason:null,then:function(r){i.push(r)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var r=0;r<i.length;r++)(0,i[r])(t)},function(r){for(l.status="rejected",l.reason=r,r=0;r<i.length;r++)(0,i[r])(void 0)}),l}var qh=N.S;N.S=function(e,t){vg=wt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&mx(e,t),qh!==null&&qh(e,t)};var dl=D(null);function pu(){var e=dl.current;return e!==null?e:Ot.pooledCache}function hr(e,t){t===null?de(dl,dl.current):de(dl,t.pool)}function Rh(){var e=pu();return e===null?null:{parent:ln._currentValue,pool:e}}var Il=Error(s(460)),vu=Error(s(474)),mr=Error(s(542)),gr={then:function(){}};function jh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hh(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(bi,bi),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uh(e),e;default:if(typeof t.status=="string")t.then(bi,bi);else{if(e=Ot,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=l}},function(l){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uh(e),e}throw hl=t,Il}}function fl(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(hl=i,Il):i}}var hl=null;function Gh(){if(hl===null)throw Error(s(459));var e=hl;return hl=null,e}function Uh(e){if(e===Il||e===mr)throw Error(s(483))}var Ql=null,Jo=0;function pr(e){var t=Jo;return Jo+=1,Ql===null&&(Ql=[]),Hh(Ql,e,t)}function Fo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function vr(e,t){throw t.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Bh(e){function t(W,Z){if(e){var ae=W.deletions;ae===null?(W.deletions=[Z],W.flags|=16):ae.push(Z)}}function i(W,Z){if(!e)return null;for(;Z!==null;)t(W,Z),Z=Z.sibling;return null}function l(W){for(var Z=new Map;W!==null;)W.key!==null?Z.set(W.key,W):Z.set(W.index,W),W=W.sibling;return Z}function r(W,Z){return W=Li(W,Z),W.index=0,W.sibling=null,W}function u(W,Z,ae){return W.index=ae,e?(ae=W.alternate,ae!==null?(ae=ae.index,ae<Z?(W.flags|=67108866,Z):ae):(W.flags|=67108866,Z)):(W.flags|=1048576,Z)}function v(W){return e&&W.alternate===null&&(W.flags|=67108866),W}function _(W,Z,ae,Se){return Z===null||Z.tag!==6?(Z=lu(ae,W.mode,Se),Z.return=W,Z):(Z=r(Z,ae),Z.return=W,Z)}function $(W,Z,ae,Se){var Ue=ae.type;return Ue===T?xe(W,Z,ae.props.children,Se,ae.key):Z!==null&&(Z.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ce&&fl(Ue)===Z.type)?(Z=r(Z,ae.props),Fo(Z,ae),Z.return=W,Z):(Z=cr(ae.type,ae.key,ae.props,null,W.mode,Se),Fo(Z,ae),Z.return=W,Z)}function le(W,Z,ae,Se){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ae.containerInfo||Z.stateNode.implementation!==ae.implementation?(Z=ou(ae,W.mode,Se),Z.return=W,Z):(Z=r(Z,ae.children||[]),Z.return=W,Z)}function xe(W,Z,ae,Se,Ue){return Z===null||Z.tag!==7?(Z=sl(ae,W.mode,Se,Ue),Z.return=W,Z):(Z=r(Z,ae),Z.return=W,Z)}function _e(W,Z,ae){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=lu(""+Z,W.mode,ae),Z.return=W,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:return ae=cr(Z.type,Z.key,Z.props,null,W.mode,ae),Fo(ae,Z),ae.return=W,ae;case R:return Z=ou(Z,W.mode,ae),Z.return=W,Z;case ce:return Z=fl(Z),_e(W,Z,ae)}if(B(Z)||me(Z))return Z=sl(Z,W.mode,ae,null),Z.return=W,Z;if(typeof Z.then=="function")return _e(W,pr(Z),ae);if(Z.$$typeof===U)return _e(W,fr(W,Z),ae);vr(W,Z)}return null}function re(W,Z,ae,Se){var Ue=Z!==null?Z.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ue!==null?null:_(W,Z,""+ae,Se);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case E:return ae.key===Ue?$(W,Z,ae,Se):null;case R:return ae.key===Ue?le(W,Z,ae,Se):null;case ce:return ae=fl(ae),re(W,Z,ae,Se)}if(B(ae)||me(ae))return Ue!==null?null:xe(W,Z,ae,Se,null);if(typeof ae.then=="function")return re(W,Z,pr(ae),Se);if(ae.$$typeof===U)return re(W,Z,fr(W,ae),Se);vr(W,ae)}return null}function fe(W,Z,ae,Se,Ue){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return W=W.get(ae)||null,_(Z,W,""+Se,Ue);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case E:return W=W.get(Se.key===null?ae:Se.key)||null,$(Z,W,Se,Ue);case R:return W=W.get(Se.key===null?ae:Se.key)||null,le(Z,W,Se,Ue);case ce:return Se=fl(Se),fe(W,Z,ae,Se,Ue)}if(B(Se)||me(Se))return W=W.get(ae)||null,xe(Z,W,Se,Ue,null);if(typeof Se.then=="function")return fe(W,Z,ae,pr(Se),Ue);if(Se.$$typeof===U)return fe(W,Z,ae,fr(Z,Se),Ue);vr(Z,Se)}return null}function Re(W,Z,ae,Se){for(var Ue=null,yt=null,Ge=Z,Je=Z=0,ct=null;Ge!==null&&Je<ae.length;Je++){Ge.index>Je?(ct=Ge,Ge=null):ct=Ge.sibling;var xt=re(W,Ge,ae[Je],Se);if(xt===null){Ge===null&&(Ge=ct);break}e&&Ge&&xt.alternate===null&&t(W,Ge),Z=u(xt,Z,Je),yt===null?Ue=xt:yt.sibling=xt,yt=xt,Ge=ct}if(Je===ae.length)return i(W,Ge),ht&&Xi(W,Je),Ue;if(Ge===null){for(;Je<ae.length;Je++)Ge=_e(W,ae[Je],Se),Ge!==null&&(Z=u(Ge,Z,Je),yt===null?Ue=Ge:yt.sibling=Ge,yt=Ge);return ht&&Xi(W,Je),Ue}for(Ge=l(Ge);Je<ae.length;Je++)ct=fe(Ge,W,Je,ae[Je],Se),ct!==null&&(e&&ct.alternate!==null&&Ge.delete(ct.key===null?Je:ct.key),Z=u(ct,Z,Je),yt===null?Ue=ct:yt.sibling=ct,yt=ct);return e&&Ge.forEach(function(Va){return t(W,Va)}),ht&&Xi(W,Je),Ue}function $e(W,Z,ae,Se){if(ae==null)throw Error(s(151));for(var Ue=null,yt=null,Ge=Z,Je=Z=0,ct=null,xt=ae.next();Ge!==null&&!xt.done;Je++,xt=ae.next()){Ge.index>Je?(ct=Ge,Ge=null):ct=Ge.sibling;var Va=re(W,Ge,xt.value,Se);if(Va===null){Ge===null&&(Ge=ct);break}e&&Ge&&Va.alternate===null&&t(W,Ge),Z=u(Va,Z,Je),yt===null?Ue=Va:yt.sibling=Va,yt=Va,Ge=ct}if(xt.done)return i(W,Ge),ht&&Xi(W,Je),Ue;if(Ge===null){for(;!xt.done;Je++,xt=ae.next())xt=_e(W,xt.value,Se),xt!==null&&(Z=u(xt,Z,Je),yt===null?Ue=xt:yt.sibling=xt,yt=xt);return ht&&Xi(W,Je),Ue}for(Ge=l(Ge);!xt.done;Je++,xt=ae.next())xt=fe(Ge,W,Je,xt.value,Se),xt!==null&&(e&&xt.alternate!==null&&Ge.delete(xt.key===null?Je:xt.key),Z=u(xt,Z,Je),yt===null?Ue=xt:yt.sibling=xt,yt=xt);return e&&Ge.forEach(function(Ab){return t(W,Ab)}),ht&&Xi(W,Je),Ue}function zt(W,Z,ae,Se){if(typeof ae=="object"&&ae!==null&&ae.type===T&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case E:e:{for(var Ue=ae.key;Z!==null;){if(Z.key===Ue){if(Ue=ae.type,Ue===T){if(Z.tag===7){i(W,Z.sibling),Se=r(Z,ae.props.children),Se.return=W,W=Se;break e}}else if(Z.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ce&&fl(Ue)===Z.type){i(W,Z.sibling),Se=r(Z,ae.props),Fo(Se,ae),Se.return=W,W=Se;break e}i(W,Z);break}else t(W,Z);Z=Z.sibling}ae.type===T?(Se=sl(ae.props.children,W.mode,Se,ae.key),Se.return=W,W=Se):(Se=cr(ae.type,ae.key,ae.props,null,W.mode,Se),Fo(Se,ae),Se.return=W,W=Se)}return v(W);case R:e:{for(Ue=ae.key;Z!==null;){if(Z.key===Ue)if(Z.tag===4&&Z.stateNode.containerInfo===ae.containerInfo&&Z.stateNode.implementation===ae.implementation){i(W,Z.sibling),Se=r(Z,ae.children||[]),Se.return=W,W=Se;break e}else{i(W,Z);break}else t(W,Z);Z=Z.sibling}Se=ou(ae,W.mode,Se),Se.return=W,W=Se}return v(W);case ce:return ae=fl(ae),zt(W,Z,ae,Se)}if(B(ae))return Re(W,Z,ae,Se);if(me(ae)){if(Ue=me(ae),typeof Ue!="function")throw Error(s(150));return ae=Ue.call(ae),$e(W,Z,ae,Se)}if(typeof ae.then=="function")return zt(W,Z,pr(ae),Se);if(ae.$$typeof===U)return zt(W,Z,fr(W,ae),Se);vr(W,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,Z!==null&&Z.tag===6?(i(W,Z.sibling),Se=r(Z,ae),Se.return=W,W=Se):(i(W,Z),Se=lu(ae,W.mode,Se),Se.return=W,W=Se),v(W)):i(W,Z)}return function(W,Z,ae,Se){try{Jo=0;var Ue=zt(W,Z,ae,Se);return Ql=null,Ue}catch(Ge){if(Ge===Il||Ge===mr)throw Ge;var yt=Zn(29,Ge,null,W.mode);return yt.lanes=Se,yt.return=W,yt}}}var ml=Bh(!0),$h=Bh(!1),Aa=!1;function yu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ca(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Nt&2)!==0){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,t=rr(e),Eh(e,null,i),t}return sr(e,l,t,i),rr(e)}function Wo(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,ga(e,i)}}function bu(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var r=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?r=u=v:u=u.next=v,i=i.next}while(i!==null);u===null?r=u=t:u=u.next=t}else r=u=t;i={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Su=!1;function Po(){if(Su){var e=Zl;if(e!==null)throw e}}function es(e,t,i,l){Su=!1;var r=e.updateQueue;Aa=!1;var u=r.firstBaseUpdate,v=r.lastBaseUpdate,_=r.shared.pending;if(_!==null){r.shared.pending=null;var $=_,le=$.next;$.next=null,v===null?u=le:v.next=le,v=$;var xe=e.alternate;xe!==null&&(xe=xe.updateQueue,_=xe.lastBaseUpdate,_!==v&&(_===null?xe.firstBaseUpdate=le:_.next=le,xe.lastBaseUpdate=$))}if(u!==null){var _e=r.baseState;v=0,xe=le=$=null,_=u;do{var re=_.lane&-536870913,fe=re!==_.lane;if(fe?(rt&re)===re:(l&re)===re){re!==0&&re===Xl&&(Su=!0),xe!==null&&(xe=xe.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Re=e,$e=_;re=t;var zt=i;switch($e.tag){case 1:if(Re=$e.payload,typeof Re=="function"){_e=Re.call(zt,_e,re);break e}_e=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=$e.payload,re=typeof Re=="function"?Re.call(zt,_e,re):Re,re==null)break e;_e=p({},_e,re);break e;case 2:Aa=!0}}re=_.callback,re!==null&&(e.flags|=64,fe&&(e.flags|=8192),fe=r.callbacks,fe===null?r.callbacks=[re]:fe.push(re))}else fe={lane:re,tag:_.tag,payload:_.payload,callback:_.callback,next:null},xe===null?(le=xe=fe,$=_e):xe=xe.next=fe,v|=re;if(_=_.next,_===null){if(_=r.shared.pending,_===null)break;fe=_,_=fe.next,fe.next=null,r.lastBaseUpdate=fe,r.shared.pending=null}}while(!0);xe===null&&($=_e),r.baseState=$,r.firstBaseUpdate=le,r.lastBaseUpdate=xe,u===null&&(r.shared.lanes=0),Oa|=v,e.lanes=v,e.memoizedState=_e}}function Yh(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Vh(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Yh(i[e],t)}var Kl=D(null),yr=D(0);function Lh(e,t){e=na,de(yr,e),de(Kl,t),na=e|t.baseLanes}function Nu(){de(yr,na),de(Kl,Kl.current)}function _u(){na=yr.current,V(Kl),V(yr)}var In=D(null),ri=null;function Da(e){var t=e.alternate;de(tn,tn.current&1),de(In,e),ri===null&&(t===null||Kl.current!==null||t.memoizedState!==null)&&(ri=e)}function Eu(e){de(tn,tn.current),de(In,e),ri===null&&(ri=e)}function Xh(e){e.tag===22?(de(tn,tn.current),de(In,e),ri===null&&(ri=e)):Ma()}function Ma(){de(tn,tn.current),de(In,In.current)}function Qn(e){V(In),ri===e&&(ri=null),V(tn)}var tn=D(0);function xr(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Md(i)||zd(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qi=0,Ie=null,Dt=null,on=null,br=!1,Jl=!1,gl=!1,Sr=0,ts=0,Fl=null,px=0;function Wt(){throw Error(s(321))}function wu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Xn(e[i],t[i]))return!1;return!0}function Au(e,t,i,l,r,u){return Qi=u,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Tm:$u,gl=!1,u=i(l,r),gl=!1,Jl&&(u=Ih(t,i,l,r)),Zh(e),u}function Zh(e){N.H=as;var t=Dt!==null&&Dt.next!==null;if(Qi=0,on=Dt=Ie=null,br=!1,ts=0,Fl=null,t)throw Error(s(300));e===null||sn||(e=e.dependencies,e!==null&&dr(e)&&(sn=!0))}function Ih(e,t,i,l){Ie=e;var r=0;do{if(Jl&&(Fl=null),ts=0,Jl=!1,25<=r)throw Error(s(301));if(r+=1,on=Dt=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}N.H=Dm,u=t(i,l)}while(Jl);return u}function vx(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?ns(t):t,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(Ie.flags|=1024),t}function Cu(){var e=Sr!==0;return Sr=0,e}function Tu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Du(e){if(br){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}br=!1}Qi=0,on=Dt=Ie=null,Jl=!1,ts=Sr=0,Fl=null}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Ie.memoizedState=on=e:on=on.next=e,on}function nn(){if(Dt===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=on===null?Ie.memoizedState:on.next;if(t!==null)on=t,Dt=e;else{if(e===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},on===null?Ie.memoizedState=on=e:on=on.next=e}return on}function Nr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ns(e){var t=ts;return ts+=1,Fl===null&&(Fl=[]),e=Hh(Fl,e,t),t=Ie,(on===null?t.memoizedState:on.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Tm:$u),e}function _r(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ns(e);if(e.$$typeof===U)return bn(e)}throw Error(s(438,String(e)))}function Mu(e){var t=null,i=Ie.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Nr(),Ie.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),l=0;l<e;l++)i[l]=te;return t.index++,i}function Ki(e,t){return typeof t=="function"?t(e):t}function Er(e){var t=nn();return zu(t,Dt,e)}function zu(e,t,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var r=e.baseQueue,u=l.pending;if(u!==null){if(r!==null){var v=r.next;r.next=u.next,u.next=v}t.baseQueue=r=u,l.pending=null}if(u=e.baseState,r===null)e.memoizedState=u;else{t=r.next;var _=v=null,$=null,le=t,xe=!1;do{var _e=le.lane&-536870913;if(_e!==le.lane?(rt&_e)===_e:(Qi&_e)===_e){var re=le.revertLane;if(re===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),_e===Xl&&(xe=!0);else if((Qi&re)===re){le=le.next,re===Xl&&(xe=!0);continue}else _e={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},$===null?(_=$=_e,v=u):$=$.next=_e,Ie.lanes|=re,Oa|=re;_e=le.action,gl&&i(u,_e),u=le.hasEagerState?le.eagerState:i(u,_e)}else re={lane:_e,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},$===null?(_=$=re,v=u):$=$.next=re,Ie.lanes|=_e,Oa|=_e;le=le.next}while(le!==null&&le!==t);if($===null?v=u:$.next=_,!Xn(u,e.memoizedState)&&(sn=!0,xe&&(i=Zl,i!==null)))throw i;e.memoizedState=u,e.baseState=v,e.baseQueue=$,l.lastRenderedState=u}return r===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ku(e){var t=nn(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,r=i.pending,u=t.memoizedState;if(r!==null){i.pending=null;var v=r=r.next;do u=e(u,v.action),v=v.next;while(v!==r);Xn(u,t.memoizedState)||(sn=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,l]}function Qh(e,t,i){var l=Ie,r=nn(),u=ht;if(u){if(i===void 0)throw Error(s(407));i=i()}else i=t();var v=!Xn((Dt||r).memoizedState,i);if(v&&(r.memoizedState=i,sn=!0),r=r.queue,Ru(Fh.bind(null,l,r,e),[e]),r.getSnapshot!==t||v||on!==null&&on.memoizedState.tag&1){if(l.flags|=2048,Wl(9,{destroy:void 0},Jh.bind(null,l,r,i,t),null),Ot===null)throw Error(s(349));u||(Qi&127)!==0||Kh(l,t,i)}return i}function Kh(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ie.updateQueue,t===null?(t=Nr(),Ie.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Jh(e,t,i,l){t.value=i,t.getSnapshot=l,Wh(t)&&Ph(e)}function Fh(e,t,i){return i(function(){Wh(t)&&Ph(e)})}function Wh(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Xn(e,i)}catch{return!0}}function Ph(e){var t=ol(e,2);t!==null&&Un(t,e,2)}function Ou(e){var t=Dn();if(typeof e=="function"){var i=e;if(e=i(),gl){be(!0);try{i()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:e},t}function em(e,t,i,l){return e.baseState=i,zu(e,Dt,typeof l=="function"?l:Ki)}function yx(e,t,i,l,r){if(Cr(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){u.listeners.push(v)}};N.T!==null?i(!0):u.isTransition=!1,l(u),i=t.pending,i===null?(u.next=t.pending=u,tm(t,u)):(u.next=i.next,t.pending=i.next=u)}}function tm(e,t){var i=t.action,l=t.payload,r=e.state;if(t.isTransition){var u=N.T,v={};N.T=v;try{var _=i(r,l),$=N.S;$!==null&&$(v,_),nm(e,t,_)}catch(le){qu(e,t,le)}finally{u!==null&&v.types!==null&&(u.types=v.types),N.T=u}}else try{u=i(r,l),nm(e,t,u)}catch(le){qu(e,t,le)}}function nm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){im(e,t,l)},function(l){return qu(e,t,l)}):im(e,t,i)}function im(e,t,i){t.status="fulfilled",t.value=i,am(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,tm(e,i)))}function qu(e,t,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=i,am(t),t=t.next;while(t!==l)}e.action=null}function am(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lm(e,t){return t}function om(e,t){if(ht){var i=Ot.formState;if(i!==null){e:{var l=Ie;if(ht){if(Lt){t:{for(var r=Lt,u=si;r.nodeType!==8;){if(!u){r=null;break t}if(r=ci(r.nextSibling),r===null){r=null;break t}}u=r.data,r=u==="F!"||u==="F"?r:null}if(r){Lt=ci(r.nextSibling),l=r.data==="F!";break e}}Ea(l)}l=!1}l&&(t=i[0])}}return i=Dn(),i.memoizedState=i.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lm,lastRenderedState:t},i.queue=l,i=wm.bind(null,Ie,l),l.dispatch=i,l=Ou(!1),u=Bu.bind(null,Ie,!1,l.queue),l=Dn(),r={state:t,dispatch:null,action:e,pending:null},l.queue=r,i=yx.bind(null,Ie,r,u,i),r.dispatch=i,l.memoizedState=e,[t,i,!1]}function sm(e){var t=nn();return rm(t,Dt,e)}function rm(e,t,i){if(t=zu(e,t,lm)[0],e=Er(Ki)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ns(t)}catch(v){throw v===Il?mr:v}else l=t;t=nn();var r=t.queue,u=r.dispatch;return i!==t.memoizedState&&(Ie.flags|=2048,Wl(9,{destroy:void 0},xx.bind(null,r,i),null)),[l,u,e]}function xx(e,t){e.action=t}function cm(e){var t=nn(),i=Dt;if(i!==null)return rm(t,i,e);nn(),t=t.memoizedState,i=nn();var l=i.queue.dispatch;return i.memoizedState=e,[t,l,!1]}function Wl(e,t,i,l){return e={tag:e,create:i,deps:l,inst:t,next:null},t=Ie.updateQueue,t===null&&(t=Nr(),Ie.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e),e}function um(){return nn().memoizedState}function wr(e,t,i,l){var r=Dn();Ie.flags|=e,r.memoizedState=Wl(1|t,{destroy:void 0},i,l===void 0?null:l)}function Ar(e,t,i,l){var r=nn();l=l===void 0?null:l;var u=r.memoizedState.inst;Dt!==null&&l!==null&&wu(l,Dt.memoizedState.deps)?r.memoizedState=Wl(t,u,i,l):(Ie.flags|=e,r.memoizedState=Wl(1|t,u,i,l))}function dm(e,t){wr(8390656,8,e,t)}function Ru(e,t){Ar(2048,8,e,t)}function bx(e){Ie.flags|=4;var t=Ie.updateQueue;if(t===null)t=Nr(),Ie.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function fm(e){var t=nn().memoizedState;return bx({ref:t,nextImpl:e}),function(){if((Nt&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function hm(e,t){return Ar(4,2,e,t)}function mm(e,t){return Ar(4,4,e,t)}function gm(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pm(e,t,i){i=i!=null?i.concat([e]):null,Ar(4,4,gm.bind(null,t,e),i)}function ju(){}function vm(e,t){var i=nn();t=t===void 0?null:t;var l=i.memoizedState;return t!==null&&wu(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function ym(e,t){var i=nn();t=t===void 0?null:t;var l=i.memoizedState;if(t!==null&&wu(t,l[1]))return l[0];if(l=e(),gl){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[l,t],l}function Hu(e,t,i){return i===void 0||(Qi&1073741824)!==0&&(rt&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=xg(),Ie.lanes|=e,Oa|=e,i)}function xm(e,t,i,l){return Xn(i,t)?i:Kl.current!==null?(e=Hu(e,i,l),Xn(e,t)||(sn=!0),e):(Qi&42)===0||(Qi&1073741824)!==0&&(rt&261930)===0?(sn=!0,e.memoizedState=i):(e=xg(),Ie.lanes|=e,Oa|=e,t)}function bm(e,t,i,l,r){var u=L.p;L.p=u!==0&&8>u?u:8;var v=N.T,_={};N.T=_,Bu(e,!1,t,i);try{var $=r(),le=N.S;if(le!==null&&le(_,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var xe=gx($,l);is(e,t,xe,Fn(e))}else is(e,t,l,Fn(e))}catch(_e){is(e,t,{then:function(){},status:"rejected",reason:_e},Fn())}finally{L.p=u,v!==null&&_.types!==null&&(v.types=_.types),N.T=v}}function Sx(){}function Gu(e,t,i,l){if(e.tag!==5)throw Error(s(476));var r=Sm(e).queue;bm(e,r,t,ne,i===null?Sx:function(){return Nm(e),i(l)})}function Sm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ne},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Nm(e){var t=Sm(e);t.next===null&&(t=e.alternate.memoizedState),is(e,t.next.queue,{},Fn())}function Uu(){return bn(bs)}function _m(){return nn().memoizedState}function Em(){return nn().memoizedState}function Nx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Fn();e=Ca(i);var l=Ta(t,e,i);l!==null&&(Un(l,t,i),Wo(l,t,i)),t={cache:mu()},e.payload=t;return}t=t.return}}function _x(e,t,i){var l=Fn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Cr(e)?Am(t,i):(i=iu(e,t,i,l),i!==null&&(Un(i,e,l),Cm(i,t,l)))}function wm(e,t,i){var l=Fn();is(e,t,i,l)}function is(e,t,i,l){var r={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Cr(e))Am(t,r);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var v=t.lastRenderedState,_=u(v,i);if(r.hasEagerState=!0,r.eagerState=_,Xn(_,v))return sr(e,t,r,0),Ot===null&&or(),!1}catch{}if(i=iu(e,t,r,l),i!==null)return Un(i,e,l),Cm(i,t,l),!0}return!1}function Bu(e,t,i,l){if(l={lane:2,revertLane:yd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cr(e)){if(t)throw Error(s(479))}else t=iu(e,i,l,2),t!==null&&Un(t,e,2)}function Cr(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Am(e,t){Jl=br=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Cm(e,t,i){if((i&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,ga(e,i)}}var as={readContext:bn,use:_r,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt};as.useEffectEvent=Wt;var Tm={readContext:bn,use:_r,useCallback:function(e,t){return Dn().memoizedState=[e,t===void 0?null:t],e},useContext:bn,useEffect:dm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,wr(4194308,4,gm.bind(null,t,e),i)},useLayoutEffect:function(e,t){return wr(4194308,4,e,t)},useInsertionEffect:function(e,t){wr(4,2,e,t)},useMemo:function(e,t){var i=Dn();t=t===void 0?null:t;var l=e();if(gl){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[l,t],l},useReducer:function(e,t,i){var l=Dn();if(i!==void 0){var r=i(t);if(gl){be(!0);try{i(t)}finally{be(!1)}}}else r=t;return l.memoizedState=l.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=_x.bind(null,Ie,e),[l.memoizedState,e]},useRef:function(e){var t=Dn();return e={current:e},t.memoizedState=e},useState:function(e){e=Ou(e);var t=e.queue,i=wm.bind(null,Ie,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:ju,useDeferredValue:function(e,t){var i=Dn();return Hu(i,e,t)},useTransition:function(){var e=Ou(!1);return e=bm.bind(null,Ie,e.queue,!0,!1),Dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var l=Ie,r=Dn();if(ht){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Ot===null)throw Error(s(349));(rt&127)!==0||Kh(l,t,i)}r.memoizedState=i;var u={value:i,getSnapshot:t};return r.queue=u,dm(Fh.bind(null,l,u,e),[e]),l.flags|=2048,Wl(9,{destroy:void 0},Jh.bind(null,l,u,i,t),null),i},useId:function(){var e=Dn(),t=Ot.identifierPrefix;if(ht){var i=ki,l=zi;i=(l&~(1<<32-Be(l)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Sr++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=px++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Uu,useFormState:om,useActionState:om,useOptimistic:function(e){var t=Dn();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Bu.bind(null,Ie,!0,i),i.dispatch=t,[e,t]},useMemoCache:Mu,useCacheRefresh:function(){return Dn().memoizedState=Nx.bind(null,Ie)},useEffectEvent:function(e){var t=Dn(),i={impl:e};return t.memoizedState=i,function(){if((Nt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},$u={readContext:bn,use:_r,useCallback:vm,useContext:bn,useEffect:Ru,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:mm,useMemo:ym,useReducer:Er,useRef:um,useState:function(){return Er(Ki)},useDebugValue:ju,useDeferredValue:function(e,t){var i=nn();return xm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=Er(Ki)[0],t=nn().memoizedState;return[typeof e=="boolean"?e:ns(e),t]},useSyncExternalStore:Qh,useId:_m,useHostTransitionStatus:Uu,useFormState:sm,useActionState:sm,useOptimistic:function(e,t){var i=nn();return em(i,Dt,e,t)},useMemoCache:Mu,useCacheRefresh:Em};$u.useEffectEvent=fm;var Dm={readContext:bn,use:_r,useCallback:vm,useContext:bn,useEffect:Ru,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:mm,useMemo:ym,useReducer:ku,useRef:um,useState:function(){return ku(Ki)},useDebugValue:ju,useDeferredValue:function(e,t){var i=nn();return Dt===null?Hu(i,e,t):xm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=ku(Ki)[0],t=nn().memoizedState;return[typeof e=="boolean"?e:ns(e),t]},useSyncExternalStore:Qh,useId:_m,useHostTransitionStatus:Uu,useFormState:cm,useActionState:cm,useOptimistic:function(e,t){var i=nn();return Dt!==null?em(i,Dt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:Em};Dm.useEffectEvent=fm;function Yu(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:p({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Vu={enqueueSetState:function(e,t,i){e=e._reactInternals;var l=Fn(),r=Ca(l);r.payload=t,i!=null&&(r.callback=i),t=Ta(e,r,l),t!==null&&(Un(t,e,l),Wo(t,e,l))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=Fn(),r=Ca(l);r.tag=1,r.payload=t,i!=null&&(r.callback=i),t=Ta(e,r,l),t!==null&&(Un(t,e,l),Wo(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Fn(),l=Ca(i);l.tag=2,t!=null&&(l.callback=t),t=Ta(e,l,i),t!==null&&(Un(t,e,i),Wo(t,e,i))}};function Mm(e,t,i,l,r,u,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,u,v):t.prototype&&t.prototype.isPureReactComponent?!Lo(i,l)||!Lo(r,u):!0}function zm(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&Vu.enqueueReplaceState(t,t.state,null)}function pl(e,t){var i=t;if("ref"in t){i={};for(var l in t)l!=="ref"&&(i[l]=t[l])}if(e=e.defaultProps){i===t&&(i=p({},i));for(var r in e)i[r]===void 0&&(i[r]=e[r])}return i}function km(e){lr(e)}function Om(e){console.error(e)}function qm(e){lr(e)}function Tr(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Rm(e,t,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Lu(e,t,i){return i=Ca(i),i.tag=3,i.payload={element:null},i.callback=function(){Tr(e,t)},i}function jm(e){return e=Ca(e),e.tag=3,e}function Hm(e,t,i,l){var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var u=l.value;e.payload=function(){return r(u)},e.callback=function(){Rm(t,i,l)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Rm(t,i,l),typeof r!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function Ex(e,t,i,l,r){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=i.alternate,t!==null&&Ll(t,i,r,!0),i=In.current,i!==null){switch(i.tag){case 31:case 13:return ri===null?Br():i.alternate===null&&Pt===0&&(Pt=3),i.flags&=-257,i.flags|=65536,i.lanes=r,l===gr?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([l]):t.add(l),gd(e,l,r)),!1;case 22:return i.flags|=65536,l===gr?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([l]):i.add(l)),gd(e,l,r)),!1}throw Error(s(435,i.tag))}return gd(e,l,r),Br(),!1}if(ht)return t=In.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,l!==cu&&(e=Error(s(422),{cause:l}),Io(ai(e,i)))):(l!==cu&&(t=Error(s(423),{cause:l}),Io(ai(t,i))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,l=ai(l,i),r=Lu(e.stateNode,l,r),bu(e,r),Pt!==4&&(Pt=2)),!1;var u=Error(s(520),{cause:l});if(u=ai(u,i),fs===null?fs=[u]:fs.push(u),Pt!==4&&(Pt=2),t===null)return!0;l=ai(l,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=r&-r,i.lanes|=e,e=Lu(i.stateNode,l,e),bu(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(qa===null||!qa.has(u))))return i.flags|=65536,r&=-r,i.lanes|=r,r=jm(r),Hm(r,e,i,l),bu(i,r),!1}i=i.return}while(i!==null);return!1}var Xu=Error(s(461)),sn=!1;function Sn(e,t,i,l){t.child=e===null?$h(t,null,i,l):ml(t,e.child,i,l)}function Gm(e,t,i,l,r){i=i.render;var u=t.ref;if("ref"in l){var v={};for(var _ in l)_!=="ref"&&(v[_]=l[_])}else v=l;return ul(t),l=Au(e,t,i,v,u,r),_=Cu(),e!==null&&!sn?(Tu(e,t,r),Ji(e,t,r)):(ht&&_&&su(t),t.flags|=1,Sn(e,t,l,r),t.child)}function Um(e,t,i,l,r){if(e===null){var u=i.type;return typeof u=="function"&&!au(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,Bm(e,t,u,l,r)):(e=cr(i.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Pu(e,r)){var v=u.memoizedProps;if(i=i.compare,i=i!==null?i:Lo,i(v,l)&&e.ref===t.ref)return Ji(e,t,r)}return t.flags|=1,e=Li(u,l),e.ref=t.ref,e.return=t,t.child=e}function Bm(e,t,i,l,r){if(e!==null){var u=e.memoizedProps;if(Lo(u,l)&&e.ref===t.ref)if(sn=!1,t.pendingProps=l=u,Pu(e,r))(e.flags&131072)!==0&&(sn=!0);else return t.lanes=e.lanes,Ji(e,t,r)}return Zu(e,t,i,l,r)}function $m(e,t,i,l){var r=l.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(l=t.child=e.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;l=r&~u}else l=0,t.child=null;return Ym(e,t,u,i,l)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&hr(t,u!==null?u.cachePool:null),u!==null?Lh(t,u):Nu(),Xh(t);else return l=t.lanes=536870912,Ym(e,t,u!==null?u.baseLanes|i:i,i,l)}else u!==null?(hr(t,u.cachePool),Lh(t,u),Ma(),t.memoizedState=null):(e!==null&&hr(t,null),Nu(),Ma());return Sn(e,t,r,i),t.child}function ls(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ym(e,t,i,l,r){var u=pu();return u=u===null?null:{parent:ln._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&hr(t,null),Nu(),Xh(t),e!==null&&Ll(e,t,l,!0),t.childLanes=r,null}function Dr(e,t){return t=zr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Vm(e,t,i){return ml(t,e.child,null,i),e=Dr(t,t.pendingProps),e.flags|=2,Qn(t),t.memoizedState=null,e}function wx(e,t,i){var l=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ht){if(l.mode==="hidden")return e=Dr(t,l),t.lanes=536870912,ls(null,e);if(Eu(t),(e=Lt)?(e=tp(e,si),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Na!==null?{id:zi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},i=Ah(e),i.return=t,t.child=i,xn=t,Lt=null)):e=null,e===null)throw Ea(t);return t.lanes=536870912,null}return Dr(t,l)}var u=e.memoizedState;if(u!==null){var v=u.dehydrated;if(Eu(t),r)if(t.flags&256)t.flags&=-257,t=Vm(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(sn||Ll(e,t,i,!1),r=(i&e.childLanes)!==0,sn||r){if(l=Ot,l!==null&&(v=pa(l,i),v!==0&&v!==u.retryLane))throw u.retryLane=v,ol(e,v),Un(l,e,v),Xu;Br(),t=Vm(e,t,i)}else e=u.treeContext,Lt=ci(v.nextSibling),xn=t,ht=!0,_a=null,si=!1,e!==null&&Dh(t,e),t=Dr(t,l),t.flags|=4096;return t}return e=Li(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Mr(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Zu(e,t,i,l,r){return ul(t),i=Au(e,t,i,l,void 0,r),l=Cu(),e!==null&&!sn?(Tu(e,t,r),Ji(e,t,r)):(ht&&l&&su(t),t.flags|=1,Sn(e,t,i,r),t.child)}function Lm(e,t,i,l,r,u){return ul(t),t.updateQueue=null,i=Ih(t,l,i,r),Zh(e),l=Cu(),e!==null&&!sn?(Tu(e,t,u),Ji(e,t,u)):(ht&&l&&su(t),t.flags|=1,Sn(e,t,i,u),t.child)}function Xm(e,t,i,l,r){if(ul(t),t.stateNode===null){var u=Bl,v=i.contextType;typeof v=="object"&&v!==null&&(u=bn(v)),u=new i(l,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Vu,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=l,u.state=t.memoizedState,u.refs={},yu(t),v=i.contextType,u.context=typeof v=="object"&&v!==null?bn(v):Bl,u.state=t.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Yu(t,i,v,l),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(v=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),v!==u.state&&Vu.enqueueReplaceState(u,u.state,null),es(t,l,u,r),Po(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){u=t.stateNode;var _=t.memoizedProps,$=pl(i,_);u.props=$;var le=u.context,xe=i.contextType;v=Bl,typeof xe=="object"&&xe!==null&&(v=bn(xe));var _e=i.getDerivedStateFromProps;xe=typeof _e=="function"||typeof u.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,xe||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(_||le!==v)&&zm(t,u,l,v),Aa=!1;var re=t.memoizedState;u.state=re,es(t,l,u,r),Po(),le=t.memoizedState,_||re!==le||Aa?(typeof _e=="function"&&(Yu(t,i,_e,l),le=t.memoizedState),($=Aa||Mm(t,i,$,l,re,le,v))?(xe||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=le),u.props=l,u.state=le,u.context=v,l=$):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{u=t.stateNode,xu(e,t),v=t.memoizedProps,xe=pl(i,v),u.props=xe,_e=t.pendingProps,re=u.context,le=i.contextType,$=Bl,typeof le=="object"&&le!==null&&($=bn(le)),_=i.getDerivedStateFromProps,(le=typeof _=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v!==_e||re!==$)&&zm(t,u,l,$),Aa=!1,re=t.memoizedState,u.state=re,es(t,l,u,r),Po();var fe=t.memoizedState;v!==_e||re!==fe||Aa||e!==null&&e.dependencies!==null&&dr(e.dependencies)?(typeof _=="function"&&(Yu(t,i,_,l),fe=t.memoizedState),(xe=Aa||Mm(t,i,xe,l,re,fe,$)||e!==null&&e.dependencies!==null&&dr(e.dependencies))?(le||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,fe,$),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,fe,$)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||v===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=fe),u.props=l,u.state=fe,u.context=$,l=xe):(typeof u.componentDidUpdate!="function"||v===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),l=!1)}return u=l,Mr(e,t),l=(t.flags&128)!==0,u||l?(u=t.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&l?(t.child=ml(t,e.child,null,r),t.child=ml(t,null,i,r)):Sn(e,t,i,r),t.memoizedState=u.state,e=t.child):e=Ji(e,t,r),e}function Zm(e,t,i,l){return rl(),t.flags|=256,Sn(e,t,i,l),t.child}var Iu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qu(e){return{baseLanes:e,cachePool:Rh()}}function Ku(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Jn),e}function Im(e,t,i){var l=t.pendingProps,r=!1,u=(t.flags&128)!==0,v;if((v=u)||(v=e!==null&&e.memoizedState===null?!1:(tn.current&2)!==0),v&&(r=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(ht){if(r?Da(t):Ma(),(e=Lt)?(e=tp(e,si),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Na!==null?{id:zi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},i=Ah(e),i.return=t,t.child=i,xn=t,Lt=null)):e=null,e===null)throw Ea(t);return zd(e)?t.lanes=32:t.lanes=536870912,null}var _=l.children;return l=l.fallback,r?(Ma(),r=t.mode,_=zr({mode:"hidden",children:_},r),l=sl(l,r,i,null),_.return=t,l.return=t,_.sibling=l,t.child=_,l=t.child,l.memoizedState=Qu(i),l.childLanes=Ku(e,v,i),t.memoizedState=Iu,ls(null,l)):(Da(t),Ju(t,_))}var $=e.memoizedState;if($!==null&&(_=$.dehydrated,_!==null)){if(u)t.flags&256?(Da(t),t.flags&=-257,t=Fu(e,t,i)):t.memoizedState!==null?(Ma(),t.child=e.child,t.flags|=128,t=null):(Ma(),_=l.fallback,r=t.mode,l=zr({mode:"visible",children:l.children},r),_=sl(_,r,i,null),_.flags|=2,l.return=t,_.return=t,l.sibling=_,t.child=l,ml(t,e.child,null,i),l=t.child,l.memoizedState=Qu(i),l.childLanes=Ku(e,v,i),t.memoizedState=Iu,t=ls(null,l));else if(Da(t),zd(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var le=v.dgst;v=le,l=Error(s(419)),l.stack="",l.digest=v,Io({value:l,source:null,stack:null}),t=Fu(e,t,i)}else if(sn||Ll(e,t,i,!1),v=(i&e.childLanes)!==0,sn||v){if(v=Ot,v!==null&&(l=pa(v,i),l!==0&&l!==$.retryLane))throw $.retryLane=l,ol(e,l),Un(v,e,l),Xu;Md(_)||Br(),t=Fu(e,t,i)}else Md(_)?(t.flags|=192,t.child=e.child,t=null):(e=$.treeContext,Lt=ci(_.nextSibling),xn=t,ht=!0,_a=null,si=!1,e!==null&&Dh(t,e),t=Ju(t,l.children),t.flags|=4096);return t}return r?(Ma(),_=l.fallback,r=t.mode,$=e.child,le=$.sibling,l=Li($,{mode:"hidden",children:l.children}),l.subtreeFlags=$.subtreeFlags&65011712,le!==null?_=Li(le,_):(_=sl(_,r,i,null),_.flags|=2),_.return=t,l.return=t,l.sibling=_,t.child=l,ls(null,l),l=t.child,_=e.child.memoizedState,_===null?_=Qu(i):(r=_.cachePool,r!==null?($=ln._currentValue,r=r.parent!==$?{parent:$,pool:$}:r):r=Rh(),_={baseLanes:_.baseLanes|i,cachePool:r}),l.memoizedState=_,l.childLanes=Ku(e,v,i),t.memoizedState=Iu,ls(e.child,l)):(Da(t),i=e.child,e=i.sibling,i=Li(i,{mode:"visible",children:l.children}),i.return=t,i.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=i,t.memoizedState=null,i)}function Ju(e,t){return t=zr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zr(e,t){return e=Zn(22,e,null,t),e.lanes=0,e}function Fu(e,t,i){return ml(t,e.child,null,i),e=Ju(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qm(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),fu(e.return,t,i)}function Wu(e,t,i,l,r,u){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:r,treeForkCount:u}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=i,v.tailMode=r,v.treeForkCount=u)}function Km(e,t,i){var l=t.pendingProps,r=l.revealOrder,u=l.tail;l=l.children;var v=tn.current,_=(v&2)!==0;if(_?(v=v&1|2,t.flags|=128):v&=1,de(tn,v),Sn(e,t,l,i),l=ht?Zo:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qm(e,i,t);else if(e.tag===19)Qm(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&xr(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Wu(t,!1,r,i,u,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&xr(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Wu(t,!0,i,null,u,l);break;case"together":Wu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Ji(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Ll(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Li(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Li(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Pu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&dr(e)))}function Ax(e,t,i){switch(t.tag){case 3:qe(t,t.stateNode.containerInfo),wa(t,ln,e.memoizedState.cache),rl();break;case 27:case 5:Ye(t);break;case 4:qe(t,t.stateNode.containerInfo);break;case 10:wa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Eu(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Da(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Im(e,t,i):(Da(t),e=Ji(e,t,i),e!==null?e.sibling:null);Da(t);break;case 19:var r=(e.flags&128)!==0;if(l=(i&t.childLanes)!==0,l||(Ll(e,t,i,!1),l=(i&t.childLanes)!==0),r){if(l)return Km(e,t,i);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),de(tn,tn.current),l)break;return null;case 22:return t.lanes=0,$m(e,t,i,t.pendingProps);case 24:wa(t,ln,e.memoizedState.cache)}return Ji(e,t,i)}function Jm(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)sn=!0;else{if(!Pu(e,i)&&(t.flags&128)===0)return sn=!1,Ax(e,t,i);sn=(e.flags&131072)!==0}else sn=!1,ht&&(t.flags&1048576)!==0&&Th(t,Zo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=fl(t.elementType),t.type=e,typeof e=="function")au(e)?(l=pl(e,l),t.tag=1,t=Xm(null,t,e,l,i)):(t.tag=0,t=Zu(null,t,e,l,i));else{if(e!=null){var r=e.$$typeof;if(r===w){t.tag=11,t=Gm(null,t,e,l,i);break e}else if(r===F){t.tag=14,t=Um(null,t,e,l,i);break e}}throw t=z(e)||e,Error(s(306,t,""))}}return t;case 0:return Zu(e,t,t.type,t.pendingProps,i);case 1:return l=t.type,r=pl(l,t.pendingProps),Xm(e,t,l,r,i);case 3:e:{if(qe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var u=t.memoizedState;r=u.element,xu(e,t),es(t,l,null,i);var v=t.memoizedState;if(l=v.cache,wa(t,ln,l),l!==u.cache&&hu(t,[ln],i,!0),Po(),l=v.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Zm(e,t,l,i);break e}else if(l!==r){r=ai(Error(s(424)),t),Io(r),t=Zm(e,t,l,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Lt=ci(e.firstChild),xn=t,ht=!0,_a=null,si=!0,i=$h(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(rl(),l===r){t=Ji(e,t,i);break e}Sn(e,t,l,i)}t=t.child}return t;case 26:return Mr(e,t),e===null?(i=sp(t.type,null,t.pendingProps,null))?t.memoizedState=i:ht||(i=t.type,e=t.pendingProps,l=Ir(Ce.current).createElement(i),l[Kt]=t,l[bt]=e,Nn(l,i,e),Jt(l),t.stateNode=l):t.memoizedState=sp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ye(t),e===null&&ht&&(l=t.stateNode=ap(t.type,t.pendingProps,Ce.current),xn=t,si=!0,r=Lt,Ga(t.type)?(kd=r,Lt=ci(l.firstChild)):Lt=r),Sn(e,t,t.pendingProps.children,i),Mr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ht&&((r=l=Lt)&&(l=nb(l,t.type,t.pendingProps,si),l!==null?(t.stateNode=l,xn=t,Lt=ci(l.firstChild),si=!1,r=!0):r=!1),r||Ea(t)),Ye(t),r=t.type,u=t.pendingProps,v=e!==null?e.memoizedProps:null,l=u.children,Cd(r,u)?l=null:v!==null&&Cd(r,v)&&(t.flags|=32),t.memoizedState!==null&&(r=Au(e,t,vx,null,null,i),bs._currentValue=r),Mr(e,t),Sn(e,t,l,i),t.child;case 6:return e===null&&ht&&((e=i=Lt)&&(i=ib(i,t.pendingProps,si),i!==null?(t.stateNode=i,xn=t,Lt=null,e=!0):e=!1),e||Ea(t)),null;case 13:return Im(e,t,i);case 4:return qe(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ml(t,null,l,i):Sn(e,t,l,i),t.child;case 11:return Gm(e,t,t.type,t.pendingProps,i);case 7:return Sn(e,t,t.pendingProps,i),t.child;case 8:return Sn(e,t,t.pendingProps.children,i),t.child;case 12:return Sn(e,t,t.pendingProps.children,i),t.child;case 10:return l=t.pendingProps,wa(t,t.type,l.value),Sn(e,t,l.children,i),t.child;case 9:return r=t.type._context,l=t.pendingProps.children,ul(t),r=bn(r),l=l(r),t.flags|=1,Sn(e,t,l,i),t.child;case 14:return Um(e,t,t.type,t.pendingProps,i);case 15:return Bm(e,t,t.type,t.pendingProps,i);case 19:return Km(e,t,i);case 31:return wx(e,t,i);case 22:return $m(e,t,i,t.pendingProps);case 24:return ul(t),l=bn(ln),e===null?(r=pu(),r===null&&(r=Ot,u=mu(),r.pooledCache=u,u.refCount++,u!==null&&(r.pooledCacheLanes|=i),r=u),t.memoizedState={parent:l,cache:r},yu(t),wa(t,ln,r)):((e.lanes&i)!==0&&(xu(e,t),es(t,null,null,i),Po()),r=e.memoizedState,u=t.memoizedState,r.parent!==l?(r={parent:l,cache:l},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),wa(t,ln,l)):(l=u.cache,wa(t,ln,l),l!==r.cache&&hu(t,[ln],i,!0))),Sn(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Fi(e){e.flags|=4}function ed(e,t,i,l,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(_g())e.flags|=8192;else throw hl=gr,vu}else e.flags&=-16777217}function Fm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!fp(t))if(_g())e.flags|=8192;else throw hl=gr,vu}function kr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Bi():536870912,e.lanes|=t,no|=t)}function os(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var r=e.child;r!==null;)i|=r.lanes|r.childLanes,l|=r.subtreeFlags&65011712,l|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)i|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function Cx(e,t,i){var l=t.pendingProps;switch(ru(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(t),null;case 1:return Xt(t),null;case 3:return i=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Ii(ln),Oe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Vl(t)?Fi(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,uu())),Xt(t),null;case 26:var r=t.type,u=t.memoizedState;return e===null?(Fi(t),u!==null?(Xt(t),Fm(t,u)):(Xt(t),ed(t,r,null,l,i))):u?u!==e.memoizedState?(Fi(t),Xt(t),Fm(t,u)):(Xt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Fi(t),Xt(t),ed(t,r,e,l,i)),null;case 27:if(at(t),i=Ce.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Fi(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Xt(t),null}e=ge.current,Vl(t)?Mh(t):(e=ap(r,l,i),t.stateNode=e,Fi(t))}return Xt(t),null;case 5:if(at(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Fi(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Xt(t),null}if(u=ge.current,Vl(t))Mh(t);else{var v=Ir(Ce.current);switch(u){case 1:u=v.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:u=v.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":u=v.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":u=v.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":u=v.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?v.createElement(r,{is:l.is}):v.createElement(r)}}u[Kt]=t,u[bt]=l;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)u.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=u;e:switch(Nn(u,r,l),r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Fi(t)}}return Xt(t),ed(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Fi(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=Ce.current,Vl(t)){if(e=t.stateNode,i=t.memoizedProps,l=null,r=xn,r!==null)switch(r.tag){case 27:case 5:l=r.memoizedProps}e[Kt]=t,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Ig(e.nodeValue,i)),e||Ea(t,!0)}else e=Ir(e).createTextNode(l),e[Kt]=t,t.stateNode=e}return Xt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(l=Vl(t),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Kt]=t}else rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xt(t),e=!1}else i=uu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Qn(t),t):(Qn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Xt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Vl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!r)throw Error(s(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));r[Kt]=t}else rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xt(t),r=!1}else r=uu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Qn(t),t):(Qn(t),null)}return Qn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=t.child,r=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(r=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==r&&(l.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),kr(t,t.updateQueue),Xt(t),null);case 4:return Oe(),e===null&&Nd(t.stateNode.containerInfo),Xt(t),null;case 10:return Ii(t.type),Xt(t),null;case 19:if(V(tn),l=t.memoizedState,l===null)return Xt(t),null;if(r=(t.flags&128)!==0,u=l.rendering,u===null)if(r)os(l,!1);else{if(Pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=xr(e),u!==null){for(t.flags|=128,os(l,!1),e=u.updateQueue,t.updateQueue=e,kr(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)wh(i,e),i=i.sibling;return de(tn,tn.current&1|2),ht&&Xi(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&wt()>Hr&&(t.flags|=128,r=!0,os(l,!1),t.lanes=4194304)}else{if(!r)if(e=xr(u),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,kr(t,e),os(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!ht)return Xt(t),null}else 2*wt()-l.renderingStartTime>Hr&&i!==536870912&&(t.flags|=128,r=!0,os(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=wt(),e.sibling=null,i=tn.current,de(tn,r?i&1|2:i&1),ht&&Xi(t,l.treeForkCount),e):(Xt(t),null);case 22:case 23:return Qn(t),_u(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(i&536870912)!==0&&(t.flags&128)===0&&(Xt(t),t.subtreeFlags&6&&(t.flags|=8192)):Xt(t),i=t.updateQueue,i!==null&&kr(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==i&&(t.flags|=2048),e!==null&&V(dl),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ii(ln),Xt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Tx(e,t){switch(ru(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ii(ln),Oe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return at(t),null;case 31:if(t.memoizedState!==null){if(Qn(t),t.alternate===null)throw Error(s(340));rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(tn),null;case 4:return Oe(),null;case 10:return Ii(t.type),null;case 22:case 23:return Qn(t),_u(),e!==null&&V(dl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ii(ln),null;case 25:return null;default:return null}}function Wm(e,t){switch(ru(t),t.tag){case 3:Ii(ln),Oe();break;case 26:case 27:case 5:at(t);break;case 4:Oe();break;case 31:t.memoizedState!==null&&Qn(t);break;case 13:Qn(t);break;case 19:V(tn);break;case 10:Ii(t.type);break;case 22:case 23:Qn(t),_u(),e!==null&&V(dl);break;case 24:Ii(ln)}}function ss(e,t){try{var i=t.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var r=l.next;i=r;do{if((i.tag&e)===e){l=void 0;var u=i.create,v=i.inst;l=u(),v.destroy=l}i=i.next}while(i!==r)}}catch(_){Ct(t,t.return,_)}}function za(e,t,i){try{var l=t.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var u=r.next;l=u;do{if((l.tag&e)===e){var v=l.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,r=t;var $=i,le=_;try{le()}catch(xe){Ct(r,$,xe)}}}l=l.next}while(l!==u)}}catch(xe){Ct(t,t.return,xe)}}function Pm(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Vh(t,i)}catch(l){Ct(e,e.return,l)}}}function eg(e,t,i){i.props=pl(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){Ct(e,t,l)}}function rs(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(r){Ct(e,t,r)}}function Oi(e,t){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(r){Ct(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(r){Ct(e,t,r)}else i.current=null}function tg(e){var t=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(r){Ct(e,e.return,r)}}function td(e,t,i){try{var l=e.stateNode;Jx(l,e.type,i,t),l[bt]=t}catch(r){Ct(e,e.return,r)}}function ng(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ga(e.type)||e.tag===4}function nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ng(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ga(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function id(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=bi));else if(l!==4&&(l===27&&Ga(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(id(e,t,i),e=e.sibling;e!==null;)id(e,t,i),e=e.sibling}function Or(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(l===27&&Ga(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Or(e,t,i),e=e.sibling;e!==null;)Or(e,t,i),e=e.sibling}function ig(e){var t=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Nn(t,l,i),t[Kt]=e,t[bt]=i}catch(u){Ct(e,e.return,u)}}var Wi=!1,rn=!1,ad=!1,ag=typeof WeakSet=="function"?WeakSet:Set,mn=null;function Dx(e,t){if(e=e.containerInfo,wd=ec,e=ph(e),Fc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var r=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var v=0,_=-1,$=-1,le=0,xe=0,_e=e,re=null;t:for(;;){for(var fe;_e!==i||r!==0&&_e.nodeType!==3||(_=v+r),_e!==u||l!==0&&_e.nodeType!==3||($=v+l),_e.nodeType===3&&(v+=_e.nodeValue.length),(fe=_e.firstChild)!==null;)re=_e,_e=fe;for(;;){if(_e===e)break t;if(re===i&&++le===r&&(_=v),re===u&&++xe===l&&($=v),(fe=_e.nextSibling)!==null)break;_e=re,re=_e.parentNode}_e=fe}i=_===-1||$===-1?null:{start:_,end:$}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ad={focusedElem:e,selectionRange:i},ec=!1,mn=t;mn!==null;)if(t=mn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mn=e;else for(;mn!==null;){switch(t=mn,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)r=e[i],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,r=u.memoizedProps,u=u.memoizedState,l=i.stateNode;try{var Re=pl(i.type,r);e=l.getSnapshotBeforeUpdate(Re,u),l.__reactInternalSnapshotBeforeUpdate=e}catch($e){Ct(i,i.return,$e)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Dd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,mn=e;break}mn=t.return}}function lg(e,t,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:ea(e,i),l&4&&ss(5,i);break;case 1:if(ea(e,i),l&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(v){Ct(i,i.return,v)}else{var r=pl(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ct(i,i.return,v)}}l&64&&Pm(i),l&512&&rs(i,i.return);break;case 3:if(ea(e,i),l&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Vh(e,t)}catch(v){Ct(i,i.return,v)}}break;case 27:t===null&&l&4&&ig(i);case 26:case 5:ea(e,i),t===null&&l&4&&tg(i),l&512&&rs(i,i.return);break;case 12:ea(e,i);break;case 31:ea(e,i),l&4&&rg(e,i);break;case 13:ea(e,i),l&4&&cg(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Gx.bind(null,i),ab(e,i))));break;case 22:if(l=i.memoizedState!==null||Wi,!l){t=t!==null&&t.memoizedState!==null||rn,r=Wi;var u=rn;Wi=l,(rn=t)&&!u?ta(e,i,(i.subtreeFlags&8772)!==0):ea(e,i),Wi=r,rn=u}break;case 30:break;default:ea(e,i)}}function og(e){var t=e.alternate;t!==null&&(e.alternate=null,og(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&il(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Zt=null,Rn=!1;function Pi(e,t,i){for(i=i.child;i!==null;)sg(e,t,i),i=i.sibling}function sg(e,t,i){if(ee&&typeof ee.onCommitFiberUnmount=="function")try{ee.onCommitFiberUnmount(ie,i)}catch{}switch(i.tag){case 26:rn||Oi(i,t),Pi(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:rn||Oi(i,t);var l=Zt,r=Rn;Ga(i.type)&&(Zt=i.stateNode,Rn=!1),Pi(e,t,i),vs(i.stateNode),Zt=l,Rn=r;break;case 5:rn||Oi(i,t);case 6:if(l=Zt,r=Rn,Zt=null,Pi(e,t,i),Zt=l,Rn=r,Zt!==null)if(Rn)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(i.stateNode)}catch(u){Ct(i,t,u)}else try{Zt.removeChild(i.stateNode)}catch(u){Ct(i,t,u)}break;case 18:Zt!==null&&(Rn?(e=Zt,Pg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),uo(e)):Pg(Zt,i.stateNode));break;case 4:l=Zt,r=Rn,Zt=i.stateNode.containerInfo,Rn=!0,Pi(e,t,i),Zt=l,Rn=r;break;case 0:case 11:case 14:case 15:za(2,i,t),rn||za(4,i,t),Pi(e,t,i);break;case 1:rn||(Oi(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"&&eg(i,t,l)),Pi(e,t,i);break;case 21:Pi(e,t,i);break;case 22:rn=(l=rn)||i.memoizedState!==null,Pi(e,t,i),rn=l;break;default:Pi(e,t,i)}}function rg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{uo(e)}catch(i){Ct(t,t.return,i)}}}function cg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{uo(e)}catch(i){Ct(t,t.return,i)}}function Mx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ag),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ag),t;default:throw Error(s(435,e.tag))}}function qr(e,t){var i=Mx(e);t.forEach(function(l){if(!i.has(l)){i.add(l);var r=Ux.bind(null,e,l);l.then(r,r)}})}function jn(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var r=i[l],u=e,v=t,_=v;e:for(;_!==null;){switch(_.tag){case 27:if(Ga(_.type)){Zt=_.stateNode,Rn=!1;break e}break;case 5:Zt=_.stateNode,Rn=!1;break e;case 3:case 4:Zt=_.stateNode.containerInfo,Rn=!0;break e}_=_.return}if(Zt===null)throw Error(s(160));sg(u,v,r),Zt=null,Rn=!1,u=r.alternate,u!==null&&(u.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ug(t,e),t=t.sibling}var Ni=null;function ug(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jn(t,e),Hn(e),l&4&&(za(3,e,e.return),ss(3,e),za(5,e,e.return));break;case 1:jn(t,e),Hn(e),l&512&&(rn||i===null||Oi(i,i.return)),l&64&&Wi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var r=Ni;if(jn(t,e),Hn(e),l&512&&(rn||i===null||Oi(i,i.return)),l&4){var u=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,r=r.ownerDocument||r;t:switch(l){case"title":u=r.getElementsByTagName("title")[0],(!u||u[$i]||u[Kt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=r.createElement(l),r.head.insertBefore(u,r.querySelector("head > title"))),Nn(u,l,i),u[Kt]=e,Jt(u),l=u;break e;case"link":var v=up("link","href",r).get(l+(i.href||""));if(v){for(var _=0;_<v.length;_++)if(u=v[_],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(_,1);break t}}u=r.createElement(l),Nn(u,l,i),r.head.appendChild(u);break;case"meta":if(v=up("meta","content",r).get(l+(i.content||""))){for(_=0;_<v.length;_++)if(u=v[_],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(_,1);break t}}u=r.createElement(l),Nn(u,l,i),r.head.appendChild(u);break;default:throw Error(s(468,l))}u[Kt]=e,Jt(u),l=u}e.stateNode=l}else dp(r,e.type,e.stateNode);else e.stateNode=cp(r,l,e.memoizedProps);else u!==l?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,l===null?dp(r,e.type,e.stateNode):cp(r,l,e.memoizedProps)):l===null&&e.stateNode!==null&&td(e,e.memoizedProps,i.memoizedProps)}break;case 27:jn(t,e),Hn(e),l&512&&(rn||i===null||Oi(i,i.return)),i!==null&&l&4&&td(e,e.memoizedProps,i.memoizedProps);break;case 5:if(jn(t,e),Hn(e),l&512&&(rn||i===null||Oi(i,i.return)),e.flags&32){r=e.stateNode;try{xa(r,"")}catch(Re){Ct(e,e.return,Re)}}l&4&&e.stateNode!=null&&(r=e.memoizedProps,td(e,r,i!==null?i.memoizedProps:r)),l&1024&&(ad=!0);break;case 6:if(jn(t,e),Hn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(Re){Ct(e,e.return,Re)}}break;case 3:if(Jr=null,r=Ni,Ni=Qr(t.containerInfo),jn(t,e),Ni=r,Hn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{uo(t.containerInfo)}catch(Re){Ct(e,e.return,Re)}ad&&(ad=!1,dg(e));break;case 4:l=Ni,Ni=Qr(e.stateNode.containerInfo),jn(t,e),Hn(e),Ni=l;break;case 12:jn(t,e),Hn(e);break;case 31:jn(t,e),Hn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,qr(e,l)));break;case 13:jn(t,e),Hn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(jr=wt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,qr(e,l)));break;case 22:r=e.memoizedState!==null;var $=i!==null&&i.memoizedState!==null,le=Wi,xe=rn;if(Wi=le||r,rn=xe||$,jn(t,e),rn=xe,Wi=le,Hn(e),l&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(i===null||$||Wi||rn||vl(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){$=i=t;try{if(u=$.stateNode,r)v=u.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=$.stateNode;var _e=$.memoizedProps.style,re=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;_.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Re){Ct($,$.return,Re)}}}else if(t.tag===6){if(i===null){$=t;try{$.stateNode.nodeValue=r?"":$.memoizedProps}catch(Re){Ct($,$.return,Re)}}}else if(t.tag===18){if(i===null){$=t;try{var fe=$.stateNode;r?ep(fe,!0):ep($.stateNode,!1)}catch(Re){Ct($,$.return,Re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,qr(e,i))));break;case 19:jn(t,e),Hn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,qr(e,l)));break;case 30:break;case 21:break;default:jn(t,e),Hn(e)}}function Hn(e){var t=e.flags;if(t&2){try{for(var i,l=e.return;l!==null;){if(ng(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var r=i.stateNode,u=nd(e);Or(e,u,r);break;case 5:var v=i.stateNode;i.flags&32&&(xa(v,""),i.flags&=-33);var _=nd(e);Or(e,_,v);break;case 3:case 4:var $=i.stateNode.containerInfo,le=nd(e);id(e,le,$);break;default:throw Error(s(161))}}catch(xe){Ct(e,e.return,xe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;dg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ea(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lg(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:za(4,t,t.return),vl(t);break;case 1:Oi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&eg(t,t.return,i),vl(t);break;case 27:vs(t.stateNode);case 26:case 5:Oi(t,t.return),vl(t);break;case 22:t.memoizedState===null&&vl(t);break;case 30:vl(t);break;default:vl(t)}e=e.sibling}}function ta(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,r=e,u=t,v=u.flags;switch(u.tag){case 0:case 11:case 15:ta(r,u,i),ss(4,u);break;case 1:if(ta(r,u,i),l=u,r=l.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(le){Ct(l,l.return,le)}if(l=u,r=l.updateQueue,r!==null){var _=l.stateNode;try{var $=r.shared.hiddenCallbacks;if($!==null)for(r.shared.hiddenCallbacks=null,r=0;r<$.length;r++)Yh($[r],_)}catch(le){Ct(l,l.return,le)}}i&&v&64&&Pm(u),rs(u,u.return);break;case 27:ig(u);case 26:case 5:ta(r,u,i),i&&l===null&&v&4&&tg(u),rs(u,u.return);break;case 12:ta(r,u,i);break;case 31:ta(r,u,i),i&&v&4&&rg(r,u);break;case 13:ta(r,u,i),i&&v&4&&cg(r,u);break;case 22:u.memoizedState===null&&ta(r,u,i),rs(u,u.return);break;case 30:break;default:ta(r,u,i)}t=t.sibling}}function ld(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Qo(i))}function od(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qo(e))}function _i(e,t,i,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fg(e,t,i,l),t=t.sibling}function fg(e,t,i,l){var r=t.flags;switch(t.tag){case 0:case 11:case 15:_i(e,t,i,l),r&2048&&ss(9,t);break;case 1:_i(e,t,i,l);break;case 3:_i(e,t,i,l),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qo(e)));break;case 12:if(r&2048){_i(e,t,i,l),e=t.stateNode;try{var u=t.memoizedProps,v=u.id,_=u.onPostCommit;typeof _=="function"&&_(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch($){Ct(t,t.return,$)}}else _i(e,t,i,l);break;case 31:_i(e,t,i,l);break;case 13:_i(e,t,i,l);break;case 23:break;case 22:u=t.stateNode,v=t.alternate,t.memoizedState!==null?u._visibility&2?_i(e,t,i,l):cs(e,t):u._visibility&2?_i(e,t,i,l):(u._visibility|=2,Pl(e,t,i,l,(t.subtreeFlags&10256)!==0||!1)),r&2048&&ld(v,t);break;case 24:_i(e,t,i,l),r&2048&&od(t.alternate,t);break;default:_i(e,t,i,l)}}function Pl(e,t,i,l,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,v=t,_=i,$=l,le=v.flags;switch(v.tag){case 0:case 11:case 15:Pl(u,v,_,$,r),ss(8,v);break;case 23:break;case 22:var xe=v.stateNode;v.memoizedState!==null?xe._visibility&2?Pl(u,v,_,$,r):cs(u,v):(xe._visibility|=2,Pl(u,v,_,$,r)),r&&le&2048&&ld(v.alternate,v);break;case 24:Pl(u,v,_,$,r),r&&le&2048&&od(v.alternate,v);break;default:Pl(u,v,_,$,r)}t=t.sibling}}function cs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,l=t,r=l.flags;switch(l.tag){case 22:cs(i,l),r&2048&&ld(l.alternate,l);break;case 24:cs(i,l),r&2048&&od(l.alternate,l);break;default:cs(i,l)}t=t.sibling}}var us=8192;function eo(e,t,i){if(e.subtreeFlags&us)for(e=e.child;e!==null;)hg(e,t,i),e=e.sibling}function hg(e,t,i){switch(e.tag){case 26:eo(e,t,i),e.flags&us&&e.memoizedState!==null&&pb(i,Ni,e.memoizedState,e.memoizedProps);break;case 5:eo(e,t,i);break;case 3:case 4:var l=Ni;Ni=Qr(e.stateNode.containerInfo),eo(e,t,i),Ni=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=us,us=16777216,eo(e,t,i),us=l):eo(e,t,i));break;default:eo(e,t,i)}}function mg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ds(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];mn=l,pg(l,e)}mg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gg(e),e=e.sibling}function gg(e){switch(e.tag){case 0:case 11:case 15:ds(e),e.flags&2048&&za(9,e,e.return);break;case 3:ds(e);break;case 12:ds(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Rr(e)):ds(e);break;default:ds(e)}}function Rr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];mn=l,pg(l,e)}mg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:za(8,t,t.return),Rr(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Rr(t));break;default:Rr(t)}e=e.sibling}}function pg(e,t){for(;mn!==null;){var i=mn;switch(i.tag){case 0:case 11:case 15:za(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Qo(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,mn=l;else e:for(i=e;mn!==null;){l=mn;var r=l.sibling,u=l.return;if(og(l),l===i){mn=null;break e}if(r!==null){r.return=u,mn=r;break e}mn=u}}}var zx={getCacheForType:function(e){var t=bn(ln),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return bn(ln).controller.signal}},kx=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Ot=null,ot=null,rt=0,At=0,Kn=null,ka=!1,to=!1,sd=!1,na=0,Pt=0,Oa=0,yl=0,rd=0,Jn=0,no=0,fs=null,Gn=null,cd=!1,jr=0,vg=0,Hr=1/0,Gr=null,qa=null,dn=0,Ra=null,io=null,ia=0,ud=0,dd=null,yg=null,hs=0,fd=null;function Fn(){return(Nt&2)!==0&&rt!==0?rt&-rt:N.T!==null?yd():Cn()}function xg(){if(Jn===0)if((rt&536870912)===0||ht){var e=Ze;Ze<<=1,(Ze&3932160)===0&&(Ze=262144),Jn=e}else Jn=536870912;return e=In.current,e!==null&&(e.flags|=32),Jn}function Un(e,t,i){(e===Ot&&(At===2||At===9)||e.cancelPendingCommit!==null)&&(ao(e,0),ja(e,rt,Jn,!1)),Ti(e,i),((Nt&2)===0||e!==Ot)&&(e===Ot&&((Nt&2)===0&&(yl|=i),Pt===4&&ja(e,rt,Jn,!1)),qi(e))}function bg(e,t,i){if((Nt&6)!==0)throw Error(s(327));var l=!i&&(t&127)===0&&(t&e.expiredLanes)===0||An(e,t),r=l?Rx(e,t):md(e,t,!0),u=l;do{if(r===0){to&&!l&&ja(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!Ox(i)){r=md(e,t,!1),u=!1;continue}if(r===2){if(u=t,e.errorRecoveryDisabledLanes&u)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var _=e;r=fs;var $=_.current.memoizedState.isDehydrated;if($&&(ao(_,v).flags|=256),v=md(_,v,!1),v!==2){if(sd&&!$){_.errorRecoveryDisabledLanes|=u,yl|=u,r=4;break e}u=Gn,Gn=r,u!==null&&(Gn===null?Gn=u:Gn.push.apply(Gn,u))}r=v}if(u=!1,r!==2)continue}}if(r===1){ao(e,0),ja(e,t,0,!0);break}e:{switch(l=e,u=r,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:ja(l,t,Jn,!ka);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(r=jr+300-wt(),10<r)){if(ja(l,t,Jn,!ka),mt(l,0,!0)!==0)break e;ia=t,l.timeoutHandle=Fg(Sg.bind(null,l,i,Gn,Gr,cd,t,Jn,yl,no,ka,u,"Throttled",-0,0),r);break e}Sg(l,i,Gn,Gr,cd,t,Jn,yl,no,ka,u,null,-0,0)}}break}while(!0);qi(e)}function Sg(e,t,i,l,r,u,v,_,$,le,xe,_e,re,fe){if(e.timeoutHandle=-1,_e=t.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bi},hg(t,u,_e);var Re=(u&62914560)===u?jr-wt():(u&4194048)===u?vg-wt():0;if(Re=vb(_e,Re),Re!==null){ia=u,e.cancelPendingCommit=Re(Dg.bind(null,e,t,u,i,l,r,v,_,$,xe,_e,null,re,fe)),ja(e,u,v,!le);return}}Dg(e,t,u,i,l,r,v,_,$)}function Ox(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var r=i[l],u=r.getSnapshot;r=r.value;try{if(!Xn(u(),r))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ja(e,t,i,l){t&=~rd,t&=~yl,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var r=t;0<r;){var u=31-Be(r),v=1<<u;l[u]=-1,r&=~v}i!==0&&lt(e,i,t)}function Ur(){return(Nt&6)===0?(ms(0),!1):!0}function hd(){if(ot!==null){if(At===0)var e=ot.return;else e=ot,Zi=cl=null,Du(e),Ql=null,Jo=0,e=ot;for(;e!==null;)Wm(e.alternate,e),e=e.return;ot=null}}function ao(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Px(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ia=0,hd(),Ot=e,ot=i=Li(e.current,null),rt=t,At=0,Kn=null,ka=!1,to=An(e,t),sd=!1,no=Jn=rd=yl=Oa=Pt=0,Gn=fs=null,cd=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var r=31-Be(l),u=1<<r;t|=e[r],l&=~u}return na=t,or(),i}function Ng(e,t){Ie=null,N.H=as,t===Il||t===mr?(t=Gh(),At=3):t===vu?(t=Gh(),At=4):At=t===Xu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Kn=t,ot===null&&(Pt=1,Tr(e,ai(t,e.current)))}function _g(){var e=In.current;return e===null?!0:(rt&4194048)===rt?ri===null:(rt&62914560)===rt||(rt&536870912)!==0?e===ri:!1}function Eg(){var e=N.H;return N.H=as,e===null?as:e}function wg(){var e=N.A;return N.A=zx,e}function Br(){Pt=4,ka||(rt&4194048)!==rt&&In.current!==null||(to=!0),(Oa&134217727)===0&&(yl&134217727)===0||Ot===null||ja(Ot,rt,Jn,!1)}function md(e,t,i){var l=Nt;Nt|=2;var r=Eg(),u=wg();(Ot!==e||rt!==t)&&(Gr=null,ao(e,t)),t=!1;var v=Pt;e:do try{if(At!==0&&ot!==null){var _=ot,$=Kn;switch(At){case 8:hd(),v=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(t=!0);var le=At;if(At=0,Kn=null,lo(e,_,$,le),i&&to){v=0;break e}break;default:le=At,At=0,Kn=null,lo(e,_,$,le)}}qx(),v=Pt;break}catch(xe){Ng(e,xe)}while(!0);return t&&e.shellSuspendCounter++,Zi=cl=null,Nt=l,N.H=r,N.A=u,ot===null&&(Ot=null,rt=0,or()),v}function qx(){for(;ot!==null;)Ag(ot)}function Rx(e,t){var i=Nt;Nt|=2;var l=Eg(),r=wg();Ot!==e||rt!==t?(Gr=null,Hr=wt()+500,ao(e,t)):to=An(e,t);e:do try{if(At!==0&&ot!==null){t=ot;var u=Kn;t:switch(At){case 1:At=0,Kn=null,lo(e,t,u,1);break;case 2:case 9:if(jh(u)){At=0,Kn=null,Cg(t);break}t=function(){At!==2&&At!==9||Ot!==e||(At=7),qi(e)},u.then(t,t);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:jh(u)?(At=0,Kn=null,Cg(t)):(At=0,Kn=null,lo(e,t,u,7));break;case 5:var v=null;switch(ot.tag){case 26:v=ot.memoizedState;case 5:case 27:var _=ot;if(v?fp(v):_.stateNode.complete){At=0,Kn=null;var $=_.sibling;if($!==null)ot=$;else{var le=_.return;le!==null?(ot=le,$r(le)):ot=null}break t}}At=0,Kn=null,lo(e,t,u,5);break;case 6:At=0,Kn=null,lo(e,t,u,6);break;case 8:hd(),Pt=6;break e;default:throw Error(s(462))}}jx();break}catch(xe){Ng(e,xe)}while(!0);return Zi=cl=null,N.H=l,N.A=r,Nt=i,ot!==null?0:(Ot=null,rt=0,or(),Pt)}function jx(){for(;ot!==null&&!Mn();)Ag(ot)}function Ag(e){var t=Jm(e.alternate,e,na);e.memoizedProps=e.pendingProps,t===null?$r(e):ot=t}function Cg(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Lm(i,t,t.pendingProps,t.type,void 0,rt);break;case 11:t=Lm(i,t,t.pendingProps,t.type.render,t.ref,rt);break;case 5:Du(t);default:Wm(i,t),t=ot=wh(t,na),t=Jm(i,t,na)}e.memoizedProps=e.pendingProps,t===null?$r(e):ot=t}function lo(e,t,i,l){Zi=cl=null,Du(t),Ql=null,Jo=0;var r=t.return;try{if(Ex(e,r,t,i,rt)){Pt=1,Tr(e,ai(i,e.current)),ot=null;return}}catch(u){if(r!==null)throw ot=r,u;Pt=1,Tr(e,ai(i,e.current)),ot=null;return}t.flags&32768?(ht||l===1?e=!0:to||(rt&536870912)!==0?e=!1:(ka=e=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),Tg(t,e)):$r(t)}function $r(e){var t=e;do{if((t.flags&32768)!==0){Tg(t,ka);return}e=t.return;var i=Cx(t.alternate,t,na);if(i!==null){ot=i;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);Pt===0&&(Pt=5)}function Tg(e,t){do{var i=Tx(e.alternate,e);if(i!==null){i.flags&=32767,ot=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){ot=e;return}ot=e=i}while(e!==null);Pt=6,ot=null}function Dg(e,t,i,l,r,u,v,_,$){e.cancelPendingCommit=null;do Yr();while(dn!==0);if((Nt&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=nu,Fe(e,i,u,v,_,$),e===Ot&&(ot=Ot=null,rt=0),io=t,Ra=e,ia=i,ud=u,dd=r,yg=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Bx(cn,function(){return qg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=N.T,N.T=null,r=L.p,L.p=2,v=Nt,Nt|=4;try{Dx(e,t,i)}finally{Nt=v,L.p=r,N.T=l}}dn=1,Mg(),zg(),kg()}}function Mg(){if(dn===1){dn=0;var e=Ra,t=io,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null;var l=L.p;L.p=2;var r=Nt;Nt|=4;try{ug(t,e);var u=Ad,v=ph(e.containerInfo),_=u.focusedElem,$=u.selectionRange;if(v!==_&&_&&_.ownerDocument&&gh(_.ownerDocument.documentElement,_)){if($!==null&&Fc(_)){var le=$.start,xe=$.end;if(xe===void 0&&(xe=le),"selectionStart"in _)_.selectionStart=le,_.selectionEnd=Math.min(xe,_.value.length);else{var _e=_.ownerDocument||document,re=_e&&_e.defaultView||window;if(re.getSelection){var fe=re.getSelection(),Re=_.textContent.length,$e=Math.min($.start,Re),zt=$.end===void 0?$e:Math.min($.end,Re);!fe.extend&&$e>zt&&(v=zt,zt=$e,$e=v);var W=mh(_,$e),Z=mh(_,zt);if(W&&Z&&(fe.rangeCount!==1||fe.anchorNode!==W.node||fe.anchorOffset!==W.offset||fe.focusNode!==Z.node||fe.focusOffset!==Z.offset)){var ae=_e.createRange();ae.setStart(W.node,W.offset),fe.removeAllRanges(),$e>zt?(fe.addRange(ae),fe.extend(Z.node,Z.offset)):(ae.setEnd(Z.node,Z.offset),fe.addRange(ae))}}}}for(_e=[],fe=_;fe=fe.parentNode;)fe.nodeType===1&&_e.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<_e.length;_++){var Se=_e[_];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}ec=!!wd,Ad=wd=null}finally{Nt=r,L.p=l,N.T=i}}e.current=t,dn=2}}function zg(){if(dn===2){dn=0;var e=Ra,t=io,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=N.T,N.T=null;var l=L.p;L.p=2;var r=Nt;Nt|=4;try{lg(e,t.alternate,t)}finally{Nt=r,L.p=l,N.T=i}}dn=3}}function kg(){if(dn===4||dn===3){dn=0,En();var e=Ra,t=io,i=ia,l=yg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?dn=5:(dn=0,io=Ra=null,Og(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(qa=null),un(i),t=t.stateNode,ee&&typeof ee.onCommitFiberRoot=="function")try{ee.onCommitFiberRoot(ie,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=N.T,r=L.p,L.p=2,N.T=null;try{for(var u=e.onRecoverableError,v=0;v<l.length;v++){var _=l[v];u(_.value,{componentStack:_.stack})}}finally{N.T=t,L.p=r}}(ia&3)!==0&&Yr(),qi(e),r=e.pendingLanes,(i&261930)!==0&&(r&42)!==0?e===fd?hs++:(hs=0,fd=e):hs=0,ms(0)}}function Og(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Qo(t)))}function Yr(){return Mg(),zg(),kg(),qg()}function qg(){if(dn!==5)return!1;var e=Ra,t=ud;ud=0;var i=un(ia),l=N.T,r=L.p;try{L.p=32>i?32:i,N.T=null,i=dd,dd=null;var u=Ra,v=ia;if(dn=0,io=Ra=null,ia=0,(Nt&6)!==0)throw Error(s(331));var _=Nt;if(Nt|=4,gg(u.current),fg(u,u.current,v,i),Nt=_,ms(0,!1),ee&&typeof ee.onPostCommitFiberRoot=="function")try{ee.onPostCommitFiberRoot(ie,u)}catch{}return!0}finally{L.p=r,N.T=l,Og(e,t)}}function Rg(e,t,i){t=ai(i,t),t=Lu(e.stateNode,t,2),e=Ta(e,t,2),e!==null&&(Ti(e,2),qi(e))}function Ct(e,t,i){if(e.tag===3)Rg(e,e,i);else for(;t!==null;){if(t.tag===3){Rg(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(qa===null||!qa.has(l))){e=ai(i,e),i=jm(2),l=Ta(t,i,2),l!==null&&(Hm(i,l,t,e),Ti(l,2),qi(l));break}}t=t.return}}function gd(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new kx;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(i)||(sd=!0,r.add(i),e=Hx.bind(null,e,t,i),t.then(e,e))}function Hx(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ot===e&&(rt&i)===i&&(Pt===4||Pt===3&&(rt&62914560)===rt&&300>wt()-jr?(Nt&2)===0&&ao(e,0):rd|=i,no===rt&&(no=0)),qi(e)}function jg(e,t){t===0&&(t=Bi()),e=ol(e,t),e!==null&&(Ti(e,t),qi(e))}function Gx(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),jg(e,i)}function Ux(e,t){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(i=r.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),jg(e,i)}function Bx(e,t){return Qt(e,t)}var Vr=null,oo=null,pd=!1,Lr=!1,vd=!1,Ha=0;function qi(e){e!==oo&&e.next===null&&(oo===null?Vr=oo=e:oo=oo.next=e),Lr=!0,pd||(pd=!0,Yx())}function ms(e,t){if(!vd&&Lr){vd=!0;do for(var i=!1,l=Vr;l!==null;){if(e!==0){var r=l.pendingLanes;if(r===0)var u=0;else{var v=l.suspendedLanes,_=l.pingedLanes;u=(1<<31-Be(42|e)+1)-1,u&=r&~(v&~_),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,Bg(l,u))}else u=rt,u=mt(l,l===Ot?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||An(l,u)||(i=!0,Bg(l,u));l=l.next}while(i);vd=!1}}function $x(){Hg()}function Hg(){Lr=pd=!1;var e=0;Ha!==0&&Wx()&&(e=Ha);for(var t=wt(),i=null,l=Vr;l!==null;){var r=l.next,u=Gg(l,t);u===0?(l.next=null,i===null?Vr=r:i.next=r,r===null&&(oo=i)):(i=l,(e!==0||(u&3)!==0)&&(Lr=!0)),l=r}dn!==0&&dn!==5||ms(e),Ha!==0&&(Ha=0)}function Gg(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var v=31-Be(u),_=1<<v,$=r[v];$===-1?((_&i)===0||(_&l)!==0)&&(r[v]=ni(_,t)):$<=t&&(e.expiredLanes|=_),u&=~_}if(t=Ot,i=rt,i=mt(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===t&&(At===2||At===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&vn(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||An(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(l!==null&&vn(l),un(i)){case 2:case 8:i=qt;break;case 32:i=cn;break;case 268435456:i=wn;break;default:i=cn}return l=Ug.bind(null,e),i=Qt(i,l),e.callbackPriority=t,e.callbackNode=i,t}return l!==null&&l!==null&&vn(l),e.callbackPriority=2,e.callbackNode=null,2}function Ug(e,t){if(dn!==0&&dn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Yr()&&e.callbackNode!==i)return null;var l=rt;return l=mt(e,e===Ot?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(bg(e,l,t),Gg(e,wt()),e.callbackNode!=null&&e.callbackNode===i?Ug.bind(null,e):null)}function Bg(e,t){if(Yr())return null;bg(e,t,!0)}function Yx(){eb(function(){(Nt&6)!==0?Qt(tt,$x):Hg()})}function yd(){if(Ha===0){var e=Xl;e===0&&(e=Qe,Qe<<=1,(Qe&261888)===0&&(Qe=256)),Ha=e}return Ha}function $g(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rl(""+e)}function Yg(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function Vx(e,t,i,l,r){if(t==="submit"&&i&&i.stateNode===r){var u=$g((r[bt]||null).action),v=l.submitter;v&&(t=(t=v[bt]||null)?$g(t.formAction):v.getAttribute("formAction"),t!==null&&(u=t,v=null));var _=new Te("action","action",null,l,r);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ha!==0){var $=v?Yg(r,v):new FormData(r);Gu(i,{pending:!0,data:$,method:r.method,action:u},null,$)}}else typeof u=="function"&&(_.preventDefault(),$=v?Yg(r,v):new FormData(r),Gu(i,{pending:!0,data:$,method:r.method,action:u},u,$))},currentTarget:r}]})}}for(var xd=0;xd<tu.length;xd++){var bd=tu[xd],Lx=bd.toLowerCase(),Xx=bd[0].toUpperCase()+bd.slice(1);Si(Lx,"on"+Xx)}Si(xh,"onAnimationEnd"),Si(bh,"onAnimationIteration"),Si(Sh,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(sx,"onTransitionRun"),Si(rx,"onTransitionStart"),Si(cx,"onTransitionCancel"),Si(Nh,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gs));function Vg(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],r=l.event;l=l.listeners;e:{var u=void 0;if(t)for(var v=l.length-1;0<=v;v--){var _=l[v],$=_.instance,le=_.currentTarget;if(_=_.listener,$!==u&&r.isPropagationStopped())break e;u=_,r.currentTarget=le;try{u(r)}catch(xe){lr(xe)}r.currentTarget=null,u=$}else for(v=0;v<l.length;v++){if(_=l[v],$=_.instance,le=_.currentTarget,_=_.listener,$!==u&&r.isPropagationStopped())break e;u=_,r.currentTarget=le;try{u(r)}catch(xe){lr(xe)}r.currentTarget=null,u=$}}}}function st(e,t){var i=t[nl];i===void 0&&(i=t[nl]=new Set);var l=e+"__bubble";i.has(l)||(Lg(t,e,2,!1),i.add(l))}function Sd(e,t,i){var l=0;t&&(l|=4),Lg(i,e,l,t)}var Xr="_reactListening"+Math.random().toString(36).slice(2);function Nd(e){if(!e[Xr]){e[Xr]=!0,Tl.forEach(function(i){i!=="selectionchange"&&(Zx.has(i)||Sd(i,!1,e),Sd(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xr]||(t[Xr]=!0,Sd("selectionchange",!1,t))}}function Lg(e,t,i,l){switch(xp(t)){case 2:var r=bb;break;case 8:r=Sb;break;default:r=Hd}i=r.bind(null,t,i,e),r=void 0,!C||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):r!==void 0?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function _d(e,t,i,l,r){var u=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var _=l.stateNode.containerInfo;if(_===r)break;if(v===4)for(v=l.return;v!==null;){var $=v.tag;if(($===3||$===4)&&v.stateNode.containerInfo===r)return;v=v.return}for(;_!==null;){if(v=Di(_),v===null)return;if($=v.tag,$===5||$===6||$===26||$===27){l=u=v;continue e}_=_.parentNode}}l=l.return}nr(function(){var le=u,xe=Go(i),_e=[];e:{var re=_h.get(e);if(re!==void 0){var fe=Te,Re=e;switch(e){case"keypress":if(he(i)===0)break e;case"keydown":case"keyup":fe=Uy;break;case"focusin":Re="focus",fe=Bo;break;case"focusout":Re="blur",fe=Bo;break;case"beforeblur":case"afterblur":fe=Bo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Ft;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=ir;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Yy;break;case xh:case bh:case Sh:fe=My;break;case Nh:fe=Ly;break;case"scroll":case"scrollend":fe=ze;break;case"wheel":fe=Zy;break;case"copy":case"cut":case"paste":fe=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=eh;break;case"toggle":case"beforetoggle":fe=Qy}var $e=(t&4)!==0,zt=!$e&&(e==="scroll"||e==="scrollend"),W=$e?re!==null?re+"Capture":null:re;$e=[];for(var Z=le,ae;Z!==null;){var Se=Z;if(ae=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ae===null||W===null||(Se=x(Z,W),Se!=null&&$e.push(ps(Z,Se,ae))),zt)break;Z=Z.return}0<$e.length&&(re=new fe(re,Re,null,i,xe),_e.push({event:re,listeners:$e}))}}if((t&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",re&&i!==Ho&&(Re=i.relatedTarget||i.fromElement)&&(Di(Re)||Re[gi]))break e;if((fe||re)&&(re=xe.window===xe?xe:(re=xe.ownerDocument)?re.defaultView||re.parentWindow:window,fe?(Re=i.relatedTarget||i.toElement,fe=le,Re=Re?Di(Re):null,Re!==null&&(zt=f(Re),$e=Re.tag,Re!==zt||$e!==5&&$e!==27&&$e!==6)&&(Re=null)):(fe=null,Re=le),fe!==Re)){if($e=Ft,Se="onMouseLeave",W="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&($e=eh,Se="onPointerLeave",W="onPointerEnter",Z="pointer"),zt=fe==null?re:Yi(fe),ae=Re==null?re:Yi(Re),re=new $e(Se,Z+"leave",fe,i,xe),re.target=zt,re.relatedTarget=ae,Se=null,Di(xe)===le&&($e=new $e(W,Z+"enter",Re,i,xe),$e.target=ae,$e.relatedTarget=zt,Se=$e),zt=Se,fe&&Re)t:{for($e=Ix,W=fe,Z=Re,ae=0,Se=W;Se;Se=$e(Se))ae++;Se=0;for(var Ue=Z;Ue;Ue=$e(Ue))Se++;for(;0<ae-Se;)W=$e(W),ae--;for(;0<Se-ae;)Z=$e(Z),Se--;for(;ae--;){if(W===Z||Z!==null&&W===Z.alternate){$e=W;break t}W=$e(W),Z=$e(Z)}$e=null}else $e=null;fe!==null&&Xg(_e,re,fe,$e,!1),Re!==null&&zt!==null&&Xg(_e,zt,Re,$e,!0)}}e:{if(re=le?Yi(le):window,fe=re.nodeName&&re.nodeName.toLowerCase(),fe==="select"||fe==="input"&&re.type==="file")var yt=rh;else if(oh(re))if(ch)yt=ax;else{yt=nx;var Ge=tx}else fe=re.nodeName,!fe||fe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?le&&jo(le.elementType)&&(yt=rh):yt=ix;if(yt&&(yt=yt(e,le))){sh(_e,yt,i,xe);break e}Ge&&Ge(e,re,le),e==="focusout"&&le&&re.type==="number"&&le.memoizedProps.value!=null&&Ro(re,"number",re.value)}switch(Ge=le?Yi(le):window,e){case"focusin":(oh(Ge)||Ge.contentEditable==="true")&&(Hl=Ge,Wc=le,Xo=null);break;case"focusout":Xo=Wc=Hl=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,vh(_e,i,xe);break;case"selectionchange":if(ox)break;case"keydown":case"keyup":vh(_e,i,xe)}var Je;if(Qc)e:{switch(e){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else jl?ah(e,i)&&(ct="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ct="onCompositionStart");ct&&(th&&i.locale!=="ko"&&(jl||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&jl&&(Je=Ae()):(H=xe,X="value"in H?H.value:H.textContent,jl=!0)),Ge=Zr(le,ct),0<Ge.length&&(ct=new Pf(ct,e,null,i,xe),_e.push({event:ct,listeners:Ge}),Je?ct.data=Je:(Je=lh(i),Je!==null&&(ct.data=Je)))),(Je=Jy?Fy(e,i):Wy(e,i))&&(ct=Zr(le,"onBeforeInput"),0<ct.length&&(Ge=new Pf("onBeforeInput","beforeinput",null,i,xe),_e.push({event:Ge,listeners:ct}),Ge.data=Je)),Vx(_e,e,le,i,xe)}Vg(_e,t)})}function ps(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Zr(e,t){for(var i=t+"Capture",l=[];e!==null;){var r=e,u=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||u===null||(r=x(e,i),r!=null&&l.unshift(ps(e,r,u)),r=x(e,t),r!=null&&l.push(ps(e,r,u))),e.tag===3)return l;e=e.return}return[]}function Ix(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xg(e,t,i,l,r){for(var u=t._reactName,v=[];i!==null&&i!==l;){var _=i,$=_.alternate,le=_.stateNode;if(_=_.tag,$!==null&&$===l)break;_!==5&&_!==26&&_!==27||le===null||($=le,r?(le=x(i,u),le!=null&&v.unshift(ps(i,le,$))):r||(le=x(i,u),le!=null&&v.push(ps(i,le,$)))),i=i.return}v.length!==0&&e.push({event:t,listeners:v})}var Qx=/\r\n?/g,Kx=/\u0000|\uFFFD/g;function Zg(e){return(typeof e=="string"?e:""+e).replace(Qx,`
`).replace(Kx,"")}function Ig(e,t){return t=Zg(t),Zg(e)===t}function Mt(e,t,i,l,r,u){switch(i){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||xa(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&xa(e,""+l);break;case"className":Ol(e,"class",l);break;case"tabIndex":Ol(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ol(e,i,l);break;case"style":er(e,l,u);break;case"data":if(t!=="object"){Ol(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Rl(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&Mt(e,t,"name",r.name,r,null),Mt(e,t,"formEncType",r.formEncType,r,null),Mt(e,t,"formMethod",r.formMethod,r,null),Mt(e,t,"formTarget",r.formTarget,r,null)):(Mt(e,t,"encType",r.encType,r,null),Mt(e,t,"method",r.method,r,null),Mt(e,t,"target",r.target,r,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Rl(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=bi);break;case"onScroll":l!=null&&st("scroll",e);break;case"onScrollEnd":l!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(r.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=Rl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":st("beforetoggle",e),st("toggle",e),kl(e,"popover",l);break;case"xlinkActuate":xi(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xi(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xi(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xi(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xi(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xi(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xi(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":kl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Xc.get(i)||i,kl(e,i,l))}}function Ed(e,t,i,l,r,u){switch(i){case"style":er(e,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(r.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?xa(e,l):(typeof l=="number"||typeof l=="bigint")&&xa(e,""+l);break;case"onScroll":l!=null&&st("scroll",e);break;case"onScrollEnd":l!=null&&st("scrollend",e);break;case"onClick":l!=null&&(e.onclick=bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(r=i.endsWith("Capture"),t=i.slice(2,r?i.length-7:void 0),u=e[bt]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,r),typeof l=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,l,r);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):kl(e,i,l)}}}function Nn(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var l=!1,r=!1,u;for(u in i)if(i.hasOwnProperty(u)){var v=i[u];if(v!=null)switch(u){case"src":l=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Mt(e,t,u,v,i,null)}}r&&Mt(e,t,"srcSet",i.srcSet,i,null),l&&Mt(e,t,"src",i.src,i,null);return;case"input":st("invalid",e);var _=u=v=r=null,$=null,le=null;for(l in i)if(i.hasOwnProperty(l)){var xe=i[l];if(xe!=null)switch(l){case"name":r=xe;break;case"type":v=xe;break;case"checked":$=xe;break;case"defaultChecked":le=xe;break;case"value":u=xe;break;case"defaultValue":_=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(s(137,t));break;default:Mt(e,t,l,xe,i,null)}}Js(e,u,_,$,le,v,r,!1);return;case"select":st("invalid",e),l=v=u=null;for(r in i)if(i.hasOwnProperty(r)&&(_=i[r],_!=null))switch(r){case"value":u=_;break;case"defaultValue":v=_;break;case"multiple":l=_;default:Mt(e,t,r,_,i,null)}t=u,i=v,e.multiple=!!l,t!=null?ya(e,!!l,t,!1):i!=null&&ya(e,!!l,i,!0);return;case"textarea":st("invalid",e),u=r=l=null;for(v in i)if(i.hasOwnProperty(v)&&(_=i[v],_!=null))switch(v){case"value":l=_;break;case"defaultValue":r=_;break;case"children":u=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Mt(e,t,v,_,i,null)}Ws(e,l,r,u);return;case"option":for($ in i)i.hasOwnProperty($)&&(l=i[$],l!=null)&&($==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Mt(e,t,$,l,i,null));return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(l=0;l<gs.length;l++)st(gs[l],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in i)if(i.hasOwnProperty(le)&&(l=i[le],l!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Mt(e,t,le,l,i,null)}return;default:if(jo(t)){for(xe in i)i.hasOwnProperty(xe)&&(l=i[xe],l!==void 0&&Ed(e,t,xe,l,i,void 0));return}}for(_ in i)i.hasOwnProperty(_)&&(l=i[_],l!=null&&Mt(e,t,_,l,i,null))}function Jx(e,t,i,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,u=null,v=null,_=null,$=null,le=null,xe=null;for(fe in i){var _e=i[fe];if(i.hasOwnProperty(fe)&&_e!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":$=_e;default:l.hasOwnProperty(fe)||Mt(e,t,fe,null,l,_e)}}for(var re in l){var fe=l[re];if(_e=i[re],l.hasOwnProperty(re)&&(fe!=null||_e!=null))switch(re){case"type":u=fe;break;case"name":r=fe;break;case"checked":le=fe;break;case"defaultChecked":xe=fe;break;case"value":v=fe;break;case"defaultValue":_=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,t));break;default:fe!==_e&&Mt(e,t,re,fe,l,_e)}}qo(e,v,_,$,le,xe,u,r);return;case"select":fe=v=_=re=null;for(u in i)if($=i[u],i.hasOwnProperty(u)&&$!=null)switch(u){case"value":break;case"multiple":fe=$;default:l.hasOwnProperty(u)||Mt(e,t,u,null,l,$)}for(r in l)if(u=l[r],$=i[r],l.hasOwnProperty(r)&&(u!=null||$!=null))switch(r){case"value":re=u;break;case"defaultValue":_=u;break;case"multiple":v=u;default:u!==$&&Mt(e,t,r,u,l,$)}t=_,i=v,l=fe,re!=null?ya(e,!!i,re,!1):!!l!=!!i&&(t!=null?ya(e,!!i,t,!0):ya(e,!!i,i?[]:"",!1));return;case"textarea":fe=re=null;for(_ in i)if(r=i[_],i.hasOwnProperty(_)&&r!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Mt(e,t,_,null,l,r)}for(v in l)if(r=l[v],u=i[v],l.hasOwnProperty(v)&&(r!=null||u!=null))switch(v){case"value":re=r;break;case"defaultValue":fe=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(s(91));break;default:r!==u&&Mt(e,t,v,r,l,u)}Fs(e,re,fe);return;case"option":for(var Re in i)re=i[Re],i.hasOwnProperty(Re)&&re!=null&&!l.hasOwnProperty(Re)&&(Re==="selected"?e.selected=!1:Mt(e,t,Re,null,l,re));for($ in l)re=l[$],fe=i[$],l.hasOwnProperty($)&&re!==fe&&(re!=null||fe!=null)&&($==="selected"?e.selected=re&&typeof re!="function"&&typeof re!="symbol":Mt(e,t,$,re,l,fe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in i)re=i[$e],i.hasOwnProperty($e)&&re!=null&&!l.hasOwnProperty($e)&&Mt(e,t,$e,null,l,re);for(le in l)if(re=l[le],fe=i[le],l.hasOwnProperty(le)&&re!==fe&&(re!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,t));break;default:Mt(e,t,le,re,l,fe)}return;default:if(jo(t)){for(var zt in i)re=i[zt],i.hasOwnProperty(zt)&&re!==void 0&&!l.hasOwnProperty(zt)&&Ed(e,t,zt,void 0,l,re);for(xe in l)re=l[xe],fe=i[xe],!l.hasOwnProperty(xe)||re===fe||re===void 0&&fe===void 0||Ed(e,t,xe,re,l,fe);return}}for(var W in i)re=i[W],i.hasOwnProperty(W)&&re!=null&&!l.hasOwnProperty(W)&&Mt(e,t,W,null,l,re);for(_e in l)re=l[_e],fe=i[_e],!l.hasOwnProperty(_e)||re===fe||re==null&&fe==null||Mt(e,t,_e,re,l,fe)}function Qg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var r=i[l],u=r.transferSize,v=r.initiatorType,_=r.duration;if(u&&_&&Qg(v)){for(v=0,_=r.responseEnd,l+=1;l<i.length;l++){var $=i[l],le=$.startTime;if(le>_)break;var xe=$.transferSize,_e=$.initiatorType;xe&&Qg(_e)&&($=$.responseEnd,v+=xe*($<_?1:(_-le)/($-le)))}if(--l,t+=8*(u+v)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wd=null,Ad=null;function Ir(e){return e.nodeType===9?e:e.ownerDocument}function Kg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Td=null;function Wx(){var e=window.event;return e&&e.type==="popstate"?e===Td?!1:(Td=e,!0):(Td=null,!1)}var Fg=typeof setTimeout=="function"?setTimeout:void 0,Px=typeof clearTimeout=="function"?clearTimeout:void 0,Wg=typeof Promise=="function"?Promise:void 0,eb=typeof queueMicrotask=="function"?queueMicrotask:typeof Wg<"u"?function(e){return Wg.resolve(null).then(e).catch(tb)}:Fg;function tb(e){setTimeout(function(){throw e})}function Ga(e){return e==="head"}function Pg(e,t){var i=t,l=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(r),uo(t);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")vs(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,vs(i);for(var u=i.firstChild;u;){var v=u.nextSibling,_=u.nodeName;u[$i]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=v}}else i==="body"&&vs(e.ownerDocument.body);i=r}while(i);uo(t)}function ep(e,t){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function Dd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Dd(i),il(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function nb(e,t,i,l){for(;e.nodeType===1;){var r=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[$i])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=ci(e.nextSibling),e===null)break}return null}function ib(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ci(e.nextSibling),e===null))return null;return e}function tp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ci(e.nextSibling),e===null))return null;return e}function Md(e){return e.data==="$?"||e.data==="$~"}function zd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ab(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var l=function(){t(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var kd=null;function np(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return ci(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function ip(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function ap(e,t,i){switch(t=Ir(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function vs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);il(e)}var ui=new Map,lp=new Set;function Qr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var aa=L.d;L.d={f:lb,r:ob,D:sb,C:rb,L:cb,m:ub,X:fb,S:db,M:hb};function lb(){var e=aa.f(),t=Ur();return e||t}function ob(e){var t=pi(e);t!==null&&t.tag===5&&t.type==="form"?Nm(t):aa.r(e)}var so=typeof document>"u"?null:document;function op(e,t,i){var l=so;if(l&&typeof t=="string"&&t){var r=On(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof i=="string"&&(r+='[crossorigin="'+i+'"]'),lp.has(r)||(lp.add(r),e={rel:e,crossOrigin:i,href:t},l.querySelector(r)===null&&(t=l.createElement("link"),Nn(t,"link",e),Jt(t),l.head.appendChild(t)))}}function sb(e){aa.D(e),op("dns-prefetch",e,null)}function rb(e,t){aa.C(e,t),op("preconnect",e,t)}function cb(e,t,i){aa.L(e,t,i);var l=so;if(l&&e&&t){var r='link[rel="preload"][as="'+On(t)+'"]';t==="image"&&i&&i.imageSrcSet?(r+='[imagesrcset="'+On(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(r+='[imagesizes="'+On(i.imageSizes)+'"]')):r+='[href="'+On(e)+'"]';var u=r;switch(t){case"style":u=ro(e);break;case"script":u=co(e)}ui.has(u)||(e=p({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),ui.set(u,e),l.querySelector(r)!==null||t==="style"&&l.querySelector(ys(u))||t==="script"&&l.querySelector(xs(u))||(t=l.createElement("link"),Nn(t,"link",e),Jt(t),l.head.appendChild(t)))}}function ub(e,t){aa.m(e,t);var i=so;if(i&&e){var l=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+On(l)+'"][href="'+On(e)+'"]',u=r;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=co(e)}if(!ui.has(u)&&(e=p({rel:"modulepreload",href:e},t),ui.set(u,e),i.querySelector(r)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(xs(u)))return}l=i.createElement("link"),Nn(l,"link",e),Jt(l),i.head.appendChild(l)}}}function db(e,t,i){aa.S(e,t,i);var l=so;if(l&&e){var r=Mi(l).hoistableStyles,u=ro(e);t=t||"default";var v=r.get(u);if(!v){var _={loading:0,preload:null};if(v=l.querySelector(ys(u)))_.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},i),(i=ui.get(u))&&Od(e,i);var $=v=l.createElement("link");Jt($),Nn($,"link",e),$._p=new Promise(function(le,xe){$.onload=le,$.onerror=xe}),$.addEventListener("load",function(){_.loading|=1}),$.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Kr(v,t,l)}v={type:"stylesheet",instance:v,count:1,state:_},r.set(u,v)}}}function fb(e,t){aa.X(e,t);var i=so;if(i&&e){var l=Mi(i).hoistableScripts,r=co(e),u=l.get(r);u||(u=i.querySelector(xs(r)),u||(e=p({src:e,async:!0},t),(t=ui.get(r))&&qd(e,t),u=i.createElement("script"),Jt(u),Nn(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(r,u))}}function hb(e,t){aa.M(e,t);var i=so;if(i&&e){var l=Mi(i).hoistableScripts,r=co(e),u=l.get(r);u||(u=i.querySelector(xs(r)),u||(e=p({src:e,async:!0,type:"module"},t),(t=ui.get(r))&&qd(e,t),u=i.createElement("script"),Jt(u),Nn(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(r,u))}}function sp(e,t,i,l){var r=(r=Ce.current)?Qr(r):null;if(!r)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=ro(i.href),i=Mi(r).hoistableStyles,l=i.get(t),l||(l={type:"style",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=ro(i.href);var u=Mi(r).hoistableStyles,v=u.get(e);if(v||(r=r.ownerDocument||r,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,v),(u=r.querySelector(ys(e)))&&!u._p&&(v.instance=u,v.state.loading=5),ui.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ui.set(e,i),u||mb(r,e,i,v.state))),t&&l===null)throw Error(s(528,""));return v}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=co(i),i=Mi(r).hoistableScripts,l=i.get(t),l||(l={type:"script",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ro(e){return'href="'+On(e)+'"'}function ys(e){return'link[rel="stylesheet"]['+e+"]"}function rp(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function mb(e,t,i,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Nn(t,"link",i),Jt(t),e.head.appendChild(t))}function co(e){return'[src="'+On(e)+'"]'}function xs(e){return"script[async]"+e}function cp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+On(i.href)+'"]');if(l)return t.instance=l,Jt(l),l;var r=p({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Jt(l),Nn(l,"style",r),Kr(l,i.precedence,e),t.instance=l;case"stylesheet":r=ro(i.href);var u=e.querySelector(ys(r));if(u)return t.state.loading|=4,t.instance=u,Jt(u),u;l=rp(i),(r=ui.get(r))&&Od(l,r),u=(e.ownerDocument||e).createElement("link"),Jt(u);var v=u;return v._p=new Promise(function(_,$){v.onload=_,v.onerror=$}),Nn(u,"link",l),t.state.loading|=4,Kr(u,i.precedence,e),t.instance=u;case"script":return u=co(i.src),(r=e.querySelector(xs(u)))?(t.instance=r,Jt(r),r):(l=i,(r=ui.get(u))&&(l=p({},i),qd(l,r)),e=e.ownerDocument||e,r=e.createElement("script"),Jt(r),Nn(r,"link",l),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Kr(l,i.precedence,e));return t.instance}function Kr(e,t,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=l.length?l[l.length-1]:null,u=r,v=0;v<l.length;v++){var _=l[v];if(_.dataset.precedence===t)u=_;else if(u!==r)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Od(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function qd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Jr=null;function up(e,t,i){if(Jr===null){var l=new Map,r=Jr=new Map;r.set(i,l)}else r=Jr,l=r.get(i),l||(l=new Map,r.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),r=0;r<i.length;r++){var u=i[r];if(!(u[$i]||u[Kt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var v=u.getAttribute(t)||"";v=e+v;var _=l.get(v);_?_.push(u):l.set(v,[u])}}return l}function dp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function gb(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function pb(e,t,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var r=ro(l.href),u=t.querySelector(ys(r));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Fr.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,Jt(u);return}u=t.ownerDocument||t,l=rp(l),(r=ui.get(r))&&Od(l,r),u=u.createElement("link"),Jt(u);var v=u;v._p=new Promise(function(_,$){v.onload=_,v.onerror=$}),Nn(u,"link",l),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Fr.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Rd=0;function vb(e,t){return e.stylesheets&&e.count===0&&Pr(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&Pr(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Rd===0&&(Rd=62500*Fx());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Pr(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Rd?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(r)}}:null}function Fr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wr=null;function Pr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wr=new Map,t.forEach(yb,e),Wr=null,Fr.call(e))}function yb(e,t){if(!(t.state.loading&4)){var i=Wr.get(e);if(i)var l=i.get(null);else{i=new Map,Wr.set(e,i);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<r.length;u++){var v=r[u];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),l=v)}l&&i.set(null,l)}r=t.instance,v=r.getAttribute("data-precedence"),u=i.get(v)||l,u===l&&i.set(null,r),i.set(v,r),this.count++,l=Fr.bind(this),r.addEventListener("load",l),r.addEventListener("error",l),u?u.parentNode.insertBefore(r,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var bs={$$typeof:U,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function xb(e,t,i,l,r,u,v,_,$){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.hiddenUpdates=ma(null),this.identifierPrefix=l,this.onUncaughtError=r,this.onCaughtError=u,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function hp(e,t,i,l,r,u,v,_,$,le,xe,_e){return e=new xb(e,t,i,v,$,le,xe,_e,_),t=1,u===!0&&(t|=24),u=Zn(3,null,null,t),e.current=u,u.stateNode=e,t=mu(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:l,isDehydrated:i,cache:t},yu(u),e}function mp(e){return e?(e=Bl,e):Bl}function gp(e,t,i,l,r,u){r=mp(r),l.context===null?l.context=r:l.pendingContext=r,l=Ca(t),l.payload={element:i},u=u===void 0?null:u,u!==null&&(l.callback=u),i=Ta(e,l,t),i!==null&&(Un(i,e,t),Wo(i,e,t))}function pp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function jd(e,t){pp(e,t),(e=e.alternate)&&pp(e,t)}function vp(e){if(e.tag===13||e.tag===31){var t=ol(e,67108864);t!==null&&Un(t,e,67108864),jd(e,67108864)}}function yp(e){if(e.tag===13||e.tag===31){var t=Fn();t=yn(t);var i=ol(e,t);i!==null&&Un(i,e,t),jd(e,t)}}var ec=!0;function bb(e,t,i,l){var r=N.T;N.T=null;var u=L.p;try{L.p=2,Hd(e,t,i,l)}finally{L.p=u,N.T=r}}function Sb(e,t,i,l){var r=N.T;N.T=null;var u=L.p;try{L.p=8,Hd(e,t,i,l)}finally{L.p=u,N.T=r}}function Hd(e,t,i,l){if(ec){var r=Gd(l);if(r===null)_d(e,t,l,tc,i),bp(e,l);else if(_b(r,e,t,i,l))l.stopPropagation();else if(bp(e,l),t&4&&-1<Nb.indexOf(e)){for(;r!==null;){var u=pi(r);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var v=vt(u.pendingLanes);if(v!==0){var _=u;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var $=1<<31-Be(v);_.entanglements[1]|=$,v&=~$}qi(u),(Nt&6)===0&&(Hr=wt()+500,ms(0))}}break;case 31:case 13:_=ol(u,2),_!==null&&Un(_,u,2),Ur(),jd(u,2)}if(u=Gd(l),u===null&&_d(e,t,l,tc,i),u===r)break;r=u}r!==null&&l.stopPropagation()}else _d(e,t,l,null,i)}}function Gd(e){return e=Go(e),Ud(e)}var tc=null;function Ud(e){if(tc=null,e=Di(e),e!==null){var t=f(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return tc=e,null}function xp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zn()){case tt:return 2;case qt:return 8;case cn:case Rt:return 32;case wn:return 268435456;default:return 32}default:return 32}}var Bd=!1,Ua=null,Ba=null,$a=null,Ss=new Map,Ns=new Map,Ya=[],Nb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bp(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":Ss.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(t.pointerId)}}function _s(e,t,i,l,r,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:u,targetContainers:[r]},t!==null&&(t=pi(t),t!==null&&vp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function _b(e,t,i,l,r){switch(t){case"focusin":return Ua=_s(Ua,e,t,i,l,r),!0;case"dragenter":return Ba=_s(Ba,e,t,i,l,r),!0;case"mouseover":return $a=_s($a,e,t,i,l,r),!0;case"pointerover":var u=r.pointerId;return Ss.set(u,_s(Ss.get(u)||null,e,t,i,l,r)),!0;case"gotpointercapture":return u=r.pointerId,Ns.set(u,_s(Ns.get(u)||null,e,t,i,l,r)),!0}return!1}function Sp(e){var t=Di(e.target);if(t!==null){var i=f(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,tl(e.priority,function(){yp(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,tl(e.priority,function(){yp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Gd(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Ho=l,i.target.dispatchEvent(l),Ho=null}else return t=pi(i),t!==null&&vp(t),e.blockedOn=i,!1;t.shift()}return!0}function Np(e,t,i){nc(e)&&i.delete(t)}function Eb(){Bd=!1,Ua!==null&&nc(Ua)&&(Ua=null),Ba!==null&&nc(Ba)&&(Ba=null),$a!==null&&nc($a)&&($a=null),Ss.forEach(Np),Ns.forEach(Np)}function ic(e,t){e.blockedOn===t&&(e.blockedOn=null,Bd||(Bd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Eb)))}var ac=null;function _p(e){ac!==e&&(ac=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ac===e&&(ac=null);for(var t=0;t<e.length;t+=3){var i=e[t],l=e[t+1],r=e[t+2];if(typeof l!="function"){if(Ud(l||i)===null)continue;break}var u=pi(i);u!==null&&(e.splice(t,3),t-=3,Gu(u,{pending:!0,data:r,method:i.method,action:l},l,r))}}))}function uo(e){function t($){return ic($,e)}Ua!==null&&ic(Ua,e),Ba!==null&&ic(Ba,e),$a!==null&&ic($a,e),Ss.forEach(t),Ns.forEach(t);for(var i=0;i<Ya.length;i++){var l=Ya[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ya.length&&(i=Ya[0],i.blockedOn===null);)Sp(i),i.blockedOn===null&&Ya.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var r=i[l],u=i[l+1],v=r[bt]||null;if(typeof u=="function")v||_p(i);else if(v){var _=null;if(u&&u.hasAttribute("formAction")){if(r=u,v=u[bt]||null)_=v.formAction;else if(Ud(r)!==null)continue}else _=v.action;typeof _=="function"?i[l+1]=_:(i.splice(l,3),l-=3),_p(i)}}}function Ep(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(v){return r=v})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function $d(e){this._internalRoot=e}lc.prototype.render=$d.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,l=Fn();gp(i,l,e,t,null,null)},lc.prototype.unmount=$d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gp(e.current,2,null,e,null,null),Ur(),t[gi]=null}};function lc(e){this._internalRoot=e}lc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cn();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ya.length&&t!==0&&t<Ya[i].priority;i++);Ya.splice(i,0,e),i===0&&Sp(e)}};var wp=a.version;if(wp!=="19.2.4")throw Error(s(527,wp,"19.2.4"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var wb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{ie=oc.inject(wb),ee=oc}catch{}}return ws.createRoot=function(e,t){if(!c(e))throw Error(s(299));var i=!1,l="",r=km,u=Om,v=qm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=hp(e,1,!1,null,null,i,l,null,r,u,v,Ep),e[gi]=t.current,Nd(e),new $d(t)},ws.hydrateRoot=function(e,t,i){if(!c(e))throw Error(s(299));var l=!1,r="",u=km,v=Om,_=qm,$=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.formState!==void 0&&($=i.formState)),t=hp(e,1,!0,t,i??null,l,r,$,u,v,_,Ep),t.context=mp(null),i=t.current,l=Fn(),l=yn(l),r=Ca(l),r.callback=null,Ta(i,r,l),i=l,t.current.lanes=i,Ti(t,i),qi(t),e[gi]=t.current,Nd(e),new lc(t)},ws.version="19.2.4",ws}var Rp;function qb(){if(Rp)return Ld.exports;Rp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Ld.exports=Ob(),Ld.exports}var Rb=qb();const jb=Df(Rb),jp=n=>{let a;const o=new Set,s=(m,y)=>{const p=typeof m=="function"?m(a):m;if(!Object.is(p,a)){const S=a;a=y??(typeof p!="object"||p===null)?p:Object.assign({},a,p),o.forEach(E=>E(a,S))}},c=()=>a,h={setState:s,getState:c,getInitialState:()=>g,subscribe:m=>(o.add(m),()=>o.delete(m))},g=a=n(s,c,h);return h},Hb=(n=>n?jp(n):jp),Gb=n=>n;function Ub(n,a=Gb){const o=pe.useSyncExternalStore(n.subscribe,pe.useCallback(()=>a(n.getState()),[n,a]),pe.useCallback(()=>a(n.getInitialState()),[n,a]));return pe.useDebugValue(o),o}const Hp=n=>{const a=Hb(n),o=s=>Ub(a,s);return Object.assign(o,a),o},Xs=(n=>n?Hp(n):Hp),it=Xs(n=>({guidanceDocs:[],narrativeDocs:[],activeGuidanceId:"",activeNarrativeId:"",tokens:[],variables:[],setGuidanceDocs:a=>n({guidanceDocs:a}),setNarrativeDocs:a=>n({narrativeDocs:a}),updateGuidanceDoc:(a,o)=>n(s=>({guidanceDocs:s.guidanceDocs.map(c=>c.id===a?o(c):c)})),updateNarrativeDoc:(a,o)=>n(s=>({narrativeDocs:s.narrativeDocs.map(c=>c.id===a?o(c):c)})),setActiveGuidanceId:a=>n({activeGuidanceId:a}),setActiveNarrativeId:a=>n({activeNarrativeId:a}),setTokens:a=>n({tokens:a}),setVariables:a=>n({variables:a}),addGuidanceDoc:a=>n(o=>({guidanceDocs:[...o.guidanceDocs,a]})),addNarrativeDoc:a=>n(o=>({narrativeDocs:[...o.narrativeDocs,a]})),removeGuidanceDoc:a=>n(o=>({guidanceDocs:o.guidanceDocs.filter(s=>s.id!==a)})),removeNarrativeDoc:a=>n(o=>({narrativeDocs:o.narrativeDocs.filter(s=>s.id!==a)})),markDirty:(a,o)=>n(s=>a==="guidance"?{guidanceDocs:s.guidanceDocs.map(c=>c.id===o?{...c,isDirty:!0}:c)}:{narrativeDocs:s.narrativeDocs.map(c=>c.id===o?{...c,isDirty:!0}:c)}),markClean:(a,o)=>n(s=>a==="guidance"?{guidanceDocs:s.guidanceDocs.map(c=>c.id===o?{...c,isDirty:!1}:c)}:{narrativeDocs:s.narrativeDocs.map(c=>c.id===o?{...c,isDirty:!1}:c)})})),It=Xs(n=>({mode:"guidance",flowDirection:"horizontal",projectName:"",showSimulator:!1,showPreview:!1,showSettings:!1,issueCount:0,issueDetails:[],setMode:a=>n({mode:a}),setFlowDirection:a=>n({flowDirection:a}),toggleFlowDirection:()=>n(a=>({flowDirection:a.flowDirection==="horizontal"?"vertical":"horizontal"})),setProjectName:a=>n({projectName:a}),setShowSimulator:a=>n({showSimulator:a}),setShowPreview:a=>n({showPreview:a}),setShowSettings:a=>n({showSettings:a}),setIssues:(a,o)=>n({issueCount:a,issueDetails:o})})),Ve=Xs(n=>({guidancePositions:{},narrativePositions:{},guidanceAnchorPositions:{},narrativeAnchorPositions:{},collapsedNodes:{},selectedGuidanceId:"",selectedNarrativeId:"",extraGuidanceConditions:{},extraGuidanceActions:{},extraNarrativeConditions:{},extraNarrativeActions:{},inventoryOverrides:{},guidanceStageFilter:"all",narrativeStageFilter:"all",guidanceFlowInstance:null,narrativeFlowInstance:null,setGuidancePositions:a=>n({guidancePositions:a}),setNarrativePositions:a=>n({narrativePositions:a}),updatePosition:(a,o,s)=>n(c=>a==="guidance"?{guidancePositions:{...c.guidancePositions,[o]:s}}:{narrativePositions:{...c.narrativePositions,[o]:s}}),setGuidanceAnchorPositions:a=>n({guidanceAnchorPositions:a}),setNarrativeAnchorPositions:a=>n({narrativeAnchorPositions:a}),toggleCollapsed:a=>n(o=>({collapsedNodes:{...o.collapsedNodes,[a]:!o.collapsedNodes[a]}})),setSelectedGuidanceId:a=>n({selectedGuidanceId:a}),setSelectedNarrativeId:a=>n({selectedNarrativeId:a}),setExtraGuidanceConditions:a=>n({extraGuidanceConditions:a}),setExtraGuidanceActions:a=>n({extraGuidanceActions:a}),setExtraNarrativeConditions:a=>n({extraNarrativeConditions:a}),setExtraNarrativeActions:a=>n({extraNarrativeActions:a}),setInventoryOverrides:a=>n({inventoryOverrides:a}),setStageFilter:(a,o)=>n(a==="guidance"?{guidanceStageFilter:o}:{narrativeStageFilter:o}),setFlowInstance:(a,o)=>n(a==="guidance"?{guidanceFlowInstance:o}:{narrativeFlowInstance:o})})),Ht=Xs(n=>({quickEditTarget:null,quickEditValue:"",conditionEditTarget:null,conditionEditValue:"",actionEditTarget:null,actionEditValue:"",inventoryEditTarget:null,inventoryEditValue:"",openQuickEdit:(a,o)=>n({quickEditTarget:a,quickEditValue:o}),closeQuickEdit:()=>n({quickEditTarget:null,quickEditValue:""}),setQuickEditValue:a=>n({quickEditValue:a}),openConditionEdit:a=>n({conditionEditTarget:a,conditionEditValue:a.value}),closeConditionEdit:()=>n({conditionEditTarget:null,conditionEditValue:""}),setConditionEditValue:a=>n({conditionEditValue:a}),openActionEdit:a=>n({actionEditTarget:a,actionEditValue:a.value}),closeActionEdit:()=>n({actionEditTarget:null,actionEditValue:""}),setActionEditValue:a=>n({actionEditValue:a}),openInventoryEdit:(a,o)=>n({inventoryEditTarget:{itemId:a,currentValue:o},inventoryEditValue:o}),closeInventoryEdit:()=>n({inventoryEditTarget:null,inventoryEditValue:""}),setInventoryEditValue:a=>n({inventoryEditValue:a})})),Gp=50,uf="application/stillroom-inventory-item",fo=Xs((n,a)=>({guidanceUndoStack:[],guidanceRedoStack:[],narrativeUndoStack:[],narrativeRedoStack:[],pushGuidanceSnapshot:o=>n(s=>{const c=[...s.guidanceUndoStack,o];return c.length>Gp&&c.shift(),{guidanceUndoStack:c,guidanceRedoStack:[]}}),pushNarrativeSnapshot:o=>n(s=>{const c=[...s.narrativeUndoStack,o];return c.length>Gp&&c.shift(),{narrativeUndoStack:c,narrativeRedoStack:[]}}),undoGuidance:()=>{const o=a();if(o.guidanceUndoStack.length===0)return null;const s=[...o.guidanceUndoStack],c=s.pop();return n({guidanceUndoStack:s}),c},redoGuidance:()=>{const o=a();if(o.guidanceRedoStack.length===0)return null;const s=[...o.guidanceRedoStack],c=s.pop();return n({guidanceRedoStack:s}),c},undoNarrative:()=>{const o=a();if(o.narrativeUndoStack.length===0)return null;const s=[...o.narrativeUndoStack],c=s.pop();return n({narrativeUndoStack:s}),c},redoNarrative:()=>{const o=a();if(o.narrativeRedoStack.length===0)return null;const s=[...o.narrativeRedoStack],c=s.pop();return n({narrativeRedoStack:s}),c},clearHistory:()=>n({guidanceUndoStack:[],guidanceRedoStack:[],narrativeUndoStack:[],narrativeRedoStack:[]})})),Bb="#5ba3a3",$b="#8b7eb8",Nc=n=>{const a=n.color?.trim();return a||((n.kind??(n.id.startsWith("menu.")?"menu":"node"))==="menu"?Bb:$b)},Rs=n=>{const a=n.menus.map(c=>({kind:"menu",data:c})),o=n.nodes.map(c=>({kind:"node",data:c})),s=n.options.map(c=>({kind:"option",data:c}));return[...a,...o,...s]},No=n=>n.data.id,wi=(n,a)=>{if(!n)return null;const o=n.trim(),s=o.startsWith("menu.")||o.startsWith("node.")?[o]:[`menu.${o}`,`node.${o}`];for(const c of s){if(a.menus.some(f=>f.id===c))return{kind:"menu",id:c};if(a.nodes.some(f=>f.id===c))return{kind:"node",id:c}}return null},Gt=(n,a)=>n.menus.find(o=>o.id===a),Ut=(n,a)=>n.nodes.find(o=>o.id===a),an=(n,a)=>n.options.find(o=>o.id===a),la=(n,a)=>n.menus.some(o=>o.id===a)?"menu":n.nodes.some(o=>o.id===a)?"node":n.options.some(o=>o.id===a)?"option":null,Up=(n,a)=>{const o=an(n,a);return o?.target?wi(o.target,n)?.id??null:null},_c=(n,a)=>an(n,a)?.label??a,qc=()=>{const n=it(o=>o.guidanceDocs),a=it(o=>o.activeGuidanceId);return n.find(o=>o.id===a)??n[0]},Mf=()=>{const n=it(o=>o.narrativeDocs),a=it(o=>o.activeNarrativeId);return n.find(o=>o.id===a)??n[0]},Yb=()=>{const n=qc();return n?Rs(n.module):[]},Vb=()=>{const n=it(s=>s.guidanceDocs),a=it(s=>s.narrativeDocs),o=[];for(const s of n)o.push(...s.diagnostics);for(const s of a)o.push(...s.diagnostics);return o},Lb=[{meta:{id:"core",title:"Core Guidance",priority:0,enabled:!0,rootMenu:"menu.guidance.root"},menus:[{id:"menu.guidance.root",text:"choose a story to walk.",options:["option.arrived","option.before_me","option.leave"],requires:[],source:"narratives.available",itemLabel:"{title} (stage {stage}/{stage_total})",itemTarget:"menu.guidance.root",itemAction:"start_narrative {id}",emptyText:"no narratives found."},{id:"menu.focus_log",text:"your focus today:",options:["option.back"],requires:[],source:"focus.today",itemLabel:"{title} for {minutes} minutes",itemTarget:"menu.focus_log",emptyText:"no focus sessions yet."}],nodes:[{id:"node.arrived",speaker:"sensei",text:"i have arrived, sensei.",options:[],requires:[],next:"node.before_me",actions:[]},{id:"node.before_me",speaker:"sensei",text:"consider what is before you today.",options:["option.before_me"],requires:[],actions:[]}],options:[{id:"option.arrived",label:"i have arrived, sensei...",target:"node.arrived",actions:[],requires:[]},{id:"option.before_me",label:"what is before me today, sensei?",target:"menu.focus_log",actions:[],requires:["focus_minutes_today >= 5"]},{id:"option.back",label:"return",target:"menu.guidance.root",actions:[],requires:[]},{id:"option.leave",label:"leave",target:"",actions:["exit"],requires:[]}]},{meta:{id:"morning_rituals",title:"Morning Rituals",priority:-1,enabled:!1,rootMenu:"menu.morning.root"},menus:[{id:"menu.morning.root",text:"good morning. what will you practice?",options:["option.reading","option.writing"],requires:[]}],nodes:[],options:[{id:"option.reading",label:"i read today.",target:"menu.morning.root",actions:["set_flag daily reading_done 1","award_exp 300"],requires:["flag.daily.reading_done != 1"]},{id:"option.writing",label:"i wrote today.",target:"menu.morning.root",actions:["set_flag daily writing_done 1","award_exp 300"],requires:["flag.daily.writing_done != 1"]}]}],Xb=[{meta:{id:"tutorial_path",title:"The Path Begins",description:"Learn the ways of the narrative quest.",author:"Stillroom",version:2},rewards:{expPerStage:300,finalExpBonus:600},nodes:[{id:"stage.1.intro",speaker:"sensei",text:"welcome, young one. before the great tales, you must learn the small ones.",options:["stage.1.ready","stage.1.curious"],requires:[],actions:[]},{id:"stage.1.ready",speaker:"user",text:"i am ready to begin, sensei.",options:[],requires:[],actions:["accept_quest"],next:"stage.1.quest"},{id:"stage.1.curious",speaker:"user",text:"what will i learn?",options:[],requires:[],actions:[],next:"stage.1.explain"},{id:"stage.1.explain",speaker:"sensei",text:"patience, focus, and the joy of small victories.",options:[],requires:[],actions:[],next:"stage.1.quest"},{id:"stage.1.quest",speaker:"sensei",text:"play any game on the NES for five minutes. observe how time passes.",options:[],requires:[],actions:[],quest:{questType:"play_console",gameSystem:"FC",durationMinutes:5},next:"stage.1.complete"},{id:"stage.1.complete",speaker:"sensei",text:"you have learned patience. time is the first teacher.",options:["stage.1.continue"],requires:[],actions:[],completion:!0},{id:"stage.1.continue",speaker:"user",text:"i will continue.",options:[],requires:[],actions:["advance_stage"]}]},{meta:{id:"the_silent_path",title:"The Silent Path",description:"A quiet journey through focus and restraint.",author:"Sensei",version:1},rewards:{expPerStage:400,finalExpBonus:800},nodes:[{id:"stage.1.intro",speaker:"sensei",text:"silence is not empty. it is a field of signals.",options:["stage.1.accept"],requires:[],actions:[]},{id:"stage.1.accept",speaker:"user",text:"i accept.",options:[],requires:[],actions:["accept_quest"],next:"stage.1.quest"},{id:"stage.1.quest",speaker:"sensei",text:"choose a game and sit with its opening. do not rush.",options:[],requires:[],actions:[],quest:{questType:"play_game",gameTitle:"your choice",durationMinutes:10},next:"stage.1.complete"},{id:"stage.1.complete",speaker:"sensei",text:"you listened before acting.",options:["stage.1.advance"],requires:[],actions:[],completion:!0},{id:"stage.1.advance",speaker:"user",text:"next stage.",options:[],requires:[],actions:["advance_stage"]}]}],Bp=["@koan","@errand_ask","@game_prompt","@routine_check","@narrative_offer"],Zb=["{focus_minutes_today}","{focus_sessions_today}","{tasks_total}","{tasks_done}","{rec_title}","{rec_system}","{achievement_desc}","{narratives_available}","{quests_active}"],Wn=["#4cb6a0","#d99245","#5d95d7","#b97bd4","#cf6f84","#9caf55","#d97878","#4ea8d8"],Ib=n=>{let a=0;for(let o=0;o<n.length;o+=1)a=a*31+n.charCodeAt(o)|0;return Math.abs(a)},df=n=>{const a=n.color?.trim();return a||Wn[Ib(n.id)%Wn.length]},ut=(n,a)=>n.nodes.find(o=>o.id===a),Ec=n=>{const a=n.match(/^stage\.(\d+)\./i);if(!a)return null;const o=Number(a[1]);return Number.isFinite(o)?o:null},Zv=n=>{const a=new Map;for(const s of n.nodes)for(const c of s.options)a.set(c,(a.get(c)??0)+1);const o=new Set;for(const s of n.nodes)s.speaker==="user"&&(s.quest||s.completion||(a.get(s.id)??0)===1&&(s.options.length>0||o.add(s.id)));return o},el=(n,a,o)=>{if(!a)return null;if(!o.has(a))return a;const s=ut(n,a);return s?s.next??s.options[0]??null:a},wc=(n,a)=>ut(n,a)?.text??a,Fa="in",zf="cond::",kf="act::",ei=n=>`opt:${n}`,jt=n=>{if(!n||!n.startsWith("opt:"))return null;const a=Number(n.slice(4));return Number.isInteger(a)&&a>=0?a:null},Bn=n=>n.startsWith(zf),$n=n=>n.startsWith(kf),Xa=n=>`${zf}${encodeURIComponent(n)}`,ra=n=>`${kf}${encodeURIComponent(n)}`,Za=n=>{if(!Bn(n))return"";const a=n.slice(zf.length);try{return decodeURIComponent(a)}catch{return a}},Ia=n=>{if(!$n(n))return"";const a=n.slice(kf.length);try{return decodeURIComponent(a)}catch{return a}},di=(n,a)=>{const o=a.trim();return!o||n.some(s=>s.trim()===o)?n:[...n,o]},sc=(n,a)=>{const o=a.trim();return n.filter(s=>s.trim()!==o)},ho=(n,a,o)=>{const s=a.trim(),c=o.trim();let f=!1;const d=[];for(const h of n){const g=h.trim(),m=g===s?c:h;g===s&&(f=!0),d.includes(m)||d.push(m)}return{next:d,changed:f}},Qb=n=>{if(!n)return[];const a=new Set;for(const o of n.menus)for(const s of o.requires)a.add(s.trim());for(const o of n.nodes)for(const s of o.requires)a.add(s.trim());for(const o of n.options)for(const s of o.requires)a.add(s.trim());return Array.from(a).filter(Boolean).sort()},Kb=n=>{if(!n)return[];const a=new Set;for(const o of n.nodes)for(const s of o.requires)a.add(s.trim());return Array.from(a).filter(Boolean).sort()},oa=(n,a)=>{const o=a.trim();return!o||n.some(s=>s.trim()===o)?n:[...n,o]},Qd=(n,a)=>{const o=a.trim();return n.filter(s=>s.trim()!==o)},rc=(n,a,o)=>{const s=a.trim(),c=o.trim();let f=!1;const d=[];for(const h of n){const g=h.trim();g&&(g===s?(c&&d.push(c),f=!0):d.push(g))}return f?{changed:!0,next:Array.from(new Set(d))}:{changed:!1,next:n}},Jb=n=>{if(!n)return[];const a=new Set;for(const o of n.options)for(const s of o.actions)a.add(s.trim());return Array.from(a).filter(Boolean).sort()},Fb=n=>{if(!n)return[];const a=new Set;for(const o of n.nodes)for(const s of o.actions)a.add(s.trim());return Array.from(a).filter(Boolean).sort()},$p=n=>{if(!n)return null;try{const a=JSON.parse(n);return!a.kind||!a.value||!a.id||!a.label?null:a}catch{return null}},Wb=(n,a)=>{let o=1,s=`${n}${o}`;for(;a.has(s);)o+=1,s=`${n}${o}`;return s},Yp=n=>n.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),Ri=(n,a)=>a.has(n)?Wb(`${n}_`,a):n,Vp={maxItems:64},Lp={maxNodes:100},Ja=(n,a,o,s)=>({level:n,message:a,section:o,key:s}),Pb=n=>n.replace(/\r$/,""),Iv=n=>{const a=[],o={};let s="";const c=n.split(`
`);for(const f of c){const d=Pb(f),h=d.trim();if(h.length===0){a.push({kind:"blank",raw:d,section:s});continue}if(h.startsWith("#")){a.push({kind:"comment",raw:d,section:s});continue}if(h.startsWith("[")&&h.endsWith("]")){const m=h.slice(1,-1).trim();s=m,a.push({kind:"section",raw:d,section:m}),o[m]||(o[m]=[]);continue}const g=d.indexOf("=");if(g!==-1){const m=d.slice(0,g).trim(),y=d.slice(g+1).trim(),p={kind:"entry",raw:d,section:s,key:m,value:y};a.push(p),o[s]||(o[s]=[]),o[s].push(p);continue}a.push({kind:"other",raw:d,section:s})}return{lines:a,sections:o}},ca=(n,a)=>n&&(n.startsWith(a)?n:`${a}${n}`),qs=n=>n?n.split(",").map(a=>a.trim()).filter(a=>a.length>0):[],e1=()=>({meta:{id:"",title:"",priority:0,enabled:!0,rootMenu:""},menus:[],nodes:[],options:[]}),t1=(n,a)=>{let o=n.find(s=>s.id===a);return o||(o={id:a,text:"",options:[],requires:[]},n.push(o)),o},n1=(n,a)=>{let o=n.find(s=>s.id===a);return o||(o={id:a,text:"",speaker:"sensei",options:[],requires:[],actions:[]},n.push(o)),o},i1=(n,a)=>{let o=n.find(s=>s.id===a);return o||(o={id:a,label:"",target:"",actions:[],requires:[]},n.push(o)),o},a1=n=>{const a=[],o=Iv(n),s=e1();for(const[c,f]of Object.entries(o.sections)){if(c==="meta"){for(const d of f)if(!(d.kind!=="entry"||!d.key))switch(d.key){case"id":s.meta.id=d.value??"";break;case"title":s.meta.title=d.value??"";break;case"priority":s.meta.priority=Number(d.value??"0")||0;break;case"enabled":s.meta.enabled=d.value!=="0";break;case"root_menu":s.meta.rootMenu=ca(d.value??"","menu.");break}continue}if(c.startsWith("menu.")){const d=c,h=t1(s.menus,d);for(const g of f)if(!(g.kind!=="entry"||!g.key))switch(g.key){case"color":h.color=g.value??"";break;case"text":h.text=g.value??"";break;case"auto_route":h.autoRoute=g.value==="1"||g.value==="true";break;case"back_blocked":h.backBlocked=g.value==="1"||g.value==="true";break;case"options":h.options=qs(g.value??"").map(m=>ca(m,"option."));break;case"source":h.source=g.value??"";break;case"require":g.value&&h.requires.push(g.value);break;case"item_label":h.itemLabel=g.value??"";break;case"item_target":h.itemTarget=g.value??"";break;case"item_action":h.itemAction=g.value??"";break;case"empty_text":h.emptyText=g.value??"";break}continue}if(c.startsWith("node.")){const d=c,h=n1(s.nodes,d);for(const g of f)if(!(g.kind!=="entry"||!g.key))switch(g.key){case"color":h.color=g.value??"";break;case"text":h.text=g.value??"";break;case"back_blocked":h.backBlocked=g.value==="1"||g.value==="true";break;case"speaker":h.speaker=g.value??"sensei";break;case"options":h.options=qs(g.value??"").map(m=>ca(m,"option."));break;case"next":h.next=g.value??"";break;case"require":g.value&&h.requires.push(g.value);break;case"action":g.value&&h.actions.push(g.value);break}continue}if(c.startsWith("option.")){const d=c,h=i1(s.options,d);for(const g of f)if(!(g.kind!=="entry"||!g.key))switch(g.key){case"label":h.label=g.value??"";break;case"target":h.target=g.value??"";break;case"action":g.value&&h.actions.push(g.value);break;case"require":g.value&&h.requires.push(g.value);break}continue}}return s.meta.id||a.push(Ja("error","meta.id is missing","meta")),s.meta.title||a.push(Ja("warning","meta.title is missing","meta")),s.meta.rootMenu||a.push(Ja("error","meta.root_menu is missing","meta")),s.menus.length>Vp.maxItems&&a.push(Ja("warning",`menu count exceeds ${Vp.maxItems}`,"menus")),{module:s,diagnostics:a}},kt=(n,a)=>a==null||typeof a=="string"&&a.length===0?"":`${n} = ${a}`,Xp=n=>{const a=[];a.push("[meta]"),a.push(kt("id",n.meta.id)),a.push(kt("title",n.meta.title)),a.push(kt("priority",n.meta.priority)),a.push(kt("enabled",n.meta.enabled?1:0)),a.push(kt("root_menu",ca(n.meta.rootMenu,"menu."))),a.push("");for(const o of n.menus){a.push(`[${ca(o.id,"menu.")}]`),a.push(kt("color",o.color)),a.push(kt("text",o.text)),a.push(kt("auto_route",o.autoRoute?1:0)),a.push(kt("back_blocked",o.backBlocked?1:0)),o.options.length&&a.push(kt("options",o.options.map(s=>ca(s,"option.")).join(", "))),a.push(kt("source",o.source));for(const s of o.requires)a.push(kt("require",s));a.push(kt("item_label",o.itemLabel)),a.push(kt("item_target",o.itemTarget)),a.push(kt("item_action",o.itemAction)),a.push(kt("empty_text",o.emptyText)),a.push("")}for(const o of n.nodes){a.push(`[${ca(o.id,"node.")}]`),a.push(kt("color",o.color)),a.push(kt("text",o.text)),a.push(kt("back_blocked",o.backBlocked?1:0)),a.push(kt("speaker",o.speaker??"sensei")),o.options.length&&a.push(kt("options",o.options.map(s=>ca(s,"option.")).join(", "))),a.push(kt("next",o.next));for(const s of o.requires)a.push(kt("require",s));for(const s of o.actions)a.push(kt("action",s));a.push("")}for(const o of n.options){a.push(`[${ca(o.id,"option.")}]`),a.push(kt("label",o.label)),a.push(kt("target",o.target));for(const s of o.actions)a.push(kt("action",s));for(const s of o.requires)a.push(kt("require",s));a.push("")}return`${a.join(`
`).trimEnd()}
`},l1=()=>({meta:{id:"",title:"",description:"",author:"",version:1},rewards:{expPerStage:0,finalExpBonus:0},nodes:[]}),o1=(n,a)=>{let o=n.find(s=>s.id===a);return o||(o={id:a,speaker:"sensei",text:"",options:[],requires:[],actions:[]},n.push(o)),o},xl=n=>(n.quest||(n.quest={questType:"play_game"}),n.quest),s1=n=>{if(n==="play_game"||n==="play_console"||n==="earn_achievement")return n},r1=n=>{const a=[],o=Iv(n),s=l1();for(const[c,f]of Object.entries(o.sections)){if(c==="meta"){for(const h of f)if(!(h.kind!=="entry"||!h.key))switch(h.key){case"id":s.meta.id=h.value??"";break;case"title":s.meta.title=h.value??"";break;case"description":s.meta.description=h.value??"";break;case"author":s.meta.author=h.value??"";break;case"version":s.meta.version=Number(h.value??"1")||1;break}continue}if(c==="rewards")continue;const d=o1(s.nodes,c);for(const h of f)if(!(h.kind!=="entry"||!h.key))switch(h.key){case"speaker":d.speaker=h.value??"sensei";break;case"color":d.color=h.value??"";break;case"text":d.text=h.value??"";break;case"next":d.next=h.value??"";break;case"options":d.options=qs(h.value??"");break;case"require":h.value&&d.requires.push(h.value);break;case"requires":d.requires=qs(h.value??"");break;case"action":h.value&&d.actions.push(h.value);break;case"actions":d.actions=qs(h.value??"");break;case"quest_type":{const g=s1(h.value??"");if(g){const m=xl(d);m.questType=g}break}case"quest":(h.value==="true"||h.value==="1")&&xl(d);break;case"game_title":xl(d).gameTitle=h.value??"";break;case"console":case"game_system":xl(d).gameSystem=h.value??"";break;case"duration_minutes":xl(d).durationMinutes=Number(h.value??"0")||0;break;case"achievement_id":xl(d).achievementId=h.value??"";break;case"achievement_name":xl(d).achievementName=h.value??"";break;case"completion_text":d.text||(d.text=h.value??"");break;case"completion":d.completion=h.value==="true"||h.value==="1";break}}return s.meta.id||a.push(Ja("error","meta.id is missing","meta")),s.meta.title||a.push(Ja("warning","meta.title is missing","meta")),s.nodes.length===0&&a.push(Ja("error","no narrative nodes found")),s.nodes.length>Lp.maxNodes&&a.push(Ja("warning",`node count exceeds ${Lp.maxNodes}`,"nodes")),{narrative:s,diagnostics:a}},fn=(n,a)=>a==null||typeof a=="string"&&a.length===0?"":`${n} = ${a}`,Zp=n=>{const a=[];a.push("[meta]"),a.push(fn("id",n.meta.id)),a.push(fn("title",n.meta.title)),a.push(fn("description",n.meta.description)),a.push(fn("author",n.meta.author)),a.push(fn("version",n.meta.version)),a.push("");for(const o of n.nodes){a.push(`[${o.id}]`),a.push(fn("speaker",o.speaker)),a.push(fn("color",o.color)),a.push(fn("text",o.text)),o.options.length&&a.push(fn("options",o.options.join(", "))),a.push(fn("next",o.next));for(const s of o.requires)a.push(fn("require",s));for(const s of o.actions)a.push(fn("action",s));o.quest&&(a.push(fn("quest_type",o.quest.questType)),a.push(fn("game_title",o.quest.gameTitle)),a.push(fn("console",o.quest.gameSystem)),a.push(fn("duration_minutes",o.quest.durationMinutes)),a.push(fn("achievement_id",o.quest.achievementId)),a.push(fn("achievement_name",o.quest.achievementName))),o.completion&&a.push(fn("completion","true")),a.push("")}return`${a.join(`
`).trimEnd()}
`},Wa=(n,a=110)=>{const o=n.replace(/\s+/g," ").trim();return o.length<=a?o:`${o.slice(0,Math.max(0,a-3))}...`},Qv=n=>n.replace(/\\/g,"/"),c1=n=>{const a=Qv(n),o="sensei/",s=a.toLowerCase().indexOf(o);return s>=0?a.slice(s+o.length):a},ff=(n,a)=>{const o=new Blob([a],{type:"text/plain"}),s=URL.createObjectURL(o),c=document.createElement("a");c.href=s,c.download=n,c.click(),URL.revokeObjectURL(s)},Ip=async(n,a)=>{const o=window.showSaveFilePicker;if(!o)return ff(n,a),"downloaded";try{const c=await(await o({suggestedName:n,types:[{description:"Sensei text",accept:{"text/plain":[".txt"]}}]})).createWritable();return await c.write(a),await c.close(),"saved"}catch(s){if(s.name==="AbortError")return"cancelled";throw s}},u1=({onNew:n,onSave:a,onExport:o,onTest:s,fileInputRef:c})=>{const f=It(S=>S.mode),d=It(S=>S.setMode),h=It(S=>S.projectName),g=It(S=>S.setShowPreview),m=It(S=>S.setShowSimulator),y=It(S=>S.showSettings),p=It(S=>S.setShowSettings);return b.jsxs("header",{className:"topbar",children:[b.jsxs("div",{className:"brand",children:[b.jsx("div",{className:"brand-mark",children:"SE"}),b.jsxs("div",{className:"brand-text",children:[b.jsx("div",{className:"brand-title",children:"Sensei Editor"}),b.jsx("div",{className:"brand-subtitle",children:"Stillroom Manuscripts"})]})]}),b.jsxs("div",{className:"topbar-center",children:[b.jsx("div",{className:"project-pill",children:h}),b.jsxs("div",{className:"mode-tabs",children:[b.jsx("button",{className:`tab ${f==="guidance"?"active":""}`,onClick:()=>d("guidance"),title:"Edit guidance modules (menus & dialogue)",children:"Guidance"}),b.jsx("button",{className:`tab ${f==="narrative"?"active":""}`,onClick:()=>d("narrative"),title:"Edit narrative quest chains",children:"Narratives"})]})]}),b.jsxs("div",{className:"topbar-actions",children:[b.jsx("button",{className:"ghost",onClick:n,title:"Create a new manuscript",children:"New"}),b.jsx("button",{className:"ghost",onClick:()=>c.current?.click(),title:"Open a sensei folder",children:"Open"}),b.jsx("button",{className:"ghost",onClick:()=>g(!0),title:"Preview selected node",children:"Preview"}),b.jsx("button",{className:"ghost",onClick:()=>{m(!0),s()},title:"Test the dialogue flow",children:"Test"}),b.jsx("button",{className:"ghost",onClick:a,title:"Save to file",children:"Save"}),b.jsx("button",{className:"ghost",onClick:o,title:"Export as .txt",children:"Export"}),b.jsx("button",{className:"ghost",onClick:()=>p(!y),title:"Editor settings",children:"Settings"})]})]})},d1=()=>{const n=it(p=>p.guidanceDocs),a=it(p=>p.narrativeDocs),o=it(p=>p.activeGuidanceId),s=it(p=>p.activeNarrativeId),c=it(p=>p.setActiveGuidanceId),f=it(p=>p.setActiveNarrativeId),d=It(p=>p.mode),h=It(p=>p.setMode),g=Ve(p=>p.setSelectedGuidanceId),m=Ve(p=>p.setSelectedNarrativeId),y=Ve(p=>p.setStageFilter);return b.jsxs("aside",{className:"sidebar",children:[b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Manuscripts"})}),b.jsxs("div",{className:"panel-body",children:[b.jsxs("div",{className:"tree-group",children:[b.jsx("div",{className:"tree-title",children:"guidance modules"}),b.jsx("ul",{className:"tree-list",children:n.map(p=>b.jsxs("li",{className:`tree-item ${p.id===o&&d==="guidance"?"active":""}`,onClick:()=>{c(p.id),h("guidance");const S=Rs(p.module)[0];S&&g(No(S))},title:p.path,children:[p.module.meta.title||p.id,p.isDirty?" ":""]},p.id))})]}),b.jsxs("div",{className:"tree-group",children:[b.jsx("div",{className:"tree-title",children:"narrative quests"}),b.jsx("ul",{className:"tree-list",children:a.map(p=>b.jsxs("li",{className:`tree-item ${p.id===s&&d==="narrative"?"active":""}`,onClick:()=>{f(p.id),h("narrative"),y("narrative","all"),p.narrative.nodes[0]&&m(p.narrative.nodes[0].id)},title:p.path,children:[p.narrative.meta.title||p.id,p.isDirty?" ":""]},p.id))})]})]})]}),b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Search"})}),b.jsx("div",{className:"panel-body",children:b.jsx("input",{className:"field",placeholder:"Find nodes, text, ids..."})})]})]})},f1=({children:n})=>b.jsxs("aside",{className:"inspector",children:[b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Node Properties"})}),b.jsxs("div",{className:"panel-body",children:[n,!n&&b.jsx("div",{className:"panel-note",style:{textAlign:"center",padding:"20px 0"},children:"select a node to edit its properties"})]})]}),b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Inventory"})}),b.jsx("div",{className:"panel-body",children:b.jsx("div",{className:"panel-note",children:"Use the left canvas inventory for conditions, tokens, variables, and actions."})})]}),b.jsxs("section",{className:"panel",children:[b.jsx("div",{className:"panel-header",children:b.jsx("div",{className:"panel-title",children:"Preview"})}),b.jsx("div",{className:"panel-body",children:b.jsx("div",{className:"preview-card",children:b.jsx("div",{className:"preview-bubble",children:b.jsx("span",{style:{opacity:.5},children:"select a node to preview..."})})})})]})]}),h1=({children:n,inspectorChildren:a})=>b.jsxs("div",{className:"workspace",children:[b.jsx(d1,{}),n,b.jsx(f1,{children:a})]}),m1=()=>{const a=Vb().map(o=>`${o.level}: ${o.message}`);return b.jsxs("footer",{className:"issues",children:[b.jsx("div",{className:"issues-title",children:a.length>0?" Issues":" Ready"}),b.jsx("ul",{className:"issues-list",children:a.length>0?a.map(o=>b.jsx("li",{children:o},o)):b.jsx("li",{style:{opacity:.6},children:"no issues detected"})})]})},g1=({children:n,inspectorChildren:a,onNew:o,onSave:s,onExport:c,onTest:f,fileInputRef:d})=>b.jsxs("div",{className:"app",children:[b.jsx(u1,{onNew:o,onSave:s,onExport:c,onTest:f,fileInputRef:d}),b.jsx(h1,{inspectorChildren:a,children:n}),b.jsx(m1,{})]}),p1=({onAutoArrange:n,onAddDialogue:a,onAddChoice:o,onEditConditions:s,onAddStage:c})=>{const f=It(T=>T.mode),d=It(T=>T.flowDirection),h=It(T=>T.setFlowDirection),g=Ve(T=>T.narrativeStageFilter),m=Ve(T=>T.setStageFilter),y=qc(),p=Mf(),S=A.useMemo(()=>{if(!p)return[];const T=p.narrative.nodes.map(k=>Ec(k.id)).filter(k=>k!==null);return Array.from(new Set(T)).sort((k,M)=>k-M)},[p]),E=f==="guidance"?y?.module.meta.title||"Guidance Module":p?.narrative.meta.title||"Narrative",R=f==="guidance"&&y?`entry: ${y.module.meta.rootMenu}  ${y.module.menus.length} menus  ${y.module.nodes.length} nodes`:f==="narrative"&&p?`${S.length} stages  ${p.narrative.nodes.length} nodes  ${g==="all"?"showing all":`stage ${g}`}`:"";return b.jsxs("div",{className:"canvas-header",children:[b.jsxs("div",{className:"canvas-heading",children:[b.jsx("div",{className:"canvas-title",children:E}),b.jsx("div",{className:"canvas-meta",children:R})]}),b.jsxs("div",{className:"canvas-tools",children:[b.jsxs("div",{className:"flow-direction-toggle",role:"group","aria-label":"Layout direction",children:[b.jsx("button",{type:"button",className:`dir-btn ${d==="horizontal"?"active":""}`,onClick:()=>h("horizontal"),children:"Left to Right"}),b.jsx("button",{type:"button",className:`dir-btn ${d==="vertical"?"active":""}`,onClick:()=>h("vertical"),children:"Vertical"})]}),b.jsxs("div",{className:"canvas-actions",children:[b.jsx("button",{type:"button",className:"dir-btn",onClick:n,children:"Auto Arrange"}),b.jsx("button",{type:"button",className:"dir-btn",onClick:a,children:"Add Dialogue"}),b.jsx("button",{type:"button",className:"dir-btn",onClick:o,children:"Add Choice"}),b.jsx("button",{type:"button",className:"dir-btn",onClick:s,children:"Edit Conditions"})]}),f==="narrative"&&p?b.jsxs("div",{className:"stage-tabs-section",children:[b.jsx("div",{className:"stage-tabs-title",children:"Stage View"}),b.jsxs("div",{className:"stage-tabs",role:"tablist","aria-label":"Narrative stages",children:[b.jsxs("button",{type:"button",className:`stage-tab ${g==="all"?"active":""}`,onClick:()=>m("narrative","all"),children:[b.jsx("span",{className:"stage-tab-swatch"}),b.jsx("span",{className:"stage-tab-text",children:"All"})]}),S.map(T=>b.jsxs("button",{type:"button",className:`stage-tab ${g===T?"active":""}`,onClick:()=>m("narrative",T),children:[b.jsx("span",{className:"stage-tab-swatch"}),b.jsxs("span",{className:"stage-tab-text",children:["Stage ",T]})]},T)),b.jsx("button",{type:"button",className:"stage-tab stage-tab-add",onClick:c,title:"Add new stage","aria-label":"Add new stage",children:b.jsx("span",{className:"stage-tab-text",children:"+"})})]})]}):null]})]})};function _n(n){if(typeof n=="string"||typeof n=="number")return""+n;let a="";if(Array.isArray(n))for(let o=0,s;o<n.length;o++)(s=_n(n[o]))!==""&&(a+=(a&&" ")+s);else for(let o in n)n[o]&&(a+=(a&&" ")+o);return a}var Kd={exports:{}},Jd={},Fd={exports:{}},Wd={};var Qp;function v1(){if(Qp)return Wd;Qp=1;var n=Ls();function a(p,S){return p===S&&(p!==0||1/p===1/S)||p!==p&&S!==S}var o=typeof Object.is=="function"?Object.is:a,s=n.useState,c=n.useEffect,f=n.useLayoutEffect,d=n.useDebugValue;function h(p,S){var E=S(),R=s({inst:{value:E,getSnapshot:S}}),T=R[0].inst,k=R[1];return f(function(){T.value=E,T.getSnapshot=S,g(T)&&k({inst:T})},[p,E,S]),c(function(){return g(T)&&k({inst:T}),p(function(){g(T)&&k({inst:T})})},[p]),d(E),E}function g(p){var S=p.getSnapshot;p=p.value;try{var E=S();return!o(p,E)}catch{return!0}}function m(p,S){return S()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return Wd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,Wd}var Kp;function y1(){return Kp||(Kp=1,Fd.exports=v1()),Fd.exports}var Jp;function x1(){if(Jp)return Jd;Jp=1;var n=Ls(),a=y1();function o(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var s=typeof Object.is=="function"?Object.is:o,c=a.useSyncExternalStore,f=n.useRef,d=n.useEffect,h=n.useMemo,g=n.useDebugValue;return Jd.useSyncExternalStoreWithSelector=function(m,y,p,S,E){var R=f(null);if(R.current===null){var T={hasValue:!1,value:null};R.current=T}else T=R.current;R=h(function(){function M(Q){if(!O){if(O=!0,U=Q,Q=S(Q),E!==void 0&&T.hasValue){var F=T.value;if(E(F,Q))return w=F}return w=Q}if(F=w,s(U,Q))return F;var ce=S(Q);return E!==void 0&&E(F,ce)?(U=Q,F):(U=Q,w=ce)}var O=!1,U,w,J=p===void 0?null:p;return[function(){return M(y())},J===null?void 0:function(){return M(J())}]},[y,p,S,E]);var k=c(m,R[0],R[1]);return d(function(){T.hasValue=!0,T.value=k},[k]),g(k),k},Jd}var Fp;function b1(){return Fp||(Fp=1,Kd.exports=x1()),Kd.exports}var S1=b1();const N1=Df(S1),_1={},Wp=n=>{let a;const o=new Set,s=(y,p)=>{const S=typeof y=="function"?y(a):y;if(!Object.is(S,a)){const E=a;a=p??(typeof S!="object"||S===null)?S:Object.assign({},a,S),o.forEach(R=>R(a,E))}},c=()=>a,g={setState:s,getState:c,getInitialState:()=>m,subscribe:y=>(o.add(y),()=>o.delete(y)),destroy:()=>{(_1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},m=a=n(s,c,g);return g},E1=n=>n?Wp(n):Wp,{useDebugValue:w1}=pe,{useSyncExternalStoreWithSelector:A1}=N1,C1=n=>n;function Kv(n,a=C1,o){const s=A1(n.subscribe,n.getState,n.getServerState||n.getInitialState,a,o);return w1(s),s}const Pp=(n,a)=>{const o=E1(n),s=(c,f=a)=>Kv(o,c,f);return Object.assign(s,o),s},T1=(n,a)=>n?Pp(n,a):Pp;function Vn(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[s,c]of n)if(!Object.is(c,a.get(s)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const s of n)if(!a.has(s))return!1;return!0}const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(n[s],a[s]))return!1;return!0}var D1={value:()=>{}};function Rc(){for(var n=0,a=arguments.length,o={},s;n<a;++n){if(!(s=arguments[n]+"")||s in o||/[\s.]/.test(s))throw new Error("illegal type: "+s);o[s]=[]}return new yc(o)}function yc(n){this._=n}function M1(n,a){return n.trim().split(/^|\s+/).map(function(o){var s="",c=o.indexOf(".");if(c>=0&&(s=o.slice(c+1),o=o.slice(0,c)),o&&!a.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:s}})}yc.prototype=Rc.prototype={constructor:yc,on:function(n,a){var o=this._,s=M1(n+"",o),c,f=-1,d=s.length;if(arguments.length<2){for(;++f<d;)if((c=(n=s[f]).type)&&(c=z1(o[c],n.name)))return c;return}if(a!=null&&typeof a!="function")throw new Error("invalid callback: "+a);for(;++f<d;)if(c=(n=s[f]).type)o[c]=ev(o[c],n.name,a);else if(a==null)for(c in o)o[c]=ev(o[c],n.name,null);return this},copy:function(){var n={},a=this._;for(var o in a)n[o]=a[o].slice();return new yc(n)},call:function(n,a){if((c=arguments.length-2)>0)for(var o=new Array(c),s=0,c,f;s<c;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],s=0,c=f.length;s<c;++s)f[s].value.apply(a,o)},apply:function(n,a,o){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],c=0,f=s.length;c<f;++c)s[c].value.apply(a,o)}};function z1(n,a){for(var o=0,s=n.length,c;o<s;++o)if((c=n[o]).name===a)return c.value}function ev(n,a,o){for(var s=0,c=n.length;s<c;++s)if(n[s].name===a){n[s]=D1,n=n.slice(0,s).concat(n.slice(s+1));break}return o!=null&&n.push({name:a,value:o}),n}var hf="http://www.w3.org/1999/xhtml";const tv={svg:"http://www.w3.org/2000/svg",xhtml:hf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jc(n){var a=n+="",o=a.indexOf(":");return o>=0&&(a=n.slice(0,o))!=="xmlns"&&(n=n.slice(o+1)),tv.hasOwnProperty(a)?{space:tv[a],local:n}:n}function k1(n){return function(){var a=this.ownerDocument,o=this.namespaceURI;return o===hf&&a.documentElement.namespaceURI===hf?a.createElement(n):a.createElementNS(o,n)}}function O1(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Jv(n){var a=jc(n);return(a.local?O1:k1)(a)}function q1(){}function Of(n){return n==null?q1:function(){return this.querySelector(n)}}function R1(n){typeof n!="function"&&(n=Of(n));for(var a=this._groups,o=a.length,s=new Array(o),c=0;c<o;++c)for(var f=a[c],d=f.length,h=s[c]=new Array(d),g,m,y=0;y<d;++y)(g=f[y])&&(m=n.call(g,g.__data__,y,f))&&("__data__"in g&&(m.__data__=g.__data__),h[y]=m);return new ti(s,this._parents)}function j1(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function H1(){return[]}function Fv(n){return n==null?H1:function(){return this.querySelectorAll(n)}}function G1(n){return function(){return j1(n.apply(this,arguments))}}function U1(n){typeof n=="function"?n=G1(n):n=Fv(n);for(var a=this._groups,o=a.length,s=[],c=[],f=0;f<o;++f)for(var d=a[f],h=d.length,g,m=0;m<h;++m)(g=d[m])&&(s.push(n.call(g,g.__data__,m,d)),c.push(g));return new ti(s,c)}function Wv(n){return function(){return this.matches(n)}}function Pv(n){return function(a){return a.matches(n)}}var B1=Array.prototype.find;function $1(n){return function(){return B1.call(this.children,n)}}function Y1(){return this.firstElementChild}function V1(n){return this.select(n==null?Y1:$1(typeof n=="function"?n:Pv(n)))}var L1=Array.prototype.filter;function X1(){return Array.from(this.children)}function Z1(n){return function(){return L1.call(this.children,n)}}function I1(n){return this.selectAll(n==null?X1:Z1(typeof n=="function"?n:Pv(n)))}function Q1(n){typeof n!="function"&&(n=Wv(n));for(var a=this._groups,o=a.length,s=new Array(o),c=0;c<o;++c)for(var f=a[c],d=f.length,h=s[c]=[],g,m=0;m<d;++m)(g=f[m])&&n.call(g,g.__data__,m,f)&&h.push(g);return new ti(s,this._parents)}function e0(n){return new Array(n.length)}function K1(){return new ti(this._enter||this._groups.map(e0),this._parents)}function Ac(n,a){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=a}Ac.prototype={constructor:Ac,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,a){return this._parent.insertBefore(n,a)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function J1(n){return function(){return n}}function F1(n,a,o,s,c,f){for(var d=0,h,g=a.length,m=f.length;d<m;++d)(h=a[d])?(h.__data__=f[d],s[d]=h):o[d]=new Ac(n,f[d]);for(;d<g;++d)(h=a[d])&&(c[d]=h)}function W1(n,a,o,s,c,f,d){var h,g,m=new Map,y=a.length,p=f.length,S=new Array(y),E;for(h=0;h<y;++h)(g=a[h])&&(S[h]=E=d.call(g,g.__data__,h,a)+"",m.has(E)?c[h]=g:m.set(E,g));for(h=0;h<p;++h)E=d.call(n,f[h],h,f)+"",(g=m.get(E))?(s[h]=g,g.__data__=f[h],m.delete(E)):o[h]=new Ac(n,f[h]);for(h=0;h<y;++h)(g=a[h])&&m.get(S[h])===g&&(c[h]=g)}function P1(n){return n.__data__}function eS(n,a){if(!arguments.length)return Array.from(this,P1);var o=a?W1:F1,s=this._parents,c=this._groups;typeof n!="function"&&(n=J1(n));for(var f=c.length,d=new Array(f),h=new Array(f),g=new Array(f),m=0;m<f;++m){var y=s[m],p=c[m],S=p.length,E=tS(n.call(y,y&&y.__data__,m,s)),R=E.length,T=h[m]=new Array(R),k=d[m]=new Array(R),M=g[m]=new Array(S);o(y,p,T,k,M,E,a);for(var O=0,U=0,w,J;O<R;++O)if(w=T[O]){for(O>=U&&(U=O+1);!(J=k[U])&&++U<R;);w._next=J||null}}return d=new ti(d,s),d._enter=h,d._exit=g,d}function tS(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function nS(){return new ti(this._exit||this._groups.map(e0),this._parents)}function iS(n,a,o){var s=this.enter(),c=this,f=this.exit();return typeof n=="function"?(s=n(s),s&&(s=s.selection())):s=s.append(n+""),a!=null&&(c=a(c),c&&(c=c.selection())),o==null?f.remove():o(f),s&&c?s.merge(c).order():c}function aS(n){for(var a=n.selection?n.selection():n,o=this._groups,s=a._groups,c=o.length,f=s.length,d=Math.min(c,f),h=new Array(c),g=0;g<d;++g)for(var m=o[g],y=s[g],p=m.length,S=h[g]=new Array(p),E,R=0;R<p;++R)(E=m[R]||y[R])&&(S[R]=E);for(;g<c;++g)h[g]=o[g];return new ti(h,this._parents)}function lS(){for(var n=this._groups,a=-1,o=n.length;++a<o;)for(var s=n[a],c=s.length-1,f=s[c],d;--c>=0;)(d=s[c])&&(f&&d.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(d,f),f=d);return this}function oS(n){n||(n=sS);function a(p,S){return p&&S?n(p.__data__,S.__data__):!p-!S}for(var o=this._groups,s=o.length,c=new Array(s),f=0;f<s;++f){for(var d=o[f],h=d.length,g=c[f]=new Array(h),m,y=0;y<h;++y)(m=d[y])&&(g[y]=m);g.sort(a)}return new ti(c,this._parents).order()}function sS(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}function rS(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function cS(){return Array.from(this)}function uS(){for(var n=this._groups,a=0,o=n.length;a<o;++a)for(var s=n[a],c=0,f=s.length;c<f;++c){var d=s[c];if(d)return d}return null}function dS(){let n=0;for(const a of this)++n;return n}function fS(){return!this.node()}function hS(n){for(var a=this._groups,o=0,s=a.length;o<s;++o)for(var c=a[o],f=0,d=c.length,h;f<d;++f)(h=c[f])&&n.call(h,h.__data__,f,c);return this}function mS(n){return function(){this.removeAttribute(n)}}function gS(n){return function(){this.removeAttributeNS(n.space,n.local)}}function pS(n,a){return function(){this.setAttribute(n,a)}}function vS(n,a){return function(){this.setAttributeNS(n.space,n.local,a)}}function yS(n,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(n):this.setAttribute(n,o)}}function xS(n,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,o)}}function bS(n,a){var o=jc(n);if(arguments.length<2){var s=this.node();return o.local?s.getAttributeNS(o.space,o.local):s.getAttribute(o)}return this.each((a==null?o.local?gS:mS:typeof a=="function"?o.local?xS:yS:o.local?vS:pS)(o,a))}function t0(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function SS(n){return function(){this.style.removeProperty(n)}}function NS(n,a,o){return function(){this.style.setProperty(n,a,o)}}function _S(n,a,o){return function(){var s=a.apply(this,arguments);s==null?this.style.removeProperty(n):this.style.setProperty(n,s,o)}}function ES(n,a,o){return arguments.length>1?this.each((a==null?SS:typeof a=="function"?_S:NS)(n,a,o??"")):Ao(this.node(),n)}function Ao(n,a){return n.style.getPropertyValue(a)||t0(n).getComputedStyle(n,null).getPropertyValue(a)}function wS(n){return function(){delete this[n]}}function AS(n,a){return function(){this[n]=a}}function CS(n,a){return function(){var o=a.apply(this,arguments);o==null?delete this[n]:this[n]=o}}function TS(n,a){return arguments.length>1?this.each((a==null?wS:typeof a=="function"?CS:AS)(n,a)):this.node()[n]}function n0(n){return n.trim().split(/^|\s+/)}function qf(n){return n.classList||new i0(n)}function i0(n){this._node=n,this._names=n0(n.getAttribute("class")||"")}i0.prototype={add:function(n){var a=this._names.indexOf(n);a<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var a=this._names.indexOf(n);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function a0(n,a){for(var o=qf(n),s=-1,c=a.length;++s<c;)o.add(a[s])}function l0(n,a){for(var o=qf(n),s=-1,c=a.length;++s<c;)o.remove(a[s])}function DS(n){return function(){a0(this,n)}}function MS(n){return function(){l0(this,n)}}function zS(n,a){return function(){(a.apply(this,arguments)?a0:l0)(this,n)}}function kS(n,a){var o=n0(n+"");if(arguments.length<2){for(var s=qf(this.node()),c=-1,f=o.length;++c<f;)if(!s.contains(o[c]))return!1;return!0}return this.each((typeof a=="function"?zS:a?DS:MS)(o,a))}function OS(){this.textContent=""}function qS(n){return function(){this.textContent=n}}function RS(n){return function(){var a=n.apply(this,arguments);this.textContent=a??""}}function jS(n){return arguments.length?this.each(n==null?OS:(typeof n=="function"?RS:qS)(n)):this.node().textContent}function HS(){this.innerHTML=""}function GS(n){return function(){this.innerHTML=n}}function US(n){return function(){var a=n.apply(this,arguments);this.innerHTML=a??""}}function BS(n){return arguments.length?this.each(n==null?HS:(typeof n=="function"?US:GS)(n)):this.node().innerHTML}function $S(){this.nextSibling&&this.parentNode.appendChild(this)}function YS(){return this.each($S)}function VS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function LS(){return this.each(VS)}function XS(n){var a=typeof n=="function"?n:Jv(n);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function ZS(){return null}function IS(n,a){var o=typeof n=="function"?n:Jv(n),s=a==null?ZS:typeof a=="function"?a:Of(a);return this.select(function(){return this.insertBefore(o.apply(this,arguments),s.apply(this,arguments)||null)})}function QS(){var n=this.parentNode;n&&n.removeChild(this)}function KS(){return this.each(QS)}function JS(){var n=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function FS(){var n=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function WS(n){return this.select(n?FS:JS)}function PS(n){return arguments.length?this.property("__data__",n):this.node().__data__}function eN(n){return function(a){n.call(this,a,this.__data__)}}function tN(n){return n.trim().split(/^|\s+/).map(function(a){var o="",s=a.indexOf(".");return s>=0&&(o=a.slice(s+1),a=a.slice(0,s)),{type:a,name:o}})}function nN(n){return function(){var a=this.__on;if(a){for(var o=0,s=-1,c=a.length,f;o<c;++o)f=a[o],(!n.type||f.type===n.type)&&f.name===n.name?this.removeEventListener(f.type,f.listener,f.options):a[++s]=f;++s?a.length=s:delete this.__on}}}function iN(n,a,o){return function(){var s=this.__on,c,f=eN(a);if(s){for(var d=0,h=s.length;d<h;++d)if((c=s[d]).type===n.type&&c.name===n.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=f,c.options=o),c.value=a;return}}this.addEventListener(n.type,f,o),c={type:n.type,name:n.name,value:a,listener:f,options:o},s?s.push(c):this.__on=[c]}}function aN(n,a,o){var s=tN(n+""),c,f=s.length,d;if(arguments.length<2){var h=this.node().__on;if(h){for(var g=0,m=h.length,y;g<m;++g)for(c=0,y=h[g];c<f;++c)if((d=s[c]).type===y.type&&d.name===y.name)return y.value}return}for(h=a?iN:nN,c=0;c<f;++c)this.each(h(s[c],a,o));return this}function o0(n,a,o){var s=t0(n),c=s.CustomEvent;typeof c=="function"?c=new c(a,o):(c=s.document.createEvent("Event"),o?(c.initEvent(a,o.bubbles,o.cancelable),c.detail=o.detail):c.initEvent(a,!1,!1)),n.dispatchEvent(c)}function lN(n,a){return function(){return o0(this,n,a)}}function oN(n,a){return function(){return o0(this,n,a.apply(this,arguments))}}function sN(n,a){return this.each((typeof a=="function"?oN:lN)(n,a))}function*rN(){for(var n=this._groups,a=0,o=n.length;a<o;++a)for(var s=n[a],c=0,f=s.length,d;c<f;++c)(d=s[c])&&(yield d)}var s0=[null];function ti(n,a){this._groups=n,this._parents=a}function Zs(){return new ti([[document.documentElement]],s0)}function cN(){return this}ti.prototype=Zs.prototype={constructor:ti,select:R1,selectAll:U1,selectChild:V1,selectChildren:I1,filter:Q1,data:eS,enter:K1,exit:nS,join:iS,merge:aS,selection:cN,order:lS,sort:oS,call:rS,nodes:cS,node:uS,size:dS,empty:fS,each:hS,attr:bS,style:ES,property:TS,classed:kS,text:jS,html:BS,raise:YS,lower:LS,append:XS,insert:IS,remove:KS,clone:WS,datum:PS,on:aN,dispatch:sN,[Symbol.iterator]:rN};function hi(n){return typeof n=="string"?new ti([[document.querySelector(n)]],[document.documentElement]):new ti([[n]],s0)}function uN(n){let a;for(;a=n.sourceEvent;)n=a;return n}function Ei(n,a){if(n=uN(n),a===void 0&&(a=n.currentTarget),a){var o=a.ownerSVGElement||a;if(o.createSVGPoint){var s=o.createSVGPoint();return s.x=n.clientX,s.y=n.clientY,s=s.matrixTransform(a.getScreenCTM().inverse()),[s.x,s.y]}if(a.getBoundingClientRect){var c=a.getBoundingClientRect();return[n.clientX-c.left-a.clientLeft,n.clientY-c.top-a.clientTop]}}return[n.pageX,n.pageY]}const dN={passive:!1},js={capture:!0,passive:!1};function Pd(n){n.stopImmediatePropagation()}function _o(n){n.preventDefault(),n.stopImmediatePropagation()}function r0(n){var a=n.document.documentElement,o=hi(n).on("dragstart.drag",_o,js);"onselectstart"in a?o.on("selectstart.drag",_o,js):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function c0(n,a){var o=n.document.documentElement,s=hi(n).on("dragstart.drag",null);a&&(s.on("click.drag",_o,js),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in o?s.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const cc=n=>()=>n;function mf(n,{sourceEvent:a,subject:o,target:s,identifier:c,active:f,x:d,y:h,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}mf.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function fN(n){return!n.ctrlKey&&!n.button}function hN(){return this.parentNode}function mN(n,a){return a??{x:n.x,y:n.y}}function gN(){return navigator.maxTouchPoints||"ontouchstart"in this}function pN(){var n=fN,a=hN,o=mN,s=gN,c={},f=Rc("start","drag","end"),d=0,h,g,m,y,p=0;function S(w){w.on("mousedown.drag",E).filter(s).on("touchstart.drag",k).on("touchmove.drag",M,dN).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(w,J){if(!(y||!n.call(this,w,J))){var Q=U(this,a.call(this,w,J),w,J,"mouse");Q&&(hi(w.view).on("mousemove.drag",R,js).on("mouseup.drag",T,js),r0(w.view),Pd(w),m=!1,h=w.clientX,g=w.clientY,Q("start",w))}}function R(w){if(_o(w),!m){var J=w.clientX-h,Q=w.clientY-g;m=J*J+Q*Q>p}c.mouse("drag",w)}function T(w){hi(w.view).on("mousemove.drag mouseup.drag",null),c0(w.view,m),_o(w),c.mouse("end",w)}function k(w,J){if(n.call(this,w,J)){var Q=w.changedTouches,F=a.call(this,w,J),ce=Q.length,ue,te;for(ue=0;ue<ce;++ue)(te=U(this,F,w,J,Q[ue].identifier,Q[ue]))&&(Pd(w),te("start",w,Q[ue]))}}function M(w){var J=w.changedTouches,Q=J.length,F,ce;for(F=0;F<Q;++F)(ce=c[J[F].identifier])&&(_o(w),ce("drag",w,J[F]))}function O(w){var J=w.changedTouches,Q=J.length,F,ce;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),F=0;F<Q;++F)(ce=c[J[F].identifier])&&(Pd(w),ce("end",w,J[F]))}function U(w,J,Q,F,ce,ue){var te=f.copy(),oe=Ei(ue||Q,J),me,ve,z;if((z=o.call(w,new mf("beforestart",{sourceEvent:Q,target:S,identifier:ce,active:d,x:oe[0],y:oe[1],dx:0,dy:0,dispatch:te}),F))!=null)return me=z.x-oe[0]||0,ve=z.y-oe[1]||0,function B(N,L,ne){var I=oe,se;switch(N){case"start":c[ce]=B,se=d++;break;case"end":delete c[ce],--d;case"drag":oe=Ei(ne||L,J),se=d;break}te.call(N,w,new mf(N,{sourceEvent:L,subject:z,target:S,identifier:ce,active:se,x:oe[0]+me,y:oe[1]+ve,dx:oe[0]-I[0],dy:oe[1]-I[1],dispatch:te}),F)}}return S.filter=function(w){return arguments.length?(n=typeof w=="function"?w:cc(!!w),S):n},S.container=function(w){return arguments.length?(a=typeof w=="function"?w:cc(w),S):a},S.subject=function(w){return arguments.length?(o=typeof w=="function"?w:cc(w),S):o},S.touchable=function(w){return arguments.length?(s=typeof w=="function"?w:cc(!!w),S):s},S.on=function(){var w=f.on.apply(f,arguments);return w===f?S:w},S.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,S):Math.sqrt(p)},S}function Rf(n,a,o){n.prototype=a.prototype=o,o.constructor=n}function u0(n,a){var o=Object.create(n.prototype);for(var s in a)o[s]=a[s];return o}function Is(){}var Hs=.7,Cc=1/Hs,Eo="\\s*([+-]?\\d+)\\s*",Gs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vN=/^#([0-9a-f]{3,8})$/,yN=new RegExp(`^rgb\\(${Eo},${Eo},${Eo}\\)$`),xN=new RegExp(`^rgb\\(${Hi},${Hi},${Hi}\\)$`),bN=new RegExp(`^rgba\\(${Eo},${Eo},${Eo},${Gs}\\)$`),SN=new RegExp(`^rgba\\(${Hi},${Hi},${Hi},${Gs}\\)$`),NN=new RegExp(`^hsl\\(${Gs},${Hi},${Hi}\\)$`),_N=new RegExp(`^hsla\\(${Gs},${Hi},${Hi},${Gs}\\)$`),nv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rf(Is,Us,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:iv,formatHex:iv,formatHex8:EN,formatHsl:wN,formatRgb:av,toString:av});function iv(){return this.rgb().formatHex()}function EN(){return this.rgb().formatHex8()}function wN(){return d0(this).formatHsl()}function av(){return this.rgb().formatRgb()}function Us(n){var a,o;return n=(n+"").trim().toLowerCase(),(a=vN.exec(n))?(o=a[1].length,a=parseInt(a[1],16),o===6?lv(a):o===3?new Yn(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):o===8?uc(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):o===4?uc(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=yN.exec(n))?new Yn(a[1],a[2],a[3],1):(a=xN.exec(n))?new Yn(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=bN.exec(n))?uc(a[1],a[2],a[3],a[4]):(a=SN.exec(n))?uc(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=NN.exec(n))?rv(a[1],a[2]/100,a[3]/100,1):(a=_N.exec(n))?rv(a[1],a[2]/100,a[3]/100,a[4]):nv.hasOwnProperty(n)?lv(nv[n]):n==="transparent"?new Yn(NaN,NaN,NaN,0):null}function lv(n){return new Yn(n>>16&255,n>>8&255,n&255,1)}function uc(n,a,o,s){return s<=0&&(n=a=o=NaN),new Yn(n,a,o,s)}function AN(n){return n instanceof Is||(n=Us(n)),n?(n=n.rgb(),new Yn(n.r,n.g,n.b,n.opacity)):new Yn}function gf(n,a,o,s){return arguments.length===1?AN(n):new Yn(n,a,o,s??1)}function Yn(n,a,o,s){this.r=+n,this.g=+a,this.b=+o,this.opacity=+s}Rf(Yn,gf,u0(Is,{brighter(n){return n=n==null?Cc:Math.pow(Cc,n),new Yn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Hs:Math.pow(Hs,n),new Yn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Yn(El(this.r),El(this.g),El(this.b),Tc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ov,formatHex:ov,formatHex8:CN,formatRgb:sv,toString:sv}));function ov(){return`#${Sl(this.r)}${Sl(this.g)}${Sl(this.b)}`}function CN(){return`#${Sl(this.r)}${Sl(this.g)}${Sl(this.b)}${Sl((isNaN(this.opacity)?1:this.opacity)*255)}`}function sv(){const n=Tc(this.opacity);return`${n===1?"rgb(":"rgba("}${El(this.r)}, ${El(this.g)}, ${El(this.b)}${n===1?")":`, ${n})`}`}function Tc(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function El(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Sl(n){return n=El(n),(n<16?"0":"")+n.toString(16)}function rv(n,a,o,s){return s<=0?n=a=o=NaN:o<=0||o>=1?n=a=NaN:a<=0&&(n=NaN),new Ai(n,a,o,s)}function d0(n){if(n instanceof Ai)return new Ai(n.h,n.s,n.l,n.opacity);if(n instanceof Is||(n=Us(n)),!n)return new Ai;if(n instanceof Ai)return n;n=n.rgb();var a=n.r/255,o=n.g/255,s=n.b/255,c=Math.min(a,o,s),f=Math.max(a,o,s),d=NaN,h=f-c,g=(f+c)/2;return h?(a===f?d=(o-s)/h+(o<s)*6:o===f?d=(s-a)/h+2:d=(a-o)/h+4,h/=g<.5?f+c:2-f-c,d*=60):h=g>0&&g<1?0:d,new Ai(d,h,g,n.opacity)}function TN(n,a,o,s){return arguments.length===1?d0(n):new Ai(n,a,o,s??1)}function Ai(n,a,o,s){this.h=+n,this.s=+a,this.l=+o,this.opacity=+s}Rf(Ai,TN,u0(Is,{brighter(n){return n=n==null?Cc:Math.pow(Cc,n),new Ai(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Hs:Math.pow(Hs,n),new Ai(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,a=isNaN(n)||isNaN(this.s)?0:this.s,o=this.l,s=o+(o<.5?o:1-o)*a,c=2*o-s;return new Yn(ef(n>=240?n-240:n+120,c,s),ef(n,c,s),ef(n<120?n+240:n-120,c,s),this.opacity)},clamp(){return new Ai(cv(this.h),dc(this.s),dc(this.l),Tc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Tc(this.opacity);return`${n===1?"hsl(":"hsla("}${cv(this.h)}, ${dc(this.s)*100}%, ${dc(this.l)*100}%${n===1?")":`, ${n})`}`}}));function cv(n){return n=(n||0)%360,n<0?n+360:n}function dc(n){return Math.max(0,Math.min(1,n||0))}function ef(n,a,o){return(n<60?a+(o-a)*n/60:n<180?o:n<240?a+(o-a)*(240-n)/60:a)*255}const f0=n=>()=>n;function DN(n,a){return function(o){return n+o*a}}function MN(n,a,o){return n=Math.pow(n,o),a=Math.pow(a,o)-n,o=1/o,function(s){return Math.pow(n+s*a,o)}}function zN(n){return(n=+n)==1?h0:function(a,o){return o-a?MN(a,o,n):f0(isNaN(a)?o:a)}}function h0(n,a){var o=a-n;return o?DN(n,o):f0(isNaN(n)?a:n)}const uv=(function n(a){var o=zN(a);function s(c,f){var d=o((c=gf(c)).r,(f=gf(f)).r),h=o(c.g,f.g),g=o(c.b,f.b),m=h0(c.opacity,f.opacity);return function(y){return c.r=d(y),c.g=h(y),c.b=g(y),c.opacity=m(y),c+""}}return s.gamma=n,s})(1);function Qa(n,a){return n=+n,a=+a,function(o){return n*(1-o)+a*o}}var pf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tf=new RegExp(pf.source,"g");function kN(n){return function(){return n}}function ON(n){return function(a){return n(a)+""}}function qN(n,a){var o=pf.lastIndex=tf.lastIndex=0,s,c,f,d=-1,h=[],g=[];for(n=n+"",a=a+"";(s=pf.exec(n))&&(c=tf.exec(a));)(f=c.index)>o&&(f=a.slice(o,f),h[d]?h[d]+=f:h[++d]=f),(s=s[0])===(c=c[0])?h[d]?h[d]+=c:h[++d]=c:(h[++d]=null,g.push({i:d,x:Qa(s,c)})),o=tf.lastIndex;return o<a.length&&(f=a.slice(o),h[d]?h[d]+=f:h[++d]=f),h.length<2?g[0]?ON(g[0].x):kN(a):(a=g.length,function(m){for(var y=0,p;y<a;++y)h[(p=g[y]).i]=p.x(m);return h.join("")})}var dv=180/Math.PI,vf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function m0(n,a,o,s,c,f){var d,h,g;return(d=Math.sqrt(n*n+a*a))&&(n/=d,a/=d),(g=n*o+a*s)&&(o-=n*g,s-=a*g),(h=Math.sqrt(o*o+s*s))&&(o/=h,s/=h,g/=h),n*s<a*o&&(n=-n,a=-a,g=-g,d=-d),{translateX:c,translateY:f,rotate:Math.atan2(a,n)*dv,skewX:Math.atan(g)*dv,scaleX:d,scaleY:h}}var fc;function RN(n){const a=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return a.isIdentity?vf:m0(a.a,a.b,a.c,a.d,a.e,a.f)}function jN(n){return n==null||(fc||(fc=document.createElementNS("http://www.w3.org/2000/svg","g")),fc.setAttribute("transform",n),!(n=fc.transform.baseVal.consolidate()))?vf:(n=n.matrix,m0(n.a,n.b,n.c,n.d,n.e,n.f))}function g0(n,a,o,s){function c(m){return m.length?m.pop()+" ":""}function f(m,y,p,S,E,R){if(m!==p||y!==S){var T=E.push("translate(",null,a,null,o);R.push({i:T-4,x:Qa(m,p)},{i:T-2,x:Qa(y,S)})}else(p||S)&&E.push("translate("+p+a+S+o)}function d(m,y,p,S){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),S.push({i:p.push(c(p)+"rotate(",null,s)-2,x:Qa(m,y)})):y&&p.push(c(p)+"rotate("+y+s)}function h(m,y,p,S){m!==y?S.push({i:p.push(c(p)+"skewX(",null,s)-2,x:Qa(m,y)}):y&&p.push(c(p)+"skewX("+y+s)}function g(m,y,p,S,E,R){if(m!==p||y!==S){var T=E.push(c(E)+"scale(",null,",",null,")");R.push({i:T-4,x:Qa(m,p)},{i:T-2,x:Qa(y,S)})}else(p!==1||S!==1)&&E.push(c(E)+"scale("+p+","+S+")")}return function(m,y){var p=[],S=[];return m=n(m),y=n(y),f(m.translateX,m.translateY,y.translateX,y.translateY,p,S),d(m.rotate,y.rotate,p,S),h(m.skewX,y.skewX,p,S),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,p,S),m=y=null,function(E){for(var R=-1,T=S.length,k;++R<T;)p[(k=S[R]).i]=k.x(E);return p.join("")}}}var HN=g0(RN,"px, ","px)","deg)"),GN=g0(jN,", ",")",")"),UN=1e-12;function fv(n){return((n=Math.exp(n))+1/n)/2}function BN(n){return((n=Math.exp(n))-1/n)/2}function $N(n){return((n=Math.exp(2*n))-1)/(n+1)}const YN=(function n(a,o,s){function c(f,d){var h=f[0],g=f[1],m=f[2],y=d[0],p=d[1],S=d[2],E=y-h,R=p-g,T=E*E+R*R,k,M;if(T<UN)M=Math.log(S/m)/a,k=function(F){return[h+F*E,g+F*R,m*Math.exp(a*F*M)]};else{var O=Math.sqrt(T),U=(S*S-m*m+s*T)/(2*m*o*O),w=(S*S-m*m-s*T)/(2*S*o*O),J=Math.log(Math.sqrt(U*U+1)-U),Q=Math.log(Math.sqrt(w*w+1)-w);M=(Q-J)/a,k=function(F){var ce=F*M,ue=fv(J),te=m/(o*O)*(ue*$N(a*ce+J)-BN(J));return[h+te*E,g+te*R,m*ue/fv(a*ce+J)]}}return k.duration=M*1e3*a/Math.SQRT2,k}return c.rho=function(f){var d=Math.max(.001,+f),h=d*d,g=h*h;return n(d,h,g)},c})(Math.SQRT2,2,4);var Co=0,zs=0,As=0,p0=1e3,Dc,ks,Mc=0,Al=0,Hc=0,Bs=typeof performance=="object"&&performance.now?performance:Date,v0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function jf(){return Al||(v0(VN),Al=Bs.now()+Hc)}function VN(){Al=0}function zc(){this._call=this._time=this._next=null}zc.prototype=y0.prototype={constructor:zc,restart:function(n,a,o){if(typeof n!="function")throw new TypeError("callback is not a function");o=(o==null?jf():+o)+(a==null?0:+a),!this._next&&ks!==this&&(ks?ks._next=this:Dc=this,ks=this),this._call=n,this._time=o,yf()},stop:function(){this._call&&(this._call=null,this._time=1/0,yf())}};function y0(n,a,o){var s=new zc;return s.restart(n,a,o),s}function LN(){jf(),++Co;for(var n=Dc,a;n;)(a=Al-n._time)>=0&&n._call.call(void 0,a),n=n._next;--Co}function hv(){Al=(Mc=Bs.now())+Hc,Co=zs=0;try{LN()}finally{Co=0,ZN(),Al=0}}function XN(){var n=Bs.now(),a=n-Mc;a>p0&&(Hc-=a,Mc=n)}function ZN(){for(var n,a=Dc,o,s=1/0;a;)a._call?(s>a._time&&(s=a._time),n=a,a=a._next):(o=a._next,a._next=null,a=n?n._next=o:Dc=o);ks=n,yf(s)}function yf(n){if(!Co){zs&&(zs=clearTimeout(zs));var a=n-Al;a>24?(n<1/0&&(zs=setTimeout(hv,n-Bs.now()-Hc)),As&&(As=clearInterval(As))):(As||(Mc=Bs.now(),As=setInterval(XN,p0)),Co=1,v0(hv))}}function mv(n,a,o){var s=new zc;return a=a==null?0:+a,s.restart(c=>{s.stop(),n(c+a)},a,o),s}var IN=Rc("start","end","cancel","interrupt"),QN=[],x0=0,gv=1,xf=2,xc=3,pv=4,bf=5,bc=6;function Gc(n,a,o,s,c,f){var d=n.__transition;if(!d)n.__transition={};else if(o in d)return;KN(n,o,{name:a,index:s,group:c,on:IN,tween:QN,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:x0})}function Hf(n,a){var o=Ci(n,a);if(o.state>x0)throw new Error("too late; already scheduled");return o}function Ui(n,a){var o=Ci(n,a);if(o.state>xc)throw new Error("too late; already running");return o}function Ci(n,a){var o=n.__transition;if(!o||!(o=o[a]))throw new Error("transition not found");return o}function KN(n,a,o){var s=n.__transition,c;s[a]=o,o.timer=y0(f,0,o.time);function f(m){o.state=gv,o.timer.restart(d,o.delay,o.time),o.delay<=m&&d(m-o.delay)}function d(m){var y,p,S,E;if(o.state!==gv)return g();for(y in s)if(E=s[y],E.name===o.name){if(E.state===xc)return mv(d);E.state===pv?(E.state=bc,E.timer.stop(),E.on.call("interrupt",n,n.__data__,E.index,E.group),delete s[y]):+y<a&&(E.state=bc,E.timer.stop(),E.on.call("cancel",n,n.__data__,E.index,E.group),delete s[y])}if(mv(function(){o.state===xc&&(o.state=pv,o.timer.restart(h,o.delay,o.time),h(m))}),o.state=xf,o.on.call("start",n,n.__data__,o.index,o.group),o.state===xf){for(o.state=xc,c=new Array(S=o.tween.length),y=0,p=-1;y<S;++y)(E=o.tween[y].value.call(n,n.__data__,o.index,o.group))&&(c[++p]=E);c.length=p+1}}function h(m){for(var y=m<o.duration?o.ease.call(null,m/o.duration):(o.timer.restart(g),o.state=bf,1),p=-1,S=c.length;++p<S;)c[p].call(n,y);o.state===bf&&(o.on.call("end",n,n.__data__,o.index,o.group),g())}function g(){o.state=bc,o.timer.stop(),delete s[a];for(var m in s)return;delete n.__transition}}function Sc(n,a){var o=n.__transition,s,c,f=!0,d;if(o){a=a==null?null:a+"";for(d in o){if((s=o[d]).name!==a){f=!1;continue}c=s.state>xf&&s.state<bf,s.state=bc,s.timer.stop(),s.on.call(c?"interrupt":"cancel",n,n.__data__,s.index,s.group),delete o[d]}f&&delete n.__transition}}function JN(n){return this.each(function(){Sc(this,n)})}function FN(n,a){var o,s;return function(){var c=Ui(this,n),f=c.tween;if(f!==o){s=o=f;for(var d=0,h=s.length;d<h;++d)if(s[d].name===a){s=s.slice(),s.splice(d,1);break}}c.tween=s}}function WN(n,a,o){var s,c;if(typeof o!="function")throw new Error;return function(){var f=Ui(this,n),d=f.tween;if(d!==s){c=(s=d).slice();for(var h={name:a,value:o},g=0,m=c.length;g<m;++g)if(c[g].name===a){c[g]=h;break}g===m&&c.push(h)}f.tween=c}}function PN(n,a){var o=this._id;if(n+="",arguments.length<2){for(var s=Ci(this.node(),o).tween,c=0,f=s.length,d;c<f;++c)if((d=s[c]).name===n)return d.value;return null}return this.each((a==null?FN:WN)(o,n,a))}function Gf(n,a,o){var s=n._id;return n.each(function(){var c=Ui(this,s);(c.value||(c.value={}))[a]=o.apply(this,arguments)}),function(c){return Ci(c,s).value[a]}}function b0(n,a){var o;return(typeof a=="number"?Qa:a instanceof Us?uv:(o=Us(a))?(a=o,uv):qN)(n,a)}function e_(n){return function(){this.removeAttribute(n)}}function t_(n){return function(){this.removeAttributeNS(n.space,n.local)}}function n_(n,a,o){var s,c=o+"",f;return function(){var d=this.getAttribute(n);return d===c?null:d===s?f:f=a(s=d,o)}}function i_(n,a,o){var s,c=o+"",f;return function(){var d=this.getAttributeNS(n.space,n.local);return d===c?null:d===s?f:f=a(s=d,o)}}function a_(n,a,o){var s,c,f;return function(){var d,h=o(this),g;return h==null?void this.removeAttribute(n):(d=this.getAttribute(n),g=h+"",d===g?null:d===s&&g===c?f:(c=g,f=a(s=d,h)))}}function l_(n,a,o){var s,c,f;return function(){var d,h=o(this),g;return h==null?void this.removeAttributeNS(n.space,n.local):(d=this.getAttributeNS(n.space,n.local),g=h+"",d===g?null:d===s&&g===c?f:(c=g,f=a(s=d,h)))}}function o_(n,a){var o=jc(n),s=o==="transform"?GN:b0;return this.attrTween(n,typeof a=="function"?(o.local?l_:a_)(o,s,Gf(this,"attr."+n,a)):a==null?(o.local?t_:e_)(o):(o.local?i_:n_)(o,s,a))}function s_(n,a){return function(o){this.setAttribute(n,a.call(this,o))}}function r_(n,a){return function(o){this.setAttributeNS(n.space,n.local,a.call(this,o))}}function c_(n,a){var o,s;function c(){var f=a.apply(this,arguments);return f!==s&&(o=(s=f)&&r_(n,f)),o}return c._value=a,c}function u_(n,a){var o,s;function c(){var f=a.apply(this,arguments);return f!==s&&(o=(s=f)&&s_(n,f)),o}return c._value=a,c}function d_(n,a){var o="attr."+n;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(a==null)return this.tween(o,null);if(typeof a!="function")throw new Error;var s=jc(n);return this.tween(o,(s.local?c_:u_)(s,a))}function f_(n,a){return function(){Hf(this,n).delay=+a.apply(this,arguments)}}function h_(n,a){return a=+a,function(){Hf(this,n).delay=a}}function m_(n){var a=this._id;return arguments.length?this.each((typeof n=="function"?f_:h_)(a,n)):Ci(this.node(),a).delay}function g_(n,a){return function(){Ui(this,n).duration=+a.apply(this,arguments)}}function p_(n,a){return a=+a,function(){Ui(this,n).duration=a}}function v_(n){var a=this._id;return arguments.length?this.each((typeof n=="function"?g_:p_)(a,n)):Ci(this.node(),a).duration}function y_(n,a){if(typeof a!="function")throw new Error;return function(){Ui(this,n).ease=a}}function x_(n){var a=this._id;return arguments.length?this.each(y_(a,n)):Ci(this.node(),a).ease}function b_(n,a){return function(){var o=a.apply(this,arguments);if(typeof o!="function")throw new Error;Ui(this,n).ease=o}}function S_(n){if(typeof n!="function")throw new Error;return this.each(b_(this._id,n))}function N_(n){typeof n!="function"&&(n=Wv(n));for(var a=this._groups,o=a.length,s=new Array(o),c=0;c<o;++c)for(var f=a[c],d=f.length,h=s[c]=[],g,m=0;m<d;++m)(g=f[m])&&n.call(g,g.__data__,m,f)&&h.push(g);return new fa(s,this._parents,this._name,this._id)}function __(n){if(n._id!==this._id)throw new Error;for(var a=this._groups,o=n._groups,s=a.length,c=o.length,f=Math.min(s,c),d=new Array(s),h=0;h<f;++h)for(var g=a[h],m=o[h],y=g.length,p=d[h]=new Array(y),S,E=0;E<y;++E)(S=g[E]||m[E])&&(p[E]=S);for(;h<s;++h)d[h]=a[h];return new fa(d,this._parents,this._name,this._id)}function E_(n){return(n+"").trim().split(/^|\s+/).every(function(a){var o=a.indexOf(".");return o>=0&&(a=a.slice(0,o)),!a||a==="start"})}function w_(n,a,o){var s,c,f=E_(a)?Hf:Ui;return function(){var d=f(this,n),h=d.on;h!==s&&(c=(s=h).copy()).on(a,o),d.on=c}}function A_(n,a){var o=this._id;return arguments.length<2?Ci(this.node(),o).on.on(n):this.each(w_(o,n,a))}function C_(n){return function(){var a=this.parentNode;for(var o in this.__transition)if(+o!==n)return;a&&a.removeChild(this)}}function T_(){return this.on("end.remove",C_(this._id))}function D_(n){var a=this._name,o=this._id;typeof n!="function"&&(n=Of(n));for(var s=this._groups,c=s.length,f=new Array(c),d=0;d<c;++d)for(var h=s[d],g=h.length,m=f[d]=new Array(g),y,p,S=0;S<g;++S)(y=h[S])&&(p=n.call(y,y.__data__,S,h))&&("__data__"in y&&(p.__data__=y.__data__),m[S]=p,Gc(m[S],a,o,S,m,Ci(y,o)));return new fa(f,this._parents,a,o)}function M_(n){var a=this._name,o=this._id;typeof n!="function"&&(n=Fv(n));for(var s=this._groups,c=s.length,f=[],d=[],h=0;h<c;++h)for(var g=s[h],m=g.length,y,p=0;p<m;++p)if(y=g[p]){for(var S=n.call(y,y.__data__,p,g),E,R=Ci(y,o),T=0,k=S.length;T<k;++T)(E=S[T])&&Gc(E,a,o,T,S,R);f.push(S),d.push(y)}return new fa(f,d,a,o)}var z_=Zs.prototype.constructor;function k_(){return new z_(this._groups,this._parents)}function O_(n,a){var o,s,c;return function(){var f=Ao(this,n),d=(this.style.removeProperty(n),Ao(this,n));return f===d?null:f===o&&d===s?c:c=a(o=f,s=d)}}function S0(n){return function(){this.style.removeProperty(n)}}function q_(n,a,o){var s,c=o+"",f;return function(){var d=Ao(this,n);return d===c?null:d===s?f:f=a(s=d,o)}}function R_(n,a,o){var s,c,f;return function(){var d=Ao(this,n),h=o(this),g=h+"";return h==null&&(g=h=(this.style.removeProperty(n),Ao(this,n))),d===g?null:d===s&&g===c?f:(c=g,f=a(s=d,h))}}function j_(n,a){var o,s,c,f="style."+a,d="end."+f,h;return function(){var g=Ui(this,n),m=g.on,y=g.value[f]==null?h||(h=S0(a)):void 0;(m!==o||c!==y)&&(s=(o=m).copy()).on(d,c=y),g.on=s}}function H_(n,a,o){var s=(n+="")=="transform"?HN:b0;return a==null?this.styleTween(n,O_(n,s)).on("end.style."+n,S0(n)):typeof a=="function"?this.styleTween(n,R_(n,s,Gf(this,"style."+n,a))).each(j_(this._id,n)):this.styleTween(n,q_(n,s,a),o).on("end.style."+n,null)}function G_(n,a,o){return function(s){this.style.setProperty(n,a.call(this,s),o)}}function U_(n,a,o){var s,c;function f(){var d=a.apply(this,arguments);return d!==c&&(s=(c=d)&&G_(n,d,o)),s}return f._value=a,f}function B_(n,a,o){var s="style."+(n+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(a==null)return this.tween(s,null);if(typeof a!="function")throw new Error;return this.tween(s,U_(n,a,o??""))}function $_(n){return function(){this.textContent=n}}function Y_(n){return function(){var a=n(this);this.textContent=a??""}}function V_(n){return this.tween("text",typeof n=="function"?Y_(Gf(this,"text",n)):$_(n==null?"":n+""))}function L_(n){return function(a){this.textContent=n.call(this,a)}}function X_(n){var a,o;function s(){var c=n.apply(this,arguments);return c!==o&&(a=(o=c)&&L_(c)),a}return s._value=n,s}function Z_(n){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;return this.tween(a,X_(n))}function I_(){for(var n=this._name,a=this._id,o=N0(),s=this._groups,c=s.length,f=0;f<c;++f)for(var d=s[f],h=d.length,g,m=0;m<h;++m)if(g=d[m]){var y=Ci(g,a);Gc(g,n,o,m,d,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new fa(s,this._parents,n,o)}function Q_(){var n,a,o=this,s=o._id,c=o.size();return new Promise(function(f,d){var h={value:d},g={value:function(){--c===0&&f()}};o.each(function(){var m=Ui(this,s),y=m.on;y!==n&&(a=(n=y).copy(),a._.cancel.push(h),a._.interrupt.push(h),a._.end.push(g)),m.on=a}),c===0&&f()})}var K_=0;function fa(n,a,o,s){this._groups=n,this._parents=a,this._name=o,this._id=s}function N0(){return++K_}var sa=Zs.prototype;fa.prototype={constructor:fa,select:D_,selectAll:M_,selectChild:sa.selectChild,selectChildren:sa.selectChildren,filter:N_,merge:__,selection:k_,transition:I_,call:sa.call,nodes:sa.nodes,node:sa.node,size:sa.size,empty:sa.empty,each:sa.each,on:A_,attr:o_,attrTween:d_,style:H_,styleTween:B_,text:V_,textTween:Z_,remove:T_,tween:PN,delay:m_,duration:v_,ease:x_,easeVarying:S_,end:Q_,[Symbol.iterator]:sa[Symbol.iterator]};function J_(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var F_={time:null,delay:0,duration:250,ease:J_};function W_(n,a){for(var o;!(o=n.__transition)||!(o=o[a]);)if(!(n=n.parentNode))throw new Error(`transition ${a} not found`);return o}function P_(n){var a,o;n instanceof fa?(a=n._id,n=n._name):(a=N0(),(o=F_).time=jf(),n=n==null?null:n+"");for(var s=this._groups,c=s.length,f=0;f<c;++f)for(var d=s[f],h=d.length,g,m=0;m<h;++m)(g=d[m])&&Gc(g,n,a,m,d,o||W_(g,a));return new fa(s,this._parents,n,a)}Zs.prototype.interrupt=JN;Zs.prototype.transition=P_;const hc=n=>()=>n;function eE(n,{sourceEvent:a,target:o,transform:s,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function ua(n,a,o){this.k=n,this.x=a,this.y=o}ua.prototype={constructor:ua,scale:function(n){return n===1?this:new ua(this.k*n,this.x,this.y)},translate:function(n,a){return n===0&a===0?this:new ua(this.k,this.x+this.k*n,this.y+this.k*a)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var da=new ua(1,0,0);ua.prototype;function nf(n){n.stopImmediatePropagation()}function Cs(n){n.preventDefault(),n.stopImmediatePropagation()}function tE(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function nE(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function vv(){return this.__zoom||da}function iE(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function aE(){return navigator.maxTouchPoints||"ontouchstart"in this}function lE(n,a,o){var s=n.invertX(a[0][0])-o[0][0],c=n.invertX(a[1][0])-o[1][0],f=n.invertY(a[0][1])-o[0][1],d=n.invertY(a[1][1])-o[1][1];return n.translate(c>s?(s+c)/2:Math.min(0,s)||Math.max(0,c),d>f?(f+d)/2:Math.min(0,f)||Math.max(0,d))}function _0(){var n=tE,a=nE,o=lE,s=iE,c=aE,f=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],h=250,g=YN,m=Rc("start","zoom","end"),y,p,S,E=500,R=150,T=0,k=10;function M(z){z.property("__zoom",vv).on("wheel.zoom",ce,{passive:!1}).on("mousedown.zoom",ue).on("dblclick.zoom",te).filter(c).on("touchstart.zoom",oe).on("touchmove.zoom",me).on("touchend.zoom touchcancel.zoom",ve).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(z,B,N,L){var ne=z.selection?z.selection():z;ne.property("__zoom",vv),z!==ne?J(z,B,N,L):ne.interrupt().each(function(){Q(this,arguments).event(L).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},M.scaleBy=function(z,B,N,L){M.scaleTo(z,function(){var ne=this.__zoom.k,I=typeof B=="function"?B.apply(this,arguments):B;return ne*I},N,L)},M.scaleTo=function(z,B,N,L){M.transform(z,function(){var ne=a.apply(this,arguments),I=this.__zoom,se=N==null?w(ne):typeof N=="function"?N.apply(this,arguments):N,D=I.invert(se),V=typeof B=="function"?B.apply(this,arguments):B;return o(U(O(I,V),se,D),ne,d)},N,L)},M.translateBy=function(z,B,N,L){M.transform(z,function(){return o(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof N=="function"?N.apply(this,arguments):N),a.apply(this,arguments),d)},null,L)},M.translateTo=function(z,B,N,L,ne){M.transform(z,function(){var I=a.apply(this,arguments),se=this.__zoom,D=L==null?w(I):typeof L=="function"?L.apply(this,arguments):L;return o(da.translate(D[0],D[1]).scale(se.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof N=="function"?-N.apply(this,arguments):-N),I,d)},L,ne)};function O(z,B){return B=Math.max(f[0],Math.min(f[1],B)),B===z.k?z:new ua(B,z.x,z.y)}function U(z,B,N){var L=B[0]-N[0]*z.k,ne=B[1]-N[1]*z.k;return L===z.x&&ne===z.y?z:new ua(z.k,L,ne)}function w(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function J(z,B,N,L){z.on("start.zoom",function(){Q(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){Q(this,arguments).event(L).end()}).tween("zoom",function(){var ne=this,I=arguments,se=Q(ne,I).event(L),D=a.apply(ne,I),V=N==null?w(D):typeof N=="function"?N.apply(ne,I):N,de=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),ge=ne.__zoom,we=typeof B=="function"?B.apply(ne,I):B,Ce=g(ge.invert(V).concat(de/ge.k),we.invert(V).concat(de/we.k));return function(ke){if(ke===1)ke=we;else{var qe=Ce(ke),Oe=de/qe[2];ke=new ua(Oe,V[0]-qe[0]*Oe,V[1]-qe[1]*Oe)}se.zoom(null,ke)}})}function Q(z,B,N){return!N&&z.__zooming||new F(z,B)}function F(z,B){this.that=z,this.args=B,this.active=0,this.sourceEvent=null,this.extent=a.apply(z,B),this.taps=0}F.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,B){return this.mouse&&z!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var B=hi(this.that).datum();m.call(z,this.that,new eE(z,{sourceEvent:this.sourceEvent,target:M,transform:this.that.__zoom,dispatch:m}),B)}};function ce(z,...B){if(!n.apply(this,arguments))return;var N=Q(this,B).event(z),L=this.__zoom,ne=Math.max(f[0],Math.min(f[1],L.k*Math.pow(2,s.apply(this,arguments)))),I=Ei(z);if(N.wheel)(N.mouse[0][0]!==I[0]||N.mouse[0][1]!==I[1])&&(N.mouse[1]=L.invert(N.mouse[0]=I)),clearTimeout(N.wheel);else{if(L.k===ne)return;N.mouse=[I,L.invert(I)],Sc(this),N.start()}Cs(z),N.wheel=setTimeout(se,R),N.zoom("mouse",o(U(O(L,ne),N.mouse[0],N.mouse[1]),N.extent,d));function se(){N.wheel=null,N.end()}}function ue(z,...B){if(S||!n.apply(this,arguments))return;var N=z.currentTarget,L=Q(this,B,!0).event(z),ne=hi(z.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",de,!0),I=Ei(z,N),se=z.clientX,D=z.clientY;r0(z.view),nf(z),L.mouse=[I,this.__zoom.invert(I)],Sc(this),L.start();function V(ge){if(Cs(ge),!L.moved){var we=ge.clientX-se,Ce=ge.clientY-D;L.moved=we*we+Ce*Ce>T}L.event(ge).zoom("mouse",o(U(L.that.__zoom,L.mouse[0]=Ei(ge,N),L.mouse[1]),L.extent,d))}function de(ge){ne.on("mousemove.zoom mouseup.zoom",null),c0(ge.view,L.moved),Cs(ge),L.event(ge).end()}}function te(z,...B){if(n.apply(this,arguments)){var N=this.__zoom,L=Ei(z.changedTouches?z.changedTouches[0]:z,this),ne=N.invert(L),I=N.k*(z.shiftKey?.5:2),se=o(U(O(N,I),L,ne),a.apply(this,B),d);Cs(z),h>0?hi(this).transition().duration(h).call(J,se,L,z):hi(this).call(M.transform,se,L,z)}}function oe(z,...B){if(n.apply(this,arguments)){var N=z.touches,L=N.length,ne=Q(this,B,z.changedTouches.length===L).event(z),I,se,D,V;for(nf(z),se=0;se<L;++se)D=N[se],V=Ei(D,this),V=[V,this.__zoom.invert(V),D.identifier],ne.touch0?!ne.touch1&&ne.touch0[2]!==V[2]&&(ne.touch1=V,ne.taps=0):(ne.touch0=V,I=!0,ne.taps=1+!!y);y&&(y=clearTimeout(y)),I&&(ne.taps<2&&(p=V[0],y=setTimeout(function(){y=null},E)),Sc(this),ne.start())}}function me(z,...B){if(this.__zooming){var N=Q(this,B).event(z),L=z.changedTouches,ne=L.length,I,se,D,V;for(Cs(z),I=0;I<ne;++I)se=L[I],D=Ei(se,this),N.touch0&&N.touch0[2]===se.identifier?N.touch0[0]=D:N.touch1&&N.touch1[2]===se.identifier&&(N.touch1[0]=D);if(se=N.that.__zoom,N.touch1){var de=N.touch0[0],ge=N.touch0[1],we=N.touch1[0],Ce=N.touch1[1],ke=(ke=we[0]-de[0])*ke+(ke=we[1]-de[1])*ke,qe=(qe=Ce[0]-ge[0])*qe+(qe=Ce[1]-ge[1])*qe;se=O(se,Math.sqrt(ke/qe)),D=[(de[0]+we[0])/2,(de[1]+we[1])/2],V=[(ge[0]+Ce[0])/2,(ge[1]+Ce[1])/2]}else if(N.touch0)D=N.touch0[0],V=N.touch0[1];else return;N.zoom("touch",o(U(se,D,V),N.extent,d))}}function ve(z,...B){if(this.__zooming){var N=Q(this,B).event(z),L=z.changedTouches,ne=L.length,I,se;for(nf(z),S&&clearTimeout(S),S=setTimeout(function(){S=null},E),I=0;I<ne;++I)se=L[I],N.touch0&&N.touch0[2]===se.identifier?delete N.touch0:N.touch1&&N.touch1[2]===se.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(se=Ei(se,this),Math.hypot(p[0]-se[0],p[1]-se[1])<k)){var D=hi(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return M.wheelDelta=function(z){return arguments.length?(s=typeof z=="function"?z:hc(+z),M):s},M.filter=function(z){return arguments.length?(n=typeof z=="function"?z:hc(!!z),M):n},M.touchable=function(z){return arguments.length?(c=typeof z=="function"?z:hc(!!z),M):c},M.extent=function(z){return arguments.length?(a=typeof z=="function"?z:hc([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),M):a},M.scaleExtent=function(z){return arguments.length?(f[0]=+z[0],f[1]=+z[1],M):[f[0],f[1]]},M.translateExtent=function(z){return arguments.length?(d[0][0]=+z[0][0],d[1][0]=+z[1][0],d[0][1]=+z[0][1],d[1][1]=+z[1][1],M):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},M.constrain=function(z){return arguments.length?(o=z,M):o},M.duration=function(z){return arguments.length?(h=+z,M):h},M.interpolate=function(z){return arguments.length?(g=z,M):g},M.on=function(){var z=m.on.apply(m,arguments);return z===m?M:z},M.clickDistance=function(z){return arguments.length?(T=(z=+z)*z,M):Math.sqrt(T)},M.tapDistance=function(z){return arguments.length?(k=+z,M):k},M}Xv();const Uc=A.createContext(null),oE=Uc.Provider,ha={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,a)=>`Couldn't create edge for ${n?"target":"source"} handle id: "${n?a.targetHandle:a.sourceHandle}", edge id: ${a.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},E0=ha.error001();function $t(n,a){const o=A.useContext(Uc);if(o===null)throw new Error(E0);return Kv(o,n,a)}const hn=()=>{const n=A.useContext(Uc);if(n===null)throw new Error(E0);return A.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe,destroy:n.destroy}),[n])},sE=n=>n.userSelectionActive?"none":"all";function Uf({position:n,children:a,className:o,style:s,...c}){const f=$t(sE),d=`${n}`.split("-");return pe.createElement("div",{className:_n(["react-flow__panel",o,...d]),style:{...s,pointerEvents:f},...c},a)}function rE({proOptions:n,position:a="bottom-right"}){return n?.hideAttribution?null:pe.createElement(Uf,{position:a,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},pe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const cE=({x:n,y:a,label:o,labelStyle:s={},labelShowBg:c=!0,labelBgStyle:f={},labelBgPadding:d=[2,4],labelBgBorderRadius:h=2,children:g,className:m,...y})=>{const p=A.useRef(null),[S,E]=A.useState({x:0,y:0,width:0,height:0}),R=_n(["react-flow__edge-textwrapper",m]);return A.useEffect(()=>{if(p.current){const T=p.current.getBBox();E({x:T.x,y:T.y,width:T.width,height:T.height})}},[o]),typeof o>"u"||!o?null:pe.createElement("g",{transform:`translate(${n-S.width/2} ${a-S.height/2})`,className:R,visibility:S.width?"visible":"hidden",...y},c&&pe.createElement("rect",{width:S.width+2*d[0],x:-d[0],y:-d[1],height:S.height+2*d[1],className:"react-flow__edge-textbg",style:f,rx:h,ry:h}),pe.createElement("text",{className:"react-flow__edge-text",y:S.height/2,dy:"0.3em",ref:p,style:s},o),g)};var uE=A.memo(cE);const Bf=n=>({width:n.offsetWidth,height:n.offsetHeight}),To=(n,a=0,o=1)=>Math.min(Math.max(n,a),o),$f=(n={x:0,y:0},a)=>({x:To(n.x,a[0][0],a[1][0]),y:To(n.y,a[0][1],a[1][1])}),yv=(n,a,o)=>n<a?To(Math.abs(n-a),1,50)/50:n>o?-To(Math.abs(n-o),1,50)/50:0,w0=(n,a)=>{const o=yv(n.x,35,a.width-35)*20,s=yv(n.y,35,a.height-35)*20;return[o,s]},A0=n=>n.getRootNode?.()||window?.document,C0=(n,a)=>({x:Math.min(n.x,a.x),y:Math.min(n.y,a.y),x2:Math.max(n.x2,a.x2),y2:Math.max(n.y2,a.y2)}),$s=({x:n,y:a,width:o,height:s})=>({x:n,y:a,x2:n+o,y2:a+s}),T0=({x:n,y:a,x2:o,y2:s})=>({x:n,y:a,width:o-n,height:s-a}),xv=n=>({...n.positionAbsolute||{x:0,y:0},width:n.width||0,height:n.height||0}),dE=(n,a)=>T0(C0($s(n),$s(a))),Sf=(n,a)=>{const o=Math.max(0,Math.min(n.x+n.width,a.x+a.width)-Math.max(n.x,a.x)),s=Math.max(0,Math.min(n.y+n.height,a.y+a.height)-Math.max(n.y,a.y));return Math.ceil(o*s)},fE=n=>mi(n.width)&&mi(n.height)&&mi(n.x)&&mi(n.y),mi=n=>!isNaN(n)&&isFinite(n),en=Symbol.for("internals"),D0=["Enter"," ","Escape"],hE=(n,a)=>{},mE=n=>"nativeEvent"in n;function Nf(n){const o=(mE(n)?n.nativeEvent:n).composedPath?.()?.[0]||n.target;return["INPUT","SELECT","TEXTAREA"].includes(o?.nodeName)||o?.hasAttribute("contenteditable")||!!o?.closest(".nokey")}const M0=n=>"clientX"in n,Pa=(n,a)=>{const o=M0(n),s=o?n.clientX:n.touches?.[0].clientX,c=o?n.clientY:n.touches?.[0].clientY;return{x:s-(a?.left??0),y:c-(a?.top??0)}},kc=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Do=({id:n,path:a,labelX:o,labelY:s,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:S,interactionWidth:E=20})=>pe.createElement(pe.Fragment,null,pe.createElement("path",{id:n,style:y,d:a,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:S}),E&&pe.createElement("path",{d:a,fill:"none",strokeOpacity:0,strokeWidth:E,className:"react-flow__edge-interaction"}),c&&mi(o)&&mi(s)?pe.createElement(uE,{x:o,y:s,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m}):null);Do.displayName="BaseEdge";function Ts(n,a,o){return o===void 0?o:s=>{const c=a().edges.find(f=>f.id===n);c&&o(s,{...c})}}function z0({sourceX:n,sourceY:a,targetX:o,targetY:s}){const c=Math.abs(o-n)/2,f=o<n?o+c:o-c,d=Math.abs(s-a)/2,h=s<a?s+d:s-d;return[f,h,c,d]}function k0({sourceX:n,sourceY:a,targetX:o,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:d,targetControlY:h}){const g=n*.125+c*.375+d*.375+o*.125,m=a*.125+f*.375+h*.375+s*.125,y=Math.abs(g-n),p=Math.abs(m-a);return[g,m,y,p]}var Cl;(function(n){n.Strict="strict",n.Loose="loose"})(Cl||(Cl={}));var Nl;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Nl||(Nl={}));var Ys;(function(n){n.Partial="partial",n.Full="full"})(Ys||(Ys={}));var ji;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(ji||(ji={}));var Gi;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Gi||(Gi={}));var He;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(He||(He={}));function bv({pos:n,x1:a,y1:o,x2:s,y2:c}){return n===He.Left||n===He.Right?[.5*(a+s),o]:[a,.5*(o+c)]}function O0({sourceX:n,sourceY:a,sourcePosition:o=He.Bottom,targetX:s,targetY:c,targetPosition:f=He.Top}){const[d,h]=bv({pos:o,x1:n,y1:a,x2:s,y2:c}),[g,m]=bv({pos:f,x1:s,y1:c,x2:n,y2:a}),[y,p,S,E]=k0({sourceX:n,sourceY:a,targetX:s,targetY:c,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:m});return[`M${n},${a} C${d},${h} ${g},${m} ${s},${c}`,y,p,S,E]}const Yf=A.memo(({sourceX:n,sourceY:a,targetX:o,targetY:s,sourcePosition:c=He.Bottom,targetPosition:f=He.Top,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:S,markerEnd:E,markerStart:R,interactionWidth:T})=>{const[k,M,O]=O0({sourceX:n,sourceY:a,sourcePosition:c,targetX:o,targetY:s,targetPosition:f});return pe.createElement(Do,{path:k,labelX:M,labelY:O,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:S,markerEnd:E,markerStart:R,interactionWidth:T})});Yf.displayName="SimpleBezierEdge";const Sv={[He.Left]:{x:-1,y:0},[He.Right]:{x:1,y:0},[He.Top]:{x:0,y:-1},[He.Bottom]:{x:0,y:1}},gE=({source:n,sourcePosition:a=He.Bottom,target:o})=>a===He.Left||a===He.Right?n.x<o.x?{x:1,y:0}:{x:-1,y:0}:n.y<o.y?{x:0,y:1}:{x:0,y:-1},Nv=(n,a)=>Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2));function pE({source:n,sourcePosition:a=He.Bottom,target:o,targetPosition:s=He.Top,center:c,offset:f}){const d=Sv[a],h=Sv[s],g={x:n.x+d.x*f,y:n.y+d.y*f},m={x:o.x+h.x*f,y:o.y+h.y*f},y=gE({source:g,sourcePosition:a,target:m}),p=y.x!==0?"x":"y",S=y[p];let E=[],R,T;const k={x:0,y:0},M={x:0,y:0},[O,U,w,J]=z0({sourceX:n.x,sourceY:n.y,targetX:o.x,targetY:o.y});if(d[p]*h[p]===-1){R=c.x??O,T=c.y??U;const F=[{x:R,y:g.y},{x:R,y:m.y}],ce=[{x:g.x,y:T},{x:m.x,y:T}];d[p]===S?E=p==="x"?F:ce:E=p==="x"?ce:F}else{const F=[{x:g.x,y:m.y}],ce=[{x:m.x,y:g.y}];if(p==="x"?E=d.x===S?ce:F:E=d.y===S?F:ce,a===s){const ve=Math.abs(n[p]-o[p]);if(ve<=f){const z=Math.min(f-1,f-ve);d[p]===S?k[p]=(g[p]>n[p]?-1:1)*z:M[p]=(m[p]>o[p]?-1:1)*z}}if(a!==s){const ve=p==="x"?"y":"x",z=d[p]===h[ve],B=g[ve]>m[ve],N=g[ve]<m[ve];(d[p]===1&&(!z&&B||z&&N)||d[p]!==1&&(!z&&N||z&&B))&&(E=p==="x"?F:ce)}const ue={x:g.x+k.x,y:g.y+k.y},te={x:m.x+M.x,y:m.y+M.y},oe=Math.max(Math.abs(ue.x-E[0].x),Math.abs(te.x-E[0].x)),me=Math.max(Math.abs(ue.y-E[0].y),Math.abs(te.y-E[0].y));oe>=me?(R=(ue.x+te.x)/2,T=E[0].y):(R=E[0].x,T=(ue.y+te.y)/2)}return[[n,{x:g.x+k.x,y:g.y+k.y},...E,{x:m.x+M.x,y:m.y+M.y},o],R,T,w,J]}function vE(n,a,o,s){const c=Math.min(Nv(n,a)/2,Nv(a,o)/2,s),{x:f,y:d}=a;if(n.x===f&&f===o.x||n.y===d&&d===o.y)return`L${f} ${d}`;if(n.y===d){const m=n.x<o.x?-1:1,y=n.y<o.y?1:-1;return`L ${f+c*m},${d}Q ${f},${d} ${f},${d+c*y}`}const h=n.x<o.x?1:-1,g=n.y<o.y?-1:1;return`L ${f},${d+c*g}Q ${f},${d} ${f+c*h},${d}`}function _f({sourceX:n,sourceY:a,sourcePosition:o=He.Bottom,targetX:s,targetY:c,targetPosition:f=He.Top,borderRadius:d=5,centerX:h,centerY:g,offset:m=20}){const[y,p,S,E,R]=pE({source:{x:n,y:a},sourcePosition:o,target:{x:s,y:c},targetPosition:f,center:{x:h,y:g},offset:m});return[y.reduce((k,M,O)=>{let U="";return O>0&&O<y.length-1?U=vE(y[O-1],M,y[O+1],d):U=`${O===0?"M":"L"}${M.x} ${M.y}`,k+=U,k},""),p,S,E,R]}const Bc=A.memo(({sourceX:n,sourceY:a,targetX:o,targetY:s,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:p=He.Bottom,targetPosition:S=He.Top,markerEnd:E,markerStart:R,pathOptions:T,interactionWidth:k})=>{const[M,O,U]=_f({sourceX:n,sourceY:a,sourcePosition:p,targetX:o,targetY:s,targetPosition:S,borderRadius:T?.borderRadius,offset:T?.offset});return pe.createElement(Do,{path:M,labelX:O,labelY:U,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:E,markerStart:R,interactionWidth:k})});Bc.displayName="SmoothStepEdge";const Vf=A.memo(n=>pe.createElement(Bc,{...n,pathOptions:A.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])}));Vf.displayName="StepEdge";function yE({sourceX:n,sourceY:a,targetX:o,targetY:s}){const[c,f,d,h]=z0({sourceX:n,sourceY:a,targetX:o,targetY:s});return[`M ${n},${a}L ${o},${s}`,c,f,d,h]}const Lf=A.memo(({sourceX:n,sourceY:a,targetX:o,targetY:s,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:S,interactionWidth:E})=>{const[R,T,k]=yE({sourceX:n,sourceY:a,targetX:o,targetY:s});return pe.createElement(Do,{path:R,labelX:T,labelY:k,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:p,markerStart:S,interactionWidth:E})});Lf.displayName="StraightEdge";function mc(n,a){return n>=0?.5*n:a*25*Math.sqrt(-n)}function _v({pos:n,x1:a,y1:o,x2:s,y2:c,c:f}){switch(n){case He.Left:return[a-mc(a-s,f),o];case He.Right:return[a+mc(s-a,f),o];case He.Top:return[a,o-mc(o-c,f)];case He.Bottom:return[a,o+mc(c-o,f)]}}function Xf({sourceX:n,sourceY:a,sourcePosition:o=He.Bottom,targetX:s,targetY:c,targetPosition:f=He.Top,curvature:d=.25}){const[h,g]=_v({pos:o,x1:n,y1:a,x2:s,y2:c,c:d}),[m,y]=_v({pos:f,x1:s,y1:c,x2:n,y2:a,c:d}),[p,S,E,R]=k0({sourceX:n,sourceY:a,targetX:s,targetY:c,sourceControlX:h,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${n},${a} C${h},${g} ${m},${y} ${s},${c}`,p,S,E,R]}const Oc=A.memo(({sourceX:n,sourceY:a,targetX:o,targetY:s,sourcePosition:c=He.Bottom,targetPosition:f=He.Top,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:S,markerEnd:E,markerStart:R,pathOptions:T,interactionWidth:k})=>{const[M,O,U]=Xf({sourceX:n,sourceY:a,sourcePosition:c,targetX:o,targetY:s,targetPosition:f,curvature:T?.curvature});return pe.createElement(Do,{path:M,labelX:O,labelY:U,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:p,style:S,markerEnd:E,markerStart:R,interactionWidth:k})});Oc.displayName="BezierEdge";const Zf=A.createContext(null),xE=Zf.Provider;Zf.Consumer;const bE=()=>A.useContext(Zf),SE=n=>"id"in n&&"source"in n&&"target"in n,NE=({source:n,sourceHandle:a,target:o,targetHandle:s})=>`reactflow__edge-${n}${a||""}-${o}${s||""}`,Ef=(n,a)=>typeof n>"u"?"":typeof n=="string"?n:`${a?`${a}__`:""}${Object.keys(n).sort().map(s=>`${s}=${n[s]}`).join("&")}`,_E=(n,a)=>a.some(o=>o.source===n.source&&o.target===n.target&&(o.sourceHandle===n.sourceHandle||!o.sourceHandle&&!n.sourceHandle)&&(o.targetHandle===n.targetHandle||!o.targetHandle&&!n.targetHandle)),EE=(n,a)=>{if(!n.source||!n.target)return a;let o;return SE(n)?o={...n}:o={...n,id:NE(n)},_E(o,a)?a:a.concat(o)},wf=({x:n,y:a},[o,s,c],f,[d,h])=>{const g={x:(n-o)/c,y:(a-s)/c};return f?{x:d*Math.round(g.x/d),y:h*Math.round(g.y/h)}:g},q0=({x:n,y:a},[o,s,c])=>({x:n*c+o,y:a*c+s}),wl=(n,a=[0,0])=>{if(!n)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const o=(n.width??0)*a[0],s=(n.height??0)*a[1],c={x:n.position.x-o,y:n.position.y-s};return{...c,positionAbsolute:n.positionAbsolute?{x:n.positionAbsolute.x-o,y:n.positionAbsolute.y-s}:c}},$c=(n,a=[0,0])=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const o=n.reduce((s,c)=>{const{x:f,y:d}=wl(c,a).positionAbsolute;return C0(s,$s({x:f,y:d,width:c.width||0,height:c.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return T0(o)},R0=(n,a,[o,s,c]=[0,0,1],f=!1,d=!1,h=[0,0])=>{const g={x:(a.x-o)/c,y:(a.y-s)/c,width:a.width/c,height:a.height/c},m=[];return n.forEach(y=>{const{width:p,height:S,selectable:E=!0,hidden:R=!1}=y;if(d&&!E||R)return!1;const{positionAbsolute:T}=wl(y,h),k={x:T.x,y:T.y,width:p||0,height:S||0},M=Sf(g,k),O=typeof p>"u"||typeof S>"u"||p===null||S===null,U=f&&M>0,w=(p||0)*(S||0);(O||U||M>=w||y.dragging)&&m.push(y)}),m},j0=(n,a)=>{const o=n.map(s=>s.id);return a.filter(s=>o.includes(s.source)||o.includes(s.target))},H0=(n,a,o,s,c,f=.1)=>{const d=a/(n.width*(1+f)),h=o/(n.height*(1+f)),g=Math.min(d,h),m=To(g,s,c),y=n.x+n.width/2,p=n.y+n.height/2,S=a/2-y*m,E=o/2-p*m;return{x:S,y:E,zoom:m}},bl=(n,a=0)=>n.transition().duration(a);function Ev(n,a,o,s){return(a[o]||[]).reduce((c,f)=>(`${n.id}-${f.id}-${o}`!==s&&c.push({id:f.id||null,type:o,nodeId:n.id,x:(n.positionAbsolute?.x??0)+f.x+f.width/2,y:(n.positionAbsolute?.y??0)+f.y+f.height/2}),c),[])}function wE(n,a,o,s,c,f){const{x:d,y:h}=Pa(n),m=a.elementsFromPoint(d,h).find(R=>R.classList.contains("react-flow__handle"));if(m){const R=m.getAttribute("data-nodeid");if(R){const T=If(void 0,m),k=m.getAttribute("data-handleid"),M=f({nodeId:R,id:k,type:T});if(M){const O=c.find(U=>U.nodeId===R&&U.type===T&&U.id===k);return{handle:{id:k,type:T,nodeId:R,x:O?.x||o.x,y:O?.y||o.y},validHandleResult:M}}}}let y=[],p=1/0;if(c.forEach(R=>{const T=Math.sqrt((R.x-o.x)**2+(R.y-o.y)**2);if(T<=s){const k=f(R);T<=p&&(T<p?y=[{handle:R,validHandleResult:k}]:T===p&&y.push({handle:R,validHandleResult:k}),p=T)}}),!y.length)return{handle:null,validHandleResult:G0()};if(y.length===1)return y[0];const S=y.some(({validHandleResult:R})=>R.isValid),E=y.some(({handle:R})=>R.type==="target");return y.find(({handle:R,validHandleResult:T})=>E?R.type==="target":S?T.isValid:!0)||y[0]}const AE={source:null,target:null,sourceHandle:null,targetHandle:null},G0=()=>({handleDomNode:null,isValid:!1,connection:AE,endHandle:null});function U0(n,a,o,s,c,f,d){const h=c==="target",g=d.querySelector(`.react-flow__handle[data-id="${n?.nodeId}-${n?.id}-${n?.type}"]`),m={...G0(),handleDomNode:g};if(g){const y=If(void 0,g),p=g.getAttribute("data-nodeid"),S=g.getAttribute("data-handleid"),E=g.classList.contains("connectable"),R=g.classList.contains("connectableend"),T={source:h?p:o,sourceHandle:h?S:s,target:h?o:p,targetHandle:h?s:S};m.connection=T,E&&R&&(a===Cl.Strict?h&&y==="source"||!h&&y==="target":p!==o||S!==s)&&(m.endHandle={nodeId:p,handleId:S,type:y},m.isValid=f(T))}return m}function CE({nodes:n,nodeId:a,handleId:o,handleType:s}){return n.reduce((c,f)=>{if(f[en]){const{handleBounds:d}=f[en];let h=[],g=[];d&&(h=Ev(f,d,"source",`${a}-${o}-${s}`),g=Ev(f,d,"target",`${a}-${o}-${s}`)),c.push(...h,...g)}return c},[])}function If(n,a){return n||(a?.classList.contains("target")?"target":a?.classList.contains("source")?"source":null)}function af(n){n?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function TE(n,a){let o=null;return a?o="valid":n&&!a&&(o="invalid"),o}function B0({event:n,handleId:a,nodeId:o,onConnect:s,isTarget:c,getState:f,setState:d,isValidConnection:h,edgeUpdaterType:g,onReconnectEnd:m}){const y=A0(n.target),{connectionMode:p,domNode:S,autoPanOnConnect:E,connectionRadius:R,onConnectStart:T,panBy:k,getNodes:M,cancelConnection:O}=f();let U=0,w;const{x:J,y:Q}=Pa(n),F=y?.elementFromPoint(J,Q),ce=If(g,F),ue=S?.getBoundingClientRect();if(!ue||!ce)return;let te,oe=Pa(n,ue),me=!1,ve=null,z=!1,B=null;const N=CE({nodes:M(),nodeId:o,handleId:a,handleType:ce}),L=()=>{if(!E)return;const[se,D]=w0(oe,ue);k({x:se,y:D}),U=requestAnimationFrame(L)};d({connectionPosition:oe,connectionStatus:null,connectionNodeId:o,connectionHandleId:a,connectionHandleType:ce,connectionStartHandle:{nodeId:o,handleId:a,type:ce},connectionEndHandle:null}),T?.(n,{nodeId:o,handleId:a,handleType:ce});function ne(se){const{transform:D}=f();oe=Pa(se,ue);const{handle:V,validHandleResult:de}=wE(se,y,wf(oe,D,!1,[1,1]),R,N,ge=>U0(ge,p,o,a,c?"target":"source",h,y));if(w=V,me||(L(),me=!0),B=de.handleDomNode,ve=de.connection,z=de.isValid,d({connectionPosition:w&&z?q0({x:w.x,y:w.y},D):oe,connectionStatus:TE(!!w,z),connectionEndHandle:de.endHandle}),!w&&!z&&!B)return af(te);ve.source!==ve.target&&B&&(af(te),te=B,B.classList.add("connecting","react-flow__handle-connecting"),B.classList.toggle("valid",z),B.classList.toggle("react-flow__handle-valid",z))}function I(se){(w||B)&&ve&&z&&s?.(ve),f().onConnectEnd?.(se),g&&m?.(se),af(te),O(),cancelAnimationFrame(U),me=!1,z=!1,ve=null,B=null,y.removeEventListener("mousemove",ne),y.removeEventListener("mouseup",I),y.removeEventListener("touchmove",ne),y.removeEventListener("touchend",I)}y.addEventListener("mousemove",ne),y.addEventListener("mouseup",I),y.addEventListener("touchmove",ne),y.addEventListener("touchend",I)}const wv=()=>!0,DE=n=>({connectionStartHandle:n.connectionStartHandle,connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName}),ME=(n,a,o)=>s=>{const{connectionStartHandle:c,connectionEndHandle:f,connectionClickStartHandle:d}=s;return{connecting:c?.nodeId===n&&c?.handleId===a&&c?.type===o||f?.nodeId===n&&f?.handleId===a&&f?.type===o,clickConnecting:d?.nodeId===n&&d?.handleId===a&&d?.type===o}},$0=A.forwardRef(({type:n="source",position:a=He.Top,isValidConnection:o,isConnectable:s=!0,isConnectableStart:c=!0,isConnectableEnd:f=!0,id:d,onConnect:h,children:g,className:m,onMouseDown:y,onTouchStart:p,...S},E)=>{const R=d||null,T=n==="target",k=hn(),M=bE(),{connectOnClick:O,noPanClassName:U}=$t(DE,Vn),{connecting:w,clickConnecting:J}=$t(ME(M,R,n),Vn);M||k.getState().onError?.("010",ha.error010());const Q=ue=>{const{defaultEdgeOptions:te,onConnect:oe,hasDefaultEdges:me}=k.getState(),ve={...te,...ue};if(me){const{edges:z,setEdges:B}=k.getState();B(EE(ve,z))}oe?.(ve),h?.(ve)},F=ue=>{if(!M)return;const te=M0(ue);c&&(te&&ue.button===0||!te)&&B0({event:ue,handleId:R,nodeId:M,onConnect:Q,isTarget:T,getState:k.getState,setState:k.setState,isValidConnection:o||k.getState().isValidConnection||wv}),te?y?.(ue):p?.(ue)},ce=ue=>{const{onClickConnectStart:te,onClickConnectEnd:oe,connectionClickStartHandle:me,connectionMode:ve,isValidConnection:z}=k.getState();if(!M||!me&&!c)return;if(!me){te?.(ue,{nodeId:M,handleId:R,handleType:n}),k.setState({connectionClickStartHandle:{nodeId:M,type:n,handleId:R}});return}const B=A0(ue.target),N=o||z||wv,{connection:L,isValid:ne}=U0({nodeId:M,id:R,type:n},ve,me.nodeId,me.handleId||null,me.type,N,B);ne&&Q(L),oe?.(ue),k.setState({connectionClickStartHandle:null})};return pe.createElement("div",{"data-handleid":R,"data-nodeid":M,"data-handlepos":a,"data-id":`${M}-${R}-${n}`,className:_n(["react-flow__handle",`react-flow__handle-${a}`,"nodrag",U,m,{source:!T,target:T,connectable:s,connectablestart:c,connectableend:f,connecting:J,connectionindicator:s&&(c&&!w||f&&w)}]),onMouseDown:F,onTouchStart:F,onClick:O?ce:void 0,ref:E,...S},g)});$0.displayName="Handle";var fi=A.memo($0);const Y0=({data:n,isConnectable:a,targetPosition:o=He.Top,sourcePosition:s=He.Bottom})=>pe.createElement(pe.Fragment,null,pe.createElement(fi,{type:"target",position:o,isConnectable:a}),n?.label,pe.createElement(fi,{type:"source",position:s,isConnectable:a}));Y0.displayName="DefaultNode";var Af=A.memo(Y0);const V0=({data:n,isConnectable:a,sourcePosition:o=He.Bottom})=>pe.createElement(pe.Fragment,null,n?.label,pe.createElement(fi,{type:"source",position:o,isConnectable:a}));V0.displayName="InputNode";var L0=A.memo(V0);const X0=({data:n,isConnectable:a,targetPosition:o=He.Top})=>pe.createElement(pe.Fragment,null,pe.createElement(fi,{type:"target",position:o,isConnectable:a}),n?.label);X0.displayName="OutputNode";var Z0=A.memo(X0);const Qf=()=>null;Qf.displayName="GroupNode";const zE=n=>({selectedNodes:n.getNodes().filter(a=>a.selected),selectedEdges:n.edges.filter(a=>a.selected).map(a=>({...a}))}),gc=n=>n.id;function kE(n,a){return Vn(n.selectedNodes.map(gc),a.selectedNodes.map(gc))&&Vn(n.selectedEdges.map(gc),a.selectedEdges.map(gc))}const I0=A.memo(({onSelectionChange:n})=>{const a=hn(),{selectedNodes:o,selectedEdges:s}=$t(zE,kE);return A.useEffect(()=>{const c={nodes:o,edges:s};n?.(c),a.getState().onSelectionChange.forEach(f=>f(c))},[o,s,n]),null});I0.displayName="SelectionListener";const OE=n=>!!n.onSelectionChange;function qE({onSelectionChange:n}){const a=$t(OE);return n||a?pe.createElement(I0,{onSelectionChange:n}):null}const RE=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset});function mo(n,a){A.useEffect(()=>{typeof n<"u"&&a(n)},[n])}function nt(n,a,o){A.useEffect(()=>{typeof a<"u"&&o({[n]:a})},[a])}const jE=({nodes:n,edges:a,defaultNodes:o,defaultEdges:s,onConnect:c,onConnectStart:f,onConnectEnd:d,onClickConnectStart:h,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:p,edgesFocusable:S,edgesUpdatable:E,elevateNodesOnSelect:R,minZoom:T,maxZoom:k,nodeExtent:M,onNodesChange:O,onEdgesChange:U,elementsSelectable:w,connectionMode:J,snapGrid:Q,snapToGrid:F,translateExtent:ce,connectOnClick:ue,defaultEdgeOptions:te,fitView:oe,fitViewOptions:me,onNodesDelete:ve,onEdgesDelete:z,onNodeDrag:B,onNodeDragStart:N,onNodeDragStop:L,onSelectionDrag:ne,onSelectionDragStart:I,onSelectionDragStop:se,noPanClassName:D,nodeOrigin:V,rfId:de,autoPanOnConnect:ge,autoPanOnNodeDrag:we,onError:Ce,connectionRadius:ke,isValidConnection:qe,nodeDragThreshold:Oe})=>{const{setNodes:Ye,setEdges:at,setDefaultNodesAndEdges:Pe,setMinZoom:_t,setMaxZoom:gt,setTranslateExtent:et,setNodeExtent:pt,reset:We}=$t(RE,Vn),je=hn();return A.useEffect(()=>{const Et=s?.map(Qt=>({...Qt,...te}));return Pe(o,Et),()=>{We()}},[]),nt("defaultEdgeOptions",te,je.setState),nt("connectionMode",J,je.setState),nt("onConnect",c,je.setState),nt("onConnectStart",f,je.setState),nt("onConnectEnd",d,je.setState),nt("onClickConnectStart",h,je.setState),nt("onClickConnectEnd",g,je.setState),nt("nodesDraggable",m,je.setState),nt("nodesConnectable",y,je.setState),nt("nodesFocusable",p,je.setState),nt("edgesFocusable",S,je.setState),nt("edgesUpdatable",E,je.setState),nt("elementsSelectable",w,je.setState),nt("elevateNodesOnSelect",R,je.setState),nt("snapToGrid",F,je.setState),nt("snapGrid",Q,je.setState),nt("onNodesChange",O,je.setState),nt("onEdgesChange",U,je.setState),nt("connectOnClick",ue,je.setState),nt("fitViewOnInit",oe,je.setState),nt("fitViewOnInitOptions",me,je.setState),nt("onNodesDelete",ve,je.setState),nt("onEdgesDelete",z,je.setState),nt("onNodeDrag",B,je.setState),nt("onNodeDragStart",N,je.setState),nt("onNodeDragStop",L,je.setState),nt("onSelectionDrag",ne,je.setState),nt("onSelectionDragStart",I,je.setState),nt("onSelectionDragStop",se,je.setState),nt("noPanClassName",D,je.setState),nt("nodeOrigin",V,je.setState),nt("rfId",de,je.setState),nt("autoPanOnConnect",ge,je.setState),nt("autoPanOnNodeDrag",we,je.setState),nt("onError",Ce,je.setState),nt("connectionRadius",ke,je.setState),nt("isValidConnection",qe,je.setState),nt("nodeDragThreshold",Oe,je.setState),mo(n,Ye),mo(a,at),mo(T,_t),mo(k,gt),mo(ce,et),mo(M,pt),null},Av={display:"none"},HE={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Q0="react-flow__node-desc",K0="react-flow__edge-desc",GE="react-flow__aria-live",UE=n=>n.ariaLiveMessage;function BE({rfId:n}){const a=$t(UE);return pe.createElement("div",{id:`${GE}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:HE},a)}function $E({rfId:n,disableKeyboardA11y:a}){return pe.createElement(pe.Fragment,null,pe.createElement("div",{id:`${Q0}-${n}`,style:Av},"Press enter or space to select a node.",!a&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),pe.createElement("div",{id:`${K0}-${n}`,style:Av},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!a&&pe.createElement(BE,{rfId:n}))}var Vs=(n=null,a={actInsideInputWithModifier:!0})=>{const[o,s]=A.useState(!1),c=A.useRef(!1),f=A.useRef(new Set([])),[d,h]=A.useMemo(()=>{if(n!==null){const m=(Array.isArray(n)?n:[n]).filter(p=>typeof p=="string").map(p=>p.split("+")),y=m.reduce((p,S)=>p.concat(...S),[]);return[m,y]}return[[],[]]},[n]);return A.useEffect(()=>{const g=typeof document<"u"?document:null,m=a?.target||g;if(n!==null){const y=E=>{if(c.current=E.ctrlKey||E.metaKey||E.shiftKey,(!c.current||c.current&&!a.actInsideInputWithModifier)&&Nf(E))return!1;const T=Tv(E.code,h);f.current.add(E[T]),Cv(d,f.current,!1)&&(E.preventDefault(),s(!0))},p=E=>{if((!c.current||c.current&&!a.actInsideInputWithModifier)&&Nf(E))return!1;const T=Tv(E.code,h);Cv(d,f.current,!0)?(s(!1),f.current.clear()):f.current.delete(E[T]),E.key==="Meta"&&f.current.clear(),c.current=!1},S=()=>{f.current.clear(),s(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",p),window.addEventListener("blur",S),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",p),window.removeEventListener("blur",S)}}},[n,s]),o};function Cv(n,a,o){return n.filter(s=>o||s.length===a.size).some(s=>s.every(c=>a.has(c)))}function Tv(n,a){return a.includes(n)?"code":"key"}function J0(n,a,o,s){const c=n.parentNode||n.parentId;if(!c)return o;const f=a.get(c),d=wl(f,s);return J0(f,a,{x:(o.x??0)+d.x,y:(o.y??0)+d.y,z:(f[en]?.z??0)>(o.z??0)?f[en]?.z??0:o.z??0},s)}function F0(n,a,o){n.forEach(s=>{const c=s.parentNode||s.parentId;if(c&&!n.has(c))throw new Error(`Parent node ${c} not found`);if(c||o?.[s.id]){const{x:f,y:d,z:h}=J0(s,n,{...s.position,z:s[en]?.z??0},a);s.positionAbsolute={x:f,y:d},s[en].z=h,o?.[s.id]&&(s[en].isParent=!0)}})}function lf(n,a,o,s){const c=new Map,f={},d=s?1e3:0;return n.forEach(h=>{const g=(mi(h.zIndex)?h.zIndex:0)+(h.selected?d:0),m=a.get(h.id),y={...h,positionAbsolute:{x:h.position.x,y:h.position.y}},p=h.parentNode||h.parentId;p&&(f[p]=!0);const S=m?.type&&m?.type!==h.type;Object.defineProperty(y,en,{enumerable:!1,value:{handleBounds:S?void 0:m?.[en]?.handleBounds,z:g}}),c.set(h.id,y)}),F0(c,o,f),c}function W0(n,a={}){const{getNodes:o,width:s,height:c,minZoom:f,maxZoom:d,d3Zoom:h,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:p}=n(),S=a.initial&&!m&&y;if(h&&g&&(S||!a.initial)){const R=o().filter(k=>{const M=a.includeHiddenNodes?k.width&&k.height:!k.hidden;return a.nodes?.length?M&&a.nodes.some(O=>O.id===k.id):M}),T=R.every(k=>k.width&&k.height);if(R.length>0&&T){const k=$c(R,p),{x:M,y:O,zoom:U}=H0(k,s,c,a.minZoom??f,a.maxZoom??d,a.padding??.1),w=da.translate(M,O).scale(U);return typeof a.duration=="number"&&a.duration>0?h.transform(bl(g,a.duration),w):h.transform(g,w),!0}}return!1}function YE(n,a){return n.forEach(o=>{const s=a.get(o.id);s&&a.set(s.id,{...s,[en]:s[en],selected:o.selected})}),new Map(a)}function VE(n,a){return a.map(o=>{const s=n.find(c=>c.id===o.id);return s&&(o.selected=s.selected),o})}function pc({changedNodes:n,changedEdges:a,get:o,set:s}){const{nodeInternals:c,edges:f,onNodesChange:d,onEdgesChange:h,hasDefaultNodes:g,hasDefaultEdges:m}=o();n?.length&&(g&&s({nodeInternals:YE(n,c)}),d?.(n)),a?.length&&(m&&s({edges:VE(a,f)}),h?.(a))}const go=()=>{},LE={zoomIn:go,zoomOut:go,zoomTo:go,getZoom:()=>1,setViewport:go,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:go,fitBounds:go,project:n=>n,screenToFlowPosition:n=>n,flowToScreenPosition:n=>n,viewportInitialized:!1},XE=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection}),ZE=()=>{const n=hn(),{d3Zoom:a,d3Selection:o}=$t(XE,Vn);return A.useMemo(()=>o&&a?{zoomIn:c=>a.scaleBy(bl(o,c?.duration),1.2),zoomOut:c=>a.scaleBy(bl(o,c?.duration),1/1.2),zoomTo:(c,f)=>a.scaleTo(bl(o,f?.duration),c),getZoom:()=>n.getState().transform[2],setViewport:(c,f)=>{const[d,h,g]=n.getState().transform,m=da.translate(c.x??d,c.y??h).scale(c.zoom??g);a.transform(bl(o,f?.duration),m)},getViewport:()=>{const[c,f,d]=n.getState().transform;return{x:c,y:f,zoom:d}},fitView:c=>W0(n.getState,c),setCenter:(c,f,d)=>{const{width:h,height:g,maxZoom:m}=n.getState(),y=typeof d?.zoom<"u"?d.zoom:m,p=h/2-c*y,S=g/2-f*y,E=da.translate(p,S).scale(y);a.transform(bl(o,d?.duration),E)},fitBounds:(c,f)=>{const{width:d,height:h,minZoom:g,maxZoom:m}=n.getState(),{x:y,y:p,zoom:S}=H0(c,d,h,g,m,f?.padding??.1),E=da.translate(y,p).scale(S);a.transform(bl(o,f?.duration),E)},project:c=>{const{transform:f,snapToGrid:d,snapGrid:h}=n.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),wf(c,f,d,h)},screenToFlowPosition:c=>{const{transform:f,snapToGrid:d,snapGrid:h,domNode:g}=n.getState();if(!g)return c;const{x:m,y}=g.getBoundingClientRect(),p={x:c.x-m,y:c.y-y};return wf(p,f,d,h)},flowToScreenPosition:c=>{const{transform:f,domNode:d}=n.getState();if(!d)return c;const{x:h,y:g}=d.getBoundingClientRect(),m=q0(c,f);return{x:m.x+h,y:m.y+g}},viewportInitialized:!0}:LE,[a,o])};function Kf(){const n=ZE(),a=hn(),o=A.useCallback(()=>a.getState().getNodes().map(T=>({...T})),[]),s=A.useCallback(T=>a.getState().nodeInternals.get(T),[]),c=A.useCallback(()=>{const{edges:T=[]}=a.getState();return T.map(k=>({...k}))},[]),f=A.useCallback(T=>{const{edges:k=[]}=a.getState();return k.find(M=>M.id===T)},[]),d=A.useCallback(T=>{const{getNodes:k,setNodes:M,hasDefaultNodes:O,onNodesChange:U}=a.getState(),w=k(),J=typeof T=="function"?T(w):T;if(O)M(J);else if(U){const Q=J.length===0?w.map(F=>({type:"remove",id:F.id})):J.map(F=>({item:F,type:"reset"}));U(Q)}},[]),h=A.useCallback(T=>{const{edges:k=[],setEdges:M,hasDefaultEdges:O,onEdgesChange:U}=a.getState(),w=typeof T=="function"?T(k):T;if(O)M(w);else if(U){const J=w.length===0?k.map(Q=>({type:"remove",id:Q.id})):w.map(Q=>({item:Q,type:"reset"}));U(J)}},[]),g=A.useCallback(T=>{const k=Array.isArray(T)?T:[T],{getNodes:M,setNodes:O,hasDefaultNodes:U,onNodesChange:w}=a.getState();if(U){const Q=[...M(),...k];O(Q)}else if(w){const J=k.map(Q=>({item:Q,type:"add"}));w(J)}},[]),m=A.useCallback(T=>{const k=Array.isArray(T)?T:[T],{edges:M=[],setEdges:O,hasDefaultEdges:U,onEdgesChange:w}=a.getState();if(U)O([...M,...k]);else if(w){const J=k.map(Q=>({item:Q,type:"add"}));w(J)}},[]),y=A.useCallback(()=>{const{getNodes:T,edges:k=[],transform:M}=a.getState(),[O,U,w]=M;return{nodes:T().map(J=>({...J})),edges:k.map(J=>({...J})),viewport:{x:O,y:U,zoom:w}}},[]),p=A.useCallback(({nodes:T,edges:k})=>{const{nodeInternals:M,getNodes:O,edges:U,hasDefaultNodes:w,hasDefaultEdges:J,onNodesDelete:Q,onEdgesDelete:F,onNodesChange:ce,onEdgesChange:ue}=a.getState(),te=(T||[]).map(B=>B.id),oe=(k||[]).map(B=>B.id),me=O().reduce((B,N)=>{const L=N.parentNode||N.parentId,ne=!te.includes(N.id)&&L&&B.find(se=>se.id===L);return(typeof N.deletable!="boolean"||N.deletable)&&(te.includes(N.id)||ne)&&B.push(N),B},[]),ve=U.filter(B=>typeof B.deletable=="boolean"?B.deletable:!0),z=ve.filter(B=>oe.includes(B.id));if(me||z){const B=j0(me,ve),N=[...z,...B],L=N.reduce((ne,I)=>(ne.includes(I.id)||ne.push(I.id),ne),[]);if((J||w)&&(J&&a.setState({edges:U.filter(ne=>!L.includes(ne.id))}),w&&(me.forEach(ne=>{M.delete(ne.id)}),a.setState({nodeInternals:new Map(M)}))),L.length>0&&(F?.(N),ue&&ue(L.map(ne=>({id:ne,type:"remove"})))),me.length>0&&(Q?.(me),ce)){const ne=me.map(I=>({id:I.id,type:"remove"}));ce(ne)}}},[]),S=A.useCallback(T=>{const k=fE(T),M=k?null:a.getState().nodeInternals.get(T.id);return!k&&!M?[null,null,k]:[k?T:xv(M),M,k]},[]),E=A.useCallback((T,k=!0,M)=>{const[O,U,w]=S(T);return O?(M||a.getState().getNodes()).filter(J=>{if(!w&&(J.id===U.id||!J.positionAbsolute))return!1;const Q=xv(J),F=Sf(Q,O);return k&&F>0||F>=O.width*O.height}):[]},[]),R=A.useCallback((T,k,M=!0)=>{const[O]=S(T);if(!O)return!1;const U=Sf(O,k);return M&&U>0||U>=O.width*O.height},[]);return A.useMemo(()=>({...n,getNodes:o,getNode:s,getEdges:c,getEdge:f,setNodes:d,setEdges:h,addNodes:g,addEdges:m,toObject:y,deleteElements:p,getIntersectingNodes:E,isNodeIntersecting:R}),[n,o,s,c,f,d,h,g,m,y,p,E,R])}const IE={actInsideInputWithModifier:!1};var QE=({deleteKeyCode:n,multiSelectionKeyCode:a})=>{const o=hn(),{deleteElements:s}=Kf(),c=Vs(n,IE),f=Vs(a);A.useEffect(()=>{if(c){const{edges:d,getNodes:h}=o.getState(),g=h().filter(y=>y.selected),m=d.filter(y=>y.selected);s({nodes:g,edges:m}),o.setState({nodesSelectionActive:!1})}},[c]),A.useEffect(()=>{o.setState({multiSelectionActive:f})},[f])};function KE(n){const a=hn();A.useEffect(()=>{let o;const s=()=>{if(!n.current)return;const c=Bf(n.current);(c.height===0||c.width===0)&&a.getState().onError?.("004",ha.error004()),a.setState({width:c.width||500,height:c.height||500})};return s(),window.addEventListener("resize",s),n.current&&(o=new ResizeObserver(()=>s()),o.observe(n.current)),()=>{window.removeEventListener("resize",s),o&&n.current&&o.unobserve(n.current)}},[])}const Jf={position:"absolute",width:"100%",height:"100%",top:0,left:0},JE=(n,a)=>n.x!==a.x||n.y!==a.y||n.zoom!==a.k,vc=n=>({x:n.x,y:n.y,zoom:n.k}),po=(n,a)=>n.target.closest(`.${a}`),Dv=(n,a)=>a===2&&Array.isArray(n)&&n.includes(2),Mv=n=>{const a=n.ctrlKey&&kc()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*a},FE=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection,d3ZoomHandler:n.d3ZoomHandler,userSelectionActive:n.userSelectionActive}),WE=({onMove:n,onMoveStart:a,onMoveEnd:o,onPaneContextMenu:s,zoomOnScroll:c=!0,zoomOnPinch:f=!0,panOnScroll:d=!1,panOnScrollSpeed:h=.5,panOnScrollMode:g=Nl.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:p=!0,defaultViewport:S,translateExtent:E,minZoom:R,maxZoom:T,zoomActivationKeyCode:k,preventScrolling:M=!0,children:O,noWheelClassName:U,noPanClassName:w})=>{const J=A.useRef(),Q=hn(),F=A.useRef(!1),ce=A.useRef(!1),ue=A.useRef(null),te=A.useRef({x:0,y:0,zoom:0}),{d3Zoom:oe,d3Selection:me,d3ZoomHandler:ve,userSelectionActive:z}=$t(FE,Vn),B=Vs(k),N=A.useRef(0),L=A.useRef(!1),ne=A.useRef();return KE(ue),A.useEffect(()=>{if(ue.current){const I=ue.current.getBoundingClientRect(),se=_0().scaleExtent([R,T]).translateExtent(E),D=hi(ue.current).call(se),V=da.translate(S.x,S.y).scale(To(S.zoom,R,T)),de=[[0,0],[I.width,I.height]],ge=se.constrain()(V,de,E);se.transform(D,ge),se.wheelDelta(Mv),Q.setState({d3Zoom:se,d3Selection:D,d3ZoomHandler:D.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:ue.current.closest(".react-flow")})}},[]),A.useEffect(()=>{me&&oe&&(d&&!B&&!z?me.on("wheel.zoom",I=>{if(po(I,U))return!1;I.preventDefault(),I.stopImmediatePropagation();const se=me.property("__zoom").k||1;if(I.ctrlKey&&f){const qe=Ei(I),Oe=Mv(I),Ye=se*Math.pow(2,Oe);oe.scaleTo(me,Ye,qe,I);return}const D=I.deltaMode===1?20:1;let V=g===Nl.Vertical?0:I.deltaX*D,de=g===Nl.Horizontal?0:I.deltaY*D;!kc()&&I.shiftKey&&g!==Nl.Vertical&&(V=I.deltaY*D,de=0),oe.translateBy(me,-(V/se)*h,-(de/se)*h,{internal:!0});const ge=vc(me.property("__zoom")),{onViewportChangeStart:we,onViewportChange:Ce,onViewportChangeEnd:ke}=Q.getState();clearTimeout(ne.current),L.current||(L.current=!0,a?.(I,ge),we?.(ge)),L.current&&(n?.(I,ge),Ce?.(ge),ne.current=setTimeout(()=>{o?.(I,ge),ke?.(ge),L.current=!1},150))},{passive:!1}):typeof ve<"u"&&me.on("wheel.zoom",function(I,se){if(!M&&I.type==="wheel"&&!I.ctrlKey||po(I,U))return null;I.preventDefault(),ve.call(this,I,se)},{passive:!1}))},[z,d,g,me,oe,ve,B,f,M,U,a,n,o]),A.useEffect(()=>{oe&&oe.on("start",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;N.current=I.sourceEvent?.button;const{onViewportChangeStart:se}=Q.getState(),D=vc(I.transform);F.current=!0,te.current=D,I.sourceEvent?.type==="mousedown"&&Q.setState({paneDragging:!0}),se?.(D),a?.(I.sourceEvent,D)})},[oe,a]),A.useEffect(()=>{oe&&(z&&!F.current?oe.on("zoom",null):z||oe.on("zoom",I=>{const{onViewportChange:se}=Q.getState();if(Q.setState({transform:[I.transform.x,I.transform.y,I.transform.k]}),ce.current=!!(s&&Dv(p,N.current??0)),(n||se)&&!I.sourceEvent?.internal){const D=vc(I.transform);se?.(D),n?.(I.sourceEvent,D)}}))},[z,oe,n,p,s]),A.useEffect(()=>{oe&&oe.on("end",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;const{onViewportChangeEnd:se}=Q.getState();if(F.current=!1,Q.setState({paneDragging:!1}),s&&Dv(p,N.current??0)&&!ce.current&&s(I.sourceEvent),ce.current=!1,(o||se)&&JE(te.current,I.transform)){const D=vc(I.transform);te.current=D,clearTimeout(J.current),J.current=setTimeout(()=>{se?.(D),o?.(I.sourceEvent,D)},d?150:0)}})},[oe,d,p,o,s]),A.useEffect(()=>{oe&&oe.filter(I=>{const se=B||c,D=f&&I.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&I.button===1&&I.type==="mousedown"&&(po(I,"react-flow__node")||po(I,"react-flow__edge")))return!0;if(!p&&!se&&!d&&!m&&!f||z||!m&&I.type==="dblclick"||po(I,U)&&I.type==="wheel"||po(I,w)&&(I.type!=="wheel"||d&&I.type==="wheel"&&!B)||!f&&I.ctrlKey&&I.type==="wheel"||!se&&!d&&!D&&I.type==="wheel"||!p&&(I.type==="mousedown"||I.type==="touchstart")||Array.isArray(p)&&!p.includes(I.button)&&I.type==="mousedown")return!1;const V=Array.isArray(p)&&p.includes(I.button)||!I.button||I.button<=1;return(!I.ctrlKey||I.type==="wheel")&&V})},[z,oe,c,f,d,m,p,y,B]),pe.createElement("div",{className:"react-flow__renderer",ref:ue,style:Jf},O)},PE=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function ew(){const{userSelectionActive:n,userSelectionRect:a}=$t(PE,Vn);return n&&a?pe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:a.width,height:a.height,transform:`translate(${a.x}px, ${a.y}px)`}}):null}function zv(n,a){const o=a.parentNode||a.parentId,s=n.find(c=>c.id===o);if(s){const c=a.position.x+a.width-s.width,f=a.position.y+a.height-s.height;if(c>0||f>0||a.position.x<0||a.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,c>0&&(s.style.width+=c),f>0&&(s.style.height+=f),a.position.x<0){const d=Math.abs(a.position.x);s.position.x=s.position.x-d,s.style.width+=d,a.position.x=0}if(a.position.y<0){const d=Math.abs(a.position.y);s.position.y=s.position.y-d,s.style.height+=d,a.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function tw(n,a){if(n.some(s=>s.type==="reset"))return n.filter(s=>s.type==="reset").map(s=>s.item);const o=n.filter(s=>s.type==="add").map(s=>s.item);return a.reduce((s,c)=>{const f=n.filter(h=>h.id===c.id);if(f.length===0)return s.push(c),s;const d={...c};for(const h of f)if(h)switch(h.type){case"select":{d.selected=h.selected;break}case"position":{typeof h.position<"u"&&(d.position=h.position),typeof h.positionAbsolute<"u"&&(d.positionAbsolute=h.positionAbsolute),typeof h.dragging<"u"&&(d.dragging=h.dragging),d.expandParent&&zv(s,d);break}case"dimensions":{typeof h.dimensions<"u"&&(d.width=h.dimensions.width,d.height=h.dimensions.height),typeof h.updateStyle<"u"&&(d.style={...d.style||{},...h.dimensions}),typeof h.resizing=="boolean"&&(d.resizing=h.resizing),d.expandParent&&zv(s,d);break}case"remove":return s}return s.push(d),s},o)}function Ff(n,a){return tw(n,a)}const Ka=(n,a)=>({id:n,type:"select",selected:a});function bo(n,a){return n.reduce((o,s)=>{const c=a.includes(s.id);return!s.selected&&c?(s.selected=!0,o.push(Ka(s.id,!0))):s.selected&&!c&&(s.selected=!1,o.push(Ka(s.id,!1))),o},[])}const of=(n,a)=>o=>{o.target===a.current&&n?.(o)},nw=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging}),P0=A.memo(({isSelecting:n,selectionMode:a=Ys.Full,panOnDrag:o,onSelectionStart:s,onSelectionEnd:c,onPaneClick:f,onPaneContextMenu:d,onPaneScroll:h,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:p})=>{const S=A.useRef(null),E=hn(),R=A.useRef(0),T=A.useRef(0),k=A.useRef(),{userSelectionActive:M,elementsSelectable:O,dragging:U}=$t(nw,Vn),w=()=>{E.setState({userSelectionActive:!1,userSelectionRect:null}),R.current=0,T.current=0},J=ve=>{f?.(ve),E.getState().resetSelectedElements(),E.setState({nodesSelectionActive:!1})},Q=ve=>{if(Array.isArray(o)&&o?.includes(2)){ve.preventDefault();return}d?.(ve)},F=h?ve=>h(ve):void 0,ce=ve=>{const{resetSelectedElements:z,domNode:B}=E.getState();if(k.current=B?.getBoundingClientRect(),!O||!n||ve.button!==0||ve.target!==S.current||!k.current)return;const{x:N,y:L}=Pa(ve,k.current);z(),E.setState({userSelectionRect:{width:0,height:0,startX:N,startY:L,x:N,y:L}}),s?.(ve)},ue=ve=>{const{userSelectionRect:z,nodeInternals:B,edges:N,transform:L,onNodesChange:ne,onEdgesChange:I,nodeOrigin:se,getNodes:D}=E.getState();if(!n||!k.current||!z)return;E.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=Pa(ve,k.current),de=z.startX??0,ge=z.startY??0,we={...z,x:V.x<de?V.x:de,y:V.y<ge?V.y:ge,width:Math.abs(V.x-de),height:Math.abs(V.y-ge)},Ce=D(),ke=R0(B,we,L,a===Ys.Partial,!0,se),qe=j0(ke,N).map(Ye=>Ye.id),Oe=ke.map(Ye=>Ye.id);if(R.current!==Oe.length){R.current=Oe.length;const Ye=bo(Ce,Oe);Ye.length&&ne?.(Ye)}if(T.current!==qe.length){T.current=qe.length;const Ye=bo(N,qe);Ye.length&&I?.(Ye)}E.setState({userSelectionRect:we})},te=ve=>{if(ve.button!==0)return;const{userSelectionRect:z}=E.getState();!M&&z&&ve.target===S.current&&J?.(ve),E.setState({nodesSelectionActive:R.current>0}),w(),c?.(ve)},oe=ve=>{M&&(E.setState({nodesSelectionActive:R.current>0}),c?.(ve)),w()},me=O&&(n||M);return pe.createElement("div",{className:_n(["react-flow__pane",{dragging:U,selection:n}]),onClick:me?void 0:of(J,S),onContextMenu:of(Q,S),onWheel:of(F,S),onMouseEnter:me?void 0:g,onMouseDown:me?ce:void 0,onMouseMove:me?ue:m,onMouseUp:me?te:void 0,onMouseLeave:me?oe:y,ref:S,style:Jf},p,pe.createElement(ew,null))});P0.displayName="Pane";function ey(n,a){const o=n.parentNode||n.parentId;if(!o)return!1;const s=a.get(o);return s?s.selected?!0:ey(s,a):!1}function kv(n,a,o){let s=n;do{if(s?.matches(a))return!0;if(s===o.current)return!1;s=s.parentElement}while(s);return!1}function iw(n,a,o,s){return Array.from(n.values()).filter(c=>(c.selected||c.id===s)&&(!c.parentNode||c.parentId||!ey(c,n))&&(c.draggable||a&&typeof c.draggable>"u")).map(c=>({id:c.id,position:c.position||{x:0,y:0},positionAbsolute:c.positionAbsolute||{x:0,y:0},distance:{x:o.x-(c.positionAbsolute?.x??0),y:o.y-(c.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:c.extent,parentNode:c.parentNode||c.parentId,parentId:c.parentNode||c.parentId,width:c.width,height:c.height,expandParent:c.expandParent}))}function aw(n,a){return!a||a==="parent"?a:[a[0],[a[1][0]-(n.width||0),a[1][1]-(n.height||0)]]}function ty(n,a,o,s,c=[0,0],f){const d=aw(n,n.extent||s);let h=d;const g=n.parentNode||n.parentId;if(n.extent==="parent"&&!n.expandParent)if(g&&n.width&&n.height){const p=o.get(g),{x:S,y:E}=wl(p,c).positionAbsolute;h=p&&mi(S)&&mi(E)&&mi(p.width)&&mi(p.height)?[[S+n.width*c[0],E+n.height*c[1]],[S+p.width-n.width+n.width*c[0],E+p.height-n.height+n.height*c[1]]]:h}else f?.("005",ha.error005()),h=d;else if(n.extent&&g&&n.extent!=="parent"){const p=o.get(g),{x:S,y:E}=wl(p,c).positionAbsolute;h=[[n.extent[0][0]+S,n.extent[0][1]+E],[n.extent[1][0]+S,n.extent[1][1]+E]]}let m={x:0,y:0};if(g){const p=o.get(g);m=wl(p,c).positionAbsolute}const y=h&&h!=="parent"?$f(a,h):a;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function sf({nodeId:n,dragItems:a,nodeInternals:o}){const s=a.map(c=>({...o.get(c.id),position:c.position,positionAbsolute:c.positionAbsolute}));return[n?s.find(c=>c.id===n):s[0],s]}const Ov=(n,a,o,s)=>{const c=a.querySelectorAll(n);if(!c||!c.length)return null;const f=Array.from(c),d=a.getBoundingClientRect(),h={x:d.width*s[0],y:d.height*s[1]};return f.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-d.left-h.x)/o,y:(m.top-d.top-h.y)/o,...Bf(g)}})};function Ds(n,a,o){return o===void 0?o:s=>{const c=a().nodeInternals.get(n);c&&o(s,{...c})}}function Cf({id:n,store:a,unselect:o=!1,nodeRef:s}){const{addSelectedNodes:c,unselectNodesAndEdges:f,multiSelectionActive:d,nodeInternals:h,onError:g}=a.getState(),m=h.get(n);if(!m){g?.("012",ha.error012(n));return}a.setState({nodesSelectionActive:!1}),m.selected?(o||m.selected&&d)&&(f({nodes:[m],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):c([n])}function lw(){const n=hn();return A.useCallback(({sourceEvent:o})=>{const{transform:s,snapGrid:c,snapToGrid:f}=n.getState(),d=o.touches?o.touches[0].clientX:o.clientX,h=o.touches?o.touches[0].clientY:o.clientY,g={x:(d-s[0])/s[2],y:(h-s[1])/s[2]};return{xSnapped:f?c[0]*Math.round(g.x/c[0]):g.x,ySnapped:f?c[1]*Math.round(g.y/c[1]):g.y,...g}},[])}function rf(n){return(a,o,s)=>n?.(a,s)}function ny({nodeRef:n,disabled:a=!1,noDragClassName:o,handleSelector:s,nodeId:c,isSelectable:f,selectNodesOnDrag:d}){const h=hn(),[g,m]=A.useState(!1),y=A.useRef([]),p=A.useRef({x:null,y:null}),S=A.useRef(0),E=A.useRef(null),R=A.useRef({x:0,y:0}),T=A.useRef(null),k=A.useRef(!1),M=A.useRef(!1),O=A.useRef(!1),U=lw();return A.useEffect(()=>{if(n?.current){const w=hi(n.current),J=({x:ce,y:ue})=>{const{nodeInternals:te,onNodeDrag:oe,onSelectionDrag:me,updateNodePositions:ve,nodeExtent:z,snapGrid:B,snapToGrid:N,nodeOrigin:L,onError:ne}=h.getState();p.current={x:ce,y:ue};let I=!1,se={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&z){const V=$c(y.current,L);se=$s(V)}if(y.current=y.current.map(V=>{const de={x:ce-V.distance.x,y:ue-V.distance.y};N&&(de.x=B[0]*Math.round(de.x/B[0]),de.y=B[1]*Math.round(de.y/B[1]));const ge=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];y.current.length>1&&z&&!V.extent&&(ge[0][0]=V.positionAbsolute.x-se.x+z[0][0],ge[1][0]=V.positionAbsolute.x+(V.width??0)-se.x2+z[1][0],ge[0][1]=V.positionAbsolute.y-se.y+z[0][1],ge[1][1]=V.positionAbsolute.y+(V.height??0)-se.y2+z[1][1]);const we=ty(V,de,te,ge,L,ne);return I=I||V.position.x!==we.position.x||V.position.y!==we.position.y,V.position=we.position,V.positionAbsolute=we.positionAbsolute,V}),!I)return;ve(y.current,!0,!0),m(!0);const D=c?oe:rf(me);if(D&&T.current){const[V,de]=sf({nodeId:c,dragItems:y.current,nodeInternals:te});D(T.current,V,de)}},Q=()=>{if(!E.current)return;const[ce,ue]=w0(R.current,E.current);if(ce!==0||ue!==0){const{transform:te,panBy:oe}=h.getState();p.current.x=(p.current.x??0)-ce/te[2],p.current.y=(p.current.y??0)-ue/te[2],oe({x:ce,y:ue})&&J(p.current)}S.current=requestAnimationFrame(Q)},F=ce=>{const{nodeInternals:ue,multiSelectionActive:te,nodesDraggable:oe,unselectNodesAndEdges:me,onNodeDragStart:ve,onSelectionDragStart:z}=h.getState();M.current=!0;const B=c?ve:rf(z);(!d||!f)&&!te&&c&&(ue.get(c)?.selected||me()),c&&f&&d&&Cf({id:c,store:h,nodeRef:n});const N=U(ce);if(p.current=N,y.current=iw(ue,oe,N,c),B&&y.current){const[L,ne]=sf({nodeId:c,dragItems:y.current,nodeInternals:ue});B(ce.sourceEvent,L,ne)}};if(a)w.on(".drag",null);else{const ce=pN().on("start",ue=>{const{domNode:te,nodeDragThreshold:oe}=h.getState();oe===0&&F(ue),O.current=!1;const me=U(ue);p.current=me,E.current=te?.getBoundingClientRect()||null,R.current=Pa(ue.sourceEvent,E.current)}).on("drag",ue=>{const te=U(ue),{autoPanOnNodeDrag:oe,nodeDragThreshold:me}=h.getState();if(ue.sourceEvent.type==="touchmove"&&ue.sourceEvent.touches.length>1&&(O.current=!0),!O.current){if(!k.current&&M.current&&oe&&(k.current=!0,Q()),!M.current){const ve=te.xSnapped-(p?.current?.x??0),z=te.ySnapped-(p?.current?.y??0);Math.sqrt(ve*ve+z*z)>me&&F(ue)}(p.current.x!==te.xSnapped||p.current.y!==te.ySnapped)&&y.current&&M.current&&(T.current=ue.sourceEvent,R.current=Pa(ue.sourceEvent,E.current),J(te))}}).on("end",ue=>{if(!(!M.current||O.current)&&(m(!1),k.current=!1,M.current=!1,cancelAnimationFrame(S.current),y.current)){const{updateNodePositions:te,nodeInternals:oe,onNodeDragStop:me,onSelectionDragStop:ve}=h.getState(),z=c?me:rf(ve);if(te(y.current,!1,!1),z){const[B,N]=sf({nodeId:c,dragItems:y.current,nodeInternals:oe});z(ue.sourceEvent,B,N)}}}).filter(ue=>{const te=ue.target;return!ue.button&&(!o||!kv(te,`.${o}`,n))&&(!s||kv(te,s,n))});return w.call(ce),()=>{w.on(".drag",null)}}}},[n,a,o,s,f,h,c,d,U]),g}function iy(){const n=hn();return A.useCallback(o=>{const{nodeInternals:s,nodeExtent:c,updateNodePositions:f,getNodes:d,snapToGrid:h,snapGrid:g,onError:m,nodesDraggable:y}=n.getState(),p=d().filter(O=>O.selected&&(O.draggable||y&&typeof O.draggable>"u")),S=h?g[0]:5,E=h?g[1]:5,R=o.isShiftPressed?4:1,T=o.x*S*R,k=o.y*E*R,M=p.map(O=>{if(O.positionAbsolute){const U={x:O.positionAbsolute.x+T,y:O.positionAbsolute.y+k};h&&(U.x=g[0]*Math.round(U.x/g[0]),U.y=g[1]*Math.round(U.y/g[1]));const{positionAbsolute:w,position:J}=ty(O,U,s,c,void 0,m);O.position=J,O.positionAbsolute=w}return O});f(M,!0,!1)},[])}const wo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ms=n=>{const a=({id:o,type:s,data:c,xPos:f,yPos:d,xPosOrigin:h,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:p,onMouseMove:S,onMouseLeave:E,onContextMenu:R,onDoubleClick:T,style:k,className:M,isDraggable:O,isSelectable:U,isConnectable:w,isFocusable:J,selectNodesOnDrag:Q,sourcePosition:F,targetPosition:ce,hidden:ue,resizeObserver:te,dragHandle:oe,zIndex:me,isParent:ve,noDragClassName:z,noPanClassName:B,initialized:N,disableKeyboardA11y:L,ariaLabel:ne,rfId:I,hasHandleBounds:se})=>{const D=hn(),V=A.useRef(null),de=A.useRef(null),ge=A.useRef(F),we=A.useRef(ce),Ce=A.useRef(s),ke=U||O||y||p||S||E,qe=iy(),Oe=Ds(o,D.getState,p),Ye=Ds(o,D.getState,S),at=Ds(o,D.getState,E),Pe=Ds(o,D.getState,R),_t=Ds(o,D.getState,T),gt=We=>{const{nodeDragThreshold:je}=D.getState();if(U&&(!Q||!O||je>0)&&Cf({id:o,store:D,nodeRef:V}),y){const Et=D.getState().nodeInternals.get(o);Et&&y(We,{...Et})}},et=We=>{if(!Nf(We)&&!L)if(D0.includes(We.key)&&U){const je=We.key==="Escape";Cf({id:o,store:D,unselect:je,nodeRef:V})}else O&&m&&Object.prototype.hasOwnProperty.call(wo,We.key)&&(D.setState({ariaLiveMessage:`Moved selected node ${We.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~f}, y: ${~~d}`}),qe({x:wo[We.key].x,y:wo[We.key].y,isShiftPressed:We.shiftKey}))};A.useEffect(()=>()=>{de.current&&(te?.unobserve(de.current),de.current=null)},[]),A.useEffect(()=>{if(V.current&&!ue){const We=V.current;(!N||!se||de.current!==We)&&(de.current&&te?.unobserve(de.current),te?.observe(We),de.current=We)}},[ue,N,se]),A.useEffect(()=>{const We=Ce.current!==s,je=ge.current!==F,Et=we.current!==ce;V.current&&(We||je||Et)&&(We&&(Ce.current=s),je&&(ge.current=F),Et&&(we.current=ce),D.getState().updateNodeDimensions([{id:o,nodeElement:V.current,forceUpdate:!0}]))},[o,s,F,ce]);const pt=ny({nodeRef:V,disabled:ue||!O,noDragClassName:z,handleSelector:oe,nodeId:o,isSelectable:U,selectNodesOnDrag:Q});return ue?null:pe.createElement("div",{className:_n(["react-flow__node",`react-flow__node-${s}`,{[B]:O},M,{selected:m,selectable:U,parent:ve,dragging:pt}]),ref:V,style:{zIndex:me,transform:`translate(${h}px,${g}px)`,pointerEvents:ke?"all":"none",visibility:N?"visible":"hidden",...k},"data-id":o,"data-testid":`rf__node-${o}`,onMouseEnter:Oe,onMouseMove:Ye,onMouseLeave:at,onContextMenu:Pe,onClick:gt,onDoubleClick:_t,onKeyDown:J?et:void 0,tabIndex:J?0:void 0,role:J?"button":void 0,"aria-describedby":L?void 0:`${Q0}-${I}`,"aria-label":ne},pe.createElement(xE,{value:o},pe.createElement(n,{id:o,data:c,type:s,xPos:f,yPos:d,selected:m,isConnectable:w,sourcePosition:F,targetPosition:ce,dragging:pt,dragHandle:oe,zIndex:me})))};return a.displayName="NodeWrapper",A.memo(a)};const ow=n=>{const a=n.getNodes().filter(o=>o.selected);return{...$c(a,n.nodeOrigin),transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`,userSelectionActive:n.userSelectionActive}};function sw({onSelectionContextMenu:n,noPanClassName:a,disableKeyboardA11y:o}){const s=hn(),{width:c,height:f,x:d,y:h,transformString:g,userSelectionActive:m}=$t(ow,Vn),y=iy(),p=A.useRef(null);if(A.useEffect(()=>{o||p.current?.focus({preventScroll:!0})},[o]),ny({nodeRef:p}),m||!c||!f)return null;const S=n?R=>{const T=s.getState().getNodes().filter(k=>k.selected);n(R,T)}:void 0,E=R=>{Object.prototype.hasOwnProperty.call(wo,R.key)&&y({x:wo[R.key].x,y:wo[R.key].y,isShiftPressed:R.shiftKey})};return pe.createElement("div",{className:_n(["react-flow__nodesselection","react-flow__container",a]),style:{transform:g}},pe.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:S,tabIndex:o?void 0:-1,onKeyDown:o?void 0:E,style:{width:c,height:f,top:h,left:d}}))}var rw=A.memo(sw);const cw=n=>n.nodesSelectionActive,ay=({children:n,onPaneClick:a,onPaneMouseEnter:o,onPaneMouseMove:s,onPaneMouseLeave:c,onPaneContextMenu:f,onPaneScroll:d,deleteKeyCode:h,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:p,selectionOnDrag:S,selectionMode:E,onSelectionStart:R,onSelectionEnd:T,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:O,elementsSelectable:U,zoomOnScroll:w,zoomOnPinch:J,panOnScroll:Q,panOnScrollSpeed:F,panOnScrollMode:ce,zoomOnDoubleClick:ue,panOnDrag:te,defaultViewport:oe,translateExtent:me,minZoom:ve,maxZoom:z,preventScrolling:B,onSelectionContextMenu:N,noWheelClassName:L,noPanClassName:ne,disableKeyboardA11y:I})=>{const se=$t(cw),D=Vs(p),V=Vs(M),de=V||te,ge=V||Q,we=D||S&&de!==!0;return QE({deleteKeyCode:h,multiSelectionKeyCode:k}),pe.createElement(WE,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:f,elementsSelectable:U,zoomOnScroll:w,zoomOnPinch:J,panOnScroll:ge,panOnScrollSpeed:F,panOnScrollMode:ce,zoomOnDoubleClick:ue,panOnDrag:!D&&de,defaultViewport:oe,translateExtent:me,minZoom:ve,maxZoom:z,zoomActivationKeyCode:O,preventScrolling:B,noWheelClassName:L,noPanClassName:ne},pe.createElement(P0,{onSelectionStart:R,onSelectionEnd:T,onPaneClick:a,onPaneMouseEnter:o,onPaneMouseMove:s,onPaneMouseLeave:c,onPaneContextMenu:f,onPaneScroll:d,panOnDrag:de,isSelecting:!!we,selectionMode:E},n,se&&pe.createElement(rw,{onSelectionContextMenu:N,noPanClassName:ne,disableKeyboardA11y:I})))};ay.displayName="FlowRenderer";var uw=A.memo(ay);function dw(n){return $t(A.useCallback(o=>n?R0(o.nodeInternals,{x:0,y:0,width:o.width,height:o.height},o.transform,!0):o.getNodes(),[n]))}function fw(n){const a={input:Ms(n.input||L0),default:Ms(n.default||Af),output:Ms(n.output||Z0),group:Ms(n.group||Qf)},o={},s=Object.keys(n).filter(c=>!["input","default","output","group"].includes(c)).reduce((c,f)=>(c[f]=Ms(n[f]||Af),c),o);return{...a,...s}}const hw=({x:n,y:a,width:o,height:s,origin:c})=>!o||!s?{x:n,y:a}:c[0]<0||c[1]<0||c[0]>1||c[1]>1?{x:n,y:a}:{x:n-o*c[0],y:a-s*c[1]},mw=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,updateNodeDimensions:n.updateNodeDimensions,onError:n.onError}),ly=n=>{const{nodesDraggable:a,nodesConnectable:o,nodesFocusable:s,elementsSelectable:c,updateNodeDimensions:f,onError:d}=$t(mw,Vn),h=dw(n.onlyRenderVisibleElements),g=A.useRef(),m=A.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(p=>{const S=p.map(E=>({id:E.target.getAttribute("data-id"),nodeElement:E.target,forceUpdate:!0}));f(S)});return g.current=y,y},[]);return A.useEffect(()=>()=>{g?.current?.disconnect()},[]),pe.createElement("div",{className:"react-flow__nodes",style:Jf},h.map(y=>{let p=y.type||"default";n.nodeTypes[p]||(d?.("003",ha.error003(p)),p="default");const S=n.nodeTypes[p]||n.nodeTypes.default,E=!!(y.draggable||a&&typeof y.draggable>"u"),R=!!(y.selectable||c&&typeof y.selectable>"u"),T=!!(y.connectable||o&&typeof y.connectable>"u"),k=!!(y.focusable||s&&typeof y.focusable>"u"),M=n.nodeExtent?$f(y.positionAbsolute,n.nodeExtent):y.positionAbsolute,O=M?.x??0,U=M?.y??0,w=hw({x:O,y:U,width:y.width??0,height:y.height??0,origin:n.nodeOrigin});return pe.createElement(S,{key:y.id,id:y.id,className:y.className,style:y.style,type:p,data:y.data,sourcePosition:y.sourcePosition||He.Bottom,targetPosition:y.targetPosition||He.Top,hidden:y.hidden,xPos:O,yPos:U,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:n.selectNodesOnDrag,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,selected:!!y.selected,isDraggable:E,isSelectable:R,isConnectable:T,isFocusable:k,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[en]?.z??0,isParent:!!y[en]?.isParent,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,initialized:!!y.width&&!!y.height,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[en]?.handleBounds})}))};ly.displayName="NodeRenderer";var gw=A.memo(ly);const pw=(n,a,o)=>o===He.Left?n-a:o===He.Right?n+a:n,vw=(n,a,o)=>o===He.Top?n-a:o===He.Bottom?n+a:n,qv="react-flow__edgeupdater",Rv=({position:n,centerX:a,centerY:o,radius:s=10,onMouseDown:c,onMouseEnter:f,onMouseOut:d,type:h})=>pe.createElement("circle",{onMouseDown:c,onMouseEnter:f,onMouseOut:d,className:_n([qv,`${qv}-${h}`]),cx:pw(a,s,n),cy:vw(o,s,n),r:s,stroke:"transparent",fill:"transparent"}),yw=()=>!0;var vo=n=>{const a=({id:o,className:s,type:c,data:f,onClick:d,onEdgeDoubleClick:h,selected:g,animated:m,label:y,labelStyle:p,labelShowBg:S,labelBgStyle:E,labelBgPadding:R,labelBgBorderRadius:T,style:k,source:M,target:O,sourceX:U,sourceY:w,targetX:J,targetY:Q,sourcePosition:F,targetPosition:ce,elementsSelectable:ue,hidden:te,sourceHandleId:oe,targetHandleId:me,onContextMenu:ve,onMouseEnter:z,onMouseMove:B,onMouseLeave:N,reconnectRadius:L,onReconnect:ne,onReconnectStart:I,onReconnectEnd:se,markerEnd:D,markerStart:V,rfId:de,ariaLabel:ge,isFocusable:we,isReconnectable:Ce,pathOptions:ke,interactionWidth:qe,disableKeyboardA11y:Oe})=>{const Ye=A.useRef(null),[at,Pe]=A.useState(!1),[_t,gt]=A.useState(!1),et=hn(),pt=A.useMemo(()=>`url('#${Ef(V,de)}')`,[V,de]),We=A.useMemo(()=>`url('#${Ef(D,de)}')`,[D,de]);if(te)return null;const je=dt=>{const{edges:De,addSelectedEdges:ie,unselectNodesAndEdges:ee,multiSelectionActive:be}=et.getState(),Be=De.find(ft=>ft.id===o);Be&&(ue&&(et.setState({nodesSelectionActive:!1}),Be.selected&&be?(ee({nodes:[],edges:[Be]}),Ye.current?.blur()):ie([o])),d&&d(dt,Be))},Et=Ts(o,et.getState,h),Qt=Ts(o,et.getState,ve),vn=Ts(o,et.getState,z),Mn=Ts(o,et.getState,B),En=Ts(o,et.getState,N),wt=(dt,De)=>{if(dt.button!==0)return;const{edges:ie,isValidConnection:ee}=et.getState(),be=De?O:M,Be=(De?me:oe)||null,ft=De?"target":"source",Xe=ee||yw,Tt=De,Qe=ie.find(vt=>vt.id===o);gt(!0),I?.(dt,Qe,ft);const Ze=vt=>{gt(!1),se?.(vt,Qe,ft)};B0({event:dt,handleId:Be,nodeId:be,onConnect:vt=>ne?.(Qe,vt),isTarget:Tt,getState:et.getState,setState:et.setState,isValidConnection:Xe,edgeUpdaterType:ft,onReconnectEnd:Ze})},zn=dt=>wt(dt,!0),tt=dt=>wt(dt,!1),qt=()=>Pe(!0),cn=()=>Pe(!1),Rt=!ue&&!d,wn=dt=>{if(!Oe&&D0.includes(dt.key)&&ue){const{unselectNodesAndEdges:De,addSelectedEdges:ie,edges:ee}=et.getState();dt.key==="Escape"?(Ye.current?.blur(),De({edges:[ee.find(Be=>Be.id===o)]})):ie([o])}};return pe.createElement("g",{className:_n(["react-flow__edge",`react-flow__edge-${c}`,s,{selected:g,animated:m,inactive:Rt,updating:at}]),onClick:je,onDoubleClick:Et,onContextMenu:Qt,onMouseEnter:vn,onMouseMove:Mn,onMouseLeave:En,onKeyDown:we?wn:void 0,tabIndex:we?0:void 0,role:we?"button":"img","data-testid":`rf__edge-${o}`,"aria-label":ge===null?void 0:ge||`Edge from ${M} to ${O}`,"aria-describedby":we?`${K0}-${de}`:void 0,ref:Ye},!_t&&pe.createElement(n,{id:o,source:M,target:O,selected:g,animated:m,label:y,labelStyle:p,labelShowBg:S,labelBgStyle:E,labelBgPadding:R,labelBgBorderRadius:T,data:f,style:k,sourceX:U,sourceY:w,targetX:J,targetY:Q,sourcePosition:F,targetPosition:ce,sourceHandleId:oe,targetHandleId:me,markerStart:pt,markerEnd:We,pathOptions:ke,interactionWidth:qe}),Ce&&pe.createElement(pe.Fragment,null,(Ce==="source"||Ce===!0)&&pe.createElement(Rv,{position:F,centerX:U,centerY:w,radius:L,onMouseDown:zn,onMouseEnter:qt,onMouseOut:cn,type:"source"}),(Ce==="target"||Ce===!0)&&pe.createElement(Rv,{position:ce,centerX:J,centerY:Q,radius:L,onMouseDown:tt,onMouseEnter:qt,onMouseOut:cn,type:"target"})))};return a.displayName="EdgeWrapper",A.memo(a)};function xw(n){const a={default:vo(n.default||Oc),straight:vo(n.bezier||Lf),step:vo(n.step||Vf),smoothstep:vo(n.step||Bc),simplebezier:vo(n.simplebezier||Yf)},o={},s=Object.keys(n).filter(c=>!["default","bezier"].includes(c)).reduce((c,f)=>(c[f]=vo(n[f]||Oc),c),o);return{...a,...s}}function jv(n,a,o=null){const s=(o?.x||0)+a.x,c=(o?.y||0)+a.y,f=o?.width||a.width,d=o?.height||a.height;switch(n){case He.Top:return{x:s+f/2,y:c};case He.Right:return{x:s+f,y:c+d/2};case He.Bottom:return{x:s+f/2,y:c+d};case He.Left:return{x:s,y:c+d/2}}}function Hv(n,a){return n?n.length===1||!a?n[0]:a&&n.find(o=>o.id===a)||null:null}const bw=(n,a,o,s,c,f)=>{const d=jv(o,n,a),h=jv(f,s,c);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y}};function Sw({sourcePos:n,targetPos:a,sourceWidth:o,sourceHeight:s,targetWidth:c,targetHeight:f,width:d,height:h,transform:g}){const m={x:Math.min(n.x,a.x),y:Math.min(n.y,a.y),x2:Math.max(n.x+o,a.x+c),y2:Math.max(n.y+s,a.y+f)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=$s({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:d/g[2],height:h/g[2]}),p=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),S=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(p*S)>0}function Gv(n){const a=n?.[en]?.handleBounds||null,o=a&&n?.width&&n?.height&&typeof n?.positionAbsolute?.x<"u"&&typeof n?.positionAbsolute?.y<"u";return[{x:n?.positionAbsolute?.x||0,y:n?.positionAbsolute?.y||0,width:n?.width||0,height:n?.height||0},a,!!o]}const Nw=[{level:0,isMaxLevel:!0,edges:[]}];function _w(n,a,o=!1){let s=-1;const c=n.reduce((d,h)=>{const g=mi(h.zIndex);let m=g?h.zIndex:0;if(o){const y=a.get(h.target),p=a.get(h.source),S=h.selected||y?.selected||p?.selected,E=Math.max(p?.[en]?.z||0,y?.[en]?.z||0,1e3);m=(g?h.zIndex:0)+(S?E:0)}return d[m]?d[m].push(h):d[m]=[h],s=m>s?m:s,d},{}),f=Object.entries(c).map(([d,h])=>{const g=+d;return{edges:h,level:g,isMaxLevel:g===s}});return f.length===0?Nw:f}function Ew(n,a,o){const s=$t(A.useCallback(c=>n?c.edges.filter(f=>{const d=a.get(f.source),h=a.get(f.target);return d?.width&&d?.height&&h?.width&&h?.height&&Sw({sourcePos:d.positionAbsolute||{x:0,y:0},targetPos:h.positionAbsolute||{x:0,y:0},sourceWidth:d.width,sourceHeight:d.height,targetWidth:h.width,targetHeight:h.height,width:c.width,height:c.height,transform:c.transform})}):c.edges,[n,a]));return _w(s,a,o)}const ww=({color:n="none",strokeWidth:a=1})=>pe.createElement("polyline",{style:{stroke:n,strokeWidth:a},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Aw=({color:n="none",strokeWidth:a=1})=>pe.createElement("polyline",{style:{stroke:n,fill:n,strokeWidth:a},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Uv={[Gi.Arrow]:ww,[Gi.ArrowClosed]:Aw};function Cw(n){const a=hn();return A.useMemo(()=>Object.prototype.hasOwnProperty.call(Uv,n)?Uv[n]:(a.getState().onError?.("009",ha.error009(n)),null),[n])}const Tw=({id:n,type:a,color:o,width:s=12.5,height:c=12.5,markerUnits:f="strokeWidth",strokeWidth:d,orient:h="auto-start-reverse"})=>{const g=Cw(a);return g?pe.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${s}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:f,orient:h,refX:"0",refY:"0"},pe.createElement(g,{color:o,strokeWidth:d})):null},Dw=({defaultColor:n,rfId:a})=>o=>{const s=[];return o.edges.reduce((c,f)=>([f.markerStart,f.markerEnd].forEach(d=>{if(d&&typeof d=="object"){const h=Ef(d,a);s.includes(h)||(c.push({id:h,color:d.color||n,...d}),s.push(h))}}),c),[]).sort((c,f)=>c.id.localeCompare(f.id))},oy=({defaultColor:n,rfId:a})=>{const o=$t(A.useCallback(Dw({defaultColor:n,rfId:a}),[n,a]),(s,c)=>!(s.length!==c.length||s.some((f,d)=>f.id!==c[d].id)));return pe.createElement("defs",null,o.map(s=>pe.createElement(Tw,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};oy.displayName="MarkerDefinitions";var Mw=A.memo(oy);const zw=n=>({nodesConnectable:n.nodesConnectable,edgesFocusable:n.edgesFocusable,edgesUpdatable:n.edgesUpdatable,elementsSelectable:n.elementsSelectable,width:n.width,height:n.height,connectionMode:n.connectionMode,nodeInternals:n.nodeInternals,onError:n.onError}),sy=({defaultMarkerColor:n,onlyRenderVisibleElements:a,elevateEdgesOnSelect:o,rfId:s,edgeTypes:c,noPanClassName:f,onEdgeContextMenu:d,onEdgeMouseEnter:h,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:p,onReconnect:S,onReconnectStart:E,onReconnectEnd:R,reconnectRadius:T,children:k,disableKeyboardA11y:M})=>{const{edgesFocusable:O,edgesUpdatable:U,elementsSelectable:w,width:J,height:Q,connectionMode:F,nodeInternals:ce,onError:ue}=$t(zw,Vn),te=Ew(a,ce,o);return J?pe.createElement(pe.Fragment,null,te.map(({level:oe,edges:me,isMaxLevel:ve})=>pe.createElement("svg",{key:oe,style:{zIndex:oe},width:J,height:Q,className:"react-flow__edges react-flow__container"},ve&&pe.createElement(Mw,{defaultColor:n,rfId:s}),pe.createElement("g",null,me.map(z=>{const[B,N,L]=Gv(ce.get(z.source)),[ne,I,se]=Gv(ce.get(z.target));if(!L||!se)return null;let D=z.type||"default";c[D]||(ue?.("011",ha.error011(D)),D="default");const V=c[D]||c.default,de=F===Cl.Strict?I.target:(I.target??[]).concat(I.source??[]),ge=Hv(N.source,z.sourceHandle),we=Hv(de,z.targetHandle),Ce=ge?.position||He.Bottom,ke=we?.position||He.Top,qe=!!(z.focusable||O&&typeof z.focusable>"u"),Oe=z.reconnectable||z.updatable,Ye=typeof S<"u"&&(Oe||U&&typeof Oe>"u");if(!ge||!we)return ue?.("008",ha.error008(ge,z)),null;const{sourceX:at,sourceY:Pe,targetX:_t,targetY:gt}=bw(B,ge,Ce,ne,we,ke);return pe.createElement(V,{key:z.id,id:z.id,className:_n([z.className,f]),type:D,data:z.data,selected:!!z.selected,animated:!!z.animated,hidden:!!z.hidden,label:z.label,labelStyle:z.labelStyle,labelShowBg:z.labelShowBg,labelBgStyle:z.labelBgStyle,labelBgPadding:z.labelBgPadding,labelBgBorderRadius:z.labelBgBorderRadius,style:z.style,source:z.source,target:z.target,sourceHandleId:z.sourceHandle,targetHandleId:z.targetHandle,markerEnd:z.markerEnd,markerStart:z.markerStart,sourceX:at,sourceY:Pe,targetX:_t,targetY:gt,sourcePosition:Ce,targetPosition:ke,elementsSelectable:w,onContextMenu:d,onMouseEnter:h,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:p,onReconnect:S,onReconnectStart:E,onReconnectEnd:R,reconnectRadius:T,rfId:s,ariaLabel:z.ariaLabel,isFocusable:qe,isReconnectable:Ye,pathOptions:"pathOptions"in z?z.pathOptions:void 0,interactionWidth:z.interactionWidth,disableKeyboardA11y:M})})))),k):null};sy.displayName="EdgeRenderer";var kw=A.memo(sy);const Ow=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function qw({children:n}){const a=$t(Ow);return pe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:a}},n)}function Rw(n){const a=Kf(),o=A.useRef(!1);A.useEffect(()=>{!o.current&&a.viewportInitialized&&n&&(setTimeout(()=>n(a),1),o.current=!0)},[n,a.viewportInitialized])}const jw={[He.Left]:He.Right,[He.Right]:He.Left,[He.Top]:He.Bottom,[He.Bottom]:He.Top},ry=({nodeId:n,handleType:a,style:o,type:s=ji.Bezier,CustomComponent:c,connectionStatus:f})=>{const{fromNode:d,handleId:h,toX:g,toY:m,connectionMode:y}=$t(A.useCallback(Q=>({fromNode:Q.nodeInternals.get(n),handleId:Q.connectionHandleId,toX:(Q.connectionPosition.x-Q.transform[0])/Q.transform[2],toY:(Q.connectionPosition.y-Q.transform[1])/Q.transform[2],connectionMode:Q.connectionMode}),[n]),Vn),p=d?.[en]?.handleBounds;let S=p?.[a];if(y===Cl.Loose&&(S=S||p?.[a==="source"?"target":"source"]),!d||!S)return null;const E=h?S.find(Q=>Q.id===h):S[0],R=E?E.x+E.width/2:(d.width??0)/2,T=E?E.y+E.height/2:d.height??0,k=(d.positionAbsolute?.x??0)+R,M=(d.positionAbsolute?.y??0)+T,O=E?.position,U=O?jw[O]:null;if(!O||!U)return null;if(c)return pe.createElement(c,{connectionLineType:s,connectionLineStyle:o,fromNode:d,fromHandle:E,fromX:k,fromY:M,toX:g,toY:m,fromPosition:O,toPosition:U,connectionStatus:f});let w="";const J={sourceX:k,sourceY:M,sourcePosition:O,targetX:g,targetY:m,targetPosition:U};return s===ji.Bezier?[w]=Xf(J):s===ji.Step?[w]=_f({...J,borderRadius:0}):s===ji.SmoothStep?[w]=_f(J):s===ji.SimpleBezier?[w]=O0(J):w=`M${k},${M} ${g},${m}`,pe.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:o})};ry.displayName="ConnectionLine";const Hw=n=>({nodeId:n.connectionNodeId,handleType:n.connectionHandleType,nodesConnectable:n.nodesConnectable,connectionStatus:n.connectionStatus,width:n.width,height:n.height});function Gw({containerStyle:n,style:a,type:o,component:s}){const{nodeId:c,handleType:f,nodesConnectable:d,width:h,height:g,connectionStatus:m}=$t(Hw,Vn);return!(c&&f&&h&&d)?null:pe.createElement("svg",{style:n,width:h,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},pe.createElement("g",{className:_n(["react-flow__connection",m])},pe.createElement(ry,{nodeId:c,handleType:f,style:a,type:o,CustomComponent:s,connectionStatus:m})))}function Bv(n,a){return A.useRef(null),hn(),A.useMemo(()=>a(n),[n])}const cy=({nodeTypes:n,edgeTypes:a,onMove:o,onMoveStart:s,onMoveEnd:c,onInit:f,onNodeClick:d,onEdgeClick:h,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:p,onNodeMouseLeave:S,onNodeContextMenu:E,onSelectionContextMenu:R,onSelectionStart:T,onSelectionEnd:k,connectionLineType:M,connectionLineStyle:O,connectionLineComponent:U,connectionLineContainerStyle:w,selectionKeyCode:J,selectionOnDrag:Q,selectionMode:F,multiSelectionKeyCode:ce,panActivationKeyCode:ue,zoomActivationKeyCode:te,deleteKeyCode:oe,onlyRenderVisibleElements:me,elementsSelectable:ve,selectNodesOnDrag:z,defaultViewport:B,translateExtent:N,minZoom:L,maxZoom:ne,preventScrolling:I,defaultMarkerColor:se,zoomOnScroll:D,zoomOnPinch:V,panOnScroll:de,panOnScrollSpeed:ge,panOnScrollMode:we,zoomOnDoubleClick:Ce,panOnDrag:ke,onPaneClick:qe,onPaneMouseEnter:Oe,onPaneMouseMove:Ye,onPaneMouseLeave:at,onPaneScroll:Pe,onPaneContextMenu:_t,onEdgeContextMenu:gt,onEdgeMouseEnter:et,onEdgeMouseMove:pt,onEdgeMouseLeave:We,onReconnect:je,onReconnectStart:Et,onReconnectEnd:Qt,reconnectRadius:vn,noDragClassName:Mn,noWheelClassName:En,noPanClassName:wt,elevateEdgesOnSelect:zn,disableKeyboardA11y:tt,nodeOrigin:qt,nodeExtent:cn,rfId:Rt})=>{const wn=Bv(n,fw),dt=Bv(a,xw);return Rw(f),pe.createElement(uw,{onPaneClick:qe,onPaneMouseEnter:Oe,onPaneMouseMove:Ye,onPaneMouseLeave:at,onPaneContextMenu:_t,onPaneScroll:Pe,deleteKeyCode:oe,selectionKeyCode:J,selectionOnDrag:Q,selectionMode:F,onSelectionStart:T,onSelectionEnd:k,multiSelectionKeyCode:ce,panActivationKeyCode:ue,zoomActivationKeyCode:te,elementsSelectable:ve,onMove:o,onMoveStart:s,onMoveEnd:c,zoomOnScroll:D,zoomOnPinch:V,zoomOnDoubleClick:Ce,panOnScroll:de,panOnScrollSpeed:ge,panOnScrollMode:we,panOnDrag:ke,defaultViewport:B,translateExtent:N,minZoom:L,maxZoom:ne,onSelectionContextMenu:R,preventScrolling:I,noDragClassName:Mn,noWheelClassName:En,noPanClassName:wt,disableKeyboardA11y:tt},pe.createElement(qw,null,pe.createElement(kw,{edgeTypes:dt,onEdgeClick:h,onEdgeDoubleClick:m,onlyRenderVisibleElements:me,onEdgeContextMenu:gt,onEdgeMouseEnter:et,onEdgeMouseMove:pt,onEdgeMouseLeave:We,onReconnect:je,onReconnectStart:Et,onReconnectEnd:Qt,reconnectRadius:vn,defaultMarkerColor:se,noPanClassName:wt,elevateEdgesOnSelect:!!zn,disableKeyboardA11y:tt,rfId:Rt},pe.createElement(Gw,{style:O,type:M,component:U,containerStyle:w})),pe.createElement("div",{className:"react-flow__edgelabel-renderer"}),pe.createElement(gw,{nodeTypes:wn,onNodeClick:d,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:p,onNodeMouseLeave:S,onNodeContextMenu:E,selectNodesOnDrag:z,onlyRenderVisibleElements:me,noPanClassName:wt,noDragClassName:Mn,disableKeyboardA11y:tt,nodeOrigin:qt,nodeExtent:cn,rfId:Rt})))};cy.displayName="GraphView";var Uw=A.memo(cy);const Tf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],La={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Tf,nodeExtent:Tf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Cl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:hE,isValidConnection:void 0},Bw=()=>T1((n,a)=>({...La,setNodes:o=>{const{nodeInternals:s,nodeOrigin:c,elevateNodesOnSelect:f}=a();n({nodeInternals:lf(o,s,c,f)})},getNodes:()=>Array.from(a().nodeInternals.values()),setEdges:o=>{const{defaultEdgeOptions:s={}}=a();n({edges:o.map(c=>({...s,...c}))})},setDefaultNodesAndEdges:(o,s)=>{const c=typeof o<"u",f=typeof s<"u",d=c?lf(o,new Map,a().nodeOrigin,a().elevateNodesOnSelect):new Map;n({nodeInternals:d,edges:f?s:[],hasDefaultNodes:c,hasDefaultEdges:f})},updateNodeDimensions:o=>{const{onNodesChange:s,nodeInternals:c,fitViewOnInit:f,fitViewOnInitDone:d,fitViewOnInitOptions:h,domNode:g,nodeOrigin:m}=a(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const p=window.getComputedStyle(y),{m22:S}=new window.DOMMatrixReadOnly(p.transform),E=o.reduce((T,k)=>{const M=c.get(k.id);if(M?.hidden)c.set(M.id,{...M,[en]:{...M[en],handleBounds:void 0}});else if(M){const O=Bf(k.nodeElement);O.width&&O.height&&(M.width!==O.width||M.height!==O.height||k.forceUpdate)&&(c.set(M.id,{...M,[en]:{...M[en],handleBounds:{source:Ov(".source",k.nodeElement,S,m),target:Ov(".target",k.nodeElement,S,m)}},...O}),T.push({id:M.id,type:"dimensions",dimensions:O}))}return T},[]);F0(c,m);const R=d||f&&!d&&W0(a,{initial:!0,...h});n({nodeInternals:new Map(c),fitViewOnInitDone:R}),E?.length>0&&s?.(E)},updateNodePositions:(o,s=!0,c=!1)=>{const{triggerNodeChanges:f}=a(),d=o.map(h=>{const g={id:h.id,type:"position",dragging:c};return s&&(g.positionAbsolute=h.positionAbsolute,g.position=h.position),g});f(d)},triggerNodeChanges:o=>{const{onNodesChange:s,nodeInternals:c,hasDefaultNodes:f,nodeOrigin:d,getNodes:h,elevateNodesOnSelect:g}=a();if(o?.length){if(f){const m=Ff(o,h()),y=lf(m,c,d,g);n({nodeInternals:y})}s?.(o)}},addSelectedNodes:o=>{const{multiSelectionActive:s,edges:c,getNodes:f}=a();let d,h=null;s?d=o.map(g=>Ka(g,!0)):(d=bo(f(),o),h=bo(c,[])),pc({changedNodes:d,changedEdges:h,get:a,set:n})},addSelectedEdges:o=>{const{multiSelectionActive:s,edges:c,getNodes:f}=a();let d,h=null;s?d=o.map(g=>Ka(g,!0)):(d=bo(c,o),h=bo(f(),[])),pc({changedNodes:h,changedEdges:d,get:a,set:n})},unselectNodesAndEdges:({nodes:o,edges:s}={})=>{const{edges:c,getNodes:f}=a(),d=o||f(),h=s||c,g=d.map(y=>(y.selected=!1,Ka(y.id,!1))),m=h.map(y=>Ka(y.id,!1));pc({changedNodes:g,changedEdges:m,get:a,set:n})},setMinZoom:o=>{const{d3Zoom:s,maxZoom:c}=a();s?.scaleExtent([o,c]),n({minZoom:o})},setMaxZoom:o=>{const{d3Zoom:s,minZoom:c}=a();s?.scaleExtent([c,o]),n({maxZoom:o})},setTranslateExtent:o=>{a().d3Zoom?.translateExtent(o),n({translateExtent:o})},resetSelectedElements:()=>{const{edges:o,getNodes:s}=a(),f=s().filter(h=>h.selected).map(h=>Ka(h.id,!1)),d=o.filter(h=>h.selected).map(h=>Ka(h.id,!1));pc({changedNodes:f,changedEdges:d,get:a,set:n})},setNodeExtent:o=>{const{nodeInternals:s}=a();s.forEach(c=>{c.positionAbsolute=$f(c.position,o)}),n({nodeExtent:o,nodeInternals:new Map(s)})},panBy:o=>{const{transform:s,width:c,height:f,d3Zoom:d,d3Selection:h,translateExtent:g}=a();if(!d||!h||!o.x&&!o.y)return!1;const m=da.translate(s[0]+o.x,s[1]+o.y).scale(s[2]),y=[[0,0],[c,f]],p=d?.constrain()(m,y,g);return d.transform(h,p),s[0]!==p.x||s[1]!==p.y||s[2]!==p.k},cancelConnection:()=>n({connectionNodeId:La.connectionNodeId,connectionHandleId:La.connectionHandleId,connectionHandleType:La.connectionHandleType,connectionStatus:La.connectionStatus,connectionStartHandle:La.connectionStartHandle,connectionEndHandle:La.connectionEndHandle}),reset:()=>n({...La})}),Object.is),uy=({children:n})=>{const a=A.useRef(null);return a.current||(a.current=Bw()),pe.createElement(oE,{value:a.current},n)};uy.displayName="ReactFlowProvider";const dy=({children:n})=>A.useContext(Uc)?pe.createElement(pe.Fragment,null,n):pe.createElement(uy,null,n);dy.displayName="ReactFlowWrapper";const $w={input:L0,default:Af,output:Z0,group:Qf},Yw={default:Oc,straight:Lf,step:Vf,smoothstep:Bc,simplebezier:Yf},Vw=[0,0],Lw=[15,15],Xw={x:0,y:0,zoom:1},Zw={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Wf=A.forwardRef(({nodes:n,edges:a,defaultNodes:o,defaultEdges:s,className:c,nodeTypes:f=$w,edgeTypes:d=Yw,onNodeClick:h,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:p,onMoveEnd:S,onConnect:E,onConnectStart:R,onConnectEnd:T,onClickConnectStart:k,onClickConnectEnd:M,onNodeMouseEnter:O,onNodeMouseMove:U,onNodeMouseLeave:w,onNodeContextMenu:J,onNodeDoubleClick:Q,onNodeDragStart:F,onNodeDrag:ce,onNodeDragStop:ue,onNodesDelete:te,onEdgesDelete:oe,onSelectionChange:me,onSelectionDragStart:ve,onSelectionDrag:z,onSelectionDragStop:B,onSelectionContextMenu:N,onSelectionStart:L,onSelectionEnd:ne,connectionMode:I=Cl.Strict,connectionLineType:se=ji.Bezier,connectionLineStyle:D,connectionLineComponent:V,connectionLineContainerStyle:de,deleteKeyCode:ge="Backspace",selectionKeyCode:we="Shift",selectionOnDrag:Ce=!1,selectionMode:ke=Ys.Full,panActivationKeyCode:qe="Space",multiSelectionKeyCode:Oe=kc()?"Meta":"Control",zoomActivationKeyCode:Ye=kc()?"Meta":"Control",snapToGrid:at=!1,snapGrid:Pe=Lw,onlyRenderVisibleElements:_t=!1,selectNodesOnDrag:gt=!0,nodesDraggable:et,nodesConnectable:pt,nodesFocusable:We,nodeOrigin:je=Vw,edgesFocusable:Et,edgesUpdatable:Qt,elementsSelectable:vn,defaultViewport:Mn=Xw,minZoom:En=.5,maxZoom:wt=2,translateExtent:zn=Tf,preventScrolling:tt=!0,nodeExtent:qt,defaultMarkerColor:cn="#b1b1b7",zoomOnScroll:Rt=!0,zoomOnPinch:wn=!0,panOnScroll:dt=!1,panOnScrollSpeed:De=.5,panOnScrollMode:ie=Nl.Free,zoomOnDoubleClick:ee=!0,panOnDrag:be=!0,onPaneClick:Be,onPaneMouseEnter:ft,onPaneMouseMove:Xe,onPaneMouseLeave:Tt,onPaneScroll:Qe,onPaneContextMenu:Ze,children:Yt,onEdgeContextMenu:vt,onEdgeDoubleClick:mt,onEdgeMouseEnter:An,onEdgeMouseMove:ni,onEdgeMouseLeave:Bi,onEdgeUpdate:ma,onEdgeUpdateStart:Ti,onEdgeUpdateEnd:Fe,onReconnect:lt,onReconnectStart:ga,onReconnectEnd:pa,reconnectRadius:yn=10,edgeUpdaterRadius:un=10,onNodesChange:Cn,onEdgesChange:tl,noDragClassName:Ln="nodrag",noWheelClassName:Kt="nowheel",noPanClassName:bt="nopan",fitView:gi=!1,fitViewOptions:nl,connectOnClick:Mo=!0,attributionPosition:zo,proOptions:va,defaultEdgeOptions:$i,elevateNodesOnSelect:il=!0,elevateEdgesOnSelect:Di=!1,disableKeyboardA11y:pi=!1,autoPanOnConnect:Yi=!0,autoPanOnNodeDrag:Mi=!0,connectionRadius:Jt=20,isValidConnection:Tl,onError:Dl,style:vi,id:yi,nodeDragThreshold:ko,...Ml},zl)=>{const Vi=yi||"1";return pe.createElement("div",{...Ml,style:{...vi,...Zw},ref:zl,className:_n(["react-flow",c]),"data-testid":"rf__wrapper",id:yi},pe.createElement(dy,null,pe.createElement(Uw,{onInit:m,onMove:y,onMoveStart:p,onMoveEnd:S,onNodeClick:h,onEdgeClick:g,onNodeMouseEnter:O,onNodeMouseMove:U,onNodeMouseLeave:w,onNodeContextMenu:J,onNodeDoubleClick:Q,nodeTypes:f,edgeTypes:d,connectionLineType:se,connectionLineStyle:D,connectionLineComponent:V,connectionLineContainerStyle:de,selectionKeyCode:we,selectionOnDrag:Ce,selectionMode:ke,deleteKeyCode:ge,multiSelectionKeyCode:Oe,panActivationKeyCode:qe,zoomActivationKeyCode:Ye,onlyRenderVisibleElements:_t,selectNodesOnDrag:gt,defaultViewport:Mn,translateExtent:zn,minZoom:En,maxZoom:wt,preventScrolling:tt,zoomOnScroll:Rt,zoomOnPinch:wn,zoomOnDoubleClick:ee,panOnScroll:dt,panOnScrollSpeed:De,panOnScrollMode:ie,panOnDrag:be,onPaneClick:Be,onPaneMouseEnter:ft,onPaneMouseMove:Xe,onPaneMouseLeave:Tt,onPaneScroll:Qe,onPaneContextMenu:Ze,onSelectionContextMenu:N,onSelectionStart:L,onSelectionEnd:ne,onEdgeContextMenu:vt,onEdgeDoubleClick:mt,onEdgeMouseEnter:An,onEdgeMouseMove:ni,onEdgeMouseLeave:Bi,onReconnect:lt??ma,onReconnectStart:ga??Ti,onReconnectEnd:pa??Fe,reconnectRadius:yn??un,defaultMarkerColor:cn,noDragClassName:Ln,noWheelClassName:Kt,noPanClassName:bt,elevateEdgesOnSelect:Di,rfId:Vi,disableKeyboardA11y:pi,nodeOrigin:je,nodeExtent:qt}),pe.createElement(jE,{nodes:n,edges:a,defaultNodes:o,defaultEdges:s,onConnect:E,onConnectStart:R,onConnectEnd:T,onClickConnectStart:k,onClickConnectEnd:M,nodesDraggable:et,nodesConnectable:pt,nodesFocusable:We,edgesFocusable:Et,edgesUpdatable:Qt,elementsSelectable:vn,elevateNodesOnSelect:il,minZoom:En,maxZoom:wt,nodeExtent:qt,onNodesChange:Cn,onEdgesChange:tl,snapToGrid:at,snapGrid:Pe,connectionMode:I,translateExtent:zn,connectOnClick:Mo,defaultEdgeOptions:$i,fitView:gi,fitViewOptions:nl,onNodesDelete:te,onEdgesDelete:oe,onNodeDragStart:F,onNodeDrag:ce,onNodeDragStop:ue,onSelectionDrag:z,onSelectionDragStart:ve,onSelectionDragStop:B,noPanClassName:bt,nodeOrigin:je,rfId:Vi,autoPanOnConnect:Yi,autoPanOnNodeDrag:Mi,onError:Dl,connectionRadius:Jt,isValidConnection:Tl,nodeDragThreshold:ko}),pe.createElement(qE,{onSelectionChange:me}),Yt,pe.createElement(rE,{proOptions:va,position:zo}),pe.createElement($E,{rfId:Vi,disableKeyboardA11y:pi})))});Wf.displayName="ReactFlow";function fy(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[s,c]of n)if(!Object.is(c,a.get(s)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const s of n)if(!a.has(s))return!1;return!0}const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(n[s],a[s]))return!1;return!0}const hy=({id:n,x:a,y:o,width:s,height:c,style:f,color:d,strokeColor:h,strokeWidth:g,className:m,borderRadius:y,shapeRendering:p,onClick:S,selected:E})=>{const{background:R,backgroundColor:T}=f||{},k=d||R||T;return pe.createElement("rect",{className:_n(["react-flow__minimap-node",{selected:E},m]),x:a,y:o,rx:y,ry:y,width:s,height:c,fill:k,stroke:h,strokeWidth:g,shapeRendering:p,onClick:S?M=>S(M,n):void 0})};hy.displayName="MiniMapNode";var Iw=A.memo(hy);const Qw=n=>n.nodeOrigin,Kw=n=>n.getNodes().filter(a=>!a.hidden&&a.width&&a.height),cf=n=>n instanceof Function?n:()=>n;function Jw({nodeStrokeColor:n="transparent",nodeColor:a="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:c=2,nodeComponent:f=Iw,onClick:d}){const h=$t(Kw,fy),g=$t(Qw),m=cf(a),y=cf(n),p=cf(o),S=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return pe.createElement(pe.Fragment,null,h.map(E=>{const{x:R,y:T}=wl(E,g).positionAbsolute;return pe.createElement(f,{key:E.id,x:R,y:T,width:E.width,height:E.height,style:E.style,selected:E.selected,className:p(E),color:m(E),borderRadius:s,strokeColor:y(E),strokeWidth:c,shapeRendering:S,onClick:d,id:E.id})}))}var Fw=A.memo(Jw);const Ww=200,Pw=150,e2=n=>{const a=n.getNodes(),o={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:o,boundingRect:a.length>0?dE($c(a,n.nodeOrigin),o):o,rfId:n.rfId}},t2="react-flow__minimap-desc";function my({style:n,className:a,nodeStrokeColor:o="transparent",nodeColor:s="#e2e2e2",nodeClassName:c="",nodeBorderRadius:f=5,nodeStrokeWidth:d=2,nodeComponent:h,maskColor:g="rgb(240, 240, 240, 0.6)",maskStrokeColor:m="none",maskStrokeWidth:y=1,position:p="bottom-right",onClick:S,onNodeClick:E,pannable:R=!1,zoomable:T=!1,ariaLabel:k="React Flow mini map",inversePan:M=!1,zoomStep:O=10,offsetScale:U=5}){const w=hn(),J=A.useRef(null),{boundingRect:Q,viewBB:F,rfId:ce}=$t(e2,fy),ue=n?.width??Ww,te=n?.height??Pw,oe=Q.width/ue,me=Q.height/te,ve=Math.max(oe,me),z=ve*ue,B=ve*te,N=U*ve,L=Q.x-(z-Q.width)/2-N,ne=Q.y-(B-Q.height)/2-N,I=z+N*2,se=B+N*2,D=`${t2}-${ce}`,V=A.useRef(0);V.current=ve,A.useEffect(()=>{if(J.current){const we=hi(J.current),Ce=Oe=>{const{transform:Ye,d3Selection:at,d3Zoom:Pe}=w.getState();if(Oe.sourceEvent.type!=="wheel"||!at||!Pe)return;const _t=-Oe.sourceEvent.deltaY*(Oe.sourceEvent.deltaMode===1?.05:Oe.sourceEvent.deltaMode?1:.002)*O,gt=Ye[2]*Math.pow(2,_t);Pe.scaleTo(at,gt)},ke=Oe=>{const{transform:Ye,d3Selection:at,d3Zoom:Pe,translateExtent:_t,width:gt,height:et}=w.getState();if(Oe.sourceEvent.type!=="mousemove"||!at||!Pe)return;const pt=V.current*Math.max(1,Ye[2])*(M?-1:1),We={x:Ye[0]-Oe.sourceEvent.movementX*pt,y:Ye[1]-Oe.sourceEvent.movementY*pt},je=[[0,0],[gt,et]],Et=da.translate(We.x,We.y).scale(Ye[2]),Qt=Pe.constrain()(Et,je,_t);Pe.transform(at,Qt)},qe=_0().on("zoom",R?ke:null).on("zoom.wheel",T?Ce:null);return we.call(qe),()=>{we.on("zoom",null)}}},[R,T,M,O]);const de=S?we=>{const Ce=Ei(we);S(we,{x:Ce[0],y:Ce[1]})}:void 0,ge=E?(we,Ce)=>{const ke=w.getState().nodeInternals.get(Ce);E(we,ke)}:void 0;return pe.createElement(Uf,{position:p,style:n,className:_n(["react-flow__minimap",a]),"data-testid":"rf__minimap"},pe.createElement("svg",{width:ue,height:te,viewBox:`${L} ${ne} ${I} ${se}`,role:"img","aria-labelledby":D,ref:J,onClick:de},k&&pe.createElement("title",{id:D},k),pe.createElement(Fw,{onClick:ge,nodeColor:s,nodeStrokeColor:o,nodeBorderRadius:f,nodeClassName:c,nodeStrokeWidth:d,nodeComponent:h}),pe.createElement("path",{className:"react-flow__minimap-mask",d:`M${L-N},${ne-N}h${I+N*2}v${se+N*2}h${-I-N*2}z
        M${F.x},${F.y}h${F.width}v${F.height}h${-F.width}z`,fill:g,fillRule:"evenodd",stroke:m,strokeWidth:y,pointerEvents:"none"})))}my.displayName="MiniMap";var gy=A.memo(my);function n2(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[s,c]of n)if(!Object.is(c,a.get(s)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const s of n)if(!a.has(s))return!1;return!0}const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(n[s],a[s]))return!1;return!0}function i2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},pe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function a2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},pe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function l2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},pe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function o2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function s2(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Os=({children:n,className:a,...o})=>pe.createElement("button",{type:"button",className:_n(["react-flow__controls-button",a]),...o},n);Os.displayName="ControlButton";const r2=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom}),py=({style:n,showZoom:a=!0,showFitView:o=!0,showInteractive:s=!0,fitViewOptions:c,onZoomIn:f,onZoomOut:d,onFitView:h,onInteractiveChange:g,className:m,children:y,position:p="bottom-left"})=>{const S=hn(),[E,R]=A.useState(!1),{isInteractive:T,minZoomReached:k,maxZoomReached:M}=$t(r2,n2),{zoomIn:O,zoomOut:U,fitView:w}=Kf();if(A.useEffect(()=>{R(!0)},[]),!E)return null;const J=()=>{O(),f?.()},Q=()=>{U(),d?.()},F=()=>{w(c),h?.()},ce=()=>{S.setState({nodesDraggable:!T,nodesConnectable:!T,elementsSelectable:!T}),g?.(!T)};return pe.createElement(Uf,{className:_n(["react-flow__controls",m]),position:p,style:n,"data-testid":"rf__controls"},a&&pe.createElement(pe.Fragment,null,pe.createElement(Os,{onClick:J,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:M},pe.createElement(i2,null)),pe.createElement(Os,{onClick:Q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},pe.createElement(a2,null))),o&&pe.createElement(Os,{className:"react-flow__controls-fitview",onClick:F,title:"fit view","aria-label":"fit view"},pe.createElement(l2,null)),s&&pe.createElement(Os,{className:"react-flow__controls-interactive",onClick:ce,title:"toggle interactivity","aria-label":"toggle interactivity"},T?pe.createElement(s2,null):pe.createElement(o2,null)),y)};py.displayName="Controls";var vy=A.memo(py);function c2(n,a){if(Object.is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;if(n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(const[s,c]of n)if(!Object.is(c,a.get(s)))return!1;return!0}if(n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(const s of n)if(!a.has(s))return!1;return!0}const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(n[s],a[s]))return!1;return!0}var Pn;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Pn||(Pn={}));function u2({color:n,dimensions:a,lineWidth:o}){return pe.createElement("path",{stroke:n,strokeWidth:o,d:`M${a[0]/2} 0 V${a[1]} M0 ${a[1]/2} H${a[0]}`})}function d2({color:n,radius:a}){return pe.createElement("circle",{cx:a,cy:a,r:a,fill:n})}const f2={[Pn.Dots]:"#91919a",[Pn.Lines]:"#eee",[Pn.Cross]:"#e2e2e2"},h2={[Pn.Dots]:1,[Pn.Lines]:1,[Pn.Cross]:6},m2=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function yy({id:n,variant:a=Pn.Dots,gap:o=20,size:s,lineWidth:c=1,offset:f=2,color:d,style:h,className:g}){const m=A.useRef(null),{transform:y,patternId:p}=$t(m2,c2),S=d||f2[a],E=s||h2[a],R=a===Pn.Dots,T=a===Pn.Cross,k=Array.isArray(o)?o:[o,o],M=[k[0]*y[2]||1,k[1]*y[2]||1],O=E*y[2],U=T?[O,O]:M,w=R?[O/f,O/f]:[U[0]/f,U[1]/f];return pe.createElement("svg",{className:_n(["react-flow__background",g]),style:{...h,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},pe.createElement("pattern",{id:p+n,x:y[0]%M[0],y:y[1]%M[1],width:M[0],height:M[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},R?pe.createElement(d2,{color:S,radius:O/f}):pe.createElement(u2,{dimensions:U,color:S,lineWidth:c})),pe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+n})`}))}yy.displayName="Background";var xy=A.memo(yy);const g2={margin:8,minOverlap:1,maxIterations:40,fallbackWidth:300,fallbackHeight:170},p2=(n,a,o)=>{const s=n.measured;return{width:s?.width??n.width??a,height:s?.height??n.height??o}},$v=(n,a,o,s,c)=>{const{width:f,height:d}=p2(n,s,c);return{left:a,right:a+f,top:o,bottom:o+d,cx:a+f/2,cy:o+d/2}},v2=(n,a)=>({x:Math.min(n.right,a.right)-Math.max(n.left,a.left),y:Math.min(n.bottom,a.bottom)-Math.max(n.top,a.top)}),by=(n,a)=>{if(n.length<2)return n;const o={...g2,...a},s=n.map(c=>({...c,position:{...c.position}}));for(let c=0;c<o.maxIterations;c+=1){let f=!1;for(let d=0;d<s.length;d+=1)for(let h=d+1;h<s.length;h+=1){const g=s[d],m=s[h],y=$v(g,g.position.x,g.position.y,o.fallbackWidth,o.fallbackHeight),p=$v(m,m.position.x,m.position.y,o.fallbackWidth,o.fallbackHeight),S=v2(y,p);if(!(S.x<=o.minOverlap||S.y<=o.minOverlap))if(f=!0,S.x<S.y){const E=(S.x+o.margin)/2,R=y.cx<=p.cx?-1:1;g.position.x+=R*E,m.position.x-=R*E}else{const E=(S.y+o.margin)/2,R=y.cy<=p.cy?-1:1;g.position.y+=R*E,m.position.y-=R*E}}if(!f)break}return s},_l=(n,a,o,s,c)=>{const f=o.trim();if(!f)return;const d=`${f}|${s}|${c}`;a.has(d)||(a.add(d),n.push({condition:f,targetId:s,targetHandle:c}))},y2=n=>{const a=[],o=new Set;for(const s of n.menus){for(const c of s.requires)_l(a,o,c,s.id,"cond:node");for(const[c,f]of s.options.entries()){const d=an(n,f);if(d)for(const h of d.requires)_l(a,o,h,s.id,`cond:${ei(c)}`)}}for(const s of n.nodes){for(const c of s.requires)_l(a,o,c,s.id,"cond:node");for(const[c,f]of s.options.entries()){const d=an(n,f);if(d)for(const h of d.requires)_l(a,o,h,s.id,`cond:${ei(c)}`)}}return a},So=(n,a,o,s,c)=>{const f=o.trim();if(!f)return;const d=`${f}|${s}|${c}`;a.has(d)||(a.add(d),n.push({action:f,targetId:s,targetHandle:c}))},x2=n=>{const a=[],o=new Set;for(const s of n.menus){const c=s.itemAction?.trim();c&&So(a,o,c,s.id,"act:node");for(const[f,d]of s.options.entries()){const h=an(n,d);if(h)for(const g of h.actions)So(a,o,g,s.id,`act:${ei(f)}`)}}for(const s of n.nodes){for(const c of s.actions)So(a,o,c,s.id,"act:node");for(const[c,f]of s.options.entries()){const d=an(n,f);if(d)for(const h of d.actions)So(a,o,h,s.id,`act:${ei(c)}`)}}return a},b2=(n,a)=>{const o=[],s=new Set;for(const c of n.nodes){if(a.has(c.id))continue;for(const d of c.requires)_l(o,s,d,c.id,"cond:node");for(const[d,h]of c.options.entries()){const g=el(n,h,a);if(!g)continue;const m=ut(n,g);if(m)for(const y of m.requires)_l(o,s,y,c.id,`cond:${ei(d)}`)}const f=el(n,c.next,a);if(f){const d=ut(n,f);if(d)for(const h of d.requires)_l(o,s,h,c.id,"cond:next")}}return o},S2=(n,a)=>{const o=[],s=new Set;for(const c of n.nodes)if(!a.has(c.id)){for(const f of c.actions)So(o,s,f,c.id,"act:node");for(const[f,d]of c.options.entries()){const h=ut(n,d);if(h)for(const g of h.actions)So(o,s,g,c.id,`act:${ei(f)}`)}}return o},N2=n=>{if(!n||n.collapsed)return 0;const a=(n.editableText??n.body??"").replace(/\s+/g," ").trim(),o=Math.max(a.length,48),s=Math.max(2,Math.min(12,Math.ceil(o/38)));return Math.max(72,s*18+22)},Sy=(n,a)=>{if(!n)return 120;const o=38,s=n.collapsed?0:34,c=N2(n),f=o+s+c+19;if(a==="act:node")return f-8;if(a==="cond:node")return f+8;if(a==="cond:next")return f+36;const d=a.startsWith("cond:")?a.slice(5):a.startsWith("act:")?a.slice(4):a,h=jt(d);return h!==null?f+36*(h+1):f},_2=(n,a,o,s,c,f)=>{const d=n.find(S=>a[S.targetId]);if(!d)return{x:c,y:f};const h=a[d.targetId];if(!h)return{x:c,y:f};const g=s.get(d.targetId),m=232;if(o==="horizontal")return{x:h.x-m,y:h.y+Sy(g,d.targetHandle)};const y=d.targetHandle.startsWith("cond:")?d.targetHandle.slice(5):d.targetHandle,p=jt(y)??0;return{x:h.x+p*28,y:h.y-130}},Ny=(n,a,o,s,c,f,d)=>{const h=[...n.map(k=>k.condition),...a].map(k=>k.trim()).filter(Boolean);if(!h.length)return[];const g=Array.from(new Set(h)),m=Object.entries(s).filter(([k])=>!Bn(k)&&!$n(k)).map(([,k])=>k),y=m.length?Math.min(...m.map(k=>k.x)):0,p=m.length?Math.min(...m.map(k=>k.y)):0,S=y-240,E=new Map(f.map(k=>[k.id,k.data])),R=new Map;for(const k of n)R.has(k.condition)||R.set(k.condition,[]),R.get(k.condition)?.push(k);const T=new Set;return g.map((k,M)=>{const O=Xa(k);let U=o[O];if(!U){const w=_2(R.get(k)??[],s,c,E,S,p+M*76);let J=w,Q=0;for(;T.has(`${Math.round(J.x)}:${Math.round(J.y)}`)&&Q<12;)Q+=1,J=c==="horizontal"?{x:w.x,y:w.y+Q*22}:{x:w.x+Q*20,y:w.y};U=J}return T.add(`${Math.round(U.x)}:${Math.round(U.y)}`),{id:O,type:"sensei",position:U,className:"flow-node flow-node-condition",style:{width:170},data:{kind:"condition",nodeId:O,title:k,direction:c},selected:O===d,draggable:!0}})},E2=(n,a,o,s,c,f)=>{const d=n.find(S=>a[S.targetId]);if(!d)return{x:c,y:f};const h=a[d.targetId];if(!h)return{x:c,y:f};const g=s.get(d.targetId),m=270;if(o==="horizontal")return{x:h.x-m,y:h.y+Sy(g,d.targetHandle)};const y=d.targetHandle.startsWith("act:")?d.targetHandle.slice(4):d.targetHandle,p=jt(y)??0;return{x:h.x+p*28,y:h.y-160}},_y=(n,a,o,s,c,f,d)=>{const h=[...n.map(k=>k.action),...a].map(k=>k.trim()).filter(Boolean);if(!h.length)return[];const g=Array.from(new Set(h)),m=Object.entries(s).filter(([k])=>!$n(k)&&!Bn(k)).map(([,k])=>k),y=m.length?Math.min(...m.map(k=>k.x)):0,p=m.length?Math.min(...m.map(k=>k.y)):0,S=y-300,E=new Map(f.map(k=>[k.id,k.data])),R=new Map;for(const k of n)R.has(k.action)||R.set(k.action,[]),R.get(k.action)?.push(k);const T=new Set;return g.map((k,M)=>{const O=ra(k);let U=o[O];if(!U){const w=E2(R.get(k)??[],s,c,E,S,p+M*70);let J=w,Q=0;for(;T.has(`${Math.round(J.x)}:${Math.round(J.y)}`)&&Q<12;)Q+=1,J=c==="horizontal"?{x:w.x,y:w.y+Q*22}:{x:w.x+Q*20,y:w.y};U=J}return T.add(`${Math.round(U.x)}:${Math.round(U.y)}`),{id:O,type:"sensei",position:U,className:"flow-node flow-node-action",style:{width:180},data:{kind:"action",nodeId:O,title:k,direction:c},selected:O===d,draggable:!0}})},w2=(n,a,o,s,c,f,d,h,g,m,y,p,S,E)=>n.map(R=>{const T=No(R),k=R.kind,M=o[T]??{x:0,y:0};let O="",U="",w=[],J=[],Q=!1,F,ce=!1,ue,te,oe;const me=f.has(T);if(k==="menu"){const N=R.data;oe=Nc({id:N.id,color:N.color,kind:"menu"}),J=N.options,Q=N.requires.length>0,F=N.requires[0],ce=!!N.itemAction?.trim(),ue=N.itemAction?.trim()||void 0,te=N.text,O=`text = ${Wa(N.text)}`;const L=[];N.source&&L.push(`source = ${N.source}`),N.autoRoute&&L.push("auto_route = true"),N.backBlocked&&L.push("back_blocked = true"),U=L.join(" | "),w=N.options.map((ne,I)=>{const se=an(a,ne);return{id:ei(I),label:_c(a,ne),hasCondition:!!se?.requires.length,conditionText:se?.requires[0],hasAction:!!se?.actions.length,actionText:se?.actions[0],editable:!0}})}else if(k==="option"){const N=R.data;te=N.label,O=`label = ${Wa(N.label)}`,U=N.target?`target = ${N.target}`:"",w=[{id:"target",label:N.target?"Go to response":"Set next response",hasCondition:N.requires.length>0,conditionText:N.requires[0],editable:!1}]}else{const N=R.data;oe=Nc({id:N.id,color:N.color,kind:"node"}),J=N.options,Q=N.requires.length>0,F=N.requires[0],ce=N.actions.length>0,ue=N.actions[0],te=N.text,O=`text = ${Wa(N.text)}`;const L=[];N.next?L.push(`next = ${N.next}`):N.options.length&&L.push(`options = ${N.options.length}`),N.backBlocked&&L.push("back_blocked = true"),U=L.join(" | "),w=N.options.map((ne,I)=>{const se=an(a,ne);return{id:ei(I),label:_c(a,ne),hasCondition:!!se?.requires.length,conditionText:se?.requires[0],hasAction:!!se?.actions.length,actionText:se?.actions[0],editable:!0}}),w.push({id:"next",label:N.next?"Continue":"Set continue",editable:!1})}const ve=k==="menu"||k==="node",z=!0,B=ve&&J.length>0;return{id:T,type:"sensei",position:M,className:"flow-node",style:{width:320},data:{kind:k,nodeId:T,title:T,body:O,meta:U,nodeColor:oe,direction:c,outputs:w,outputOptionIds:J,nodeHasCondition:Q,nodeConditionText:F,nodeHasAction:ce,nodeActionText:ue,nodeHasIncoming:me,editableText:te,onTextChange:(N,L)=>d(k,N,L),onRequestMainEdit:k==="menu"||k==="node"?N=>h(k,N):void 0,onRequestOutputEdit:g,canAddChoice:ve,canAddCondition:z,canAddAction:B,onAddChoice:ve?m:void 0,onAddCondition:y,onAddAction:B?p:void 0,onReorderOutputs:ve?S:void 0,onCycleNodeColor:k==="menu"||k==="node"?E:void 0},selected:T===s,draggable:!0}}),A2=(n,a,o,s,c,f,d,h,g,m,y,p,S,E,R,T,k)=>a.map(M=>{const O=o[M.id]??{x:0,y:0},U=c[M.id]??!1,w=M.options.map((ue,te)=>{const oe=wc(n,ue),me=el(n,ue,f),ve=ut(n,ue);return{id:ei(te),label:Wa(oe||me||ue,72),hasCondition:!!ve?.requires.length,conditionText:ve?.requires[0],hasAction:!!ve?.actions.length,actionText:ve?.actions[0],editable:!0}}),J=el(n,M.next,f),Q=M.next?ut(n,M.next):void 0;w.push({id:"next",label:J?"Continue":"Set continue",hasCondition:!!Q?.requires.length,conditionText:Q?.requires[0],editable:!1});const F=M.quest?`quest = ${M.quest.questType}`:M.next?`next = ${M.next}`:M.options.length?`options = ${M.options.length}`:"",ce=df(M);return{id:M.id,type:"sensei",position:O,className:"flow-node",style:{width:320},data:{kind:"narrative",nodeId:M.id,title:M.id,body:`text = ${Wa(M.text)}`,meta:F,speaker:M.speaker,nodeColor:ce,optionCount:M.options.length,questType:M.quest?.questType,completion:!!M.completion,collapsed:U,onToggleCollapse:h,direction:g,outputs:w,outputOptionIds:M.options,nodeHasCondition:M.requires.length>0,nodeConditionText:M.requires[0],nodeHasAction:M.actions.length>0,nodeActionText:M.actions[0],nodeHasIncoming:d.has(M.id),editableText:M.text,onTextChange:m,onRequestMainEdit:y,onRequestOutputEdit:p,canAddChoice:!0,canAddCondition:!0,canAddAction:!0,onAddChoice:S,onAddCondition:E,onAddAction:R,onReorderOutputs:T,onCycleNodeColor:k},selected:M.id===s,draggable:!0}}),C2=(n,a)=>{const o=[],s=new Set,c=(d,h,g,m,y,p)=>{if(!d||!h||d===h)return;const S=`${d}:${g??""}->${h}:${m}`;if(s.has(S))return;s.add(S);const E=[];p&&E.push(p),y&&E.push("edge-node-color"),o.push({id:`e-${S}`,source:d,target:h,sourceHandle:g,targetHandle:m,className:E.length?E.join(" "):void 0,markerEnd:y?{type:Gi.ArrowClosed,width:16,height:16,color:y}:void 0,style:y?{strokeWidth:2.5,"--edge-color":y,"--edge-color-hover":y}:void 0})},f=d=>{const h=Gt(n,d);if(h)return Nc({id:h.id,color:h.color,kind:"menu"});const g=Ut(n,d);if(g)return Nc({id:g.id,color:g.color,kind:"node"})};for(const d of n.menus)for(const[h,g]of d.options.entries()){const m=Up(n,g);if(!m)continue;const y=!!a&&m===a;c(d.id,m,ei(h),Fa,f(m),y?"edge-choice edge-linked-selected":"edge-choice")}for(const d of n.nodes){for(const[h,g]of d.options.entries()){const m=Up(n,g);if(!m)continue;const y=!!a&&m===a;c(d.id,m,ei(h),Fa,f(m),y?"edge-choice edge-linked-selected":"edge-choice")}if(d.next){const h=wi(d.next,n);if(!h?.id)continue;const g=!!a&&h.id===a;c(d.id,h.id,"next",Fa,f(h.id),g?"edge-continue edge-linked-selected":"edge-continue")}}return o},T2=(n,a,o)=>{const s=[],c=new Set,f=(d,h,g,m,y,p)=>{if(!d||!h||d===h)return;const S=`${d}:${g??""}->${h}:${m}`;if(c.has(S))return;c.add(S);const E=[];p&&E.push(p),y&&E.push("edge-node-color"),s.push({id:`e-${S}`,source:d,target:h,sourceHandle:g,targetHandle:m,className:E.length?E.join(" "):void 0,markerEnd:y?{type:Gi.ArrowClosed,width:16,height:16,color:y}:void 0,style:y?{strokeWidth:2.5,"--edge-color":y,"--edge-color-hover":y}:void 0})};for(const d of n.nodes){if(a.has(d.id))continue;for(const[g,m]of d.options.entries()){const y=el(n,m,a);if(y){const p=ut(n,y),S=p?df(p):void 0,E=!!o&&y===o;f(d.id,y,ei(g),Fa,S,E?"edge-choice edge-linked-selected":"edge-choice")}}const h=el(n,d.next,a);if(h){const g=ut(n,h),m=g?df(g):void 0,y=!!o&&h===o;f(d.id,h,"next",Fa,m,y?"edge-continue edge-linked-selected":"edge-continue")}}return s},Ey=n=>{const a=[],o=new Set;for(const s of n){const c=Xa(s.condition),f=`${c}->${s.targetId}:${s.targetHandle}`;o.has(f)||(o.add(f),a.push({id:`e-${f}`,source:c,target:s.targetId,sourceHandle:"cond-out",targetHandle:s.targetHandle,className:"edge-condition",markerEnd:{type:Gi.ArrowClosed,width:16,height:16,color:"#fbbf24"},style:{stroke:"#fbbf24",strokeWidth:2.5}}))}return a},wy=n=>{const a=[],o=new Set;for(const s of n){const c=ra(s.action),f=`${c}->${s.targetId}:${s.targetHandle}`;o.has(f)||(o.add(f),a.push({id:`e-${f}`,source:c,target:s.targetId,sourceHandle:"act-out",targetHandle:s.targetHandle,className:"edge-action",markerEnd:{type:Gi.ArrowClosed,width:16,height:16,color:"#f87171"},style:{stroke:"#f87171",strokeWidth:2.5}}))}return a},D2=(n,a,o)=>{const s=Object.values(n);if(!s.length)return n;const c=Math.min(...s.map(m=>m.x)),f=Math.min(...s.map(m=>m.y)),d=c<a?a-c:0,h=f<o?o-f:0;if(d===0&&h===0)return n;const g={};for(const[m,y]of Object.entries(n))g[m]={x:y.x+d,y:y.y+h};return g},Ay=(n,a,o,s,c,f)=>{const d=new Map,h=new Map,g=new Map;for(const w of n)d.set(w,[]),h.set(w,[]),g.set(w,0);for(const w of a)!n.includes(w.source)||!n.includes(w.target)||(d.get(w.source)?.push(w.target),h.get(w.target)?.push(w.source),g.set(w.target,(g.get(w.target)??0)+1));const m=o.length?o.filter(w=>n.includes(w)):n.filter(w=>(g.get(w)??0)===0),y=[],p=new Map;for(const w of m)p.set(w,0),y.push(w);for(;y.length;){const w=y.shift();if(!w)break;const J=p.get(w)??0;for(const Q of d.get(w)??[]){const F=J+1,ce=p.get(Q);(ce===void 0||F<ce)&&(p.set(Q,F),y.push(Q))}}let S=0;for(const w of p.values())w>S&&(S=w);n.filter(w=>!p.has(w)).forEach((w,J)=>{p.set(w,S+1+J)});const R=new Map;for(const w of n){const J=p.get(w)??0;R.has(J)||R.set(J,[]),R.get(J)?.push(w)}const T=new Map;for(const[w,J]of R.entries())T.set(w,[...J]);const k=w=>{const J=new Map;return(T.get(w)??[]).forEach((Q,F)=>J.set(Q,F)),J},M=(w,J,Q)=>{if(!w.length)return Q;const F=w.map(ce=>J.get(ce)).filter(ce=>ce!==void 0);return F.length?F.reduce((ce,ue)=>ce+ue,0)/F.length:Q},O=w=>{(w==="down"?Array.from(T.keys()).sort((Q,F)=>Q-F):Array.from(T.keys()).sort((Q,F)=>F-Q)).forEach(Q=>{const F=w==="down"?Q-1:Q+1;if(!T.has(F))return;const ce=k(F),te=(T.get(Q)??[]).map((oe,me)=>{const ve=w==="down"?h.get(oe)??[]:d.get(oe)??[];return{id:oe,score:M(ve,ce,me)}}).sort((oe,me)=>oe.score-me.score);T.set(Q,te.map(oe=>oe.id))})};for(let w=0;w<2;w+=1)O("down"),O("up");const U={};for(const[w,J]of T.entries())J.forEach((Q,F)=>{const ce=f==="horizontal"?w*s:F*s,ue=f==="horizontal"?F*c:w*c;U[Q]={x:ce,y:ue}});return D2(U,80,80)},M2=n=>{const a=n.trim(),o=/^#([0-9a-f]{3})$/i.exec(a);if(o){const[c,f,d]=o[1].split("").map(h=>parseInt(h+h,16));return{r:c,g:f,b:d}}const s=/^#([0-9a-f]{6})$/i.exec(a);if(s){const c=s[1];return{r:parseInt(c.slice(0,2),16),g:parseInt(c.slice(2,4),16),b:parseInt(c.slice(4,6),16)}}return null},z2=({data:n,selected:a})=>{const[o,s]=A.useState(null),[c,f]=A.useState(null),d=n.kind==="menu"?"menu":n.kind==="option"?"option":"dialog",h=n.kind==="condition",g=n.kind==="action",m=n.kind==="narrative",y=m||n.kind==="node"||n.kind==="menu",p=m&&!!n.collapsed,S=n.direction??"horizontal",E=S==="horizontal"?He.Left:He.Top,R=S==="horizontal"?He.Right:He.Bottom,T=S==="horizontal"?{top:"calc(var(--node-header-height) / 2)",left:-6,transform:"translateY(-50%)"}:{left:"50%",top:-6,transform:"translateX(-50%)"},k=n.outputs??[],M=n.outputOptionIds??[],O=n.onReorderOutputs&&M.length>1,U=m?n.questType?"quest":n.completion?"completion":n.speaker==="user"?"user":"sensei":n.kind,w=n.nodeColor?M2(n.nodeColor):null,J=n.nodeColor?{"--node-accent":n.nodeColor,...w?{"--node-header-tint":`rgba(${w.r}, ${w.g}, ${w.b}, 0.35)`,"--node-accent-glow":`rgba(${w.r}, ${w.g}, ${w.b}, 0.35)`,"--node-selected-tint":`rgba(${w.r}, ${w.g}, ${w.b}, 0.45)`,"--node-selected-secondary":`rgba(${w.r}, ${w.g}, ${w.b}, 0.14)`}:{}}:void 0,Q=B=>N=>{N.stopPropagation(),s(B),N.dataTransfer.effectAllowed="move",N.dataTransfer.setData("text/plain",String(B))},F=B=>N=>{N.preventDefault(),N.stopPropagation(),N.dataTransfer.dropEffect="move",o!==null&&B!==o&&f(B)},ce=B=>{B.stopPropagation(),f(null)},ue=B=>{if(B.preventDefault(),B.stopPropagation(),o===null||c===null||o===c){s(null),f(null);return}if(n.nodeId&&n.onReorderOutputs&&M.length>0){const N=[...M],[L]=N.splice(o,1);N.splice(c,0,L),n.onReorderOutputs(n.nodeId,N)}s(null),f(null)},te=()=>{s(null),f(null)},oe=B=>{B.preventDefault(),B.stopPropagation(),n.nodeId&&n.onToggleCollapse&&n.onToggleCollapse(n.nodeId)},me=B=>{B.preventDefault(),B.stopPropagation(),!(!n.nodeId||!n.onRequestMainEdit)&&n.onRequestMainEdit(n.nodeId)},ve=(B,N)=>{B.preventDefault(),B.stopPropagation(),!(!n.nodeId||!n.onRequestOutputEdit)&&n.onRequestOutputEdit(n.nodeId,N)},z=()=>n.questType?"Q":n.completion?"!":n.speaker==="user"?"U":n.speaker==="sensei"?"S":n.kind==="menu"?"M":n.kind==="option"?"O":"N";return h?b.jsxs("div",{className:`flow-condition-node ${a?"selected":""}`,title:"Double-click to edit condition",children:[b.jsx("div",{className:"flow-condition-chip",children:Wa(n.title,40)}),b.jsx(fi,{type:"source",id:"cond-out",position:R,className:"flow-handle flow-handle-condition-node",style:S==="horizontal"?{top:"50%",right:-11,transform:"translateY(-50%)"}:{left:"50%",bottom:-11,transform:"translateX(-50%)"}})]}):g?b.jsxs("div",{className:`flow-action-node ${a?"selected":""}`,title:"Double-click to edit action",children:[b.jsx("div",{className:"flow-action-chip",children:Wa(n.title,40)}),b.jsx(fi,{type:"source",id:"act-out",position:R,className:"flow-handle flow-handle-action-node",style:S==="horizontal"?{top:"50%",right:-11,transform:"translateY(-50%)"}:{left:"50%",bottom:-11,transform:"translateX(-50%)"}})]}):b.jsxs("div",{className:`flow-node-card node ${d} ${a?"selected":""} ${p?"collapsed":""} narrative-card narrative-tone-${U} ${n.nodeColor?"has-node-color":""}`,style:J,children:[b.jsx(fi,{type:"target",id:Fa,position:E,className:`flow-handle flow-handle-root ${n.nodeHasIncoming?"filled":""}`,style:T}),b.jsxs("div",{className:"node-id-bar",children:[b.jsx("div",{className:`node-avatar ${n.questType?"quest":n.completion?"completion":n.speaker?n.speaker:n.kind??"node"}`,children:z()}),b.jsx("div",{className:"node-id-text",children:n.title}),n.nodeId&&n.onToggleCollapse?b.jsx("button",{type:"button",className:"node-collapse-btn nodrag",onClick:oe,title:p?"Expand node":"Collapse node","aria-label":p?"Expand node":"Collapse node",children:p?"+":"-"}):null,(m||n.kind==="menu"||n.kind==="node")&&n.nodeId&&n.onCycleNodeColor?b.jsx("button",{type:"button",className:"node-color-dot nodrag",onClick:B=>{B.preventDefault(),B.stopPropagation(),n.onCycleNodeColor?.(n.nodeId,n.nodeColor)},onMouseDown:B=>B.stopPropagation(),title:"Cycle node color","aria-label":"Cycle node color",style:n.nodeColor?{background:n.nodeColor}:void 0}):null]}),p?null:b.jsx("div",{className:"node-tags",children:m?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:`node-tag speaker ${n.speaker??"sensei"}`,children:n.speaker??"sensei"}),n.questType?b.jsx("span",{className:"node-tag quest",children:n.questType}):null,n.completion?b.jsx("span",{className:"node-tag completion",children:"completion"}):null]}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:`node-tag kind ${n.kind}`,children:n.kind}),k.length?b.jsx("span",{className:"node-tag options",children:"choices"}):null]})}),!p&&n.onRequestMainEdit?b.jsx("button",{type:"button",className:"node-inline-input node-inline-trigger nodrag",onClick:me,onMouseDown:B=>B.stopPropagation(),title:"Edit dialogue text",children:Wa(n.editableText??"",200)||b.jsx("span",{style:{opacity:.5,fontStyle:"italic"},children:n.speaker==="sensei"?"sensei speaks here...":n.speaker==="user"?"player responds here...":"click to add text..."})}):null,!p&&!n.onRequestMainEdit&&n.body?b.jsx("div",{className:"node-body",children:n.body}):null,!p&&(n.canAddChoice||n.canAddCondition||n.canAddAction)?b.jsxs("div",{className:"node-actions",children:[n.canAddChoice&&n.onAddChoice?b.jsxs("button",{type:"button",className:"node-action-btn nodrag",onClick:B=>{B.stopPropagation(),n.onAddChoice(n.nodeId)},onMouseDown:B=>B.stopPropagation(),children:[b.jsx("span",{className:"action-icon",children:"+"}),"choice"]}):null,n.canAddCondition&&n.onAddCondition?b.jsxs("button",{type:"button",className:"node-action-btn condition nodrag",onClick:B=>{B.stopPropagation(),n.onAddCondition(n.nodeId)},onMouseDown:B=>B.stopPropagation(),children:[b.jsx("span",{className:"action-icon",children:"+"}),"condition"]}):null,n.canAddAction&&n.onAddAction?b.jsxs("button",{type:"button",className:"node-action-btn action nodrag",onClick:B=>{B.stopPropagation(),n.onAddAction(n.nodeId)},onMouseDown:B=>B.stopPropagation(),children:[b.jsx("span",{className:"action-icon",children:"+"}),"action"]}):null]}):null,p?null:b.jsxs("div",{className:"node-dialogue-gate",children:[b.jsx("span",{className:"node-output-action node-output-main-gate",children:"main gate"}),b.jsx(fi,{type:"target",id:"cond:node",position:E,className:`flow-handle flow-handle-condition ${n.nodeHasCondition?"filled":""}`,style:S==="horizontal"?{top:"50%",left:8,transform:"translateY(-50%) translateY(8px)"}:{left:"50%",top:24,transform:"translateX(-50%)"}}),y?b.jsx(fi,{type:"target",id:"act:node",position:E,className:`flow-handle flow-handle-action ${n.nodeHasAction?"filled":""}`,style:S==="horizontal"?{top:"50%",left:8,transform:"translateY(-50%) translateY(-8px)"}:{left:"50%",top:8,transform:"translateX(-50%)"}}):null]}),!p&&k.length?b.jsx("div",{className:"node-outputs",children:k.map((B,N)=>{const L=o===N,ne=c===N,I=O&&B.editable;return b.jsxs("div",{className:`node-output-row ${L?"dragging":""} ${ne?"drag-over":""} ${I?"reorderable":""}`,draggable:I,onDragStart:I?Q(N):void 0,onDragOver:I?F(N):void 0,onDragLeave:I?ce:void 0,onDrop:I?ue:void 0,onDragEnd:I?te:void 0,children:[(()=>{const se=S==="horizontal"?{left:8,top:"50%",transform:"translateY(-50%) translateY(-8px)"}:{left:"50%",top:8,transform:"translateX(-50%)"},D=S==="horizontal"?{left:8,top:"50%",transform:"translateY(-50%) translateY(8px)"}:{left:"50%",top:24,transform:"translateX(-50%)"};return b.jsxs(b.Fragment,{children:[b.jsx(fi,{type:"target",id:`act:${B.id}`,position:E,className:`flow-handle flow-handle-action ${B.hasAction?"filled":""}`,style:se}),b.jsx(fi,{type:"target",id:`cond:${B.id}`,position:E,className:`flow-handle flow-handle-condition ${B.hasCondition?"filled":""}`,style:D})]})})(),b.jsx("span",{className:"node-output-action node-output-main-gate",children:"gate"}),b.jsx("button",{type:"button",className:`node-output-label ${B.editable?"editable":""} nodrag`,onClick:B.editable?se=>ve(se,B.id):void 0,onMouseDown:se=>se.stopPropagation(),title:B.editable?"Edit choice text":void 0,children:B.label}),b.jsx(fi,{type:"source",id:B.id,position:R,className:"flow-handle flow-handle-inline",style:S==="horizontal"?{top:"50%",right:-14,transform:"translateY(-50%)"}:{left:"50%",bottom:-12,transform:"translateX(-50%)"}})]},B.id)})}):null]})},Cy={sensei:z2},Yv=(n,a,o,s)=>{switch(o){case He.Top:return{x:n,y:a-s};case He.Bottom:return{x:n,y:a+s};case He.Left:return{x:n-s,y:a};case He.Right:return{x:n+s,y:a};default:return{x:n,y:a}}},k2=n=>{const{id:a,sourceX:o,sourceY:s,targetX:c,targetY:f,sourcePosition:d,targetPosition:h,markerEnd:g,markerStart:m,style:y,label:p,labelStyle:S,labelShowBg:E,labelBgStyle:R,labelBgPadding:T,labelBgBorderRadius:k,interactionWidth:M}=n,O=n,U=O.targetHandle,w=O.targetHandleId,J=U??w,Q=O.sourceHandleId,F=O.sourceHandle??Q,ce=O.className??"",ue=F?.startsWith("opt:")||ce.includes("edge-choice"),te=F==="next"||ce.includes("edge-continue"),oe=F==="cond-out"||F==="act-out"||J?.startsWith("cond:")||J?.startsWith("act:")||ce.includes("edge-condition")||ce.includes("edge-action"),me=g,ve=me&&typeof me=="object"&&typeof me.width=="number"?me.width??16:16,N=g?Math.max(oe?9:ue?7:te?8:10,Math.round(ve*(oe?.64:ue?.48:te?.56:.64))):0,L=Yv(c,f,h,N),ne=oe?9:0,I=ne?Yv(L.x,L.y,h,ne):L,[se,D,V]=Xf({sourceX:o,sourceY:s,targetX:I.x,targetY:I.y,sourcePosition:d,targetPosition:h,curvature:.25});return b.jsx(Do,{id:a,path:se,labelX:D,labelY:V,label:p,labelStyle:S,labelShowBg:E,labelBgStyle:R,labelBgPadding:T,labelBgBorderRadius:k,style:y,markerEnd:g,markerStart:m,interactionWidth:M})},Ty={arrow:k2},O2=({onInlineTextChange:n,onRequestMainEdit:a,onRequestOutputEdit:o,onAddChoice:s,onAddCondition:c,onAddAction:f,onReorderOutputs:d,onCycleNodeColor:h,onEdgeDropCreate:g,onConnect:m,onNodesDelete:y,onEdgesDelete:p,onEdgeClick:S,onInventoryDrop:E,onNodeDragStop:R})=>{const T=qc(),k=It(De=>De.flowDirection),M=Ve(De=>De.selectedGuidanceId),O=Ve(De=>De.setSelectedGuidanceId),U=Ve(De=>De.guidancePositions),w=Ve(De=>De.guidanceAnchorPositions),J=Ve(De=>De.extraGuidanceConditions),Q=Ve(De=>De.extraGuidanceActions),F=it(De=>De.activeGuidanceId),ce=Ve(De=>De.setFlowInstance),ue=Ht(De=>De.openConditionEdit),te=Ht(De=>De.openActionEdit),oe=A.useRef(null),me=A.useRef(null),ve=A.useRef(null),z=A.useRef(null);oe.current=s,me.current=c,ve.current=f,z.current=d;const B=A.useRef(null),N=A.useRef(null),L=A.useRef(null),ne=A.useRef(!0),I=A.useRef(!1),se=A.useRef(null),D=A.useRef(null),[V,de]=A.useState([]),ge=A.useMemo(()=>J[F]??[],[F,J]),we=A.useMemo(()=>Q[F]??[],[F,Q]),Ce=A.useMemo(()=>T?Rs(T.module):[],[T]),ke=A.useMemo(()=>Ce.filter(De=>De.kind!=="option"),[Ce]),qe=A.useMemo(()=>T?y2(T.module):[],[T]),Oe=A.useMemo(()=>T?x2(T.module):[],[T]),Ye=A.useMemo(()=>T?[...C2(T.module,M),...Ey(qe),...wy(Oe)]:[],[T,qe,Oe,M]),at=A.useMemo(()=>{const De=new Set;for(const ie of Ye)ie.target&&ie.targetHandle===Fa&&De.add(ie.target);return De},[Ye]),Pe=A.useRef({}),_t=A.useRef(""),gt=`${F}::${k}`;if(gt!==_t.current)if(_t.current=gt,!T)Pe.current={};else{const De=ke.map(No),ie=wi(T.module.meta.rootMenu,T.module),ee=ie?[ie.id]:[];Pe.current=Ay(De,Ye,ee,500,360,k)}const et=Pe.current,pt=A.useMemo(()=>{if(!T)return[];const De={...et,...U},ie={...et,...w},ee={...et,...w},be=w2(ke,T.module,De,M,k,at,n,a,o,Xe=>oe.current?.(Xe),Xe=>me.current?.(Xe),Xe=>ve.current?.(Xe),(Xe,Tt)=>z.current?.(Xe,Tt),h),Be=Ny(qe,ge,De,ie,k,be,M),ft=_y(Oe,we,De,ee,k,be,M);return[...be,...Be,...ft]},[T,ge,we,k,et,qe,Oe,ke,at,U,w,n,a,o,h,M]);A.useEffect(()=>{de(pt)},[pt]);const We=A.useCallback(De=>{de(ie=>Ff(De,ie))},[]),je=A.useCallback(()=>{N.current=null;const De=L.current;if(!De)return;const ie=B.current;ie&&ie.setNodes(ee=>ee.map(be=>be.id===De.id?{...be,position:De.position}:be))},[]),Et=A.useCallback((De,ie)=>{L.current={id:ie.id,position:ie.position},de(ee=>ee.map(be=>be.id===ie.id?{...be,position:ie.position}:be)),N.current===null&&(N.current=requestAnimationFrame(je))},[je]),Qt=A.useCallback((De,ie)=>{N.current!==null&&(cancelAnimationFrame(N.current),N.current=null),L.current=null;const ee=B.current?.getNodes()??V,be=ee.map(Qe=>Qe.id===ie.id?{...Qe,position:ie.position}:Qe),ft=by(be).reduce((Qe,Ze)=>{const Yt=ee.find(vt=>vt.id===Ze.id);return Yt&&(Yt.position.x!==Ze.position.x||Yt.position.y!==Ze.position.y)&&(Qe[Ze.id]=Ze.position),Qe},{}),Xe=ft[ie.id]??ie.position,Tt=Xe.x===ie.position.x&&Xe.y===ie.position.y?ie:{...ie,position:Xe};de(Qe=>Qe.map(Ze=>ft[Ze.id]?{...Ze,position:ft[Ze.id]}:Ze)),B.current?.setNodes(Qe=>Qe.map(Ze=>ft[Ze.id]?{...Ze,position:ft[Ze.id]}:Ze)),R(De,Tt,ft)},[V,R]);A.useEffect(()=>()=>{N.current!==null&&cancelAnimationFrame(N.current)},[]);const vn=A.useCallback((De,ie)=>{O(ie.id)},[O]),Mn=A.useCallback((De,ie)=>{if(Bn(ie.id)){const ee=Za(ie.id);ee&&ue({mode:"guidance",value:ee});return}if($n(ie.id)){const ee=Ia(ie.id);ee&&te({mode:"guidance",value:ee})}},[te,ue]),En=A.useCallback(()=>{O("")},[O]),wt=A.useCallback(De=>{De.preventDefault(),De.dataTransfer.dropEffect="copy"},[]),zn=De=>{const ie=De;if(typeof ie.clientX=="number"&&typeof ie.clientY=="number")return{x:ie.clientX,y:ie.clientY};const ee=ie.changedTouches?.[0]??ie.touches?.[0];return ee?{x:ee.clientX,y:ee.clientY}:null},tt=A.useCallback((De,ie)=>{if(!ie?.nodeId){D.current=null;return}D.current={nodeId:ie.nodeId,handleId:ie.handleId??void 0,handleType:ie.handleType??void 0}},[]),qt=A.useCallback((De,ie)=>{if(I.current)return;const ee=D.current;if(D.current=null,!ee||ee.handleType!=="source"&&ee.handleType!=="target"||ie&&ie.isValid)return;const be=De?.target;if(!ie&&!be?.classList?.contains("react-flow__pane"))return;const Be=zn(De);if(!Be)return;const ft=se.current,Xe=B.current;if(!ft||!Xe)return;const Tt=ft.getBoundingClientRect(),Qe=Xe.project({x:Be.x-Tt.left,y:Be.y-Tt.top});g(ee.nodeId,ee.handleId,Qe,ee.handleType)},[g]),cn=A.useCallback(()=>{ne.current=!1,I.current=!0},[]),Rt=A.useCallback((De,ie)=>{ne.current=!0,p([De]),m(ie)},[m,p]),wn=A.useCallback((De,ie)=>{ne.current||p([ie]),ne.current=!0,I.current=!1},[p]),dt=A.useCallback(De=>{B.current=De,ce("guidance",De)},[ce]);return V.length?b.jsx("div",{className:"flow-canvas",ref:se,children:b.jsxs(Wf,{nodes:V,edges:Ye,edgeTypes:Ty,nodeTypes:Cy,onInit:dt,onNodesChange:We,onNodeClick:vn,onNodeDoubleClick:Mn,onPaneClick:En,onNodeDrag:Et,onNodeDragStop:Qt,onConnectStart:tt,onConnectEnd:qt,onConnect:m,onReconnectStart:cn,onReconnect:Rt,onReconnectEnd:wn,onNodesDelete:y,onEdgesDelete:p,onEdgeClick:S,onDragOver:wt,onDrop:E,connectionLineType:ji.Bezier,defaultEdgeOptions:{type:"arrow",markerEnd:{type:Gi.ArrowClosed,width:16,height:16,color:"rgba(228, 224, 218, 0.58)"}},style:{width:"100%",height:"100%"},defaultViewport:{x:0,y:0,zoom:1},minZoom:.35,maxZoom:1.6,edgesUpdatable:!0,onlyRenderVisibleElements:!0,deleteKeyCode:["Backspace","Delete"],children:[b.jsx(xy,{variant:Pn.Dots,gap:20,size:1,color:"rgba(255,255,255,0.05)"}),b.jsx(vy,{position:"bottom-right"}),b.jsx(gy,{position:"bottom-right",nodeColor:De=>{const ie=De.data?.kind;return ie==="condition"?"#facc15":ie==="action"?"#f87171":ie==="menu"?"#06b6d4":ie==="option"?"#a855f7":"#8b5cf6"},maskColor:"rgba(0,0,0,0.8)",style:{background:"rgba(26,28,32,0.9)"}})]})}):b.jsx("div",{className:"flow-empty",children:"No guidance nodes to show."})},q2=({onInlineTextChange:n,onRequestMainEdit:a,onRequestOutputEdit:o,onAddChoice:s,onAddCondition:c,onAddAction:f,onReorderOutputs:d,onCycleNodeColor:h,onEdgeDropCreate:g,onConnect:m,onNodesDelete:y,onEdgesDelete:p,onEdgeClick:S,onInventoryDrop:E,onNodeDragStop:R})=>{const T=Mf(),k=It(ie=>ie.flowDirection),M=Ve(ie=>ie.selectedNarrativeId),O=Ve(ie=>ie.setSelectedNarrativeId),U=Ve(ie=>ie.narrativePositions),w=Ve(ie=>ie.narrativeAnchorPositions),J=Ve(ie=>ie.narrativeStageFilter),Q=Ve(ie=>ie.extraNarrativeConditions),F=Ve(ie=>ie.extraNarrativeActions),ce=it(ie=>ie.activeNarrativeId),ue=Ve(ie=>ie.collapsedNodes),te=Ve(ie=>ie.toggleCollapsed),oe=Ve(ie=>ie.setFlowInstance),me=Ht(ie=>ie.openConditionEdit),ve=Ht(ie=>ie.openActionEdit),z=A.useRef(null),B=A.useRef(null),N=A.useRef(null),L=A.useRef(!0),ne=A.useRef(!1),I=A.useRef(null),se=A.useRef(null),[D,V]=A.useState([]),de=A.useMemo(()=>Q[ce]??[],[ce,Q]),ge=A.useMemo(()=>F[ce]??[],[ce,F]),we=A.useMemo(()=>T?Zv(T.narrative):new Set,[T]),Ce=A.useMemo(()=>T?(J==="all"?T.narrative.nodes:T.narrative.nodes.filter(ee=>Ec(ee.id)===J)).filter(ee=>!we.has(ee.id)):[],[T,we,J]),ke=A.useMemo(()=>{const ie={};if(!T)return ie;for(const ee of T.narrative.nodes){const be=`${T.id}::${ee.id}`;ue[be]&&(ie[ee.id]=!0)}return ie},[T,ue]),qe=A.useCallback(ie=>{if(!ce)return;const ee=`${ce}::${ie}`;te(ee)},[ce,te]),Oe=A.useMemo(()=>T?b2(T.narrative,we):[],[T,we]),Ye=A.useMemo(()=>T?S2(T.narrative,we):[],[T,we]),at=A.useMemo(()=>{if(!T)return[];const ie=[...T2(T.narrative,we,M),...Ey(Oe),...wy(Ye)];if(J==="all")return ie;const ee=new Set(Ce.map(be=>be.id));return ie.filter(be=>(Bn(be.source)||$n(be.source)||ee.has(be.source))&&ee.has(be.target))},[T,Oe,Ye,we,J,Ce,M]),Pe=A.useMemo(()=>{const ie=new Set;for(const ee of at)ee.target&&ee.targetHandle===Fa&&ie.add(ee.target);return ie},[at]),_t=A.useRef({}),gt=A.useRef(""),et=`${ce}::${k}::${J}`;if(et!==gt.current)if(gt.current=et,!T||!Ce.length)_t.current={};else{const ie=Ce.map(ee=>ee.id);_t.current=Ay(ie,at,[],500,360,k)}const pt=_t.current,We=A.useMemo(()=>{if(!T||!Ce.length)return[];const ie={...pt,...U},ee={...pt,...w},be=A2(T.narrative,Ce,ie,M,ke,we,Pe,qe,k,n,a,o,s,c,f,d,h),Be=new Set(Ce.map(Qe=>Qe.id)),ft=J==="all"?Oe:Oe.filter(Qe=>Be.has(Qe.targetId)),Xe=Ny(ft,de,ie,ee,k,be,M),Tt=_y(Ye,ge,ie,ee,k,be,M);return[...be,...Xe,...Tt]},[T,de,ge,ke,k,n,a,o,s,c,f,d,h,pt,Oe,Ye,we,Pe,U,w,J,Ce,M,qe]);A.useEffect(()=>{V(We)},[We]),A.useEffect(()=>{Ce.length&&M&&(Bn(M)||$n(M)||Ce.some(ie=>ie.id===M)||O(Ce[0].id))},[Ce,M,O]);const je=A.useCallback(ie=>{V(ee=>Ff(ie,ee))},[]),Et=A.useCallback(()=>{B.current=null;const ie=N.current;if(!ie)return;const ee=z.current;ee&&ee.setNodes(be=>be.map(Be=>Be.id===ie.id?{...Be,position:ie.position}:Be))},[]),Qt=A.useCallback((ie,ee)=>{N.current={id:ee.id,position:ee.position},V(be=>be.map(Be=>Be.id===ee.id?{...Be,position:ee.position}:Be)),B.current===null&&(B.current=requestAnimationFrame(Et))},[Et]),vn=A.useCallback((ie,ee)=>{B.current!==null&&(cancelAnimationFrame(B.current),B.current=null),N.current=null;let be;const Be=z.current;if(Be)try{be=Be.getIntersectingNodes(ee).filter(mt=>mt.id!==ee.id&&!Bn(mt.id)&&!$n(mt.id))[0]?.id}catch{be=void 0}const ft=z.current?.getNodes()??D,Xe=ft.map(vt=>vt.id===ee.id?{...vt,position:ee.position}:vt),Qe=by(Xe).reduce((vt,mt)=>{const An=ft.find(ni=>ni.id===mt.id);return An&&(An.position.x!==mt.position.x||An.position.y!==mt.position.y)&&(vt[mt.id]=mt.position),vt},{}),Ze=Qe[ee.id]??ee.position,Yt=Ze.x===ee.position.x&&Ze.y===ee.position.y?ee:{...ee,position:Ze};V(vt=>vt.map(mt=>Qe[mt.id]?{...mt,position:Qe[mt.id]}:mt)),z.current?.setNodes(vt=>vt.map(mt=>Qe[mt.id]?{...mt,position:Qe[mt.id]}:mt)),R(ie,Yt,be,Qe)},[D,R]);A.useEffect(()=>()=>{B.current!==null&&cancelAnimationFrame(B.current)},[]);const Mn=A.useCallback((ie,ee)=>{O(ee.id)},[O]),En=A.useCallback((ie,ee)=>{if(Bn(ee.id)){const be=Za(ee.id);be&&me({mode:"narrative",value:be});return}if($n(ee.id)){const be=Ia(ee.id);be&&ve({mode:"narrative",value:be})}},[ve,me]),wt=A.useCallback(()=>{O("")},[O]),zn=A.useCallback(ie=>{ie.preventDefault(),ie.dataTransfer.dropEffect="copy"},[]),tt=ie=>{const ee=ie;if(typeof ee.clientX=="number"&&typeof ee.clientY=="number")return{x:ee.clientX,y:ee.clientY};const be=ee.changedTouches?.[0]??ee.touches?.[0];return be?{x:be.clientX,y:be.clientY}:null},qt=A.useCallback((ie,ee)=>{if(!ee?.nodeId){se.current=null;return}se.current={nodeId:ee.nodeId,handleId:ee.handleId??void 0,handleType:ee.handleType??void 0}},[]),cn=A.useCallback((ie,ee)=>{if(ne.current)return;const be=se.current;if(se.current=null,!be||be.handleType!=="source"&&be.handleType!=="target"||ee&&ee.isValid)return;const Be=ie?.target;if(!ee&&!Be?.classList?.contains("react-flow__pane"))return;const ft=tt(ie);if(!ft)return;const Xe=I.current,Tt=z.current;if(!Xe||!Tt)return;const Qe=Xe.getBoundingClientRect(),Ze=Tt.project({x:ft.x-Qe.left,y:ft.y-Qe.top});g(be.nodeId,be.handleId,Ze,be.handleType)},[g]),Rt=A.useCallback(()=>{L.current=!1,ne.current=!0},[]),wn=A.useCallback((ie,ee)=>{L.current=!0,p([ie]),m(ee)},[m,p]),dt=A.useCallback((ie,ee)=>{L.current||p([ee]),L.current=!0,ne.current=!1},[p]),De=A.useCallback(ie=>{z.current=ie,oe("narrative",ie)},[oe]);return D.length?b.jsx("div",{className:"flow-canvas",ref:I,children:b.jsxs(Wf,{nodes:D,edges:at,edgeTypes:Ty,nodeTypes:Cy,onInit:De,onNodesChange:je,onNodeClick:Mn,onNodeDoubleClick:En,onPaneClick:wt,onNodeDrag:Qt,onNodeDragStop:vn,onConnectStart:qt,onConnectEnd:cn,onConnect:m,onReconnectStart:Rt,onReconnect:wn,onReconnectEnd:dt,onNodesDelete:y,onEdgesDelete:p,onEdgeClick:S,onDragOver:zn,onDrop:E,connectionLineType:ji.Bezier,defaultEdgeOptions:{type:"arrow",markerEnd:{type:Gi.ArrowClosed,width:16,height:16,color:"rgba(228, 224, 218, 0.58)"}},style:{width:"100%",height:"100%"},defaultViewport:{x:0,y:0,zoom:1},minZoom:.35,maxZoom:1.6,edgesUpdatable:!0,onlyRenderVisibleElements:!0,deleteKeyCode:["Backspace","Delete"],children:[b.jsx(xy,{variant:Pn.Dots,gap:20,size:1,color:"rgba(255,255,255,0.05)"}),b.jsx(vy,{position:"bottom-right"}),b.jsx(gy,{position:"bottom-right",nodeColor:ie=>{const ee=ie.data?.kind;if(ee==="condition")return"#facc15";if(ee==="action")return"#f87171";const be=ie.data?.speaker,Be=ie.data?.questType,ft=ie.data?.completion;return Be?"#14b8a6":ft?"#ec4899":be==="user"?"#3b82f6":"#f59e0b"},maskColor:"rgba(0,0,0,0.8)",style:{background:"rgba(26,28,32,0.9)"}})]})}):b.jsx("div",{className:"flow-empty",children:"No narrative nodes to show."})},gn=n=>{n.preventDefault(),n.dataTransfer.dropEffect="copy"},pn=(n,a,o)=>{n.preventDefault();const s=n.dataTransfer.getData("text/plain");if(!s)return;const c=n.currentTarget,f=c.selectionStart??a.length,d=c.selectionEnd??a.length,h=`${a.slice(0,f)}${s}${a.slice(d)}`;o(h),requestAnimationFrame(()=>{try{c.selectionStart=f+s.length,c.selectionEnd=f+s.length}catch{}})},R2=({entity:n,allOptions:a,onUpdateMenu:o,onUpdateNode:s,onUpdateOption:c,onAddOption:f,onRemoveOption:d,onReorderOptions:h})=>{const[g,m]=A.useState(null),[y,p]=A.useState(null),S=O=>U=>{m(O),U.dataTransfer.effectAllowed="move",U.dataTransfer.setData("text/plain",String(O))},E=O=>U=>{U.preventDefault(),U.dataTransfer.dropEffect="move",g!==null&&O!==g&&p(O)},R=()=>{p(null)},T=(O,U)=>w=>{if(w.preventDefault(),g===null||y===null||g===y){m(null),p(null);return}const J=[...U],[Q]=J.splice(g,1);J.splice(y,0,Q),h(O,J),m(null),p(null)},k=()=>{m(null),p(null)};if(n.kind==="menu"){const O=n.data;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"id"}),b.jsx("input",{className:"field",value:O.id,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"text"}),b.jsx("textarea",{className:"field area",value:O.text,onChange:U=>o(O.id,{text:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.text,w=>o(O.id,{text:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"auto route"}),b.jsx("input",{type:"checkbox",checked:!!O.autoRoute,onChange:U=>o(O.id,{autoRoute:U.currentTarget.checked})})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"back blocked"}),b.jsx("input",{type:"checkbox",checked:!!O.backBlocked,onChange:U=>o(O.id,{backBlocked:U.currentTarget.checked})})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"choices"}),b.jsxs("div",{style:{flex:1},children:[O.options.map((U,w)=>{const J=a.get(U),Q=g===w,F=y===w;return b.jsxs("div",{className:`choice-row ${Q?"dragging":""} ${F?"drag-over":""}`,draggable:!0,onDragStart:S(w),onDragOver:E(w),onDragLeave:R,onDrop:T(O.id,O.options),onDragEnd:k,children:[b.jsx("span",{className:"choice-drag-handle",title:"Drag to reorder",children:""}),b.jsx("span",{className:"choice-indicator"}),b.jsx("input",{value:J?.label??U,onChange:ce=>c(U,{label:ce.currentTarget.value}),placeholder:"Choice label..."}),b.jsx("button",{className:"choice-delete",onClick:()=>d(O.id,U),title:"Remove choice",children:""})]},U)}),b.jsxs("button",{className:"add-choice-btn",onClick:()=>f(O.id),children:[b.jsx("span",{className:"icon",children:"+"}),"add choice"]})]})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"source"}),b.jsx("input",{className:"field",value:O.source??"",onChange:U=>o(O.id,{source:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.source??"",w=>o(O.id,{source:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"item label"}),b.jsx("input",{className:"field",value:O.itemLabel??"",onChange:U=>o(O.id,{itemLabel:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.itemLabel??"",w=>o(O.id,{itemLabel:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"item target"}),b.jsx("input",{className:"field",value:O.itemTarget??"",onChange:U=>o(O.id,{itemTarget:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.itemTarget??"",w=>o(O.id,{itemTarget:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"item action"}),b.jsx("input",{className:"field",value:O.itemAction??"",onChange:U=>o(O.id,{itemAction:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.itemAction??"",w=>o(O.id,{itemAction:w}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"empty text"}),b.jsx("input",{className:"field",value:O.emptyText??"",onChange:U=>o(O.id,{emptyText:U.currentTarget.value}),onDragOver:gn,onDrop:U=>pn(U,O.emptyText??"",w=>o(O.id,{emptyText:w}))})]})]})}if(n.kind==="option"){const O=n.data,U=O.actions.join(`
`);return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"id"}),b.jsx("input",{className:"field",value:O.id,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"label"}),b.jsx("textarea",{className:"field area",value:O.label,onChange:w=>c(O.id,{label:w.currentTarget.value}),onDragOver:gn,onDrop:w=>pn(w,O.label,J=>c(O.id,{label:J}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"target"}),b.jsx("input",{className:"field",value:O.target??"",onChange:w=>c(O.id,{target:w.currentTarget.value}),onDragOver:gn,onDrop:w=>pn(w,O.target??"",J=>c(O.id,{target:J}))})]}),O.requires.length?b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"requires"}),b.jsx("div",{className:"chips",children:O.requires.map(w=>b.jsx("span",{className:"chip",children:w},w))})]}):null,b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"actions (one per line)"}),b.jsx("textarea",{className:"field area",value:U,onChange:w=>{const J=w.currentTarget.value.split(`
`).map(Q=>Q.trim()).filter(Boolean);c(O.id,{actions:J})},onDragOver:gn,onDrop:w=>pn(w,U,J=>c(O.id,{actions:J.split(`
`).map(Q=>Q.trim()).filter(Boolean)}))})]})]})}const M=n.data;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"id"}),b.jsx("input",{className:"field",value:M.id,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"speaker"}),b.jsxs("select",{className:"field",value:M.speaker??"sensei",onChange:O=>s(M.id,{speaker:O.currentTarget.value}),children:[b.jsx("option",{value:"sensei",children:"sensei"}),b.jsx("option",{value:"user",children:"user"})]})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"text"}),b.jsx("textarea",{className:"field area",value:M.text,onChange:O=>s(M.id,{text:O.currentTarget.value}),onDragOver:gn,onDrop:O=>pn(O,M.text,U=>s(M.id,{text:U}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"back blocked"}),b.jsx("input",{type:"checkbox",checked:!!M.backBlocked,onChange:O=>s(M.id,{backBlocked:O.currentTarget.checked})})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"next"}),b.jsx("input",{className:"field",value:M.next??"",onChange:O=>s(M.id,{next:O.currentTarget.value}),onDragOver:gn,onDrop:O=>pn(O,M.next??"",U=>s(M.id,{next:U}))})]}),M.actions.length?b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"actions"}),b.jsx("div",{className:"chips",children:M.actions.map(O=>b.jsx("span",{className:"chip",children:O},O))})]}):null]})},j2=({node:n,onUpdateNode:a,onUpdateQuest:o})=>{const s=n.quest,c=n.actions.join(`
`);return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"id"}),b.jsx("input",{className:"field",value:n.id,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"text"}),b.jsx("textarea",{className:"field area",value:n.text,onChange:f=>a(n.id,{text:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,n.text,d=>a(n.id,{text:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"next"}),b.jsx("input",{className:"field",value:n.next??"",onChange:f=>a(n.id,{next:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,n.next??"",d=>a(n.id,{next:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"actions (one per line)"}),b.jsx("textarea",{className:"field area",value:c,onChange:f=>{const d=f.currentTarget.value.split(`
`).map(h=>h.trim()).filter(Boolean);a(n.id,{actions:d})},onDragOver:gn,onDrop:f=>pn(f,c,d=>{const h=d.split(`
`).map(g=>g.trim()).filter(Boolean);a(n.id,{actions:h})})})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"quest objective"}),b.jsx("input",{className:"field checkbox",type:"checkbox",checked:!!n.quest,onChange:f=>{if(f.currentTarget.checked){a(n.id,{quest:n.quest??{questType:"play_game"}});return}a(n.id,{quest:void 0})}})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"completion"}),b.jsx("input",{className:"field checkbox",type:"checkbox",checked:!!n.completion,onChange:f=>{a(n.id,{completion:f.currentTarget.checked})}})]}),s?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"quest type"}),b.jsxs("select",{className:"field",value:s.questType,onChange:f=>o(n.id,{questType:f.currentTarget.value}),children:[b.jsx("option",{value:"play_game",children:"play_game"}),b.jsx("option",{value:"play_console",children:"play_console"}),b.jsx("option",{value:"earn_achievement",children:"earn_achievement"})]})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"game title"}),b.jsx("input",{className:"field",value:s.gameTitle??"",onChange:f=>o(n.id,{gameTitle:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,s.gameTitle??"",d=>o(n.id,{gameTitle:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"game system"}),b.jsx("input",{className:"field",value:s.gameSystem??"",onChange:f=>o(n.id,{gameSystem:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,s.gameSystem??"",d=>o(n.id,{gameSystem:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"duration (minutes)"}),b.jsx("input",{className:"field",type:"number",value:s.durationMinutes??"",onChange:f=>{const d=Number(f.currentTarget.value);o(n.id,{durationMinutes:Number.isNaN(d)?void 0:d})}})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"achievement id"}),b.jsx("input",{className:"field",value:s.achievementId??"",onChange:f=>o(n.id,{achievementId:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,s.achievementId??"",d=>o(n.id,{achievementId:d}))})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"achievement name"}),b.jsx("input",{className:"field",value:s.achievementName??"",onChange:f=>o(n.id,{achievementName:f.currentTarget.value}),onDragOver:gn,onDrop:f=>pn(f,s.achievementName??"",d=>o(n.id,{achievementName:d}))})]})]}):null]})},H2=({item:n,onEdit:a})=>{const o=s=>{const c={kind:n.kind,value:n.value,id:n.id,label:n.label};s.dataTransfer.setData("text/plain",n.value),s.dataTransfer.setData(uf,JSON.stringify(c)),s.dataTransfer.effectAllowed="copyMove"};return b.jsx("button",{type:"button",className:`inventory-chip inventory-chip-${n.kind}`,draggable:!0,onDragStart:o,onClick:()=>a(n),title:n.hint??"Click to edit",children:n.label})},G2=({category:n,onEditItem:a})=>b.jsxs("section",{className:`inventory-category inventory-tone-${n.tone}`,children:[b.jsx("div",{className:"inventory-category-title",children:n.title}),b.jsx("div",{className:"inventory-items",children:n.items.map(o=>b.jsx(H2,{item:o,onEdit:a},o.id))})]}),U2=({categories:n,onEditItem:a})=>{const[o,s]=A.useState(!1);return b.jsxs("aside",{className:`inventory-dock${o?" is-collapsed":""}`,children:[b.jsxs("div",{className:"inventory-dock-header",children:[o?null:b.jsx("div",{className:"inventory-dock-title",children:"Logic Inventory"}),b.jsx("button",{type:"button",className:"inventory-dock-toggle",onClick:()=>s(c=>!c),"aria-label":o?"Expand logic inventory":"Collapse logic inventory",title:o?"Expand":"Collapse",children:o?">":"<"})]}),o?null:b.jsxs(b.Fragment,{children:[n.map(c=>b.jsx(G2,{category:c,onEditItem:a},c.id)),b.jsx("div",{className:"panel-note",children:"Drag condition or action chips onto canvas. Drag tokens/variables into text fields."})]})]})},B2=({title:n,value:a,onChange:o,onSave:s,onCancel:c})=>b.jsx("div",{className:"quickedit-overlay",onClick:c,children:b.jsxs("div",{className:"quickedit-panel",onClick:f=>f.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:n}),b.jsx("div",{className:"field-row",children:b.jsx("label",{className:"field-label",children:"Text"})}),b.jsx("textarea",{className:"field area quickedit-input",value:a,onChange:f=>o(f.currentTarget.value),autoFocus:!0}),b.jsx("div",{className:"panel-note",children:"Conditions are represented as separate boxes in the canvas and connected to gate ports."}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:c,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:s,children:"Save"})]})]})}),$2=({mode:n,value:a,onChange:o,onSave:s,onCancel:c})=>b.jsx("div",{className:"quickedit-overlay",onClick:c,children:b.jsxs("div",{className:"quickedit-panel",onClick:f=>f.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Edit Condition"}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"condition expression"}),b.jsx("textarea",{className:"field area quickedit-input condition",value:a,onChange:f=>o(f.currentTarget.value),autoFocus:!0})]}),b.jsxs("div",{className:"panel-note",children:["This updates the condition node and all references in the active"," ",n," manuscript."]}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:c,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:s,children:"Save"})]})]})}),Y2=({mode:n,value:a,onChange:o,onSave:s,onCancel:c})=>b.jsx("div",{className:"quickedit-overlay",onClick:c,children:b.jsxs("div",{className:"quickedit-panel",onClick:f=>f.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Edit Action"}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"action"}),b.jsx("textarea",{className:"field area quickedit-input action",value:a,onChange:f=>o(f.currentTarget.value),autoFocus:!0})]}),b.jsxs("div",{className:"panel-note",children:["This updates the action node and all references in the active"," ",n," manuscript."]}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:c,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:s,children:"Save"})]})]})}),V2=({label:n,value:a,onChange:o,onSave:s,onCancel:c})=>b.jsx("div",{className:"quickedit-overlay",onClick:c,children:b.jsxs("div",{className:"quickedit-panel",onClick:f=>f.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Edit Inventory Item"}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"item"}),b.jsx("input",{className:"field",value:n,readOnly:!0})]}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"value"}),b.jsx("textarea",{className:"field area quickedit-input condition",value:a,onChange:f=>o(f.currentTarget.value),autoFocus:!0})]}),b.jsx("div",{className:"panel-note",children:"This custom value is used when you drag this item next time."}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:c,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:s,children:"Save"})]})]})}),Bt=(...n)=>n.filter(Boolean).slice(0,5).join(`
`),L2=n=>{const a=["==","!=",">=","<=",">","<"];for(const o of a){const s=n.indexOf(o);if(s===-1)continue;const c=n.slice(0,s).trim(),f=n.slice(s+o.length).trim();return{key:c,op:o,rhs:f,implicit:!1}}return{key:n.trim(),op:">",rhs:"0",implicit:!0}},X2=n=>{if(n==="focus_minutes_today")return"today's cumulative focus duration in minutes.";if(n==="focus_sessions_today")return"today's focus session count.";if(n==="meditation_minutes_today")return"today's meditation duration in minutes.";if(n==="tasks_total")return"the number of loaded tasks for today.";if(n==="tasks_done")return"the number of tasks already completed today.";if(n==="routines_total")return"the number of routines scheduled for today.";if(n==="routines_done")return"the number of scheduled routines already completed today.";if(n==="narratives_available")return"the count of narratives discovered by the runtime.";if(n==="narrative_active")return"whether a narrative is currently active (1 or 0).";if(n==="quests_active")return"the count of currently active quest slots.";if(n==="quests_claimable")return"whether at least one quest can be claimed now (1 or 0).";if(n==="quest_slots_open")return"whether there is an empty quest slot (1 or 0).";if(n==="quests_abandonable")return"the count of active quest slots that can be abandoned.";if(n==="has_unseen_completion")return"whether today's recommendation completed and has not been acknowledged.";if(n==="guided_routine_pending")return"the count of guided routine items still pending right now.";if(n==="focus_rewarded_today")return"whether today's focus reward has already been granted (1 or 0).";if(n==="meditation_rewarded_today")return"whether today's meditation reward has already been granted (1 or 0).";if(n==="has_roms")return"whether at least one ROM exists in the runtime cache (1 or 0).";if(n==="needs_ra_scan")return"whether RetroAchievements scan is required before RA-only recommendation can proceed.";if(n==="ra_achievement_ready")return"whether a locked achievement is currently available for the selected game.";if(n==="hour")return"the current local hour (0-23).";if(n==="phase")return"the current guided phase index (morning/afternoon/evening/night).";if(n==="rec_active")return"whether a daily recommendation is currently active (1 or 0).";if(n==="narratives_completed_total")return"the count of completed narratives tracked by Sensei completion data.";if(n==="total_visits")return"lifetime count of Sensei visits from memory state.";if(n==="current_streak")return"current consecutive-day Sensei visit streak.";if(n==="longest_streak")return"best historical consecutive-day Sensei visit streak.";if(n==="mem_narratives_completed")return"narratives completed counter from persistent memory state.";if(n==="mem_quests_completed")return"quests completed counter from persistent memory state.";if(n.startsWith("narrative_completed.")){const a=n.slice(20);return a?`whether narrative '${a}' is completed (1 or 0).`:"whether a narrative with a specific id is completed (1 or 0)."}if(n.startsWith("flag.")){const a=n.slice(5),o=a.indexOf(".");if(o>0){const s=a.slice(0,o);return`persisted flag '${a.slice(o+1)}' in '${s}' scope.`}return"a persisted flag value."}return"a runtime numeric field resolved by the condition evaluator."},Z2=n=>{const a=L2(n),o=a.implicit?"No explicit operator was found, so the evaluator treats this as '> 0'.":`The comparison is '${a.op} ${a.rhs}', evaluated with integer semantics.`;return Bt(`Condition '${n}' is a boolean gate that controls whether a branch is eligible.`,`Key '${a.key}' reads ${X2(a.key)}`,o,"This expression is re-evaluated against current stats/flags each time the branch is considered.")},I2=n=>n.trim().split(/\s+/,1)[0]??"",Q2=n=>{const a=I2(n);return a==="set_flag"?Bt(`Action '${n}' writes a persisted flag value.`,"Scopes are daily, weekly, and perm; daily and weekly scopes reset on their calendar boundaries.","This is typically used to mark completions so later conditions can detect state transitions."):a==="clear_flag"?Bt(`Action '${n}' resets a persisted flag to zero.`,"It is the inverse of set_flag and is used to reopen a path or clear one-time status."):a==="inc_flag"?Bt(`Action '${n}' increments a persisted flag counter.`,"If amount is omitted the increment is 1, allowing concise counter-based progression logic.","Counter flags pair naturally with thresholds such as '>= N'."):a==="award_minutes"?Bt(`Action '${n}' grants focus minutes as a direct reward mutation.`,"The numeric operand is unrestricted and parsed as an integer.","This changes progression totals immediately at action execution time."):a==="award_exp"?Bt(`Action '${n}' grants EXP using a seconds-based amount.`,"The operand is parsed as an integer and applied immediately.","Use this when branch completion should produce explicit progression credit."):a==="goto"?Bt(`Action '${n}' performs an immediate flow jump to a target menu/node id.`,"It bypasses normal next/target chaining and transfers control directly.","Valid targets are resolved by the module runtime lookup."):a==="reward_focus"?Bt("Action 'reward_focus' grants the built-in daily focus reward exactly once per day.","It toggles today's focus reward flag and persists daily state."):a==="reward_meditation"?Bt("Action 'reward_meditation' grants the built-in daily meditation reward exactly once per day.","It toggles today's meditation reward flag and persists daily state."):a==="pick_game"?Bt("Action 'pick_game' chooses a daily game recommendation from available ROMs.","When RA-only mode is enabled, it tries RA-supported picks first and falls back when needed.","It also kicks off achievement fetch for the selected recommendation."):a==="accept_game"?Bt("Action 'accept_game' accepts the current daily recommendation and exits Sensei to menu.","This marks recommendation acceptance and persists daily quest state."):a==="claim_achievement"?Bt("Action 'claim_achievement' claims the current claimable quest slot reward and clears that slot.","It also increments Sensei memory quest-completion tracking."):a==="abandon_quest"?Bt(`Action '${n}' clears an abandonable quest slot.`,"If slot id is omitted, it uses selected item id first, then first eligible slot.","Only active, non-unlocked slots with enough played time are eligible."):a==="mark_completion_seen"?Bt("Action 'mark_completion_seen' marks today's recommendation completion as acknowledged.","This hides completion reminder branches gated by has_unseen_completion."):a==="mark_routine_done"?Bt(`Action '${n}' marks a guided routine item as completed for today.`,"If id is omitted, it uses selected item id first, then current pending guided routine."):a==="open_ra_scan"?Bt("Action 'open_ra_scan' opens RetroAchievements scan prompt and exits Sensei module view.","Use this for branches gated by needs_ra_scan."):a==="open_narratives"?Bt("Action 'open_narratives' switches the UI to the narrative list view.","It is a state-transition action rather than a data mutation."):a==="start_narrative"?Bt(`Action '${n}' starts a narrative by id and enters narrative stage flow.`,"The id must match a loaded narrative definition.","If the id is invalid, no narrative transition occurs."):a==="accept_quest"?Bt(`Action '${n}' activates acceptance for the active narrative quest objective.`,"If a node id is supplied, acceptance is attempted against that explicit quest node first.","This separates quest acceptance timing from quest-node entry timing."):a==="advance_stage"?Bt("Action 'advance_stage' increments narrative stage and persists stage transition state.","It clears quest-active tracking for the previous stage and moves to the next stage entry when available.","When the final stage is exceeded, the narrative is marked completed."):a==="exit"?Bt("Action 'exit' returns from the current Sensei interaction context to the menu layer.","It is a UI flow termination action for the current branch."):Bt(`Action '${n}' is parsed by the runtime action dispatcher at execution time.`,"Only supported command tokens are executed; unknown tokens have no effect.")},K2={"tasks.today":"rows from today's tasks with title and done fields.","routines.today":"rows from today's scheduled routines with title, detail, minutes, and done.","guided_routines.pending":"rows from guided routines relevant now that are not yet completed today.","focus.today":"rows from today's focus history with activity title and minutes.","focus.unrewarded":"rows from today's focus history only when today's focus reward has not yet been claimed.","narratives.available":"rows from all loaded narratives with id, title, detail, stage, and stage_total.","narratives.completed":"rows from completed narratives with id, title, detail/date, done, and stage_total.","narratives.active":"a single row for the currently active narrative, if one exists.","quests.active":"rows from active quest slots with title, detail, system, minutes, and done.","quests.abandonable":"rows from active quest slots eligible for abandon flow, including slot id for action targeting."},J2=n=>Bt(`Source '${n}' materializes a dynamic list at render time.`,`It yields ${K2[n]??"runtime-defined rows from current state."}`,"Row variables such as {id}, {title}, {detail}, {date}, {minutes}, {done}, {stage}, and {stage_total} resolve from this materialized row."),F2=n=>n.trim().replace(/^\{/,"").replace(/\}$/,""),Vv={title_name:"the active player title/name string.",date:"the current date string.",week:"the current ISO week identifier.",focus_minutes:"today's total focus minutes (alias of focus_minutes_today).",focus_minutes_today:"today's total focus minutes.",focus_sessions:"today's focus session count (alias of focus_sessions_today).",focus_sessions_today:"today's focus session count.",meditation_minutes:"today's meditation minutes (alias of meditation_minutes_today).",meditation_minutes_today:"today's meditation minutes.",tasks_total:"today's total task count.",tasks_done:"today's completed task count.",routines_total:"today's scheduled routine count.",routines_done:"today's completed routine count.",narratives_available:"the number of available narratives.",quests_active:"the number of active quests.",rec_title:"today's recommended game title, lowercased for display text.",rec_system:"today's recommended system display name, lowercased for display text.",rec_minutes:"recommended play minutes for today's game.",achievement_desc:"first locked achievement description for current context, lowercased.",claim_detail:"claim/completion detail text for current context, lowercased.",routine_action:"action/title text for the first pending guided routine.",routine_minutes:"duration minutes for the first pending guided routine.",phase_name:"current guided phase name (morning, afternoon, evening, night).",hour:"current local hour number.",total_visits:"lifetime Sensei visit count.",current_streak:"current visit streak count.",longest_streak:"best visit streak count.",days_since_first:"days since first visit date in memory.",mem_narratives_completed:"persistent memory counter of completed narratives.",mem_quests_completed:"persistent memory counter of completed quests.",title:"default context title when no list item row is active.",detail:"default context detail when no list item row is active.",system:"default context system when no list item row is active.",minutes:"default context minutes when no list item row is active."},Lv={id:"the row identifier.",title:"the row title text.",detail:"the row detail/description text.",date:"the row date string when provided by source.",system:"the row platform/system field.",minutes:"the row duration/count in minutes.",done:"the row completion flag (1/0).",stage:"the row current stage index.",stage_total:"the row total stage count."},W2=n=>{const a=F2(n);return a in Lv?Bt(`Variable '${n}' resolves from the current dynamic list row.`,`It represents ${Lv[a]}`,"Outside a list-row context, this placeholder usually resolves empty or remains unchanged depending on the renderer path."):Bt(`Variable '${n}' resolves from global runtime state.`,Vv[a]?`It represents ${Vv[a]}`:"If no provider exists for this key, the placeholder is left literal in output.","Global variables are evaluated after token expansion.")},P2=n=>Bt(`Token '${n}' represents a text pool key.`,"For '@custom', define lines in 'sensei/texts/custom.txt' (one line per entry) and the runtime resolves one line from that pool.","Token expansion runs before variable interpolation, enabling token text to include variables safely."),xo=(n,a)=>n==="condition"?Z2(a):n==="action"?Q2(a):n==="source"?J2(a):n==="variable"?W2(a):n==="token"?P2(a):a,eA=({kind:n,title:a,options:o,value:s,targetLabel:c,targetOptions:f,targetValue:d,onTargetChange:h,onChange:g,onPick:m,onSave:y,onCancel:p})=>b.jsx("div",{className:"quickedit-overlay",onClick:p,children:b.jsxs("div",{className:"quickedit-panel addexpr-panel",onClick:S=>S.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:a}),f&&f.length>0&&h?b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:c??"target"}),b.jsx("select",{className:"field",value:d??"",onChange:S=>h(S.currentTarget.value),children:f.map(S=>b.jsx("option",{value:S.id,children:S.label},S.id))})]}):null,b.jsxs("div",{className:"field-row",children:[b.jsxs("label",{className:"field-label",children:["available ",n,"s"]}),b.jsx("div",{className:"addexpr-list",children:o.length?o.map(S=>b.jsx("button",{type:"button",className:`addexpr-chip addexpr-chip-${n}`,onClick:()=>m(S),title:xo(n,S),children:S},S)):b.jsxs("div",{className:"panel-note",children:["No presets yet. Type a custom ",n," below."]})})]}),b.jsxs("div",{className:"field-row",children:[b.jsxs("label",{className:"field-label",children:[n," value"]}),b.jsx("textarea",{className:`field area quickedit-input ${n}`,value:s,onChange:S=>g(S.currentTarget.value),autoFocus:!0})]}),b.jsx("div",{className:"panel-note",children:"You can click a preset and then edit numbers or text before saving."}),b.jsxs("div",{className:"quickedit-actions",children:[b.jsx("button",{className:"ghost",onClick:p,children:"Cancel"}),b.jsx("button",{className:"ghost",onClick:y,children:"Add"})]})]})}),tA=({normalizeOnExport:n,onToggleNormalize:a,onClose:o})=>b.jsx("div",{className:"settings-overlay",onClick:o,children:b.jsxs("div",{className:"settings-panel",onClick:s=>s.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Settings"}),b.jsxs("div",{className:"field-row",children:[b.jsx("label",{className:"field-label",children:"Normalize on export/save"}),b.jsx("input",{className:"field checkbox",type:"checkbox",checked:n,onChange:s=>a(s.currentTarget.checked)})]}),b.jsx("div",{className:"panel-note",children:"Preserve mode is default. Normalization rewrites with canonical formatting."}),b.jsx("button",{className:"ghost",onClick:o,children:"Close"})]})}),nA=({text:n,options:a,onClose:o})=>b.jsx("div",{className:"preview-overlay",onClick:o,children:b.jsxs("div",{className:"preview-panel",onClick:s=>s.stopPropagation(),children:[b.jsx("div",{className:"panel-title",children:"Quick Preview"}),b.jsx("div",{className:"preview-bubble large",children:n||"(empty)"}),a.length?b.jsx("div",{className:"preview-options",children:a.map(s=>b.jsx("span",{className:"chip",children:s},s))}):null,b.jsx("div",{className:"preview-meta",children:"Preview mode: literal"}),b.jsx("button",{className:"ghost",onClick:o,children:"Close"})]})}),iA=({mode:n,guidanceModule:a,narrative:o,onClose:s})=>{const[c,f]=A.useState(!0),[d,h]=A.useState(!1),[g,m]=A.useState([]),[y,p]=A.useState(null),[S,E]=A.useState(null),R=A.useMemo(()=>a&&y?.kind==="menu"?Gt(a,y.id):null,[a,y]),T=A.useMemo(()=>a&&y?.kind==="node"?Ut(a,y.id):null,[a,y]),k=A.useMemo(()=>o&&S?ut(o,S):null,[o,S]),M=A.useCallback((te,oe)=>{if(!o)return{finalId:null,lines:[]};const me=ut(o,te);if(!me)return{finalId:null,lines:[{speaker:"system",text:`Missing node: ${te}`}]};const ve=[];oe&&ve.push({speaker:"user",text:oe});let z=me,B=0;for(;z&&B<8;){if(ve.push({speaker:z.speaker==="user"?"user":"sensei",text:z.text||"(empty)"}),z.speaker==="user"&&z.next){const N=ut(o,z.next);if(N){z=N,B+=1;continue}}break}return{finalId:z?.id??me.id,lines:ve}},[o]),O=A.useCallback(()=>{if(!a){p(null),m([{speaker:"system",text:"No guidance module loaded."}]);return}const te=wi(a.meta.rootMenu,a)??(a.menus[0]?{kind:"menu",id:a.menus[0].id}:null);if(!te){p(null),m([{speaker:"system",text:"No root menu found."}]);return}if(p(te),te.kind==="menu"){const me=Gt(a,te.id);m([{speaker:"sensei",text:me?.text||"(empty)"}]);return}const oe=Ut(a,te.id);m([{speaker:oe?.speaker==="user"?"user":"sensei",text:oe?.text||"(empty)"}])},[a]),U=A.useCallback(()=>{if(!o){E(null),m([{speaker:"system",text:"No narrative loaded."}]);return}const te=o.nodes.find(me=>me.id.startsWith("stage.1."))??o.nodes[0];if(!te){E(null),m([{speaker:"system",text:"No narrative nodes found."}]);return}const oe=M(te.id);E(oe.finalId),m(oe.lines)},[M,o]),w=A.useCallback(()=>{n==="guidance"?O():U()},[n,O,U]);A.useEffect(()=>{w()},[w]);const J=A.useCallback(te=>{if(!a)return;const oe=an(a,te);if(!oe)return;const me=wi(oe.target,a);if(!me){m(ve=>[...ve,{speaker:"user",text:oe.label||oe.id},{speaker:"system",text:"Option target is missing."}]);return}p(me),m(ve=>{const z=[...ve,{speaker:"user",text:oe.label||oe.id}];if(me.kind==="menu"){const N=Gt(a,me.id);return z.push({speaker:"sensei",text:N?.text||"(empty)"}),z}const B=Ut(a,me.id);return z.push({speaker:B?.speaker==="user"?"user":"sensei",text:B?.text||"(empty)"}),z})},[a]),Q=A.useCallback(()=>{if(!a||!T?.next)return;const te=wi(T.next,a);if(!te){m(oe=>[...oe,{speaker:"system",text:"Next target is missing."}]);return}p(te),m(oe=>{const me=[...oe];if(te.kind==="menu"){const z=Gt(a,te.id);return me.push({speaker:"sensei",text:z?.text||"(empty)"}),me}const ve=Ut(a,te.id);return me.push({speaker:ve?.speaker==="user"?"user":"sensei",text:ve?.text||"(empty)"}),me})},[a,T]),F=A.useCallback(te=>{if(!o)return;const oe=wc(o,te),me=M(te,oe);me.finalId&&(E(me.finalId),m(ve=>[...ve,...me.lines]))},[M,o]),ce=A.useCallback(te=>{const oe=M(te);oe.finalId&&(E(oe.finalId),m(me=>[...me,...oe.lines]))},[M]),ue=A.useCallback(()=>{if(!o||!k)return;const te=k.id.match(/^stage\.(\d+)\./);if(!te){m(B=>[...B,{speaker:"system",text:"Unable to determine stage."}]);return}const oe=Number(te[1]);if(Number.isNaN(oe))return;const me=oe+1,ve=o.nodes.find(B=>B.id.startsWith(`stage.${me}.`));if(!ve){m(B=>[...B,{speaker:"system",text:"Narrative complete."}]);return}const z=M(ve.id);z.finalId&&(E(z.finalId),m(B=>[...B,...z.lines]))},[M,o,k]);return b.jsx("div",{className:"sim-overlay",onClick:s,children:b.jsxs("div",{className:`sim-shell ${c?"show-transcript":"hide-transcript"} ${d?"show-stats":"hide-stats"}`,onClick:te=>te.stopPropagation(),children:[c?b.jsxs("div",{className:"sim-transcript",children:[b.jsx("div",{className:"sim-title",children:"Transcript"}),b.jsx("div",{className:"sim-log",children:g.length?g.map((te,oe)=>b.jsxs("div",{className:"sim-line",children:[b.jsx("span",{className:`sim-speaker ${te.speaker}`,children:te.speaker}),b.jsx("span",{children:te.text})]},`${te.speaker}-${oe}`)):b.jsx("div",{className:"muted",children:"No simulation yet."})})]}):null,b.jsxs("div",{className:"sim-panel",children:[b.jsxs("div",{className:"sim-header",children:[b.jsxs("div",{children:[b.jsx("div",{className:"panel-title",children:"Simulator"}),b.jsxs("div",{className:"sim-subtitle",children:["Mode: ",n==="guidance"?"Guidance":"Narrative"]})]}),b.jsxs("div",{className:"sim-actions",children:[b.jsx("button",{className:"ghost",onClick:()=>f(te=>!te),children:"Transcript"}),b.jsx("button",{className:"ghost",onClick:()=>h(te=>!te),children:"Stats"}),b.jsx("button",{className:"ghost",onClick:w,children:"Reset"}),b.jsx("button",{className:"ghost",onClick:s,children:"Close"})]})]}),b.jsx("div",{className:"sim-body",children:n==="guidance"?b.jsxs("div",{className:"sim-card sim-center",children:[b.jsx("div",{className:"sim-title",children:y?.kind==="menu"?"Menu":y?.kind==="node"?"Node":"Flow"}),b.jsx("div",{className:"sim-text",children:y?.kind==="menu"?R?.text||"(empty)":T?.text||"(empty)"}),b.jsxs("div",{className:"sim-options",children:[y?.kind==="menu"&&R?R.options.map(te=>{const oe=an(a,te);return oe?b.jsx("button",{className:"ghost",onClick:()=>J(te),children:oe.label||te},te):null}):null,y?.kind==="node"&&T?T.options.length?T.options.map(te=>{const oe=an(a,te);return oe?b.jsx("button",{className:"ghost",onClick:()=>J(te),children:oe.label||te},te):null}):T.next?b.jsx("button",{className:"ghost",onClick:Q,children:"Continue"}):null:null,y&&!R&&!T?b.jsx("div",{className:"sim-dead-end",children:"Current node is missing."}):null]})]}):b.jsxs("div",{className:"sim-card sim-center",children:[b.jsx("div",{className:"sim-title",children:"Node"}),b.jsx("div",{className:"sim-text",children:k?.text||"(empty)"}),k?.quest?b.jsx("div",{className:"sim-list",children:b.jsxs("div",{className:"sim-list-item",children:[b.jsxs("div",{children:["quest: ",k.quest.questType]}),b.jsx("div",{className:"muted",children:k.quest.gameTitle||k.quest.gameSystem||"quest details"})]})}):null,b.jsxs("div",{className:"sim-options",children:[k?.options.length?k.options.map(te=>b.jsx("button",{className:"ghost",onClick:()=>F(te),children:o?wc(o,te):te},te)):k?.next?b.jsx("button",{className:"ghost",onClick:()=>ce(k.next),children:"Continue"}):null,k?.completion?b.jsx("button",{className:"ghost",onClick:ue,children:"Advance stage"}):null,k&&k.options.length===0&&!k.next&&!k.quest&&!k.completion?b.jsx("div",{className:"sim-dead-end",children:"No outgoing path from this node. Add a next link or choices."}):null]})]})})]}),d?b.jsxs("div",{className:"sim-stats",children:[b.jsx("div",{className:"sim-title",children:"Session"}),b.jsxs("div",{className:"panel-note",children:["Current node: ",n==="guidance"?y?.id||"-":S||"-"]}),b.jsxs("div",{className:"panel-note",children:["Transcript lines: ",g.length]}),b.jsx("div",{className:"panel-note",children:"Conditions and actions are not executed in this simplified simulator."})]}):null]})})},aA=["focus_minutes_today >= 5","focus_sessions_today >= 1","meditation_minutes_today >= 5","tasks_total > 0","tasks_done >= 1","tasks_done >= 3","routines_total > 0","routines_done >= 1","narratives_available > 0","narrative_active > 0","quests_active > 0","quests_claimable > 0","quest_slots_open > 0","quests_abandonable > 0","has_unseen_completion > 0","guided_routine_pending > 0","focus_rewarded_today == 0","meditation_rewarded_today == 0","has_roms > 0","needs_ra_scan > 0","ra_achievement_ready > 0","hour >= 5","hour < 21","phase == 0","rec_active > 0","narratives_completed_total > 0","narrative_completed.intro > 0","total_visits > 0","current_streak > 0","longest_streak > 0","mem_narratives_completed > 0","mem_quests_completed > 0","flag.daily.reading_done == 1","flag.weekly.review_done == 1","flag.perm.intro_complete == 1"],lA=["tasks.today","routines.today","guided_routines.pending","focus.today","focus.unrewarded","narratives.available","narratives.completed","narratives.active","quests.active","quests.abandonable"],oA=["goto menu.guidance.root","reward_focus","reward_meditation","pick_game","accept_game","claim_achievement","abandon_quest","abandon_quest {id}","mark_completion_seen","mark_routine_done","mark_routine_done {id}","open_ra_scan","set_flag daily reading_done 1","inc_flag daily sessions 1","clear_flag daily reading_done","award_minutes 10","award_exp 300","open_narratives","start_narrative {id}","accept_quest","accept_quest node.example","advance_stage","exit"],sA=["{title_name}","{date}","{week}","{focus_minutes}","{focus_minutes_today}","{focus_sessions}","{focus_sessions_today}","{meditation_minutes}","{meditation_minutes_today}","{tasks_total}","{tasks_done}","{routines_total}","{routines_done}","{narratives_available}","{quests_active}","{rec_title}","{rec_system}","{rec_minutes}","{achievement_desc}","{claim_detail}","{routine_action}","{routine_minutes}","{phase_name}","{hour}","{total_visits}","{current_streak}","{longest_streak}","{days_since_first}","{mem_narratives_completed}","{mem_quests_completed}","{title}","{detail}","{system}","{minutes}"],rA=["{id}","{title}","{detail}","{date}","{system}","{minutes}","{done}","{stage}","{stage_total}"],cA=(n,a)=>{const o=n.meta.id||`module_${a}`,s=n.meta.id?`modules/${n.meta.id}/module.txt`:`modules/${o}/module.txt`;return{id:o,path:s,module:{...n,meta:{...n.meta,id:o}},diagnostics:[],isDirty:!1,sourceText:void 0}},uA=(n,a)=>{const o=n.meta.id||`narrative_${a}`,s=n.meta.id?`narratives/${o}.txt`:`narratives/${o}.txt`;return{id:o,path:s,narrative:{...n,meta:{...n.meta,id:o}},diagnostics:[],isDirty:!1,sourceText:void 0}},dA=(n,a)=>({meta:{id:n,title:a,priority:0,enabled:!0,rootMenu:"menu.guidance.root"},menus:[{id:"menu.guidance.root",text:"welcome. where do you want to begin?",options:["option.start"],requires:[]}],nodes:[{id:"node.start",speaker:"sensei",text:"begin writing your first dialogue here.",options:[],requires:[],next:void 0,actions:[]}],options:[{id:"option.start",label:"begin",target:"node.start",actions:[],requires:[]}]}),fA=(n,a)=>({meta:{id:n,title:a,description:"A new narrative quest.",author:"Sensei",version:1},rewards:{expPerStage:300,finalExpBonus:600},nodes:[{id:"stage.1.intro",speaker:"sensei",color:Wn[0],text:"set the stage for your journey.",options:["stage.1.accept","stage.1.later"],requires:[],actions:[]},{id:"stage.1.accept",speaker:"user",text:"i accept this quest.",options:[],requires:[],actions:["accept_quest"],next:"stage.1.quest"},{id:"stage.1.later",speaker:"user",text:"not now.",options:[],requires:[],actions:["exit"]},{id:"stage.1.quest",speaker:"sensei",color:Wn[1],text:"define the first challenge.",options:[],requires:[],actions:[],quest:{questType:"play_console",gameSystem:"FC",durationMinutes:5},next:"stage.1.complete"},{id:"stage.1.complete",speaker:"sensei",color:Wn[2],text:"well done. continue forward.",options:["stage.1.advance"],requires:[],actions:[],completion:!0},{id:"stage.1.advance",speaker:"user",text:"let us continue.",options:[],requires:[],actions:["advance_stage"]}]}),yo=()=>Wn[Math.floor(Math.random()*Wn.length)];function hA(){const n=A.useRef(null),a=It(x=>x.mode),o=It(x=>x.setMode),s=It(x=>x.setProjectName),c=It(x=>x.setShowSimulator),f=it(x=>x.guidanceDocs),d=it(x=>x.narrativeDocs),h=it(x=>x.setGuidanceDocs),g=it(x=>x.setNarrativeDocs),m=it(x=>x.setActiveGuidanceId),y=it(x=>x.setActiveNarrativeId),p=it(x=>x.activeGuidanceId),S=it(x=>x.activeNarrativeId),E=it(x=>x.updateGuidanceDoc),R=it(x=>x.updateNarrativeDoc),T=it(x=>x.setTokens),k=it(x=>x.setVariables),M=Ve(x=>x.selectedGuidanceId),O=Ve(x=>x.selectedNarrativeId),U=Ve(x=>x.setSelectedGuidanceId),w=Ve(x=>x.setSelectedNarrativeId),J=Ve(x=>x.setStageFilter),Q=Ve(x=>x.setGuidancePositions),F=Ve(x=>x.setNarrativePositions),ce=Ve(x=>x.setGuidanceAnchorPositions),ue=Ve(x=>x.setNarrativeAnchorPositions),te=fo(x=>x.pushGuidanceSnapshot),oe=fo(x=>x.pushNarrativeSnapshot),me=fo(x=>x.undoGuidance),ve=fo(x=>x.redoGuidance),z=fo(x=>x.undoNarrative),B=fo(x=>x.redoNarrative),N=It(x=>x.showPreview),L=It(x=>x.setShowPreview),ne=It(x=>x.showSimulator),I=It(x=>x.showSettings),se=It(x=>x.setShowSettings),D=it(x=>x.variables),V=Ve(x=>x.inventoryOverrides),de=Ve(x=>x.setInventoryOverrides),ge=Ve(x=>x.extraGuidanceConditions),we=Ve(x=>x.extraGuidanceActions),Ce=Ve(x=>x.extraNarrativeConditions),ke=Ve(x=>x.extraNarrativeActions),qe=Ht(x=>x.quickEditTarget),Oe=Ht(x=>x.quickEditValue),Ye=Ht(x=>x.setQuickEditValue),at=Ht(x=>x.closeQuickEdit),Pe=Ht(x=>x.conditionEditTarget),_t=Ht(x=>x.conditionEditValue),gt=Ht(x=>x.setConditionEditValue),et=Ht(x=>x.closeConditionEdit),pt=Ht(x=>x.actionEditTarget),We=Ht(x=>x.actionEditValue),je=Ht(x=>x.setActionEditValue),Et=Ht(x=>x.closeActionEdit),Qt=Ht(x=>x.inventoryEditTarget),vn=Ht(x=>x.inventoryEditValue),Mn=Ht(x=>x.setInventoryEditValue),En=Ht(x=>x.closeInventoryEdit),[wt,zn]=A.useState(!1),[tt,qt]=A.useState(null),[cn,Rt]=A.useState(""),[wn,dt]=A.useState(""),[De,ie]=A.useState(null),ee=qc(),be=Mf(),Be=Yb(),ft=A.useMemo(()=>ee?new Map(ee.module.options.map(x=>[x.id,x])):new Map,[ee]),Xe=A.useMemo(()=>Be.find(x=>No(x)===M),[Be,M]),Tt=A.useMemo(()=>be?.narrative.nodes.find(x=>x.id===O),[be,O]),Qe=A.useMemo(()=>be?Zv(be.narrative):new Set,[be]),Ze=A.useMemo(()=>{const x=a==="guidance"?Qb(ee?.module):Kb(be?.narrative),j=a==="guidance"?ge[p]??[]:Ce[S]??[];return Array.from(new Set([...x,...j,...aA])).map(C=>C.trim()).filter(Boolean).sort((C,q)=>C.localeCompare(q))},[a,ee,be,ge,Ce,p,S]),Yt=A.useMemo(()=>{const x=a==="guidance"?Jb(ee?.module):Fb(be?.narrative),j=a==="guidance"?we[p]??[]:ke[S]??[];return Array.from(new Set([...x,...j,...oA])).map(C=>C.trim()).filter(Boolean).sort((C,q)=>C.localeCompare(q))},[a,ee,be,we,ke,p,S]),vt=A.useRef(!1);A.useEffect(()=>{if(vt.current)return;vt.current=!0;const x=Lb.map(cA),j=Xb.map(uA);if(h(x),g(j),T(Bp),k(Zb),s("sample"),x[0]){m(x[0].id);const C=Rs(x[0].module)[0];C&&U(No(C))}j[0]&&(y(j[0].id),j[0].narrative.nodes[0]&&w(j[0].narrative.nodes[0].id))},[h,g,T,k,s,m,y,U,w]);const mt=Ve(x=>x.guidancePositions),An=Ve(x=>x.guidanceAnchorPositions),ni=Ve(x=>x.narrativePositions),Bi=Ve(x=>x.narrativeAnchorPositions),ma=A.useCallback(()=>({docs:f,positions:mt,activeId:p,selectedId:M}),[p,f,mt,M]),Ti=A.useCallback(()=>({docs:d,positions:ni,activeId:S,selectedId:O}),[S,d,ni,O]),Fe=A.useCallback(()=>{te(ma())},[ma,te]),lt=A.useCallback(()=>{oe(Ti())},[Ti,oe]);A.useEffect(()=>{const x=C=>{if(!(C instanceof HTMLElement))return!1;const q=C.tagName.toLowerCase();return q==="input"||q==="textarea"?!0:C.isContentEditable},j=C=>{if(x(C.target))return;const q=C.key.toLowerCase();if(C.ctrlKey||C.metaKey){if(q==="z")if(C.preventDefault(),C.shiftKey)if(a==="guidance"){const X=ve();X&&ga(X)}else{const X=B();X&&pa(X)}else if(a==="guidance"){const X=me();X&&ga(X)}else{const X=z();X&&pa(X)}else if(q==="y")if(C.preventDefault(),a==="guidance"){const X=ve();X&&ga(X)}else{const X=B();X&&pa(X)}}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[a,me,ve,z,B]);const ga=A.useCallback(x=>{h(x.docs),Q(x.positions),ce(x.positions),m(x.activeId),U(x.selectedId)},[h,Q,ce,m,U]),pa=A.useCallback(x=>{g(x.docs),F(x.positions),ue(x.positions),y(x.activeId),w(x.selectedId)},[g,F,ue,y,w]),yn=A.useCallback((x,j)=>{Fe(),E(p,C=>({...C,isDirty:!0,module:{...C.module,menus:C.module.menus.map(q=>q.id===x?{...q,...j}:q)}}))},[p,Fe,E]),un=A.useCallback((x,j)=>{Fe(),E(p,C=>({...C,isDirty:!0,module:{...C.module,nodes:C.module.nodes.map(q=>q.id===x?{...q,...j}:q)}}))},[p,Fe,E]),Cn=A.useCallback((x,j)=>{Fe(),E(p,C=>({...C,isDirty:!0,module:{...C.module,options:C.module.options.map(q=>q.id===x?{...q,...j}:q)}}))},[p,Fe,E]),tl=A.useCallback(x=>{Fe();const j=`opt_${Date.now()}`,C={id:j,label:"New Choice",target:"",actions:[],requires:[]};E(p,q=>{const H=q.module.menus.some(K=>K.id===x),X=q.module.nodes.some(K=>K.id===x);return{...q,isDirty:!0,module:{...q.module,menus:H?q.module.menus.map(K=>K.id===x?{...K,options:[...K.options,j]}:K):q.module.menus,nodes:X?q.module.nodes.map(K=>K.id===x?{...K,options:[...K.options,j]}:K):q.module.nodes,options:[...q.module.options,C]}}})},[p,Fe,E]),Ln=A.useCallback((x,j)=>{Fe(),E(p,C=>{const q=C.module.menus.some(X=>X.id===x),H=C.module.nodes.some(X=>X.id===x);return{...C,isDirty:!0,module:{...C.module,menus:q?C.module.menus.map(X=>X.id===x?{...X,options:X.options.filter(K=>K!==j)}:X):C.module.menus,nodes:H?C.module.nodes.map(X=>X.id===x?{...X,options:X.options.filter(K=>K!==j)}:X):C.module.nodes,options:C.module.options.filter(X=>X.id!==j)}}})},[p,Fe,E]),Kt=A.useCallback((x,j)=>{Fe(),E(p,C=>({...C,isDirty:!0,module:{...C.module,menus:C.module.menus.map(q=>q.id===x?{...q,options:j}:q),nodes:C.module.nodes.map(q=>q.id===x?{...q,options:j}:q)}}))},[p,Fe,E]),bt=A.useCallback((x,j)=>{lt(),R(S,C=>({...C,isDirty:!0,narrative:{...C.narrative,nodes:C.narrative.nodes.map(q=>q.id===x?{...q,...j}:q)}}))},[S,lt,R]),gi=A.useCallback((x,j)=>{lt(),R(S,C=>({...C,isDirty:!0,narrative:{...C.narrative,nodes:C.narrative.nodes.map(q=>q.id===x&&q.quest?{...q,quest:{...q.quest,...j}}:q)}}))},[S,lt,R]),nl=A.useCallback((x,j,C)=>{E(p,q=>x==="menu"?{...q,isDirty:!0,module:{...q.module,menus:q.module.menus.map(H=>H.id===j?{...H,text:C}:H)}}:x==="option"?{...q,isDirty:!0,module:{...q.module,options:q.module.options.map(H=>H.id===j?{...H,label:C}:H)}}:{...q,isDirty:!0,module:{...q.module,nodes:q.module.nodes.map(H=>H.id===j?{...H,text:C}:H)}})},[p,E]),Mo=A.useCallback((x,j)=>{if(!ee)return;const q=(x==="menu"?Gt(ee.module,j):Ut(ee.module,j))?.text;q!==void 0&&Ht.getState().openQuickEdit({scope:"guidance-main",kind:x,nodeId:j},q)},[ee]),zo=A.useCallback((x,j)=>{if(!ee)return;const C=jt(j);if(C===null)return;const q=Gt(ee.module,x),H=Ut(ee.module,x),X=q?q.options[C]:H?H.options[C]:void 0;if(!X)return;const K=an(ee.module,X);K&&Ht.getState().openQuickEdit({scope:"guidance-choice",sourceId:x,optionIndex:C},K.label)},[ee]),va=A.useCallback(x=>{Fe();const j=`opt_${Date.now()}`,C={id:j,label:"New Choice",target:"",actions:[],requires:[]};E(p,q=>{const H=q.module.menus.some(K=>K.id===x),X=q.module.nodes.some(K=>K.id===x);return{...q,isDirty:!0,module:{...q.module,menus:H?q.module.menus.map(K=>K.id===x?{...K,options:[...K.options,j]}:K):q.module.menus,nodes:X?q.module.nodes.map(K=>K.id===x?{...K,options:[...K.options,j]}:K):q.module.nodes,options:[...q.module.options,C]}}})},[p,Fe,E]),$i=A.useCallback(x=>{const j=it.getState(),C=j.activeGuidanceId,q=j.guidanceDocs.find(Ae=>Ae.id===C);if(!q)return;const H=Gt(q.module,x),X=Ut(q.module,x);if(!H&&!X)return;const K=H?.requires[0]??X?.requires[0]??Ze[0]??"new_condition";qt({mode:"guidance",kind:"condition",nodeId:x}),Rt(K),dt("")},[Ze]),il=A.useCallback(x=>{const j=it.getState(),C=j.activeGuidanceId,q=j.guidanceDocs.find(G=>G.id===C);if(!q)return;const H=Gt(q.module,x),X=Ut(q.module,x),K=H?H.options:X?X.options:[];if(!K.length)return;const Ae=K.map(G=>{const Y=an(q.module,G);if(!Y)return null;const P=(Y.label||Y.id||"").trim()||Y.id;return{id:Y.id,label:P}}).filter(G=>!!G);if(!Ae.length)return;const he=an(q.module,Ae[0].id)?.actions[0]??Yt[0]??"new_action";qt({mode:"guidance",kind:"action",nodeId:x,optionTargets:Ae}),dt(Ae[0].id),Rt(he)},[Yt]),Di=A.useCallback((x,j)=>{Fe(),E(p,C=>({...C,isDirty:!0,module:{...C.module,menus:C.module.menus.map(q=>q.id===x?{...q,options:j}:q),nodes:C.module.nodes.map(q=>q.id===x?{...q,options:j}:q)}}))},[p,Fe,E]),pi=A.useCallback((x,j)=>{lt(),R(S,C=>({...C,isDirty:!0,narrative:{...C.narrative,nodes:C.narrative.nodes.map(q=>q.id===x?{...q,options:j}:q)}}))},[S,lt,R]),Yi=A.useCallback(x=>{if(!ee||!x.source||!x.target)return;const j=ee.module;if($n(x.source)){const X=Ia(x.source);if(!X)return;const K=la(j,x.target);if(K!=="menu"&&K!=="node"||!x.targetHandle||!x.targetHandle.startsWith("act:"))return;if(x.targetHandle==="act:node"){if(K==="menu"){const Y=Gt(j,x.target);if(!Y)return;yn(Y.id,{itemAction:X});return}if(K!=="node")return;const G=Ut(j,x.target);if(!G)return;un(G.id,{actions:oa(G.actions,X)});return}const Ae=x.targetHandle.slice(4),he=jt(Ae);if(he!==null){const G=Gt(j,x.target),Y=Ut(j,x.target),P=G?G.options[he]:Y?Y.options[he]:void 0;if(!P)return;Cn(P,{actions:oa(an(j,P)?.actions??[],X)})}return}if(Bn(x.source)){const X=Za(x.source);if(!X)return;const K=la(j,x.target);if(K!=="menu"&&K!=="node"||!x.targetHandle)return;if(x.targetHandle==="cond:node"){if(K==="menu"){const Y=Gt(j,x.target);if(!Y)return;yn(Y.id,{requires:di(Y.requires,X)});return}const G=Ut(j,x.target);if(!G)return;un(G.id,{requires:di(G.requires,X)});return}const Ae=x.targetHandle.startsWith("cond:")?x.targetHandle.slice(5):x.targetHandle,he=jt(Ae);if(he!==null){const G=Gt(j,x.target),Y=Ut(j,x.target),P=G?G.options[he]:Y?Y.options[he]:void 0;if(!P)return;const ye=an(j,P);if(!ye)return;Cn(ye.id,{requires:di(ye.requires,X)});return}return}const C=la(j,x.source),q=la(j,x.target),H=jt(x.sourceHandle);if(!(!C||!q)){if(C==="menu"){const X=Gt(j,x.source);if(!X)return;if((q==="menu"||q==="node")&&H!==null){const Ae=X.options[H];if(!Ae)return;Cn(Ae,{target:x.target});return}if(q!=="option")return;let K=X.options.slice();if(H!==null){for(;K.length<=H;)K.push(x.target);K[H]=x.target}else K=Array.from(new Set([...X.options,x.target]));yn(X.id,{options:K});return}if(C==="node"){const X=Ut(j,x.source);if(!X)return;if(x.sourceHandle==="next"){if(q==="menu"||q==="node"){un(X.id,{next:x.target});return}return}if(q==="option"){let K=X.options.slice();if(H!==null){for(;K.length<=H;)K.push(x.target);K[H]=x.target}else K=Array.from(new Set([...X.options,x.target]));un(X.id,{options:K});return}if((q==="menu"||q==="node")&&H!==null){const K=X.options[H];if(!K)return;Cn(K,{target:x.target});return}if(q==="menu"||q==="node"){un(X.id,{next:x.target});return}}if(C==="option"){if((x.sourceHandle==="target"||!x.sourceHandle)&&(q==="menu"||q==="node")){Cn(x.source,{target:x.target});return}return}}},[ee,yn,un,Cn]),Mi=A.useCallback((x,j,C,q="source")=>{if(!ee)return;const H=ee.module;if(q==="target"&&j){if(j.startsWith("cond:")){const G=la(H,x);if(G!=="menu"&&G!=="node")return;let Y=Ze[0]??"new_condition";if(j==="cond:node"){const P=Gt(H,x),ye=Ut(H,x);Y=P?.requires[0]??ye?.requires[0]??Y}else{const P=j.slice(5),ye=jt(P),Te=ye===null?void 0:G==="menu"?Gt(H,x)?.options[ye]:Ut(H,x)?.options[ye];Y=(Te?an(H,Te):void 0)?.requires[0]??Y}qt({mode:"guidance",kind:"condition",nodeId:x}),Rt(Y),dt(""),ie({mode:"guidance",kind:"condition",nodeId:x,targetHandle:j,position:C});return}if(j.startsWith("act:")){const G=la(H,x);if(G!=="menu"&&G!=="node")return;let Y=Yt[0]??"new_action";if(j==="act:node")G==="menu"?Y=Gt(H,x)?.itemAction?.trim()||Y:Y=Ut(H,x)?.actions[0]??Y;else{const P=j.slice(4),ye=jt(P);if(ye===null)return;const Te=G==="menu"?Gt(H,x)?.options[ye]:Ut(H,x)?.options[ye];Y=(Te?an(H,Te):void 0)?.actions[0]??Y}qt({mode:"guidance",kind:"action",nodeId:x}),Rt(Y),dt(""),ie({mode:"guidance",kind:"action",nodeId:x,targetHandle:j,position:C})}return}const X=la(H,x);if(X!=="menu"&&X!=="node")return;const K=jt(j);if(K===null)return;if(X==="menu"){const G=Gt(H,x);if(!G||!G.options[K])return}if(X==="node"){const G=Ut(H,x);if(!G||!G.options[K])return}const Ae=new Set([...H.menus.map(G=>G.id),...H.nodes.map(G=>G.id),...H.options.map(G=>G.id)]),he=Ri("node.new_dialogue",Ae);Fe(),E(p,G=>{let Y=G.module.nodes,P=G.module.options;if(X==="menu"){const Te=Gt(G.module,x)?.options[K];if(!Te)return G;P=P.map(Ne=>Ne.id===Te?{...Ne,target:he}:Ne)}if(X==="node"){const Te=Ut(G.module,x)?.options[K];if(!Te)return G;P=P.map(Ne=>Ne.id===Te?{...Ne,target:he}:Ne)}return{...G,isDirty:!0,module:{...G.module,nodes:Y.concat([{id:he,color:yo(),speaker:"sensei",text:"new dialogue node",options:[],requires:[],next:void 0,actions:[]}]),options:P}}}),Q({...mt,[he]:C}),ce({...An,[he]:C}),U(he)},[ee,p,Yt,Ze,mt,An,Fe,dt,qt,Rt,ce,Q,ie,U,E]),Jt=A.useCallback(x=>{if(!ee||x.length===0)return;Fe();const j=new Map,C=[],q=[];x.forEach(H=>{if(!(!H.source||!H.target)){if($n(H.source)&&H.targetHandle?.startsWith("act:")){const X=Ia(H.source);X&&q.push({action:X,targetId:H.target,targetHandle:H.targetHandle});return}if(Bn(H.source)&&H.targetHandle?.startsWith("cond:")){const X=Za(H.source);X&&C.push({condition:X,targetId:H.target,targetHandle:H.targetHandle});return}j.has(H.source)||j.set(H.source,new Set),j.get(H.source)?.add(`${H.sourceHandle??""}|${H.target}`)}}),E(p,H=>{let X=!1,K=H.module.menus,Ae=H.module.nodes,he=H.module.options.slice();const G=(Y,P,ye)=>{const Te=he.find(ze=>ze.id===Y);if(!Te?.target)return;const Ne=wi(Te.target,H.module)?.id;Ne&&(ye.has(`${ei(P)}|${Ne}`)||ye.has(`|${Ne}`))&&(he=he.map(ze=>ze.id===Te.id?{...ze,target:void 0}:ze),X=!0)};for(const Y of K){const P=j.get(Y.id);P&&Y.options.forEach((ye,Te)=>G(ye,Te,P))}if(Ae=Ae.map(Y=>{const P=j.get(Y.id);if(!P)return Y;let ye=!1,Te=Y.next;const Ne=wi(Te,H.module)?.id;return(Te&&(P.has(`next|${Te}`)||P.has(`|${Te}`))||Te&&Ne&&(P.has(`next|${Ne}`)||P.has(`|${Ne}`)))&&(Te=void 0,ye=!0,X=!0),Y.options.forEach((ze,Ee)=>G(ze,Ee,P)),ye?{...Y,next:Te}:Y}),he=he.map(Y=>{const P=j.get(Y.id);return P&&Y.target&&(P.has(`target|${Y.target}`)||P.has(`|${Y.target}`)||wi(Y.target,H.module)?.id&&(P.has(`target|${wi(Y.target,H.module)?.id}`)||P.has(`|${wi(Y.target,H.module)?.id}`)))?(X=!0,{...Y,target:void 0}):Y}),C.length)for(const Y of C){if(Y.targetHandle==="cond:node"){K=K.map(Ee=>{if(Ee.id!==Y.targetId)return Ee;const Me=sc(Ee.requires,Y.condition);return Me.length===Ee.requires.length?Ee:(X=!0,{...Ee,requires:Me})}),Ae=Ae.map(Ee=>{if(Ee.id!==Y.targetId)return Ee;const Me=sc(Ee.requires,Y.condition);return Me.length===Ee.requires.length?Ee:(X=!0,{...Ee,requires:Me})});continue}const P=Y.targetHandle.startsWith("cond:")?Y.targetHandle.slice(5):Y.targetHandle,ye=jt(P);if(ye===null)continue;const Te=K.find(Ee=>Ee.id===Y.targetId),Ne=Ae.find(Ee=>Ee.id===Y.targetId),ze=Te?Te.options[ye]:Ne?Ne.options[ye]:void 0;ze&&(he=he.map(Ee=>{if(Ee.id!==ze)return Ee;const Me=sc(Ee.requires,Y.condition);return Me.length===Ee.requires.length?Ee:(X=!0,{...Ee,requires:Me})}))}if(q.length)for(const Y of q){if(Y.targetHandle==="act:node"){K=K.map(Ee=>{if(Ee.id!==Y.targetId)return Ee;const Me=(Ee.itemAction??"").trim();return!Me||Me!==Y.action.trim()?Ee:(X=!0,{...Ee,itemAction:""})}),Ae=Ae.map(Ee=>{if(Ee.id!==Y.targetId)return Ee;const Me=Qd(Ee.actions,Y.action);return Me.length===Ee.actions.length?Ee:(X=!0,{...Ee,actions:Me})});continue}const P=Y.targetHandle.startsWith("act:")?Y.targetHandle.slice(4):Y.targetHandle,ye=jt(P);if(ye===null)continue;const Te=K.find(Ee=>Ee.id===Y.targetId),Ne=Ae.find(Ee=>Ee.id===Y.targetId),ze=Te?Te.options[ye]:Ne?Ne.options[ye]:void 0;ze&&(he=he.map(Ee=>{if(Ee.id!==ze)return Ee;const Me=Qd(Ee.actions,Y.action);return Me.length===Ee.actions.length?Ee:(X=!0,{...Ee,actions:Me})}))}return X?{...H,isDirty:!0,module:{...H.module,menus:K,nodes:Ae,options:he}}:H})},[ee,p,Fe,E]),Tl=A.useCallback(x=>{if(!ee||!p||x.length===0)return;const j=new Set,C=new Set,q=new Set;for(const G of x){if(Bn(G.id)){const Y=Za(G.id)?.trim();Y&&(j.add(G.id),C.add(Y));continue}if($n(G.id)){const Y=Ia(G.id)?.trim();Y&&(j.add(G.id),q.add(Y))}}if(!j.size)return;Fe(),(C.size||q.size)&&E(p,G=>{let Y=!1;const P=G.module.menus.map(Ne=>{const ze=C.size?Ne.requires.filter(Me=>!C.has(Me.trim())):Ne.requires,Ee=q.size&&(Ne.itemAction??"").trim()&&q.has((Ne.itemAction??"").trim())?"":Ne.itemAction;return ze.length===Ne.requires.length&&(Ee??"")===(Ne.itemAction??"")?Ne:(Y=!0,{...Ne,requires:ze,itemAction:Ee})}),ye=G.module.nodes.map(Ne=>{const ze=C.size?Ne.requires.filter(Me=>!C.has(Me.trim())):Ne.requires,Ee=q.size?Ne.actions.filter(Me=>!q.has(Me.trim())):Ne.actions;return ze.length===Ne.requires.length&&Ee.length===Ne.actions.length?Ne:(Y=!0,{...Ne,requires:ze,actions:Ee})}),Te=G.module.options.map(Ne=>{const ze=C.size?Ne.requires.filter(Me=>!C.has(Me.trim())):Ne.requires,Ee=q.size?Ne.actions.filter(Me=>!q.has(Me.trim())):Ne.actions;return ze.length===Ne.requires.length&&Ee.length===Ne.actions.length?Ne:(Y=!0,{...Ne,requires:ze,actions:Ee})});return Y?{...G,isDirty:!0,module:{...G.module,menus:P,nodes:ye,options:Te}}:G});const H=Ve.getState();if(C.size){const G=H.extraGuidanceConditions[p]??[],Y=G.filter(P=>!C.has(P.trim()));Y.length!==G.length&&H.setExtraGuidanceConditions({...H.extraGuidanceConditions,[p]:Y})}if(q.size){const G=H.extraGuidanceActions[p]??[],Y=G.filter(P=>!q.has(P.trim()));Y.length!==G.length&&H.setExtraGuidanceActions({...H.extraGuidanceActions,[p]:Y})}const X={...H.guidancePositions},K={...H.guidanceAnchorPositions};let Ae=!1,he=!1;for(const G of j)X[G]&&(delete X[G],Ae=!0),K[G]&&(delete K[G],he=!0);Ae&&H.setGuidancePositions(X),he&&H.setGuidanceAnchorPositions(K)},[ee,p,Fe,E]),Dl=A.useCallback(()=>{},[]),vi=A.useCallback(x=>{x.preventDefault();const j=$p(x.dataTransfer.getData(uf));if(!j||j.kind!=="condition"&&j.kind!=="action")return;const C=Ve.getState(),H=it.getState().activeGuidanceId;if(H)if(j.kind==="condition"){const X=j.value.trim();if(!X)return;const K=Xa(X),Ae=C.extraGuidanceConditions[H]??[];Ae.includes(X)||C.setExtraGuidanceConditions({...C.extraGuidanceConditions,[H]:[...Ae,X]});const he=C.guidanceFlowInstance;if(he)try{const G=document.querySelector(".react-flow");if(G){const Y=G.getBoundingClientRect(),P=he.project({x:x.clientX-Y.left,y:x.clientY-Y.top});C.setGuidancePositions({...C.guidancePositions,[K]:P}),C.setGuidanceAnchorPositions({...C.guidanceAnchorPositions,[K]:P})}}catch{}}else{const X=j.value.trim();if(!X)return;const K=ra(X),Ae=C.extraGuidanceActions[H]??[];Ae.includes(X)||C.setExtraGuidanceActions({...C.extraGuidanceActions,[H]:[...Ae,X]});const he=C.guidanceFlowInstance;if(he)try{const G=document.querySelector(".react-flow");if(G){const Y=G.getBoundingClientRect(),P=he.project({x:x.clientX-Y.left,y:x.clientY-Y.top});C.setGuidancePositions({...C.guidancePositions,[K]:P}),C.setGuidanceAnchorPositions({...C.guidanceAnchorPositions,[K]:P})}}catch{}}},[]),yi=A.useCallback((x,j,C)=>{Fe();const q={...mt,...C??{},[j.id]:j.position};Q(q),ce({...An,...C??{},[j.id]:j.position})},[Fe,mt,An,Q,ce]),ko=A.useCallback((x,j)=>{R(S,C=>({...C,isDirty:!0,narrative:{...C.narrative,nodes:C.narrative.nodes.map(q=>q.id===x?{...q,text:j}:q)}}))},[S,R]),Ml=A.useCallback(x=>{if(!be)return;const j=ut(be.narrative,x);j&&Ht.getState().openQuickEdit({scope:"narrative-main",nodeId:x},j.text)},[be]),zl=A.useCallback((x,j)=>{if(!be)return;const C=jt(j);if(C===null)return;const H=ut(be.narrative,x)?.options[C];if(!H)return;const X=ut(be.narrative,H);X&&Ht.getState().openQuickEdit({scope:"narrative-choice",targetNodeId:H},X.text)},[be]),Vi=A.useCallback(x=>{if(!be)return;lt();const j=new Set(be.narrative.nodes.map(q=>q.id)),C=Ri("stage.1.user_reply",j);R(S,q=>({...q,isDirty:!0,narrative:{...q.narrative,nodes:q.narrative.nodes.map(H=>H.id!==x?H:{...H,options:[...H.options,C]}).concat([{id:C,speaker:"user",text:"new player response",options:[],requires:[],actions:[]}])}}))},[be,S,lt,R]),kl=A.useCallback(x=>{const j=it.getState(),C=j.activeNarrativeId,q=j.narrativeDocs.find(K=>K.id===C);if(!q)return;const H=ut(q.narrative,x);if(!H)return;const X=H.requires[0]??Ze[0]??"new_condition";qt({mode:"narrative",kind:"condition",nodeId:x}),Rt(X),dt("")},[Ze]),Ol=A.useCallback(x=>{const j=it.getState(),C=j.activeNarrativeId,q=j.narrativeDocs.find(K=>K.id===C);if(!q)return;const H=ut(q.narrative,x);if(!H)return;const X=H.actions[0]??Yt[0]??"new_action";qt({mode:"narrative",kind:"action",nodeId:x}),Rt(X),dt("")},[Yt]),xi=A.useCallback((x,j)=>{const C=(j??"").trim().toLowerCase(),q=Wn.findIndex(X=>X.toLowerCase()===C),H=q>=0?Wn[(q+1)%Wn.length]:yo();bt(x,{color:H})},[bt]),kn=A.useCallback((x,j)=>{if(!ee)return;const C=(j??"").trim().toLowerCase(),q=Wn.findIndex(K=>K.toLowerCase()===C),H=q>=0?Wn[(q+1)%Wn.length]:yo(),X=la(ee.module,x);if(X==="menu"){yn(x,{color:H});return}X==="node"&&un(x,{color:H})},[ee,yn,un]),Qs=A.useCallback(x=>{if(!be||!x.source||!x.target)return;const j=be.narrative;if(Bn(x.source)){const X=Za(x.source);if(!X)return;const K=ut(j,x.target);if(!K||!x.targetHandle)return;if(x.targetHandle==="cond:node"){bt(K.id,{requires:di(K.requires,X)});return}if(x.targetHandle==="cond:next"){if(!K.next)return;const G=ut(j,K.next);if(!G)return;bt(G.id,{requires:di(G.requires,X)});return}const Ae=x.targetHandle.startsWith("cond:")?x.targetHandle.slice(5):x.targetHandle,he=jt(Ae);if(he!==null){const G=K.options[he];if(!G)return;const Y=ut(j,G);if(!Y)return;bt(Y.id,{requires:di(Y.requires,X)});return}return}if($n(x.source)){const X=Ia(x.source);if(!X)return;const K=ut(j,x.target);if(!K||!x.targetHandle)return;if(x.targetHandle==="act:node"){bt(K.id,{actions:oa(K.actions,X)});return}const Ae=x.targetHandle.startsWith("act:")?x.targetHandle.slice(4):x.targetHandle,he=jt(Ae);if(he===null)return;const G=K.options[he];if(!G)return;const Y=ut(j,G);if(!Y)return;bt(Y.id,{actions:oa(Y.actions,X)});return}const C=ut(j,x.source),q=ut(j,x.target),H=jt(x.sourceHandle);!C||!q||(lt(),R(S,X=>({...X,isDirty:!0,narrative:{...X.narrative,nodes:X.narrative.nodes.map(K=>{if(K.id!==C.id)return K;if(x.sourceHandle==="next")return{...K,next:q.id};if(H!==null){const Ae=K.options[H];if(Ae){const G=ut(X.narrative,Ae);if(G&&G.speaker==="user"&&!G.quest&&!G.completion)return K}const he=K.options.slice();for(;he.length<=H;)he.push(q.id);return he[H]=q.id,{...K,options:he}}return K.options.length?K.options.includes(q.id)?K:{...K,options:[...K.options,q.id]}:K.next&&K.next!==q.id?{...K,next:void 0,options:[K.next,q.id]}:{...K,next:q.id}}).map(K=>{if(H===null)return K;const Ae=C.options[H];return K.id!==Ae||K.speaker!=="user"||K.quest||K.completion?K:{...K,next:q.id}})}})))},[be,S,lt,R,bt]),Yc=A.useCallback((x,j,C,q="source")=>{if(!be)return;const H=ut(be.narrative,x);if(!H)return;if(q==="target"&&j){if(j.startsWith("cond:")){let G=Ze[0]??"new_condition";if(j==="cond:node")G=H.requires[0]??G;else if(j==="cond:next")G=(H.next?ut(be.narrative,H.next):void 0)?.requires[0]??G;else{const Y=j.slice(5),P=jt(Y),ye=P===null?void 0:H.options[P];G=(ye?ut(be.narrative,ye):void 0)?.requires[0]??G}qt({mode:"narrative",kind:"condition",nodeId:x}),Rt(G),dt(""),ie({mode:"narrative",kind:"condition",nodeId:x,targetHandle:j,position:C});return}if(j.startsWith("act:")){let G=Yt[0]??"new_action";if(j==="act:node")G=H.actions[0]??G;else{const Y=j.slice(4),P=jt(Y),ye=P===null?void 0:H.options[P];G=(ye?ut(be.narrative,ye):void 0)?.actions[0]??G}qt({mode:"narrative",kind:"action",nodeId:x}),Rt(G),dt(""),ie({mode:"narrative",kind:"action",nodeId:x,targetHandle:j,position:C});return}}const X=jt(j);if(X===null||!H.options[X])return;const K=new Set(be.narrative.nodes.map(G=>G.id)),Ae=Ec(H.id)??1,he=Ri(`stage.${Ae}.new_dialogue`,K);lt(),R(S,G=>({...G,isDirty:!0,narrative:{...G.narrative,nodes:G.narrative.nodes.map(Y=>{if(Y.id!==x)return Y;const P=Y.options[X];if(!P)return Y;const ye=ut(G.narrative,P);if(ye&&ye.speaker==="user"&&!ye.quest&&!ye.completion)return Y;const Te=Y.options.slice();for(;Te.length<=X;)Te.push(he);return Te[X]=he,{...Y,options:Te}}).map(Y=>{const ye=ut(G.narrative,x)?.options[X];return!ye||Y.id!==ye||Y.speaker!=="user"||Y.quest||Y.completion?Y:{...Y,next:he}}).concat([{id:he,speaker:"sensei",color:yo(),text:"new dialogue node",options:[],requires:[],actions:[]}])}})),F({...ni,[he]:C}),ue({...Bi,[he]:C}),w(he)},[be,S,Yt,Ze,ni,Bi,lt,dt,qt,Rt,ue,F,ie,w,R]),Oo=A.useCallback(x=>{if(!be||x.length===0)return;lt();const j=new Map,C=[],q=[];x.forEach(H=>{if(!(!H.source||!H.target)){if(Bn(H.source)&&H.targetHandle?.startsWith("cond:")){const X=Za(H.source);X&&C.push({condition:X,targetId:H.target,targetHandle:H.targetHandle});return}if($n(H.source)&&H.targetHandle?.startsWith("act:")){const X=Ia(H.source);X&&q.push({action:X,targetId:H.target,targetHandle:H.targetHandle});return}j.has(H.source)||j.set(H.source,new Set),j.get(H.source)?.add(`${H.sourceHandle??""}|${H.target}`)}}),R(S,H=>{let X=!1;const K=new Set;let Ae=H.narrative.nodes.map(he=>{const G=j.get(he.id);if(!G)return he;let Y=!1,P=he.next,ye=he.options;const Te=el(H.narrative,P,Qe);P&&Te&&(G.has(`next|${Te}`)||G.has(`|${Te}`))&&(P=void 0,Y=!0,X=!0);for(const Ne of G){const[ze,Ee]=Ne.split("|"),Me=jt(ze);if(Me===null)continue;const Ke=ye[Me];if(!Ke)continue;const St=ut(H.narrative,Ke);if(!St||St.speaker!=="user"||St.quest||St.completion)continue;const Ft=el(H.narrative,Ke,Qe);Ee&&Ft&&Ee!==Ft||K.add(Ke)}return Y?{...he,next:P,options:ye}:he});if(K.size&&(Ae=Ae.map(he=>!K.has(he.id)||!he.next?he:(X=!0,{...he,next:void 0}))),C.length){const he=(G,Y)=>{Ae=Ae.map(P=>{if(P.id!==G)return P;const ye=sc(P.requires,Y);return ye.length===P.requires.length?P:(X=!0,{...P,requires:ye})})};for(const G of C){const Y=Ae.find(Ne=>Ne.id===G.targetId);if(!Y)continue;if(G.targetHandle==="cond:node"){he(Y.id,G.condition);continue}if(G.targetHandle==="cond:next"){Y.next&&he(Y.next,G.condition);continue}const P=G.targetHandle.startsWith("cond:")?G.targetHandle.slice(5):G.targetHandle,ye=jt(P);if(ye===null)continue;const Te=Y.options[ye];Te&&he(Te,G.condition)}}if(q.length){const he=(G,Y)=>{Ae=Ae.map(P=>{if(P.id!==G)return P;const ye=Qd(P.actions,Y);return ye.length===P.actions.length?P:(X=!0,{...P,actions:ye})})};for(const G of q){const Y=Ae.find(Ne=>Ne.id===G.targetId);if(!Y)continue;if(G.targetHandle==="act:node"){he(G.targetId,G.action);continue}const P=G.targetHandle.startsWith("act:")?G.targetHandle.slice(4):G.targetHandle,ye=jt(P);if(ye===null)continue;const Te=Y.options[ye];Te&&he(Te,G.action)}}return X?{...H,isDirty:!0,narrative:{...H.narrative,nodes:Ae}}:H})},[be,S,Qe,lt,R]),Ks=A.useCallback(x=>{if(!be||!S||x.length===0)return;const j=new Set,C=new Set,q=new Set,H=new Set;for(const Ne of x){if(Bn(Ne.id)){const ze=Za(Ne.id)?.trim();if(!ze)continue;j.add(Ne.id),C.add(ze);continue}if($n(Ne.id)){const ze=Ia(Ne.id)?.trim();if(!ze)continue;j.add(Ne.id),q.add(ze);continue}j.add(Ne.id),H.add(Ne.id)}if(!j.size)return;lt(),R(S,Ne=>{let ze=!1,Ee=Ne.narrative.nodes;if(H.size){const Me=Ee.filter(Ke=>!H.has(Ke.id));Me.length!==Ee.length&&(Ee=Me,ze=!0)}return Ee=Ee.map(Me=>{let Ke=!1,St=Me.next,Ft=Me.options;if(St&&H.has(St)&&(St=void 0,Ke=!0),Ft.length){const Sa=Ft.filter(Bo=>!H.has(Bo));Sa.length!==Ft.length&&(Ft=Sa,Ke=!0)}const qn=Me.requires.filter(Sa=>!C.has(Sa.trim())),ir=Me.actions.filter(Sa=>!q.has(Sa.trim()));return qn.length!==Me.requires.length&&(Ke=!0),ir.length!==Me.actions.length&&(Ke=!0),Ke?(ze=!0,{...Me,next:St,options:Ft,requires:qn,actions:ir}):Me}),ze?{...Ne,isDirty:!0,narrative:{...Ne.narrative,nodes:Ee}}:Ne});const X=Ve.getState(),K=X.extraNarrativeConditions[S]??[],Ae=K.filter(Ne=>!C.has(Ne.trim()));Ae.length!==K.length&&X.setExtraNarrativeConditions({...X.extraNarrativeConditions,[S]:Ae});const he=X.extraNarrativeActions[S]??[],G=he.filter(Ne=>!q.has(Ne.trim()));G.length!==he.length&&X.setExtraNarrativeActions({...X.extraNarrativeActions,[S]:G});const Y={...X.narrativePositions},P={...X.narrativeAnchorPositions};let ye=!1,Te=!1;for(const Ne of j)Y[Ne]&&(delete Y[Ne],ye=!0),P[Ne]&&(delete P[Ne],Te=!0);ye&&X.setNarrativePositions(Y),Te&&X.setNarrativeAnchorPositions(P)},[be,S,lt,R]),ql=A.useCallback(()=>{},[]),Vc=A.useCallback(x=>{x.preventDefault();const j=$p(x.dataTransfer.getData(uf));if(!j||j.kind!=="condition"&&j.kind!=="action")return;const C=Ve.getState(),H=it.getState().activeNarrativeId;if(!H)return;const X=j.value.trim();if(!X)return;const K=j.kind==="condition"?Xa(X):ra(X);if(j.kind==="condition"){const he=C.extraNarrativeConditions[H]??[];he.includes(X)||C.setExtraNarrativeConditions({...C.extraNarrativeConditions,[H]:[...he,X]})}else{const he=C.extraNarrativeActions[H]??[];he.includes(X)||C.setExtraNarrativeActions({...C.extraNarrativeActions,[H]:[...he,X]})}const Ae=C.narrativeFlowInstance;if(Ae)try{const he=document.querySelector(".react-flow");if(he){const G=he.getBoundingClientRect(),Y=Ae.project({x:x.clientX-G.left,y:x.clientY-G.top});C.setNarrativePositions({...C.narrativePositions,[K]:Y}),C.setNarrativeAnchorPositions({...C.narrativeAnchorPositions,[K]:Y})}}catch{}},[]),On=A.useCallback((x,j,C,q)=>{lt();const H={...ni,...q??{},[j.id]:j.position};F(H),ue({...Bi,...q??{},[j.id]:j.position})},[lt,ni,Bi,F,ue]),qo=A.useCallback(()=>{a==="guidance"?(Q({}),ce({})):(F({}),ue({}))},[a,Q,ce,F,ue]),Js=A.useCallback(()=>{if(a!=="narrative"||!be)return;const x=new Set(be.narrative.nodes.map(H=>H.id)),j=be.narrative.nodes.map(H=>Ec(H.id)).filter(H=>H!==null),C=(j.length?Math.max(...j):0)+1,q=Ri(`stage.${C}.intro`,x);lt(),R(S,H=>({...H,isDirty:!0,narrative:{...H.narrative,nodes:[...H.narrative.nodes,{id:q,speaker:"sensei",color:yo(),text:`stage ${C} begins.`,options:[],requires:[],actions:[]}]}})),w(q),J("narrative",C)},[a,be,S,lt,w,J,R]),Ro=A.useCallback(()=>{if(a==="guidance"){if(!ee)return;Fe();const x=new Set([...ee.module.menus.map(C=>C.id),...ee.module.nodes.map(C=>C.id),...ee.module.options.map(C=>C.id)]),j=Ri("node.new_dialogue",x);E(p,C=>({...C,isDirty:!0,module:{...C.module,nodes:[...C.module.nodes,{id:j,speaker:"sensei",text:"new dialogue node",options:[],requires:[],next:void 0,actions:[]}]}})),U(j)}else{if(!be)return;lt();const x=new Set(be.narrative.nodes.map(C=>C.id)),j=Ri("stage.1.new_dialogue",x);R(S,C=>({...C,isDirty:!0,narrative:{...C.narrative,nodes:[...C.narrative.nodes,{id:j,speaker:"sensei",color:yo(),text:"new dialogue node",options:[],requires:[],actions:[]}]}})),w(j)}},[a,ee,p,be,S,Fe,lt,E,R,U,w]),ya=A.useCallback(()=>{if(a==="guidance"){if(!M)return;va(M)}else{if(!O)return;Vi(O)}},[a,M,O,va,Vi]),Fs=A.useCallback(()=>{Ht.getState().openConditionEdit({mode:a,value:""})},[a]),Ws=A.useCallback(()=>{if(a==="guidance"){const he=new Set(f.map(Ee=>Ee.id)),G=Ri("new_guidance",he),Y=window.prompt("New guidance module id:",G);if(Y===null)return;const P=Yp(Y)||G,ye=Ri(P,he),Te=ye.split("_").map(Ee=>Ee&&Ee[0].toUpperCase()+Ee.slice(1)).join(" "),Ne=dA(ye,Te||"New Guidance"),ze={id:ye,path:`modules/${ye}/module.txt`,module:Ne,diagnostics:[],isDirty:!0};it.getState().setGuidanceDocs([...f,ze]),m(ye),U("menu.guidance.root"),o("guidance");return}const x=new Set(d.map(he=>he.id)),j=Ri("new_narrative",x),C=window.prompt("New narrative file id:",j);if(C===null)return;const q=Yp(C)||j,H=Ri(q,x),X=H.split("_").map(he=>he&&he[0].toUpperCase()+he.slice(1)).join(" "),K=fA(H,X||"New Narrative"),Ae={id:H,path:`narratives/${H}.txt`,narrative:K,diagnostics:[],isDirty:!0};it.getState().setNarrativeDocs([...d,Ae]),y(H),w("stage.1.intro"),o("narrative")},[a,f,d,m,y,U,w,o]),xa=A.useCallback(async()=>{if(It.getState().mode==="guidance"){const j=it.getState(),C=j.guidanceDocs.find(X=>X.id===j.activeGuidanceId);if(!C)return;const q=`${C.id||"module"}.txt`,H=Xp(C.module);try{await Ip(q,H)}catch{}}else{const j=it.getState(),C=j.narrativeDocs.find(X=>X.id===j.activeNarrativeId);if(!C)return;const q=`${C.id||"narrative"}.txt`,H=Zp(C.narrative);try{await Ip(q,H)}catch{}}},[]),Lc=A.useCallback(()=>{if(a==="guidance"&&ee){const x=`${ee.id||"module"}.txt`,j=Xp(ee.module);ff(x,j)}else if(a==="narrative"&&be){const x=`${be.id||"narrative"}.txt`,j=Zp(be.narrative);ff(x,j)}},[a,ee,be]),Ps=A.useCallback(()=>{c(!0)},[c]),er=A.useCallback(async x=>{const j=Array.from(x.target.files??[]);if(!j.length)return;const C=Qv(j[0].webkitRelativePath||j[0].name).split("/")[0].trim(),q=[],H=[],X=[];for(const K of j){const Ae=c1(K.webkitRelativePath||K.name);if(Ae.startsWith("modules/")&&Ae.endsWith("/module.txt")){const he=await K.text(),G=a1(he),Y=Ae.split("/")[1]||"module",P=G.module.meta.id||Y;q.push({id:P,path:Ae,module:{...G.module,meta:{...G.module.meta,id:P}},diagnostics:G.diagnostics,isDirty:!1,sourceText:he})}if(Ae.startsWith("narratives/")&&Ae.endsWith(".txt")){const he=await K.text(),G=r1(he),P=(Ae.split("/").pop()??"narrative").replace(/\.txt$/i,""),ye=G.narrative.meta.id||P;H.push({id:ye,path:Ae,narrative:{...G.narrative,meta:{...G.narrative.meta,id:ye}},diagnostics:G.diagnostics,isDirty:!1,sourceText:he})}if(Ae.startsWith("texts/")&&Ae.endsWith(".txt")){const he=Ae.split("/").pop()??"";he&&X.push(`@${he.replace(/\.txt$/i,"")}`)}}if(q.length||H.length){if(q.length){h(q);const K=q[0];m(K.id);const Ae=Rs(K.module)[0];U(Ae?No(Ae):"")}if(H.length){g(H);const K=H[0];y(K.id),w(K.narrative.nodes[0]?.id??"")}s(C||"project"),X.length?T(Array.from(new Set(X))):T(Bp)}x.target.value=""},[h,g,m,y,U,w,s,T]),jo=A.useMemo(()=>{const x=(P,ye)=>V[P]??ye,j=Ze.map(P=>{const ye=`condition:${P}`,Te=x(ye,P);return{id:ye,kind:"condition",label:P,value:Te,hint:xo("condition",Te)}}),C="@custom",q=`token:${C}`,H=x(q,C),X={id:"tokens",title:"Tokens",tone:"token",items:[{id:q,kind:"token",label:C,value:H,hint:xo("token",H)}]},Ae=Array.from(new Set([...D,...sA,...rA])).sort((P,ye)=>P.localeCompare(ye)).map(P=>{const ye=`variable:${P}`,Te=x(ye,P);return{id:ye,kind:"variable",label:P,value:Te,hint:xo("variable",Te)}}),he=lA.map(P=>{const ye=`source:${P}`,Te=x(ye,P);return{id:ye,kind:"source",label:P,value:Te,hint:xo("source",Te)}}),G=Yt.map(P=>{const ye=`action:${P}`,Te=x(ye,P);return{id:ye,kind:"action",label:P,value:Te,hint:xo("action",Te)}});return[{id:"conditions",title:"Conditions",tone:"condition",items:j},{id:"variables",title:"Variables",tone:"variable",items:Ae},{id:"sources",title:"List Sources",tone:"source",items:he},{id:"actions",title:"Actions",tone:"action",items:G},X].filter(P=>P.items.length>0)},[Yt,Ze,V,D]),Xc=A.useMemo(()=>{if(!qe)return"";switch(qe.scope){case"guidance-main":return`Edit ${qe.kind} text`;case"guidance-choice":return"Edit choice text";case"narrative-main":return"Edit dialogue text";case"narrative-choice":return"Edit player response text";default:return"Edit text"}},[qe]),Zc=A.useMemo(()=>a==="guidance"&&Xe?Xe.kind==="option"?Xe.data.label:Xe.data.text:a==="narrative"&&Tt?Tt.text:"",[a,Xe,Tt]),Rl=A.useMemo(()=>{if(a==="guidance"&&Xe&&ee){if(Xe.kind==="menu")return Xe.data.options.map(x=>_c(ee.module,x));if(Xe.kind==="node")return Xe.data.options.map(x=>_c(ee.module,x))}return a==="narrative"&&Tt&&be?Tt.options.map(x=>wc(be.narrative,x)):[]},[ee,be,a,Xe,Tt]),bi=A.useCallback(()=>{if(qe){if(qe.scope==="guidance-main"){Fe();const{kind:x,nodeId:j}=qe;E(p,C=>({...C,isDirty:!0,module:{...C.module,menus:x==="menu"?C.module.menus.map(q=>q.id===j?{...q,text:Oe}:q):C.module.menus,nodes:x==="node"?C.module.nodes.map(q=>q.id===j?{...q,text:Oe}:q):C.module.nodes}})),at();return}if(qe.scope==="guidance-choice"){Fe();const{sourceId:x,optionIndex:j}=qe;E(p,C=>{const q=Gt(C.module,x),H=Ut(C.module,x),X=q?q.options[j]:H?H.options[j]:void 0;return X?{...C,isDirty:!0,module:{...C.module,options:C.module.options.map(K=>K.id===X?{...K,label:Oe}:K)}}:C}),at();return}if(qe.scope==="narrative-main"){lt();const{nodeId:x}=qe;R(S,j=>({...j,isDirty:!0,narrative:{...j.narrative,nodes:j.narrative.nodes.map(C=>C.id===x?{...C,text:Oe}:C)}})),at();return}if(qe.scope==="narrative-choice"){lt();const{targetNodeId:x}=qe;R(S,j=>({...j,isDirty:!0,narrative:{...j.narrative,nodes:j.narrative.nodes.map(C=>C.id===x?{...C,text:Oe}:C)}})),at()}}},[p,S,at,Fe,lt,qe,Oe,E,R]),Ho=A.useCallback(()=>{if(!Pe)return;const x=Pe.value.trim(),j=_t.trim();if(!j)return;if(x===j){et();return}const C=Xa(x),q=Xa(j);if(Pe.mode==="guidance"&&p){Fe(),E(p,G=>{let Y=!1;const P=G.module.menus.map(Ne=>{const ze=ho(Ne.requires,x,j);return ze.changed?(Y=!0,{...Ne,requires:ze.next}):Ne}),ye=G.module.nodes.map(Ne=>{const ze=ho(Ne.requires,x,j);return ze.changed?(Y=!0,{...Ne,requires:ze.next}):Ne}),Te=G.module.options.map(Ne=>{const ze=ho(Ne.requires,x,j);return ze.changed?(Y=!0,{...Ne,requires:ze.next}):Ne});return Y?{...G,isDirty:!0,module:{...G.module,menus:P,nodes:ye,options:Te}}:G});const H=Ve.getState(),X=H.extraGuidanceConditions[p]??[],K=ho(X,x,j),Ae=K.next.includes(j)?K.next:[...K.next,j];H.setExtraGuidanceConditions({...H.extraGuidanceConditions,[p]:Ae});const he=H.guidancePositions;if(he[C]){const G=he[C],Y={...he};delete Y[C],Y[q]||(Y[q]=G),H.setGuidancePositions(Y)}}if(Pe.mode==="narrative"&&S){lt(),R(S,G=>{let Y=!1;const P=G.narrative.nodes.map(ye=>{const Te=ho(ye.requires,x,j);return Te.changed?(Y=!0,{...ye,requires:Te.next}):ye});return Y?{...G,isDirty:!0,narrative:{...G.narrative,nodes:P}}:G});const H=Ve.getState(),X=H.extraNarrativeConditions[S]??[],K=ho(X,x,j),Ae=K.next.includes(j)?K.next:[...K.next,j];H.setExtraNarrativeConditions({...H.extraNarrativeConditions,[S]:Ae});const he=H.narrativePositions;if(he[C]){const G=he[C],Y={...he};delete Y[C],Y[q]||(Y[q]=G),H.setNarrativePositions(Y)}}et()},[p,S,et,Pe,_t,Fe,lt,E,R]),Go=A.useCallback(()=>{if(!pt)return;const x=pt.value.trim(),j=We.trim();if(!j)return;if(x===j){Et();return}const C=ra(x),q=ra(j);if(pt.mode==="guidance"&&p){Fe(),E(p,he=>{let G=!1;const Y=he.module.options.map(P=>{const ye=rc(P.actions,x,j);return ye.changed?(G=!0,{...P,actions:ye.next}):P});return G?{...he,isDirty:!0,module:{...he.module,options:Y}}:he});const H=Ve.getState(),X=H.extraGuidanceActions[p]??[],K=rc(X,x,j);K.changed&&H.setExtraGuidanceActions({...H.extraGuidanceActions,[p]:K.next});const Ae=H.guidancePositions;if(Ae[C]){const he=Ae[C],G={...Ae};delete G[C],G[q]||(G[q]=he),H.setGuidancePositions(G)}}if(pt.mode==="narrative"&&S){lt(),R(S,he=>{let G=!1;const Y=he.narrative.nodes.map(P=>{const ye=rc(P.actions,x,j);return ye.changed?(G=!0,{...P,actions:ye.next}):P});return G?{...he,isDirty:!0,narrative:{...he.narrative,nodes:Y}}:he});const H=Ve.getState(),X=H.extraNarrativeActions[S]??[],K=rc(X,x,j);K.changed&&H.setExtraNarrativeActions({...H.extraNarrativeActions,[S]:K.next});const Ae=H.narrativePositions;if(Ae[C]){const he=Ae[C],G={...Ae};delete G[C],G[q]||(G[q]=he),H.setNarrativePositions(G)}}Et()},[p,S,pt,We,Et,Fe,lt,E,R]),Vt=A.useCallback(()=>{qt(null),Rt(""),dt(""),ie(null)},[]),ba=A.useCallback(()=>{if(!tt)return;const x=cn.trim();if(!x)return;const j=it.getState(),C=Ve.getState(),q=De&&De.mode===tt.mode&&De.kind===tt.kind&&De.nodeId===tt.nodeId?De:null;if(q&&q.mode==="guidance"){const G=j.activeGuidanceId;if(!G)return;const Y=j.guidanceDocs.find(Me=>Me.id===G);if(!Y)return;const P=la(Y.module,q.nodeId);if(P!=="menu"&&P!=="node")return;let ye=!1;if(q.kind==="condition"){if(q.targetHandle==="cond:node")if(P==="menu"){const Me=Gt(Y.module,q.nodeId);if(Me){const Ke=di(Me.requires,x);yn(Me.id,{requires:Ke}),ye=!0}}else{const Me=Ut(Y.module,q.nodeId);if(Me){const Ke=di(Me.requires,x);un(Me.id,{requires:Ke}),ye=!0}}else{const Me=q.targetHandle.startsWith("cond:")?q.targetHandle.slice(5):q.targetHandle,Ke=jt(Me),St=Ke===null?void 0:P==="menu"?Gt(Y.module,q.nodeId)?.options[Ke]:Ut(Y.module,q.nodeId)?.options[Ke],Ft=St?an(Y.module,St):void 0;if(Ft){const qn=di(Ft.requires,x);Cn(Ft.id,{requires:qn}),ye=!0}}if(ye){const Me=C.extraGuidanceConditions[G]??[];Me.includes(x)||C.setExtraGuidanceConditions({...C.extraGuidanceConditions,[G]:[...Me,x]});const Ke=Xa(x);C.setGuidancePositions({...C.guidancePositions,[Ke]:q.position}),C.setGuidanceAnchorPositions({...C.guidanceAnchorPositions,[Ke]:q.position}),C.setSelectedGuidanceId(Ke)}Vt();return}if(q.targetHandle==="act:node"){if(P==="menu"){const St=Gt(Y.module,q.nodeId);if(!St){Vt();return}yn(St.id,{itemAction:x})}else if(P==="node"){const St=Ut(Y.module,q.nodeId);if(!St){Vt();return}const Ft=oa(St.actions,x);un(St.id,{actions:Ft})}else{Vt();return}const Me=C.extraGuidanceActions[G]??[];Me.includes(x)||C.setExtraGuidanceActions({...C.extraGuidanceActions,[G]:[...Me,x]});const Ke=ra(x);C.setGuidancePositions({...C.guidancePositions,[Ke]:q.position}),C.setGuidanceAnchorPositions({...C.guidanceAnchorPositions,[Ke]:q.position}),C.setSelectedGuidanceId(Ke),Vt();return}const Te=q.targetHandle.startsWith("act:")?q.targetHandle.slice(4):q.targetHandle,Ne=jt(Te),ze=Ne===null?void 0:P==="menu"?Gt(Y.module,q.nodeId)?.options[Ne]:Ut(Y.module,q.nodeId)?.options[Ne],Ee=ze?an(Y.module,ze):void 0;if(Ee){const Me=oa(Ee.actions,x);Cn(Ee.id,{actions:Me});const Ke=C.extraGuidanceActions[G]??[];Ke.includes(x)||C.setExtraGuidanceActions({...C.extraGuidanceActions,[G]:[...Ke,x]});const St=ra(x);C.setGuidancePositions({...C.guidancePositions,[St]:q.position}),C.setGuidanceAnchorPositions({...C.guidanceAnchorPositions,[St]:q.position}),C.setSelectedGuidanceId(St)}Vt();return}if(q&&q.mode==="narrative"){const G=j.activeNarrativeId;if(!G)return;const Y=j.narrativeDocs.find(ze=>ze.id===G);if(!Y)return;const P=ut(Y.narrative,q.nodeId);if(!P)return;const ye=ze=>{const Ee=ut(Y.narrative,ze);if(!Ee)return!1;const Me=di(Ee.requires,x);return bt(Ee.id,{requires:Me}),!0},Te=ze=>{const Ee=ut(Y.narrative,ze);if(!Ee)return!1;const Me=oa(Ee.actions,x);return bt(Ee.id,{actions:Me}),!0};let Ne=!1;if(q.kind==="condition"){if(q.targetHandle==="cond:node")Ne=ye(P.id);else if(q.targetHandle==="cond:next")Ne=P.next?ye(P.next):!1;else{const ze=q.targetHandle.startsWith("cond:")?q.targetHandle.slice(5):q.targetHandle,Ee=jt(ze),Me=Ee===null?void 0:P.options[Ee];Ne=Me?ye(Me):!1}if(Ne){const ze=C.extraNarrativeConditions[G]??[];ze.includes(x)||C.setExtraNarrativeConditions({...C.extraNarrativeConditions,[G]:[...ze,x]});const Ee=Xa(x);C.setNarrativePositions({...C.narrativePositions,[Ee]:q.position}),C.setNarrativeAnchorPositions({...C.narrativeAnchorPositions,[Ee]:q.position}),C.setSelectedNarrativeId(Ee)}Vt();return}if(q.targetHandle==="act:node")Ne=Te(P.id);else{const ze=q.targetHandle.startsWith("act:")?q.targetHandle.slice(4):q.targetHandle,Ee=jt(ze),Me=Ee===null?void 0:P.options[Ee];Ne=Me?Te(Me):!1}if(Ne){const ze=C.extraNarrativeActions[G]??[];ze.includes(x)||C.setExtraNarrativeActions({...C.extraNarrativeActions,[G]:[...ze,x]});const Ee=ra(x);C.setNarrativePositions({...C.narrativePositions,[Ee]:q.position}),C.setNarrativeAnchorPositions({...C.narrativeAnchorPositions,[Ee]:q.position}),C.setSelectedNarrativeId(Ee)}Vt();return}if(tt.mode==="guidance"){const G=j.activeGuidanceId;if(!G)return;const Y=j.guidanceDocs.find(ze=>ze.id===G);if(!Y)return;if(tt.kind==="condition"){const ze=Gt(Y.module,tt.nodeId),Ee=Ut(Y.module,tt.nodeId),Me=ze?.requires??Ee?.requires??null;if(!Me)return;const Ke=di(Me,x);if(Ke.length===Me.length){Vt();return}Fe(),E(G,Ft=>({...Ft,isDirty:!0,module:{...Ft.module,menus:Ft.module.menus.map(qn=>ze&&qn.id===ze.id?{...qn,requires:Ke}:qn),nodes:Ft.module.nodes.map(qn=>Ee&&qn.id===Ee.id?{...qn,requires:Ke}:qn)}}));const St=C.extraGuidanceConditions[G]??[];St.includes(x)||C.setExtraGuidanceConditions({...C.extraGuidanceConditions,[G]:[...St,x]}),Vt();return}const P=wn||tt.optionTargets?.[0]?.id;if(!P)return;const ye=an(Y.module,P);if(!ye)return;const Te=oa(ye.actions,x);if(Te.length===ye.actions.length){Vt();return}Fe(),E(G,ze=>({...ze,isDirty:!0,module:{...ze.module,options:ze.module.options.map(Ee=>Ee.id===P?{...Ee,actions:Te}:Ee)}}));const Ne=C.extraGuidanceActions[G]??[];Ne.includes(x)||C.setExtraGuidanceActions({...C.extraGuidanceActions,[G]:[...Ne,x]}),Vt();return}const H=j.activeNarrativeId;if(!H)return;const X=j.narrativeDocs.find(G=>G.id===H);if(!X)return;const K=ut(X.narrative,tt.nodeId);if(!K)return;if(tt.kind==="condition"){const G=di(K.requires,x);if(G.length===K.requires.length){Vt();return}lt(),R(H,P=>({...P,isDirty:!0,narrative:{...P.narrative,nodes:P.narrative.nodes.map(ye=>ye.id===K.id?{...ye,requires:G}:ye)}}));const Y=C.extraNarrativeConditions[H]??[];Y.includes(x)||C.setExtraNarrativeConditions({...C.extraNarrativeConditions,[H]:[...Y,x]}),Vt();return}const Ae=oa(K.actions,x);if(Ae.length===K.actions.length){Vt();return}lt(),R(H,G=>({...G,isDirty:!0,narrative:{...G.narrative,nodes:G.narrative.nodes.map(Y=>Y.id===K.id?{...Y,actions:Ae}:Y)}}));const he=C.extraNarrativeActions[H]??[];he.includes(x)||C.setExtraNarrativeActions({...C.extraNarrativeActions,[H]:[...he,x]}),Vt()},[wn,tt,cn,Vt,De,Fe,lt,yn,un,Cn,E,bt,R]),tr=A.useCallback(()=>{Qt&&(de({...V,[Qt.itemId]:vn}),En())},[En,Qt,vn,V,de]),Uo=A.useCallback(x=>{Ht.getState().openInventoryEdit(x.id,x.value)},[]),nr=A.useMemo(()=>a==="guidance"&&Xe?b.jsx(R2,{entity:Xe,allOptions:ft,onUpdateMenu:yn,onUpdateNode:un,onUpdateOption:Cn,onAddOption:tl,onRemoveOption:Ln,onReorderOptions:Kt}):a==="narrative"&&Tt?b.jsx(j2,{node:Tt,onUpdateNode:bt,onUpdateQuest:gi}):null,[a,Xe,Tt,ft,yn,un,Cn,tl,Ln,Kt,bt,gi]);return b.jsxs(g1,{onNew:Ws,onSave:xa,onExport:Lc,onTest:Ps,fileInputRef:n,inspectorChildren:nr,children:[b.jsxs("main",{className:"canvas canvas-narrative",children:[b.jsx(p1,{onAutoArrange:qo,onAddDialogue:Ro,onAddChoice:ya,onEditConditions:Fs,onAddStage:Js}),b.jsxs("div",{className:"flow-shell",children:[b.jsx(U2,{categories:jo,onEditItem:Uo}),a==="guidance"?b.jsx(O2,{onInlineTextChange:nl,onRequestMainEdit:Mo,onRequestOutputEdit:zo,onAddChoice:va,onAddCondition:$i,onAddAction:il,onReorderOutputs:Di,onCycleNodeColor:kn,onEdgeDropCreate:Mi,onConnect:Yi,onNodesDelete:Tl,onEdgesDelete:Jt,onEdgeClick:Dl,onInventoryDrop:vi,onNodeDragStop:yi}):null,a==="narrative"?b.jsx(q2,{onInlineTextChange:ko,onRequestMainEdit:Ml,onRequestOutputEdit:zl,onAddChoice:Vi,onAddCondition:kl,onAddAction:Ol,onReorderOutputs:pi,onCycleNodeColor:xi,onEdgeDropCreate:Yc,onConnect:Qs,onNodesDelete:Ks,onEdgesDelete:Oo,onEdgeClick:ql,onInventoryDrop:Vc,onNodeDragStop:On}):null]})]}),b.jsx("input",{ref:n,type:"file",style:{display:"none"},multiple:!0,onChange:er,webkitdirectory:"true",directory:"true"}),qe?b.jsx(B2,{title:Xc,value:Oe,onChange:Ye,onSave:bi,onCancel:at}):null,tt?b.jsx(eA,{kind:tt.kind,title:tt.kind==="condition"?"Add Condition":"Add Action",options:tt.kind==="condition"?Ze:Yt,value:cn,targetLabel:tt.kind==="action"&&tt.mode==="guidance"?"apply to choice":void 0,targetOptions:tt.kind==="action"&&tt.mode==="guidance"?tt.optionTargets:void 0,targetValue:tt.kind==="action"&&tt.mode==="guidance"?wn:void 0,onTargetChange:dt,onChange:Rt,onPick:Rt,onSave:ba,onCancel:Vt}):null,Pe?b.jsx($2,{mode:Pe.mode,value:_t,onChange:gt,onSave:Ho,onCancel:et}):null,pt?b.jsx(Y2,{mode:pt.mode,value:We,onChange:je,onSave:Go,onCancel:Et}):null,Qt?b.jsx(V2,{label:Qt.itemId,value:vn,onChange:Mn,onSave:tr,onCancel:En}):null,I?b.jsx(tA,{normalizeOnExport:wt,onToggleNormalize:zn,onClose:()=>se(!1)}):null,N?b.jsx(nA,{text:Zc,options:Rl,onClose:()=>L(!1)}):null,ne?b.jsx(iA,{mode:a,guidanceModule:ee?.module,narrative:be?.narrative,onClose:()=>c(!1)}):null]})}jb.createRoot(document.getElementById("root")).render(b.jsx(pe.StrictMode,{children:b.jsx(hA,{})}));
